{"version":3,"sources":["webpack:///../../src/ol/xml.js","webpack:///../../src/ol/extent.js","webpack:///../../src/ol/events.js","webpack:///../../../src/ol/format/xsd.js","webpack:///../../../src/ol/proj/epsg3857.js","webpack:///../../../src/ol/proj/epsg4326.js","webpack:///../../../src/ol/proj/projections.js","webpack:///../../src/ol/proj.js","webpack:///../../../src/ol/events/EventType.js","webpack:///../../../src/ol/geom/GeometryType.js","webpack:///../../../src/ol/render/canvas.js","webpack:///../../src/ol/math.js","webpack:///../../src/ol/array.js","webpack:///../../src/ol/util.js","webpack:///../../src/ol/TileState.js","webpack:///../../src/ol/asserts.js","webpack:///../../src/ol/obj.js","webpack:///../../src/ol/transform.js","webpack:///../../src/ol/functions.js","webpack:///../../src/ol/ImageState.js","webpack:///../../../src/ol/geom/GeometryLayout.js","webpack:///../../../src/ol/layer/TileProperty.js","webpack:///../../../src/ol/layer/Tile.js","webpack:///./src/olcs/util.js","webpack:///../../src/ol/dom.js","webpack:///../../src/ol/ViewHint.js","webpack:///../../../src/ol/style/Style.js","webpack:///../../src/ol/centerconstraint.js","webpack:///../../src/ol/ViewProperty.js","webpack:///../../src/ol/View.js","webpack:///../../src/ol/resolutionconstraint.js","webpack:///./src/olcs/core/OLImageryProvider.js","webpack:///./src/olcs/core.js","webpack:///../../../src/ol/source/OSM.js","webpack:///../../../src/ol/pointer/EventType.js","webpack:///../../../src/ol/pointer/EventSource.js","webpack:///../../../src/ol/pointer/MouseSource.js","webpack:///../../../src/ol/pointer/MsSource.js","webpack:///../../../src/ol/pointer/NativeSource.js","webpack:///../../../src/ol/pointer/PointerEvent.js","webpack:///../../../src/ol/pointer/TouchSource.js","webpack:///../../../src/ol/pointer/PointerEventHandler.js","webpack:///../../src/ol/MapBrowserEventHandler.js","webpack:///../../src/ol/MapProperty.js","webpack:///../../../src/ol/structs/PriorityQueue.js","webpack:///../../src/ol/TileQueue.js","webpack:///../../src/ol/PluggableMap.js","webpack:///../../src/ol/ImageCanvas.js","webpack:///../../../src/ol/render/Event.js","webpack:///../../../src/ol/render/VectorContext.js","webpack:///../../../../src/ol/render/canvas/Immediate.js","webpack:///../../../src/ol/renderer/Map.js","webpack:///../../../../src/ol/renderer/canvas/Map.js","webpack:///../../../src/ol/renderer/Layer.js","webpack:///../../../../src/ol/renderer/canvas/Layer.js","webpack:///../../../../src/ol/renderer/canvas/IntermediateCanvas.js","webpack:///../../../../src/ol/renderer/canvas/ImageLayer.js","webpack:///../../../../src/ol/renderer/canvas/TileLayer.js","webpack:///../../../src/ol/render/ReplayGroup.js","webpack:///../../../src/ol/render/ReplayType.js","webpack:///../../../../src/ol/geom/flat/textpath.js","webpack:///../../../../src/ol/render/canvas/Instruction.js","webpack:///../../../src/ol/render/replay.js","webpack:///../../../../src/ol/render/canvas/Replay.js","webpack:///../../../../src/ol/render/canvas/ImageReplay.js","webpack:///../../../../src/ol/render/canvas/LineStringReplay.js","webpack:///../../../../src/ol/render/canvas/PolygonReplay.js","webpack:///../../../../src/ol/geom/flat/straightchunk.js","webpack:///../../../../src/ol/render/canvas/TextReplay.js","webpack:///../../../../src/ol/render/canvas/ReplayGroup.js","webpack:///../../../src/ol/renderer/vector.js","webpack:///../../../../src/ol/renderer/canvas/VectorLayer.js","webpack:///../../../src/ol/layer/VectorTileRenderType.js","webpack:///../../../../src/ol/renderer/canvas/VectorTileLayer.js","webpack:///../../src/ol/Map.js","webpack:///./src/olcs/AutoRenderLoop.js","webpack:///./src/olcs/Camera.js","webpack:///./src/olcs/AbstractSynchronizer.js","webpack:///./src/olcs/RasterSynchronizer.js","webpack:///../../../src/ol/source/Cluster.js","webpack:///./src/olcs/core/VectorLayerCounterpart.js","webpack:///./src/olcs/FeatureConverter.js","webpack:///./src/olcs/VectorSynchronizer.js","webpack:///./src/olcs/SynchronizedOverlay.js","webpack:///./src/olcs/OverlaySynchronizer.js","webpack:///./src/olcs/OLCesium.js","webpack:///../../../src/ol/style/Stroke.js","webpack:///../../src/ol/Object.js","webpack:///../../src/ol/MapBrowserEventType.js","webpack:///../../../src/ol/style/Fill.js","webpack:///../../src/ol/Feature.js","webpack:///../../../src/ol/geom/Point.js","webpack:///../../../src/ol/interaction/Property.js","webpack:///../../../src/ol/interaction/Interaction.js","webpack:///../../src/ol/has.js","webpack:///../../../src/ol/events/Event.js","webpack:///../../../src/ol/format/Feature.js","webpack:///../../../src/ol/geom/SimpleGeometry.js","webpack:///../../src/ol/easing.js","webpack:///../../../src/ol/layer/Property.js","webpack:///../../src/ol/featureloader.js","webpack:///../../src/ol/loadingstrategy.js","webpack:///../../../src/ol/source/VectorEventType.js","webpack:///../../../src/ol/structs/RBush.js","webpack:///../../../src/ol/source/Vector.js","webpack:///../../../src/ol/geom/LinearRing.js","webpack:///../../../src/ol/geom/Polygon.js","webpack:///../../src/ol/tilecoord.js","webpack:///../../src/ol/css.js","webpack:///../../src/ol/Collection.js","webpack:///../../../src/ol/style/IconOrigin.js","webpack:///../../../src/ol/source/State.js","webpack:///../../../src/ol/extent/Relationship.js","webpack:///../../src/ol/size.js","webpack:///../../src/ol/Observable.js","webpack:///../../src/ol/coordinate.js","webpack:///../../../src/ol/reproj/common.js","webpack:///../../src/ol/CollectionEventType.js","webpack:///../../../src/ol/layer/Vector.js","webpack:///../../../src/ol/style/IconAnchorUnits.js","webpack:///../../../../src/ol/geom/flat/deflate.js","webpack:///../../src/ol/LayerType.js","webpack:///../../../../src/ol/geom/flat/inflate.js","webpack:///../../../src/ol/layer/Layer.js","webpack:///../../../../src/ol/geom/flat/closest.js","webpack:///../../../../src/ol/geom/flat/transform.js","webpack:///../../../src/ol/events/Target.js","webpack:///../../src/ol/color.js","webpack:///../../../src/ol/geom/LineString.js","webpack:///../../../src/ol/tilegrid/TileGrid.js","webpack:///../../src/ol/tilegrid.js","webpack:///../../src/ol/colorlike.js","webpack:///../../../src/ol/render/EventType.js","webpack:///../../../src/ol/layer/Group.js","webpack:///../../src/ol/string.js","webpack:///../../../../src/ol/geom/flat/simplify.js","webpack:///../../../src/ol/format/FormatType.js","webpack:///../../../../src/ol/geom/flat/contains.js","webpack:///./src/olcs/math.js","webpack:///../../../src/ol/proj/Units.js","webpack:///../../../src/ol/geom/Geometry.js","webpack:///../../../src/ol/style/Circle.js","webpack:///../../../src/ol/style/RegularShape.js","webpack:///../../../src/ol/style/IconImage.js","webpack:///../../../src/ol/style/Icon.js","webpack:///../../../src/ol/proj/transforms.js","webpack:///../../src/ol/Tile.js","webpack:///../../src/ol/ImageTile.js","webpack:///../../src/ol/TileCache.js","webpack:///../../../src/ol/reproj/Tile.js","webpack:///../../../src/ol/source/Tile.js","webpack:///../../../src/ol/source/TileEventType.js","webpack:///../../../src/ol/source/UrlTile.js","webpack:///../../../src/ol/source/TileImage.js","webpack:///../../src/ol/ObjectEventType.js","webpack:///../../src/ol/reproj.js","webpack:///../../src/ol/rotationconstraint.js","webpack:///../../../src/ol/source/WMSServerType.js","webpack:///../../src/ol/MapBrowserPointerEvent.js","webpack:///../../../src/ol/proj/Projection.js","webpack:///../../../src/ol/layer/Image.js","webpack:///../../../src/ol/geom/MultiLineString.js","webpack:///../../src/ol/tileurlfunction.js","webpack:///../../src/ol/MapEventType.js","webpack:///../../../src/ol/style/Text.js","webpack:///../../../../src/ol/geom/flat/intersectsextent.js","webpack:///../../../src/ol/geom/MultiPoint.js","webpack:///../../../src/ol/geom/MultiPolygon.js","webpack:///../../../../src/ol/geom/flat/center.js","webpack:///../../../src/ol/reproj/Image.js","webpack:///../../../src/ol/source/Image.js","webpack:///../../../src/ol/source/common.js","webpack:///../../../../src/ol/geom/flat/reverse.js","webpack:///../../../../src/ol/geom/flat/orient.js","webpack:///../../../src/ol/tilegrid/common.js","webpack:///../../../src/ol/format/GeoJSON.js","webpack:///../../../src/ol/extent/Corner.js","webpack:///../../src/ol/TileRange.js","webpack:///../../src/ol/Disposable.js","webpack:///../../../src/ol/source/ImageWMS.js","webpack:///../../src/ol/ImageBase.js","webpack:///../../../src/ol/source/Source.js","webpack:///./node_modules/rbush/index.js","webpack:///../../../../src/ol/geom/flat/area.js","webpack:///../../src/ol/Kinetic.js","webpack:///../../../src/ol/interaction/DoubleClickZoom.js","webpack:///../../../src/ol/events/condition.js","webpack:///../../../src/ol/interaction/Pointer.js","webpack:///../../../src/ol/interaction/DragPan.js","webpack:///../../../src/ol/interaction/DragRotate.js","webpack:///../../../src/ol/render/Box.js","webpack:///../../../src/ol/interaction/DragBox.js","webpack:///../../../src/ol/interaction/DragZoom.js","webpack:///../../../src/ol/events/KeyCode.js","webpack:///../../../src/ol/interaction/KeyboardPan.js","webpack:///../../../src/ol/interaction/KeyboardZoom.js","webpack:///../../../src/ol/interaction/MouseWheelZoom.js","webpack:///../../../src/ol/interaction/PinchRotate.js","webpack:///../../../src/ol/interaction/PinchZoom.js","webpack:///../../src/ol/interaction.js","webpack:///../../src/ol/MapEvent.js","webpack:///../../../src/ol/geom/GeometryCollection.js","webpack:///../../../../src/ol/geom/flat/interpolate.js","webpack:///../../../src/ol/source/TileJSON.js","webpack:///../../src/ol/OverlayPositioning.js","webpack:///../../src/ol/Overlay.js","webpack:///../../src/ol/sphere.js","webpack:///../../../src/ol/style/IconImageCache.js","webpack:///../../../src/ol/geom/Circle.js","webpack:///../../../src/ol/interaction/DragAndDrop.js","webpack:///../../src/ol/AssertionError.js","webpack:///../../../src/ol/layer/Base.js","webpack:///../../../src/ol/reproj/Triangulation.js","webpack:///../../src/ol/Image.js","webpack:///../../src/ol/uri.js","webpack:///../../../src/ol/source/TileWMS.js","webpack:///../../../src/ol/structs/LRUCache.js","webpack:///../../../src/ol/source/ImageStatic.js","webpack:///../../../../src/ol/geom/flat/interiorpoint.js","webpack:///../../../../src/ol/geom/flat/segments.js","webpack:///../../../src/ol/style/Image.js","webpack:///../../../src/ol/layer/VectorRenderType.js","webpack:///../../src/ol/MapBrowserEvent.js","webpack:///../../../../src/ol/geom/flat/length.js","webpack:///../../../src/ol/style/TextPlacement.js","webpack:///../../src/ol/net.js","webpack:///../../../src/ol/source/XYZ.js","webpack:///../../../src/ol/format/JSONFeature.js","webpack:///../../../src/ol/format/XMLFeature.js","webpack:///./node_modules/proj4/dist/proj4-src.js","webpack:///../../../src/ol/source/BingMaps.js","webpack:///../../../src/ol/proj/proj4.js","webpack:///../../../src/ol/source/Stamen.js","webpack:///../../../src/ol/format/GPX.js","webpack:///../../../src/ol/format/KML.js","webpack:///../../../src/ol/format/TopoJSON.js","webpack:///../../../src/ol/format/TextFeature.js","webpack:///../../../src/ol/format/IGC.js","webpack:///./node_modules/quickselect/quickselect.js","webpack:///../../../src/ol/control/Control.js","webpack:///../../../src/ol/control/Attribution.js","webpack:///../../../src/ol/control/Rotate.js","webpack:///../../../src/ol/control/Zoom.js","webpack:///../../../src/ol/control/util.js"],"names":["__webpack_require__","d","__webpack_exports__","DOCUMENT","XML_SCHEMA_INSTANCE_URI","createElementNS","getAllTextContent","isDocument","isNode","parse","makeArrayExtender","makeArrayPusher","makeReplacer","makeObjectPropertySetter","makeChildAppender","makeArraySerializer","makeSimpleNodeFactory","OBJECT_PROPERTY_NODE_FACTORY","makeSequence","makeStructureNS","parseNode","pushParseAndPop","pushSerializeAndPop","_array_js__WEBPACK_IMPORTED_MODULE_0__","document","implementation","createDocument","namespaceURI","qualifiedName","node","normalizeWhitespace","getAllTextContent_","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","push","String","nodeValue","replace","let","n","firstChild","nextSibling","join","value","Document","xml","DOMParser","parseFromString","valueReader","opt_this","objectStack","const","call","undefined","this","array","length","Object","opt_property","localName","nodeWriter","appendChild","serializersNS","nodeFactory","serializers","serialize","opt_nodeName","opt_namespaceURI","fixedNodeName","nodeName","object","orderedKeys","sequence","Array","i","namespaceURIs","structure","opt_structureNS","ii","structureNS","parsersNS","firstElementChild","nextElementSibling","parsers","parser","pop","values","opt_keys","boundingExtent","buffer","clone","closestSquaredDistanceXY","containsCoordinate","containsExtent","containsXY","coordinateRelationship","createEmpty","createOrUpdate","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromCoordinates","createOrUpdateFromFlatCoordinates","equals","extend","extendCoordinate","extendFlatCoordinates","forEachCorner","getArea","getBottomLeft","getBottomRight","getCenter","getCorner","getForViewAndSize","getHeight","getIntersection","getTopLeft","getTopRight","getWidth","intersects","isEmpty","returnOrUpdate","scaleFromCenter","intersectsSegment","applyTransform","_asserts_js__WEBPACK_IMPORTED_MODULE_0__","_extent_Corner_js__WEBPACK_IMPORTED_MODULE_1__","_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_2__","coordinates","extent","opt_extent","slice","x","y","dx","dy","coordinate","extent1","extent2","minX","minY","maxX","maxY","relationship","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","Infinity","extendCoordinates","flatCoordinates","offset","end","stride","extendXY","Math","min","max","callback","val","area","corner","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","center","resolution","rotation","size","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","intersection","deltaX","deltaY","start","startRel","endRel","startX","startY","endX","endY","slope","transformFn","xs","ys","apply","_boundingExtentXYs","listen","listenOnce","unlisten","unlistenByKey","unlistenAll","_obj_js__WEBPACK_IMPORTED_MODULE_0__","findListener","listeners","listener","opt_setDeleteIndex","listenerObj","bindTo","deleteIndex","getListeners","target","type","listenerMap","ol_lm","getListenerMap","removeListeners","removeEventListener","boundListener","keys","opt_once","callOnce","addEventListener","evt","bindListener","key","indexOf","splice","readBoolean","readDateTime","readDecimal","readNonNegativeInteger","readString","writeBooleanTextNode","writeCDATASection","writeDateTimeTextNode","writeDecimalTextNode","writeNonNegativeIntegerTextNode","writeStringTextNode","_xml_js__WEBPACK_IMPORTED_MODULE_0__","_string_js__WEBPACK_IMPORTED_MODULE_1__","m","s","exec","dateTime","Date","isNaN","parseFloat","parseInt","trim","bool","string","createCDATASection","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","decimal","toPrecision","nonNegativeInteger","toString","RADIUS","HALF_SIZE","PI","EXTENT","WORLD_EXTENT","epsg3857_EPSG3857Projection","Projection","EPSG3857Projection","code","super","units","Units","METERS","global","worldExtent","getPointResolution","point","math","prototype","constructor","proj_Projection","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","output","halfSize","log","tan","epsg3857_toEPSG4326","atan","exp","epsg4326_EXTENT","METERS_PER_UNIT","epsg4326_EPSG4326Projection","EPSG4326Projection","opt_axisOrientation","DEGREES","axisOrientation","metersPerUnit","epsg4326_PROJECTIONS","cache","projections2","forwardTransform","inverseTransform","cloneTransform","identityTransform","addProjection","projection","add","getCode","transforms","proj_get","projectionLike","get","proj_getPointResolution","opt_units","pointResolution","getter","getPointResolutionFunc","getUnits","toEPSG4326","getTransformFromProjections","vertices","sphere","getMetersPerUnit","addEquivalentProjections","projections","forEach","addProjections","source","destination","createProjection","defaultCode","createTransformFromCoordinateTransform","coordTransform","j","addCoordinateTransforms","forward","inverse","sourceProj","destProj","fromLonLat","opt_projection","transform","equivalent","projection1","projection2","equalUnits","sourceProjection","destinationProjection","sourceCode","destinationCode","transformFunc","getTransform","transformExtent","ol_extent","CHANGE","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","ERROR","KEYDOWN","KEYPRESS","LOAD","MOUSEDOWN","MOUSEMOVE","MOUSEOUT","MOUSEUP","MOUSEWHEEL","MSPOINTERDOWN","RESIZE","TOUCHSTART","TOUCHMOVE","TOUCHEND","WHEEL","POINT","LINE_STRING","LINEAR_RING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","CIRCLE","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","checkFont","measureTextHeight","measureTextWidth","rotateAtOffset","resetTransform","drawImage","_css_js__WEBPACK_IMPORTED_MODULE_0__","_dom_js__WEBPACK_IMPORTED_MODULE_1__","_obj_js__WEBPACK_IMPORTED_MODULE_2__","_structs_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__","_transform_js__WEBPACK_IMPORTED_MODULE_4__","checkedFonts","measureContext","textHeights","interval","referenceWidth","retries","checked","referenceFonts","len","text","isAvailable","font","context","getMeasureContext","weight","fontWeight","available","referenceFont","measureText","width","check","done","clear","clearInterval","fontSpec","fontFamilies","fontFamily","setInterval","span","heights","height","createElement","textContent","style","margin","padding","position","left","body","offsetHeight","removeChild","offsetX","offsetY","translate","rotate","opacity","image","originX","originY","w","h","scale","alpha","globalAlpha","setTransform","clamp","cosh","squaredSegmentDistance","squaredDistance","solveLinearSystem","toDegrees","toRadians","modulo","lerp","t","mat","maxRow","maxEl","abs","r","absValue","tmp","coef","k","l","angleInRadians","angleInDegrees","a","b","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","includes","arr","obj","linearFindNearest","direction","reverseSubArray","begin","data","extension","isArray","remove","arr1","arr2","len1","stableSort","compareFnc","index","sort","isSorted","opt_func","opt_strict","compare","every","currentVal","res","getUid","VERSION","uidCounter_","ol_uid","IDLE","LOADING","LOADED","EMPTY","ABORT","assert","_AssertionError_js__WEBPACK_IMPORTED_MODULE_0__","assertion","errorCode","assign","getValues","var_sources","TypeError","arguments","hasOwnProperty","property","create","reset","setFromArray","compose","invert","tmp_","set","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","c","e","f","dx1","dy1","sx","sy","angle","dx2","dy2","det","TRUE","FALSE","VOID","XY","XYZ","XYM","XYZM","TileProperty","Tile_TileLayer","Layer","TileLayer","opt_options","options","baseOptions","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","LayerType","TILE","getPreload","getUseInterimTilesOnError","layer_Layer","getSource","olcsListen","removeNode","removeChildren","exports","observable","on","param","supportsImageRenderingPixelatedResult_","imageRenderingValueResult_","supportsImageRenderingPixelated","canvas","setAttribute","imageRenderingValue","getSourceProjection","getProjection","olcs_uid","parentNode","lastChild","createCanvasContext2D","opt_width","opt_height","getContext","outerWidth","element","offsetWidth","getComputedStyle","marginLeft","marginRight","outerHeight","marginTop","marginBottom","replaceNode","newNode","oldNode","parent","replaceChild","ANIMATING","INTERACTING","toFunction","createDefaultStyle","_style_Circle_js__WEBPACK_IMPORTED_MODULE_2__","_style_Fill_js__WEBPACK_IMPORTED_MODULE_3__","_style_Stroke_js__WEBPACK_IMPORTED_MODULE_4__","Style","geometry_","geometryFunction_","defaultGeometryFunction","geometry","setGeometry","fill_","fill","image_","renderer_","renderer","stroke_","stroke","text_","zIndex_","zIndex","styleFunction","styles","getGeometry","getFill","getImage","getStroke","getText","getZIndex","getRenderer","setRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","feature","setZIndex","defaultStyles","color","radius","none","ViewProperty","DEFAULT_MIN_ZOOM","View_View","BaseObject","View","hints_","animations_","updateAnimationKey_","updateAnimations_","bind","projection_","proj","applyOptions_","properties","resolutionConstraintInfo","resolutionConstraint","maxResolution","minResolution","minZoom","maxZoom","zoomFactor","resolutions","delta","z","floor","power","pow","createSnapToResolutions","getExtent","defaultMaxResolution","common","defaultMinResolution","opt_maxLevel","oldLevel","newLevel","createSnapToPower","constraint","createResolutionConstraint","maxResolution_","minResolution_","zoomFactor_","resolutions_","minZoom_","centerConstraint","createCenterConstraint","rotationConstraint","enableRotation","constrainRotation","rotationconstraint","createRotationConstraint","constraints_","zoom","constrainResolution","Number","getResolution","setProperties","options_","getUpdatedOptions_","newOptions","getZoom","getRotation","animate","var_args","animationCount","isDef","state","setCenter","setZoom","setRotation","animationCallback","now","series","animation","complete","anchor","duration","easing","sourceCenter","targetCenter","sourceResolution","targetResolution","sourceRotation","targetRotation","isNoopAnimation","setHint","ViewHint","getAnimating","getInteracting","cancelAnimations","cancelAnimationFrame","more","seriesComplete","jj","elapsed","fraction","progress","calculateCenterZoom","calculateCenterRotate","filter","Boolean","requestAnimationFrame","currentCenter","currentResolution","getSizeFromViewport_","selector","util","querySelector","metrics","constrainCenter","opt_delta","opt_direction","getConstraints","getHints","opt_hints","calculateExtent","opt_size","asserts","getMaxResolution","getMinResolution","getMaxZoom","getZoomForResolution","setMaxZoom","getMinZoom","setMinZoom","getResolutions","getResolutionForExtent","xResolution","yResolution","getResolutionForValueFunction","opt_power","getValueForResolutionFunction","getState","pixelRatio","pixelResolution","round","nearest","getResolutionForZoom","fit","geometryOrExtent","SimpleGeometry","getType","GeometryType","Polygon","coords","getFlatCoordinates","cosAngle","sinAngle","minRotX","minRotY","maxRotX","maxRotY","getStride","rotX","rotY","constrainedResolution","centerRotX","centerRotY","functions","setResolution","centerOn","centerX","centerY","opt_anchor","hint","changed","ol_Object","returnValue","setTimeout","OLImageryProvider","olMap","opt_fallbackProj","_this","source_","fallbackProj_","ready_","tilingScheme_","rectangle_","map_","proxy","proxy_","getURL","Cesium","DefaultProxy","errorEvent_","Event","emptyCanvas_","handleSourceChanged_","frameState","olcsUtil","GeographicTilingScheme","WebMercatorTilingScheme","rectangle","getTileCredits","level","olExtent","getView","getSize","viewState","attributionsFunction","getAttributions","attributions","map","html","Credit","requestImage","tileUrlFunction","getTileUrlFunction","z_","y_","url","ImageryProvider","loadImage","defineProperties","ready","tileWidth","tg","getTileGrid","getTileSize","tileHeight","maximumLevel","minimumLevel","tilingScheme","tileDiscardPolicy","errorEvent","hasAlphaChannel","pickFeatures","scene","camera","frustum","distance","Cartesian3","magnitude","subtract","pixelSize","Cartesian2","getPixelDimensions","clientWidth","clientHeight","amount","computePixelSizeAtCoordinate","Transforms","eastNorthUpToFixedFrame","bottomLeft","Matrix4","multiplyByPoint","topRight","Ellipsoid","WGS84","cartesianArrayToCartographicArray","translation","ZERO","ol4326CoordinateToCesiumCartesian","rawMatrix","quaternion","Quaternion","fromAxisAngle","UNIT_Z","rotationMatrix","fromTranslationQuaternionRotationScale","axis","defaultValue","linearEasing","lastProgress","oldTransform","window","step","timestamp","stepAngle","lookAtTransform","heading","bottomCenter","angleToZenith","computeAngleToZenith","right","Matrix3","fromQuaternion","vector","zenith","multiplyByVector","fromTranslation","rotateAroundAxis","pixel","ray","getPickRay","globe","pick","pickEllipsoid","bottom","pickOnTerrainOrEllipsoid","Ray","ellipsoid","IntersectionTests","rayEllipsoid","getPoint","normal","geocentricSurfaceNormal","angleBetween","signedAngleBetween","convertLongitudeRange","fovy2","fovy","matrix","first","second","normalize","cross","cosine","dot","sine","sign","atan2","pivot","fy","bottomFovRay","negate","ext","Rectangle","fromDegrees","olLayer","viewProj","olLayerTile","olLayerImage","provider","olSourceImageWMS","getUrl","getImageLoadFunction","defaultImageLoadFunction","sourceProps","olcs.proxy","olcs.extent","olcs.projection","olcs.imagesource","olSourceTileWMS","params","getParams","olSourceTileImage","isCesiumProjection","olcsCoreOLImageryProvider","olSourceImageStatic","SingleTileImageryProvider","getImageExtent","layerOptions","extentToRectangle","ImageryLayer","olLayerWithParents","csLayer","visible","layer","concat","parents","layerOpacity","getOpacity","layerVisible","getVisible","show","coo","toCartesian","cartesians","proj4326","getProperties","olColor","Color","byteToFloat","fromCssColorString","CanvasPattern","CanvasGradient","ctx","fillStyle","fillRect","ImageMaterialProperty","subdomains","re","match","charCode","startCharCode","charCodeAt","stopCharCode","fromCharCode","Promise","resolve","reject","pickBottomPoint","currentHeading","setHeadingUsingBottomCenter","view","normalizeView","is3857","is4326","ATTRIBUTION","OSM","crossOrigin","cacheSize","opaque","reprojectionErrorThreshold","tileLoadFunction","wrapX","EventType","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","EventSource_EventSource","dispatcher","mapping","mapping_","getEvents","getHandlerForEvent","eventType","pointer_EventSource","POINTER_ID","POINTER_TYPE","mousedown","inEvent","isEventSimulatedFromTouch_","pointerMap","cancel","prepareEvent","down","mousemove","move","mouseup","p","button","up","cleanupMouse","mouseover","enterOver","mouseout","leaveOut","cloneEvent","pd","preventDefault","pointerId","isPrimary","pointerType","pointer_MouseSource","EventSource","MouseSource","lastTouches","lts","clientX","clientY","POINTER_TYPES","msPointerDown","prepareEvent_","msPointerMove","msPointerUp","cleanup","msPointerOut","msPointerOver","msPointerCancel","msLostPointerCapture","makeEvent","dispatchEvent","msGotPointerCapture","pointer_MsSource","MsSource","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture","pointerDown","fireNativeEvent","pointerMove","pointerUp","pointerOut","pointerOver","pointerCancel","lostPointerCapture","gotPointerCapture","pointer_NativeSource","NativeSource","pointerdown","pointermove","pointerup","pointerout","pointerover","pointercancel","gotpointercapture","lostpointercapture","HAS_BUTTONS","PointerEvent","originalEvent","opt_eventDict","eventDict","buttons","getButtons_","pressure","getPressure_","bubbles","cancelable","detail","screenX","screenY","ctrlKey","altKey","shiftKey","metaKey","relatedTarget","tiltX","tiltY","hwTimestamp","which","ev","MouseEvent","pointer_PointerEvent","touchstart","vacuumTouches_","setPrimaryTouch_","changedTouches","dedupSynthMouse_","clickCount_","processTouches_","overDown_","touchmove","moveOverOut_","touchend","upOut_","touchcancel","cancelOut_","pointer_TouchSource","TouchSource","mouseSource","firstTouchId_","resetId_","dedupTimeout_","isPrimaryTouch_","inTouch","identifier","count","cancelResetClickCount_","removePrimaryPointer_","inPointer","resetClickCount_","resetClickCountHandler_","clearTimeout","touchToPointer_","browserEvent","webkitRadiusX","radiusX","webkitRadiusY","radiusY","webkitForce","force","inFunction","touches","pointer","findTouch_","touchList","searchId","out","outTarget","over","enter","event","outEvent","leave","cleanUpPointer_","lt","CLONE_PROPS","pointer_PointerEventHandler","EventTarget","PointerEventHandler","element_","eventMap_","eventSourceList_","registerSources","has","registerSource","register_","name","newEvents","handler","eventSource","addEvents_","unregister_","removeEvents_","eventHandler_","events","eventName","ol_events","eventCopy","fireEvent","contains_","container","contained","contains","inType","wrapMouseEvent","disposeInternal","Target","ol_MapBrowserEventHandler","MapBrowserEventHandler","moveTolerance","clickTimeoutId_","dragging_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","pointerEventHandler_","documentPointerEventHandler_","pointerdownListenerKey_","handlePointerDown_","relayedListenerKey_","relayEvent_","emulateClick_","pointerEvent","newEvent","MapBrowserPointerEvent","MapBrowserEventType","SINGLECLICK","updateActivePointers_","handlePointerUp_","propagationStopped","isMouseActionButton_","dispose","handlePointerMove_","isMoving_","POINTERDRAG","dragging","MapProperty","LAYERGROUP","SIZE","TARGET","VIEW","PriorityQueue_PriorityQueue","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getCount","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","ol_TileQueue","PriorityQueue","TileQueue","tilePriorityFunction","tileChangeCallback","getKey","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","tile","events_EventType","handleTileChange","getTilesLoading","TileState","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","abortedTiles","load","ol_PluggableMap","PluggableMap","optionsInternal","keyboardEventTarget","getElementById","controls","interactions","overlays","layerGroup","layers","Group","Collection","createOptionsInternal","maxTilesLoading_","maxTilesLoading","loadTilesWhileAnimating_","loadTilesWhileAnimating","loadTilesWhileInteracting_","loadTilesWhileInteracting","pixelRatio_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","ol_transform","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","className","overflow","msTouchAction","touchAction","overlayContainer_","overlayContainerStopEvent_","overlayEvents","mapBrowserEventHandler_","handleMapBrowserEvent","keyboardEventTarget_","keyHandlerKeys_","handleBrowserEvent","overlays_","overlayIdIndex_","createRenderer","handleResize_","focus_","postRenderFunctions_","tileQueue_","getTilePriority","handleTileChange_","skippedFeatureUids_","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","control","setMap","CollectionEventType","ADD","REMOVE","interaction","addOverlayInternal_","id","getId","Error","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","getLayers","addOverlay","overlay","getOverlays","setTarget","forEachFeatureAtPixel","getCoordinateFromPixel","hitTolerance","layerFilter","forEachFeatureAtCoordinate","getFeaturesAtPixel","features","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","getEventPixel","viewportPosition","getBoundingClientRect","eventPosition","top","getTarget","getTargetElement","pixelToCoordinateTransform","getOverlayById","getPixelFromCoordinate","coordinateToPixelTransform","getOverlayContainer","getOverlayContainerStopEvent","tileSourceKey","tileCenter","tileResolution","wantedTiles","focus","sqrt","opt_type","mapBrowserEvent","MapBrowserEvent","interactionsArray","getArray","getActive","handleEvent","handlePostRender","tileQueue","hints","viewHints","hasListener","MapEventType","RENDERCOMPLETE","getLoading","loading","dispatchRenderEvent","render_EventType","postRenderFunctions","render","targetElement","updateSize","removeLayerRenderers","dom","handleViewPropertyChanged_","ObjectEventType","PROPERTYCHANGE","isRendered","renderSync","removeControl","removeInteraction","removeLayer","removeOverlay","time","previousFrameState","ol_size","layerStatesArray","getLayerStatesArray","layerStates","skippedFeatureUids","usedTiles","renderFrame","MapEvent","MOVESTART","MOVEEND","POSTRENDER","setLayerGroup","setSize","setView","skipFeature","featureUid","computedStyle","unskipFeature","ol_ImageCanvas","ImageBase","ImageCanvas","opt_loader","ImageState","loader_","canvas_","error_","getError","handleLoad_","err","ol_ImageBase","render_Event","RenderEvent","opt_vectorContext","opt_frameState","opt_context","opt_glContext","vectorContext","glContext","VectorContext_VectorContext","drawCustom","drawGeometry","setStyle","drawCircle","circleGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","drawMultiPoint","multiPointGeometry","drawMultiPolygon","multiPolygonGeometry","drawPoint","pointGeometry","drawPolygon","polygonGeometry","drawText","setFillStrokeStyle","strokeStyle","setImageStyle","imageStyle","opt_declutterGroup","setTextStyle","textStyle","render_VectorContext","Immediate","VectorContext","CanvasImmediateRenderer","viewRotation","context_","extent_","transform_","viewRotation_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textScale_","textFillState_","textStrokeState_","textState_","pixelCoordinates_","tmpLocalTransform_","drawImages_","pixelCoordinates","flat_transform","localTransform","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","moveTo","lineTo","closePath","drawRings_","ends","beginPath","arc","geometries","getGeometriesArray","flatMidpoint","getFlatMidpoint","geometryExtent","getEnds","flatMidpoints","getFlatMidpoints","getOrientedFlatCoordinates","flatInteriorPoint","getFlatInteriorPoint","endss","getEndss","flatInteriorPoints","getFlatInteriorPoints","fillState","contextFillState","strokeState","contextStrokeState","lineCap","lineDash","setLineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","textState","contextTextState","textAlign","render_canvas","textBaseline","fillStyleColor","getColor","colorlike","strokeStyleColor","strokeStyleLineCap","getLineCap","strokeStyleLineDash","getLineDash","strokeStyleLineDashOffset","getLineDashOffset","strokeStyleLineJoin","getLineJoin","strokeStyleWidth","strokeStyleMiterLimit","getMiterLimit","imageAnchor","getAnchor","imageImage","imageOrigin","getOrigin","imageSize","getRotateWithView","getScale","textFillStyle","textFillStyleColor","textStrokeStyle","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","getFont","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","textScale","textText","textTextAlign","getTextAlign","textTextBaseline","getTextBaseline","Map_MapRenderer","Disposable","MapRenderer","layerRenderers_","layerRendererListeners_","layerRendererConstructors_","registerLayerRenderers","constructors","getLayerRendererConstructors","calculateMatrices2D","removeLayerRendererByKey_","thisArg","thisArg2","result","viewResolution","managed","translatedCoordinate","canWrapX","projectionExtent","worldWidth","ceil","layerState","layerRenderer","getLayerRenderer","getWrapX","layerKey","candidate","handleLayerRendererChange_","getLayerRendererByKey","getLayerRenderers","getMap","removeUnusedLayerRenderers_","scheduleExpireIconCache","expireIconCache","scheduleRemoveUnusedLayerRenderers","ol_Disposable","IconImageCache","expire","sortByZIndex","state1","state2","renderer_Map","layerRendererConstructors","canvas_Map","CanvasMapRenderer","display","css","insertBefore","childNodes","renderedVisible_","composeEvent","clearRect","PRECOMPOSE","save","sourceState","State","READY","prepareFrame","composeFrame","restore","POSTCOMPOSE","numLayers","forEachLayerAtCoordinate","ctor","Layer_LayerRenderer","Observable","LayerRenderer","layer_","createLoadedTileFinder","tiles","tileRange","forEachLoadedTile","tileCoord","getLayer","handleImageChange_","renderIfReadyAndVisible","imageState","getSourceState","scheduleExpireCache","tileSource","canExpireCache","postRenderFunction","expireCache","updateUsedTiles","zKey","manageTilePyramid","tileGrid","currentZ","opt_tileCallback","getTileRangeForExtentAndZ","getTile","getTileCoordCenter","useTile","canvas_Layer","CanvasLayerRenderer","renderedResolution","clip","topLeft","bottomRight","dispatchComposeEvent_","opt_transform","postCompose","preCompose","RENDER","IntermediateCanvas","IntermediateCanvasRenderer","coordinateToCanvasPixelTransform","hitCanvasContext_","clipped","imageTransform","getImageTransform","dw","dh","ol_coordinate","imageData","getImageData","ImageLayer_CanvasImageLayerRenderer","CanvasImageLayerRenderer","imageLayer","imageTransform_","skippedFeatures_","vectorRenderer_","VECTOR","viewCenter","imageSource","vectorRenderer","renderedExtent","skippedFeatures","imageFrameState","newSkippedFeatures","replayGroupChanged","imageExtent","imageResolution","imagePixelRatio","getPixelRatio","IMAGE","getRenderMode","VectorRenderType","mapRenderer","ImageLayer","TileLayer_CanvasTileLayerRenderer","CanvasTileLayerRenderer","tileLayer","opt_noContext","oversampling_","renderedExtent_","renderedRevision","renderedTiles","newTiles_","tmpExtent","tmpTileRange_","TileRange","zDirection","isDrawableTile_","tileState","setState","getInterimTile","sourceRevision","getRevision","getTileGridForProjection","getZForResolution","oversampling","getTileRangeExtent","tilePixelRatio","getTilePixelRatio","tilesToDrawByZ","findLoadedTiles","animatingOrInteracting","tmpTileRange","uid","inTransition","getAlpha","childTileRange","getTileCoordChildTileRange","covered","forEachTileCoordParentTileRange","tilePixelSize","getTilePixelSize","currentScale","currentTilePixelSize","tileExtent","tileGutter","tilesToDraw","zs","tileCoordKey","getGutterForProjection","getTileCoordExtent","getTileCoord","drawTileImage","gutter","transition","getOpaque","alphaChanged","endTransition","ReplayGroup_ReplayGroup","getReplay","replayType","render_ReplayGroup","ReplayType","DEFAULT","TEXT","drawTextOnPath","measure","startM","maxAngle","previousAngle","reverse","numChars","segmentM","segmentLength","chunk","chunkLength","char","charAt","charLength","charM","segmentPos","interpolate","unshift","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","Instruction_fillInstruction","Instruction_strokeInstruction","beginPathInstruction","closePathInstruction","canvas_Instruction","ORDER","TEXT_ALIGN","middle","hanging","alphabetic","ideographic","Replay_tmpExtent","tmpTransform","Replay_CanvasReplay","CanvasReplay","tolerance","maxExtent","overlaps","declutterTree","maxLineWidth","alignFill_","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","coordinateCache_","renderedTransform_","hitDetectionInstructions","replayTextBackground_","p1","p2","p3","p4","fillInstruction","strokeInstruction","setStrokeStyle_","replayImage_","anchorX","anchorY","declutterGroup","snapToPixel","fillStroke","boxW","boxH","boxX","boxY","strokePadding","declutterArgs","applyPixelRatio","dashArray","dash","appendFlatCoordinates","closed","skipFirst","myEnd","getBufferedMaxExtent","lastRel","nextRel","lastCoord","nextCoord","NaN","skipped","Relationship","drawCustomCoordinates_","replayEnds","replayEnd","beginGeometry","replayEndss","replayBegin","myEnds","inflate","endGeometry","origin","repeatSize","instruction","renderDeclutter_","groupCount","box","collides","insert","declutterData","replay_","skippedFeaturesHash","featureCallback","opt_hitExtent","dd","prevX","prevY","roundX","roundY","skipFeatures","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","batchSize","fn","rotateWithView","backgroundFill","backgroundStroke","baseline","fillKey","strokeKey","strokeWidth","textKey","pathLength","flat_length","textLength","textStates","parts","cc","chars","label","part","replay","replayHitDetection","opt_featureCallback","reverseHitDetectionInstructions","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","finish","Replay","ImageReplay","CanvasImageReplay","declutterGroup_","hitDetectionImage_","anchorX_","anchorY_","height_","opacity_","originX_","originY_","rotateWithView_","rotation_","scale_","width_","drawCoordinates_","myBegin","hitDetectionImage","getHitDetectionImage","LineStringReplay","CanvasLineStringReplay","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","PolygonReplay","CanvasPolygonReplay","drawFlatCoordinatess_","numEnds","setFillStrokeStyles_","circleInstruction","simplify","matchingChunk","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","acos","BATCH_CONSTRUCTORS","Circle","Default","Image","LineString","Text","CanvasTextReplay","labels_","fillStates","strokeStates","textKey_","fillKey_","strokeKey_","widths_","prune","geometryType","placement","TextPlacement","LINE","flatEnd","flatOffset","o","oo","range","drawChars_","interiorPoints","drawTextImage_","containsKey","align","lines","split","numLines","widths","currentWidth","measureTextWidths","lineHeight","renderWidth","leftRight","getOverflow","getMaxAngle","getPlacement","getBackgroundFill","getBackgroundStroke","getPadding","ReplayGroup_CanvasReplayGroup","ReplayGroup","CanvasReplayGroup","opt_renderBuffer","declutterTree_","tolerance_","maxExtent_","overlaps_","resolution_","renderBuffer_","replaysByZIndex_","hitDetectionContext_","hitDetectionTransform_","addDeclutter","group","declutter","flatClipCoords","getClipCoords","hasReplays","replays","candidates","replayKey","declutterReplays","hitExtent","contextSize","declutteredFeatures","mask","circleArrayCache","arraySize","error","fillCircleArrayRowToMiddle","getCircleArray","all","entry","zIndexKey","Constructor","getReplays","opt_replayTypes","opt_declutterReplays","replayTypes","0","canvas_ReplayGroup","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","Point","replayGroup","getImageState","imageReplay","textReplay","lineStringReplay","polygonReplay","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","geometryRenderer","circleReplay","defaultOrder","feature1","feature2","getSquaredTolerance","getTolerance","renderFeature","squaredTolerance","unlistenImageChange","listenImageChange","simplifiedGeometry","getSimplifiedGeometry","renderGeometry","getGeometries","renderFeatureInternal","VectorLayer_CanvasVectorLayerRenderer","CanvasVectorLayerRenderer","vectorLayer","getDeclutter","rbush_default","dirty_","renderedRevision_","renderedResolution_","renderedRenderOrder_","replayGroup_","handleFontsChanged_","vectorSource","clipExtent","replayContext","drawOffsetX","drawOffsetY","transparentLayer","hasRenderListeners","drawWidth","drawHeight","drawSize","world","mainContextAlpha","handleStyleImageChange_","animating","interacting","updateWhileAnimating","getUpdateWhileAnimating","updateWhileInteracting","getUpdateWhileInteracting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","getRenderBuffer","vectorLayerRenderOrder","getRenderOrder","getOverlaps","loadFeatures","getStyleFunction","dirty","forEachFeatureInExtent","VectorLayer","VectorTileRenderType","HYBRID","IMAGE_REPLAYS","hybrid","VECTOR_REPLAYS","VectorTileLayer_CanvasVectorTileLayerRenderer","CanvasVectorTileLayerRenderer","renderedLayerRevision_","tmpTransform_","createReplayGroup_","renderTileImage_","layerRevision","renderMode","revision","renderOrder","replayState","getReplayState","renderedRenderOrder","sourceTileGrid","zIndexKeys","sourceTile","tileKeys","sourceTileCoord","sourceTileExtent","sharedExtent","bufferedExtent","tileProjection","reproject","setProjection","getFeatures","TILE_PIXELS","setWorldExtent","setExtent","setReplayGroup","tt","loop","getReplayGroup","getReplayTransform_","renderResolution","clips","worldOffset","currentClip","zz","replayData","replayDeclutter","renderedTileRevision","wrappedTileCoord","pixelScale","VECTOR_TILE","VectorTileLayer","Map_Map","Map","control_util","AutoRenderLoop","ol3d","scene_","getCesiumScene","_boundNotifyRepaintRequired","notifyRepaintRequired","repaintEventNames_","enable","requestRenderMode","maximumRenderTimeChange","_iterator","_isArray","_i","Symbol","iterator","_ref","next","repaintKey","getOlMap","disable","_iterator2","_isArray2","_i2","_ref2","un","restartRenderLoop","requestRender","Camera","cam_","view_","viewListenKey_","toLonLat_","identityProjection","fromLonLat_","tilt_","distance_","lastCameraViewMatrix_","viewUpdateInProgress_","setView_","dim","_this2","olObservableUnByKey","toLonLat","handleViewEvent_","readFromView","setHeading","getHeading","setTilt","tilt","updateCamera_","getTilt","setDistance","updateView","getDistance","setPosition","ll","carto","Cartographic","getAltitude","cartographicToCartesian","getPosition","cartesianToCartographic","pos","longitude","latitude","setAltitude","altitude","orientation","pitch","PI_OVER_TWO","roll","moveBackward","checkCameraChange","calcDistanceForResolution","olcsCore","pickCenterPoint","bestTarget","positionCartographic","bestTargetCartographic","calcResolutionForDistance","targetNormal","targetToCamera","tiltAngle","opt_dontSync","old","current","viewMatrix","equalsEpsilon","AbstractSynchronizer","olLayers","mapLayerGroup","layerMap","olLayerListenKeys","olGroupListenKeys_","synchronize","destroyAll","addLayers_","orderLayers","root","fifo","_loop","olLayerId","cesiumObjects","olLayerGroup","listenForGroupChanges_","createSingleLayerCounterparts","newOlLayerWithParents","layerId","layerWithParents","onLayerChange","cesiumObjs","addCesiumObjects_","cesiumObject","addCesiumObject","removeAndDestroySingleLayer_","_this3","counterparts","counterpart","removeSingleCesiumObject","destroyCesiumObject","unlistenSingleGroup_","removeLayer_","_this4","uuid","listenKeyArray","contentKeys","listenAddRemove","_this5","collection","el","objKey","removeAllCesiumObjects","destroy","RasterSynchronizer","_olcsAbstractSynchron","cesiumLayers_","imageryLayers","ourLayers_","ImageryLayerCollection","removeAll","convertLayerToCesiumImageries","tileLayerToImageryLayer","_this$olLayerListenKe","olLayerItem","updateCesiumLayerProperties","zIndices","queue","sublayers","layer1","layer2","raiseToTop","olcsAbstractSynchronizer","source_Cluster","VectorSource","Cluster","geometryFunction","refresh","cluster","addFeatures","mapDistance","clustered","ol_util","getCoordinates","neighbors","getFeaturesInExtent","neighbor","createCluster","centroid","Feature","Vector","VectorLayerCounterpart","layerProjection","billboards","BillboardCollection","primitives","PrimitiveCollection","olListenKeys","rootCollection_","featureToCesiumMap","getRootPrimitive","FeatureConverter","boundOnRemoveOrClearFeatureListener_","onRemoveOrClearFeature_","cancellers","canceller","setReferenceForPicking","primitive","olFeature","createColoredPrimitive","olGeometry","opt_lineWidth","flat","renderState","depthTest","enabled","instances","instance","GeometryInstance","attributes","ColorGeometryInstanceAttribute","fromColor","createInstance","getHeightReference","HeightReference","CLAMP_TO_GROUND","GroundPrimitive","geometryInstances","Primitive","dataUri","getValue","toDataURL","appearance","MaterialAppearance","material","Material","fabric","uniforms","PerInstanceColorAppearance","extractColorFromOlStyle","outline","fillColor","strokeColor","convertColorToCesium","extractLineWidthFromOlStyle","wrapFillAndOutlineGeometries","fillGeometry","outlineGeometry","olStyle","outlineColor","addTextStyle","olGeometry4326TextPartToCesium","csAddBillboard","bbOptions","bb","olCircleGeometryToCesium","olGeometryCloneTo4326","getRadius","outlinePrimitive","CircleGeometry","circlePolygon","olCreateCircularPolygon","positions","ol4326CoordinateArrayToCsCartesians","getLinearRing","GroundPolylinePrimitive","isSupported","GroundPolylineGeometry","PolylineMaterialAppearance","olStyleToCesium","classificationType","ClassificationType","TERRAIN","readyPromise","then","_primitive","createStackedGroundCorridors","CircleOutlineGeometry","extrudedHeight","previousDistance","_arr","geometryOptions","vertexFormat","VertexFormat","POSITION_ONLY","linePositions","CorridorGeometry","distanceDisplayCondition","DistanceDisplayConditionGeometryInstanceAttribute","olLineStringGeometryToCesium","heightReference","primitiveOptions","PolylineGeometry","olPolygonGeometryToCesium","maxHeight","RectangleGeometry","RectangleOutlineGeometry","rings","getLinearRings","hierarchy","polygonHierarchy","olPos","holes","PolygonGeometry","perPositionHeight","_i4","polylineGeometry","PolygonOutlineGeometry","altitudeMode","NONE","RELATIVE_TO_GROUND","createBillboardFromImage","opt_newBillboardCallback","olStyleIcon","reallyCreateBillboard","HTMLCanvasElement","HTMLImageElement","verticalOrigin","VerticalOrigin","BOTTOM","src","naturalHeight","naturalWidth","isImageLoaded","cancelled","fuid","isDestroyed","olPointGeometryToCesium","modelPrimitive","olcsModelFunction","olcsModel","cesiumOptions","model","Model","fromGltf","debugModelMatrix","DebugModelMatrixPrimitive","modelMatrix","olMultiGeometryToCesium","subgeos","accumulate","functor","getPoints","getLineStrings","getPolygons","labels","LabelCollection","extentCenter","olGeomSimpleGeometry","getFirstCoordinate","pixelOffset","horizontalOrigin","labelStyle","LabelStyle","outlineWidth","OUTLINE","FILL_AND_OUTLINE","HorizontalOrigin","CENTER","TOP","fromType","horizontal","repeat","evenColor","oddColor","computePlainStyle","fallbackStyleFunction","featureStyleFunction","getGeometryFromFeature","opt_geom","geom3d","olGeomGeometry","geomFuncRes","olFeatureToCesium","geom","newBillboardAddedCallback","featureBb","prims","bbs","result2","olVectorLayerToCesium","olView","featurePrimitiveMap","olSourceCluster","olcsCoreVectorLayerCounterpart","layerStyle","prim","convert","VectorSynchronizer","opt_converter","converter","olcsFeatureConverter","csAllPrimitives_","destroyPrimitives","updateLayerVisibility","csPrimitive","olLayerVector","csPrimitives","onAddFeature","onRemoveFeature","Billboard","SynchronizedOverlay","_olOverlay","getOptions","scenePostRenderListenerRemover_","synchronizer_","synchronizer","parent_","positionWGS84_","observer_","MutationObserver","handleElementChanged","_assertThisInitialized","attributeObserver_","listenerKeys_","setPropertyFromEvent","setPropertyFromEvent_","handleMapChanged","observeTarget_","disconnect","observe","childList","characterData","subtree","observer","getScene","postRender","updatePixelPosition","stopEvent","insertFirst","handlePositionChanged","cloneNode","stopPropagation","nodes","getElement","clonedNode","cartesian","fromDegreesArray","fromDegreesArrayHeights","ellipsoidBoundingSphere","BoundingSphere","Occluder","isPointVisible","computeCullingVolume","computeVisibility","setVisible","pixelCartesian","cartesianToCanvasCoordinates","mapSize","updateRenderedPosition","olOverlay","OverlaySynchronizer","parentElement","overlayMap_","addOverlays","addOverlayFromEvent_","removeOverlayFromEvent_","cesiumOverlay","olcsSynchronizedOverlay","overlayId","removedOverlay","csOverlay","OLCesium","autoRenderLoop_","time_","JulianDate","to4326Transform_","resolutionScale_","canvasClientWidth_","canvasClientHeight_","resolutionScaleChanged_","fillArea","container_","containerAttribute","createAttribute","setAttributeNode","oc","isOverMap_","stopOpenLayersEventsPropagation","canvasAttribute","oncontextmenu","onselectstart","enabled_","pausedInteractions_","hiddenRootGroup_","sceneOptions","scene3DOnly","Scene","sscc","screenSpaceCameraController","tiltEventTypes","CameraEventType","LEFT_DRAG","modifier","KeyboardEventModifier","SHIFT","ALT","enableLook","constrainedAxis","camera_","olcsCamera","globe_","Globe","baseColor","WHITE","skyAtmosphere","SkyAtmosphere","firstImageryProvider","addImageryProvider","dataSourceCollection_","DataSourceCollection","dataSourceDisplay_","DataSourceDisplay","dataSourceCollection","synchronizers","createSynchronizers","olcsRasterSynchronizer","olcsVectorSynchronizer","olcsOverlaySynchronizer","lastFrameTime_","renderId_","targetFrameRate_","POSITIVE_INFINITY","blockCesiumRendering_","warmingUp_","trackedFeature_","trackedEntity_","entityView_","needTrackedEntityUpdate_","boundingSphereScratch_","EventHelper","updateTrackedEntity_","enableSuspendTerrainAdjustment","render_","onAnimationFrame_","frameTime","julianDate","initializeFrame","update","trackedEntity","getBoundingSphere","BoundingSphereState","DONE","PENDING","enableTilt","bs","FAILED","EntityView","mapProjection","resolutionScale","devicePixelRatio","aspectRatio","getCamera","getOlView","getDataSources","getDataSourceDisplay","getEnabled","setEnabled","visibility","throwOnUnitializedMap_","rootGroup","classList","warmUp","timeout","csCamera","setBlockCesiumRendering","block","enableAutoRenderLoop","olcsAutoRenderLoop","getAutoRenderLoop","setResolutionScale","setTargetFrameRate","trackedFeature","defaultDataSource","entities","IDENTITY","to4326Transform","CallbackProperty","coo4326","TRANSPARENT","_util_js__WEBPACK_IMPORTED_MODULE_0__","Stroke","color_","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","checksum_","setColor","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","getChecksum","getChangeEventType","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_1__","_Observable_js__WEBPACK_IMPORTED_MODULE_2__","_events_Event_js__WEBPACK_IMPORTED_MODULE_3__","_obj_js__WEBPACK_IMPORTED_MODULE_4__","ObjectEvent","oldValue","opt_values","values_","getKeys","notify","opt_silent","unset","changeEventTypeCache","_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__","_color_js__WEBPACK_IMPORTED_MODULE_1__","Fill","_events_js__WEBPACK_IMPORTED_MODULE_1__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__","_Object_js__WEBPACK_IMPORTED_MODULE_3__","_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_4__","_style_Style_js__WEBPACK_IMPORTED_MODULE_5__","opt_geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","handleGeometryChanged_","setGeometryName","getGeometryName","getStyle","handleGeometryChange_","setId","_extent_js__WEBPACK_IMPORTED_MODULE_0__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_2__","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_3__","_math_js__WEBPACK_IMPORTED_MODULE_4__","opt_layout","setCoordinates","layout","closestPointXY","closestPoint","minSquaredDistance","computeExtent","intersectsExtent","setLayout","Property","pan","rotateWithoutConstraints","zoomByDelta","zoomWithoutConstraints","Interaction_Interaction","Interaction","setActive","active","opt_duration","currentRotation","FIREFOX","SAFARI","WEBKIT","MAC","DEVICE_PIXEL_RATIO","CANVAS_LINE_DASH","TOUCH","POINTER","MSPOINTER","ua","navigator","userAgent","toLowerCase","msPointerEnabled","transformWithOptions","_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_0__","_obj_js__WEBPACK_IMPORTED_MODULE_1__","_proj_js__WEBPACK_IMPORTED_MODULE_2__","FeatureFormat","dataProjection","defaultFeatureProjection","write","transformed","featureProjection","decimals","getReadOptions","readProjection","adaptOptions","getLastExtent","readFeature","readFeatures","readGeometry","writeFeature","writeFeatures","writeGeometry","transformGeom2D","_functions_js__WEBPACK_IMPORTED_MODULE_0__","_extent_js__WEBPACK_IMPORTED_MODULE_1__","_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_2__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_3__","_geom_flat_transform_js__WEBPACK_IMPORTED_MODULE_4__","_obj_js__WEBPACK_IMPORTED_MODULE_5__","Geometry","getLastCoordinate","getLayout","simplifiedGeometryRevision","simplifiedGeometryCache","simplifiedGeometryMaxMinSquaredTolerance","getSimplifiedGeometryInternal","setFlatCoordinates","getStrideForLayout","nesting","getLayoutForStride","opt_sy","simpleGeometry","opt_dest","easeIn","easeOut","inAndOut","linear","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","SOURCE","featureloader_xhr","format","success","failure","xhr","XMLHttpRequest","open","FormatType","ARRAY_BUFFER","responseType","onload","status","JSON","responseText","XML","responseXML","response","onerror","send","loadFeaturesXhr","loadingstrategy_all","VectorEventType","RBush_RBush","opt_maxEntries","rbush_","items_","item","extents","items","bbox","getAll","getInExtent","search","forEach_","forEachInExtent","ol_obj","rbush","structs_RBush","VectorSourceEvent","opt_feature","Vector_VectorSource","Source","format_","url_","loader","strategy_","strategy","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","nullGeometryFeatures_","idIndex_","undefIdIndex_","featureChangeKeys_","featuresCollection_","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","handleFeatureChange_","valid","newFeatures","geometryFeatures","modifyingCollection","removeFeature","opt_fast","featureId","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","intersectsCoordinate","forEachFeatureIntersectingExtent","getFeaturesCollection","getFeaturesAtCoordinate","getClosestFeatureToCoordinate","opt_filter","closestFeature","previousMinSquaredDistance","minDistance","getFeatureById","getFormat","sid","removeFromIdIndex_","hasFeature","loadedExtentsRtree","extentsToLoad","extentToLoad","removeLoadedExtent","removed","setLoader","source_Source","geom_LinearRing","LinearRing","maxDelta_","maxDeltaRevision_","closest","flat_area","simplifiedFlatCoordinates","GeometryLayout","deflate","geom_SimpleGeometry","circular","fromExtent","Polygon_Polygon","opt_ends","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","appendLinearRing","linearRing","opt_right","orient","flatCenter","interiorpoint","getInteriorPoint","getLinearRingCount","linearRings","simplifiedEnds","intersectsextent","opt_n","opt_sphereRadius","opt_tileCoord","getKeyZXY","fromKey","hash","quadKey","digits","withinExtentAndZ","getFullTileRange","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_CONTROL","CLASS_COLLAPSED","getFontFamilies","family","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_1__","_Object_js__WEBPACK_IMPORTED_MODULE_2__","CollectionEvent","opt_element","opt_array","unique_","unique","array_","assertUnique_","updateLength_","getLength","insertAt","elem","removeAt","prev","setAt","opt_except","UNDEFINED","num","hasArea","ratio","toSize","unByKey","_events_js__WEBPACK_IMPORTED_MODULE_0__","_events_Target_js__WEBPACK_IMPORTED_MODULE_1__","revision_","once","toStringHDMS","_math_js__WEBPACK_IMPORTED_MODULE_0__","degreesToStringHDMS","hemispheres","degrees","opt_fractionDigits","normalizedDegrees","dflPrecision","precision","deg","sec","coordinate1","coordinate2","ERROR_THRESHOLD","ENABLE_RASTER_REPROJECTION","_LayerType_js__WEBPACK_IMPORTED_MODULE_0__","_layer_Layer_js__WEBPACK_IMPORTED_MODULE_1__","_layer_VectorRenderType_js__WEBPACK_IMPORTED_MODULE_2__","_obj_js__WEBPACK_IMPORTED_MODULE_3__","_style_Style_js__WEBPACK_IMPORTED_MODULE_4__","renderBuffer","declutter_","updateWhileAnimating_","updateWhileInteracting_","renderMode_","setDeclutter","setRenderOrder","FRACTION","PIXELS","deflateCoordinate","deflateCoordinates","deflateCoordinatesArray","coordinatess","deflateMultiCoordinatesArray","coordinatesss","opt_endss","inflateCoordinates","opt_coordinates","inflateCoordinatesArray","opt_coordinatess","inflateMultiCoordinatesArray","opt_coordinatesss","visibleAtResolution","_events_EventType_js__WEBPACK_IMPORTED_MODULE_1__","_util_js__WEBPACK_IMPORTED_MODULE_2__","_layer_Base_js__WEBPACK_IMPORTED_MODULE_4__","_layer_Property_js__WEBPACK_IMPORTED_MODULE_5__","_obj_js__WEBPACK_IMPORTED_MODULE_6__","_render_EventType_js__WEBPACK_IMPORTED_MODULE_7__","_source_State_js__WEBPACK_IMPORTED_MODULE_8__","BaseLayer","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","handleSourcePropertyChange_","setSource","getLayersArray","opt_states","states","getLayerState","handleSourceChange_","maxSquaredDelta","arrayMaxSquaredDelta","multiArrayMaxSquaredDelta","assignClosestPoint","assignClosestArrayPoint","assignClosestMultiArrayPoint","assignClosest","offset1","offset2","squaredDelta","maxDelta","isRing","opt_tmpPoint","tmpPoint","transform2D","dest","_Disposable_js__WEBPACK_IMPORTED_MODULE_0__","_functions_js__WEBPACK_IMPORTED_MODULE_2__","pendingRemovals_","dispatching_","listeners_","propagate","pendingRemovals","asString","asArray","_math_js__WEBPACK_IMPORTED_MODULE_1__","HEX_COLOR_RE_","NAMED_COLOR_RE_","fromString","g","rgb","fromNamed","hasAlpha","substr","fromStringInternal_","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_2__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_4__","_geom_flat_closest_js__WEBPACK_IMPORTED_MODULE_5__","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_6__","_geom_flat_inflate_js__WEBPACK_IMPORTED_MODULE_7__","_geom_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_8__","_geom_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_9__","_geom_flat_length_js__WEBPACK_IMPORTED_MODULE_10__","_geom_flat_segments_js__WEBPACK_IMPORTED_MODULE_11__","_geom_flat_simplify_js__WEBPACK_IMPORTED_MODULE_12__","flatMidpoint_","flatMidpointRevision_","appendCoordinate","forEachSegment","getCoordinateAtM","opt_extrapolate","extrapolate","getCoordinateAt","tmpTileCoord","TileGrid_TileGrid","origins","origin_","origins_","tileSizes_","tileSizes","tileSize_","tileSize","fullTileRanges_","tmpSize_","sizes","calculateTileRanges_","forEachTileCoord","opt_tileRange","tileCoordExtent","getTileCoordForXYAndZ_","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","tilecoord","getTileCoordForCoordAndZ","getTileCoordResolution","fullTileRanges","tilegrid_TileGrid","getForProjection","getDefaultTileGrid","opt_maxZoom","opt_tileSize","opt_corner","Corner","resolutionsFromExtent","createForExtent","extentFromProjection","createForProjection","setDefaultTileGrid","worldsAway","createXYZ","half","asColorLike","_color_js__WEBPACK_IMPORTED_MODULE_0__","isColorLike","_Collection_js__WEBPACK_IMPORTED_MODULE_1__","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_4__","_asserts_js__WEBPACK_IMPORTED_MODULE_5__","_events_js__WEBPACK_IMPORTED_MODULE_6__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_7__","_extent_js__WEBPACK_IMPORTED_MODULE_8__","_layer_Base_js__WEBPACK_IMPORTED_MODULE_9__","_obj_js__WEBPACK_IMPORTED_MODULE_10__","_source_State_js__WEBPACK_IMPORTED_MODULE_11__","LAYERS","LayerGroup","layersListenerKeys_","handleLayersChanged_","setLayers","handleLayerChange_","handleLayersAdd_","handleLayersRemove_","layersArray","collectionEvent","ownLayerState","padNumber","number","opt_precision","numberString","toFixed","compareVersions","v1","v2","s1","s2","n1","n2","douglasPeucker","douglasPeuckerArray","snap","quantizeArray","quantizeMultiArray","simplifiedOffset","markers","stack","last","maxSquaredDistance","quantize","simplifiedEndss","linearRingContainsExtent","linearRingContainsXY","linearRingsContainsXY","linearRingssContainsXY","wn","FEET","USFEET","_Object_js__WEBPACK_IMPORTED_MODULE_0__","_geom_flat_transform_js__WEBPACK_IMPORTED_MODULE_3__","_proj_js__WEBPACK_IMPORTED_MODULE_4__","_proj_Units_js__WEBPACK_IMPORTED_MODULE_5__","_transform_js__WEBPACK_IMPORTED_MODULE_6__","extentRevision_","getClosestPoint","opt_closestPoint","inCoordinates","outCoordinates","pixelExtent","projectedExtent","getWorldExtent","CircleStyle","RegularShape","points","atlasManager","atlasManager_","setOpacity","setScale","setRadius","radius_","ImageStyle","checksums_","hitDetectionCanvas_","points_","radius1","radius2_","radius2","angle_","anchor_","size_","imageSize_","hitDetectionImageSize_","getRadius2","getAngle","getImageSize","getHitDetectionImageSize","renderOptions","draw_","createHitDetectionCanvas_","renderHitDetectionCallback","hasCustomHitDetectionImage","drawHitDetectionCanvas_","info","hitImage","angle0","radiusC","strokeChecksum","fillChecksum","checksum","IconImage_IconImage","IconImage","imageListenerKeys_","imageState_","src_","tainting_","determineTainting_","dispatchChangeEvent_","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","getSrc","imgData","putImageData","Icon_Icon","Icon","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize","ol_color","iconImage_","iconImage","offset_","offsetOrigin_","offsetOrigin","setAnchor","iconImageSize","ol_Tile","Tile","interimTile","transition_","transitionStarts_","refreshInterimChain","getBlankImage","ol_ImageTile","ImageTile","tileLoadFunction_","ol_TileCache","LRUCache","TileCache","opt_highWaterMark","peekLast","pruneExceptNewestZ","peekFirstKey","structs_LRUCache","reproj_Tile","ReprojTile","targetProj","targetTileGrid","getTileFunction","opt_errorThreshold","opt_renderEdges","renderEdges_","gutter_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","targetExtent","maxTargetExtent","maxSourceExtent","limitedTargetExtent","sourceProjExtent","reproj","isFinite","errorThresholdInPixels","triangulation_","Triangulation","getTriangles","sourceExtent","calculateSourceExtent","sourceRange","srcX","srcY","unlistenSources_","reproject_","sources","leftToLoad","sourceListenKey","Tile_TileSource","TileSource","opaque_","tilePixelRatio_","tileCache","tmpSize","key_","tileOptions","getTileCacheForProjection","loaded","setKey","ol_tilegrid","thisProj","ol_proj","getTileCoordForTileUrlFunction","isGlobal","TileSourceEvent","TileEventType","UrlTile_UrlTile","UrlTile","fixedTileUrlFunction","tileurlfunction","urls","setUrls","setUrl","setTileUrlFunction","tileLoadingKeys_","getTileLoadFunction","getUrls","setTileLoadFunction","opt_key","TileImage_TileImage","TileImage","defaultTileLoadFunction","tileClass","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","renderReprojectionEdges_","usedTileCache","getGutter","projKey","highWaterMark","createTile_","urlTileCoord","tileUrl","newTile","getTileInternal","setRenderReprojectionEdges","setTileGridForProjection","tilegrid","imageTile","calculateSourceResolution","_dom_js__WEBPACK_IMPORTED_MODULE_0__","_math_js__WEBPACK_IMPORTED_MODULE_2__","_proj_js__WEBPACK_IMPORTED_MODULE_3__","targetMetersPerUnit","sourceMetersPerUnit","compensationFactor","enlargeClipPoint","centroidX","centroidY","dX","dY","triangulation","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","triangle","u0","v0","u1","u2","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","p0","createSnapToN","createSnapToZero","theta","opt_tolerance","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","opt_dragging","_proj_Units_js__WEBPACK_IMPORTED_MODULE_0__","code_","units_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","getAxisOrientation","setGlobal","setGetPointResolution","func","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_4__","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_5__","_geom_flat_closest_js__WEBPACK_IMPORTED_MODULE_6__","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_7__","_geom_flat_inflate_js__WEBPACK_IMPORTED_MODULE_8__","_geom_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_9__","_geom_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_10__","_geom_flat_simplify_js__WEBPACK_IMPORTED_MODULE_11__","lineString","appendLineString","opt_interpolate","getLineString","lineStrings","midpoints","midpoint","createFromTemplates","createFromTileUrlFunctions","nullTileUrlFunction","expandUrl","_tilecoord_js__WEBPACK_IMPORTED_MODULE_2__","createFromTemplate","template","zRegEx","xRegEx","yRegEx","dashYRegEx","templates","tileUrlFunctions","stop","_style_Fill_js__WEBPACK_IMPORTED_MODULE_0__","_style_TextPlacement_js__WEBPACK_IMPORTED_MODULE_1__","font_","textAlign_","textBaseline_","maxAngle_","placement_","overflow_","offsetX_","offsetY_","backgroundFill_","backgroundStroke_","padding_","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","intersectsLineString","intersectsLineStringArray","intersectsLinearRingArray","intersectsLinearRingMultiArray","_flat_contains_js__WEBPACK_IMPORTED_MODULE_1__","_flat_segments_js__WEBPACK_IMPORTED_MODULE_2__","coordinatesExtent","point1","point2","intersectsLinearRing","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_5__","_geom_flat_inflate_js__WEBPACK_IMPORTED_MODULE_6__","_math_js__WEBPACK_IMPORTED_MODULE_7__","appendPoint","MultiPolygon_MultiPolygon","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","polygon","appendPolygon","newEndss","flatCenters","linearRingss","getInteriorPoints","getPolygon","prevEnds","polygons","lastEnds","ReprojImage","getImageFunction","sourceImage","sourcePixelRatio","targetProj_","maxSourceExtent_","targetResolution_","targetExtent_","sourceImage_","sourcePixelRatio_","sourceListenerKey_","unlistenSource_","ImageSourceEventType","ImageSourceEvent","Image_ImageSource","ImageSource","reprojectedImage_","reprojectedRevision_","findNearestResolution","idx","getImageInternal","handleImageChange","DEFAULT_WMS_VERSION","linearRingIsClockwise","edge","linearRingIsOriented","isClockwise","linearRingsAreOriented","orientLinearRings","orientLinearRingsArray","DEFAULT_MAX_ZOOM","DEFAULT_TILE_SIZE","_Feature_js__WEBPACK_IMPORTED_MODULE_1__","_format_Feature_js__WEBPACK_IMPORTED_MODULE_2__","_format_JSONFeature_js__WEBPACK_IMPORTED_MODULE_3__","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_4__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_5__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_6__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_7__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_8__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_9__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_10__","_obj_js__WEBPACK_IMPORTED_MODULE_11__","_proj_js__WEBPACK_IMPORTED_MODULE_12__","GeoJSON","JSONFeature","geometryName","extractGeometryName_","extractGeometryName","readFeatureFromObject","geoJSONFeature","geometry_name","readFeaturesFromObject","geoJSONFeatures","readGeometryFromObject","readProjectionFromObject","crs","writeFeatureObject","writeFeaturesObject","objects","writeGeometryObject","GEOMETRY_READERS","GEOMETRY_WRITERS","rightHanded","geometryReader","geometryWriter","containsTileRange","disposed_","_common_js__WEBPACK_IMPORTED_MODULE_0__","_Image_js__WEBPACK_IMPORTED_MODULE_1__","_asserts_js__WEBPACK_IMPORTED_MODULE_2__","_events_js__WEBPACK_IMPORTED_MODULE_3__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_4__","_extent_js__WEBPACK_IMPORTED_MODULE_5__","_proj_js__WEBPACK_IMPORTED_MODULE_7__","_reproj_js__WEBPACK_IMPORTED_MODULE_8__","_source_Image_js__WEBPACK_IMPORTED_MODULE_9__","_source_WMSServerType_js__WEBPACK_IMPORTED_MODULE_10__","_string_js__WEBPACK_IMPORTED_MODULE_11__","_uri_js__WEBPACK_IMPORTED_MODULE_12__","GETFEATUREINFO_IMAGE_SIZE","ImageWMS","imageLoadFunction_","imageLoadFunction","params_","v13_","updateV13_","serverType_","serverType","hidpi_","hidpi","ratio_","getGetFeatureInfoUrl","projectionObj","sourceProjectionObj","baseParams","SERVICE","REQUEST","FORMAT","QUERY_LAYERS","getRequestUrl_","viewWidth","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","dpi","setImageLoadFunction","updateParams","version","_events_Target_js__WEBPACK_IMPORTED_MODULE_0__","_Object_js__WEBPACK_IMPORTED_MODULE_1__","_source_State_js__WEBPACK_IMPORTED_MODULE_3__","attributions_","adaptAttributions_","state_","wrapX_","attributionLike","setAttributions","module","default","quickselect","maxEntries","_maxEntries","_minEntries","_initFormat","findItem","equalsFn","calcBBox","toBBox","distBBox","children","destNode","createNode","child","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","multiSelect","_all","childBBox","nodesToSearch","_build","_splitRoot","tmpNode","_insert","goingUp","path","indexes","_condense","compareMinX","compareMinY","toJSON","fromJSON","N","M","right2","right3","N2","N1","_chooseSubtree","targetNode","enlargement","minArea","minEnlargement","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","bbox1","bbox2","overlap","minOverlap","_allDistMargin","leftBBox","rightBBox","siblings","compareArr","Function","twiceArea","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","initialVelocity_","lastIndex","firstIndex","ol_Kinetic","delta_","interaction_Interaction","duration_","interaction_DoubleClickZoom","DoubleClickZoom","altShiftKeysOnly","condition_focus","activeElement","always","condition_mouseActionButton","noModifierKeys","shiftKeyOnly","targetNotEditable","tagName","condition_mouseOnly","handleDragEvent","handleUpEvent","handleDownEvent","handleMoveEvent","Pointer_centroid","pointerEvents","Pointer_handleEvent","updateTrackedPointers_","handlingDownUpSequence","handleDragEvent_","handledUp","handleUpEvent_","targetPointers","handled","handleDownEvent_","stopDown","handleMoveEvent_","Pointer","PointerInteraction","trackedPointers_","isPointerDraggingEvent","DragPan_handleDragEvent","panning_","lastPointersCount_","kinetic_","lastCentroid","DragPan_handleUpEvent","noKinetic_","centerpx","DragPan_handleDownEvent","condition_","interaction_DragPan","DragPan","kinetic","condition","DragRotate_handleDragEvent","lastAngle_","DragRotate_handleUpEvent","DragRotate_handleDownEvent","interaction_DragRotate","DragRotate","Box","RenderBox","startPixel_","endPixel_","startPixel","endPixel","setPixels","createOrUpdateGeometry","DragBoxEventType","BOXSTART","BOXDRAG","BOXEND","DragBoxEvent","defaultBoxEndCondition","minArea_","DragBox_handleDragEvent","box_","DragBox_handleUpEvent","boxEndCondition_","onBoxEnd_","DragBox_handleDownEvent","onBoxEnd","out_","mapExtent","boxPixelExtent","factor","interaction_DragZoom","DragBox","DragZoom","boxEndCondition","KeyCode","UP","DOWN","KeyboardPan_handleEvent","keyCode","mapUnitsDelta","pixelDelta_","interaction_KeyboardPan","KeyboardPan","defaultCondition_","pixelDelta","KeyboardZoom_handleEvent","interaction_KeyboardZoom","KeyboardZoom","Mode","TRACKPAD","MouseWheelZoom_handleEvent","wheelEvent","useAnchor_","lastAnchor_","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelDeltaY","startTime_","mode_","trackpadEventGap_","trackpadTimeoutId_","decrementInteractingHint_","trackpadDeltaPerZoom_","rebound","trackpadZoomBuffer_","constrainResolution_","timeLeft","timeout_","timeoutId_","handleWheelZoom_","interaction_MouseWheelZoom","MouseWheelZoom","useAnchor","setMouseAnchor","PinchRotate_handleDragEvent","rotationDelta","touch0","touch1","rotationDelta_","rotating_","threshold_","PinchRotate_handleUpEvent","PinchRotate_handleDownEvent","interaction_PinchRotate","PinchRotate","threshold","PinchZoom_handleDragEvent","scaleDelta","lastDistance_","newResolution","lastScaleDelta_","PinchZoom_handleUpEvent","PinchZoom_handleDownEvent","interaction_PinchZoom","PinchZoom","defaults","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","onFocusOnly","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","_extent_js__WEBPACK_IMPORTED_MODULE_2__","_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_3__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__","opt_geometries","geometries_","listenGeometriesChange_","unlistenGeometriesChange_","geometryCollection","setGeometries","cloneGeometries","simplifiedGeometries","simplified","simplifiedGeometryCollection","setGeometriesArray","clonedGeometries","interpolatePoint","lineStringCoordinateAtM","lineStringsCoordinateAtM","pointX","pointY","cumulativeLengths","lo","hi","m0","_tileurlfunction_js__WEBPACK_IMPORTED_MODULE_0__","_asserts_js__WEBPACK_IMPORTED_MODULE_1__","_net_js__WEBPACK_IMPORTED_MODULE_3__","_source_State_js__WEBPACK_IMPORTED_MODULE_5__","_source_TileImage_js__WEBPACK_IMPORTED_MODULE_6__","_tilegrid_js__WEBPACK_IMPORTED_MODULE_7__","TileJSON","tileJSON_","jsonp","handleTileJSONResponse","handleTileJSONError","client","onXHRLoad_","onXHRError_","tileJSON","getTileJSON","epsg4326Projection","bounds","minzoom","maxzoom","attribution","attributionExtent","OverlayPositioning","BOTTOM_CENTER","CENTER_LEFT","CENTER_CENTER","CENTER_RIGHT","TOP_CENTER","ELEMENT","MAP","OFFSET","POSITION","POSITIONING","Overlay_Overlay","Overlay","autoPan","autoPanAnimation","autoPanMargin","rendered","bottom_","left_","right_","top_","mapPostrenderListenerKey","handleOffsetChanged","handlePositioningChanged","setElement","setOffset","setPositioning","positioning","getOffset","getPositioning","panIntoView","mapRect","getRect","overlayRect","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","pageXOffset","pageYOffset","DEFAULT_RADIUS","opt_radius","lat1","lat2","deltaLatBy2","deltaLonBy2","bearing","lon1","dByR","lat","asin","lon","shared","cache_","cacheSize_","maxCacheSize_","maxCacheSize","setCenterAndRadius","getRadiusSquared_","circleExtent","_events_Event_js__WEBPACK_IMPORTED_MODULE_2__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__","_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_4__","_proj_js__WEBPACK_IMPORTED_MODULE_5__","DragAndDropEventType","DragAndDropEvent","file","opt_features","DragAndDrop","formatConstructors_","formatConstructors","dropListenKeys_","handleResult_","formatConstructor","tryReadFeatures_","registerListeners_","dropArea","handleDrop","handleStop","unregisterListeners_","files","dataTransfer","reader","FileReader","readAsText","dropEffect","AssertionError","message","_layer_Property_js__WEBPACK_IMPORTED_MODULE_1__","setMaxResolution","setMinResolution","zindex","errorThreshold","sourceProj_","transformInvCache","transformInv","transformInv_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","addQuad_","leftBound","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","maxSubdivision","sourceQuadExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","centerSrc","bc","bcSrc","da","daSrc","ab","abSrc","cd","cdSrc","_ImageBase_js__WEBPACK_IMPORTED_MODULE_0__","_ImageState_js__WEBPACK_IMPORTED_MODULE_1__","_events_js__WEBPACK_IMPORTED_MODULE_2__","_extent_js__WEBPACK_IMPORTED_MODULE_4__","ImageWrapper","appendParams","uri","keyParams","encodeURIComponent","qs","_reproj_js__WEBPACK_IMPORTED_MODULE_6__","_size_js__WEBPACK_IMPORTED_MODULE_7__","_source_TileImage_js__WEBPACK_IMPORTED_MODULE_8__","_source_WMSServerType_js__WEBPACK_IMPORTED_MODULE_9__","_tilecoord_js__WEBPACK_IMPORTED_MODULE_10__","TileWMS","transparent","tmpExtent_","getKeyForParams_","count_","entries_","oldest_","newest_","value_","newer","older","peekLastKey","_Image_js__WEBPACK_IMPORTED_MODULE_0__","_dom_js__WEBPACK_IMPORTED_MODULE_2__","_proj_js__WEBPACK_IMPORTED_MODULE_6__","_source_Image_js__WEBPACK_IMPORTED_MODULE_7__","Static","imageExtent_","imageWidth","imageHeight","targetWidth","getInteriorPointOfArray","getInteriorPointsOfMultiArray","flatCentersOffset","intersections","rr","maxSegmentLength","ret","getSnapToPixel","setRotateWithView","setSnapToPixel","lineStringLength","opt_errback","opt_callbackParam","script","async","timer","getElementsByTagName","_source_TileImage_js__WEBPACK_IMPORTED_MODULE_0__","_tilegrid_js__WEBPACK_IMPORTED_MODULE_1__","_format_Feature_js__WEBPACK_IMPORTED_MODULE_0__","_format_FormatType_js__WEBPACK_IMPORTED_MODULE_1__","getObject","stringify","_format_Feature_js__WEBPACK_IMPORTED_MODULE_1__","_format_FormatType_js__WEBPACK_IMPORTED_MODULE_2__","_xml_js__WEBPACK_IMPORTED_MODULE_3__","XMLFeature","xmlSerializer_","XMLSerializer","readFeatureFromDocument","readFeatureFromNode","doc","readFeaturesFromDocument","readFeaturesFromNode","ELEMENT_NODE","readGeometryFromDocument","readGeometryFromNode","readProjectionFromDocument","readProjectionFromNode","writeFeatureNode","serializeToString","writeFeaturesNode","writeGeometryNode","PJD_3PARAM","PJD_7PARAM","PJD_WGS84","PJD_NODATUM","SEC_TO_RAD","HALF_PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","exports$1","greenwich","lisbon","paris","bogota","madrid","rome","bern","jakarta","ferro","brussels","stockholm","athens","oslo","ft","to_meter","us-ft","ignoredChar","testkey","lkey","parseProj","defData","paramName","paramVal","paramOutname","self","paramObj","v","reduce","datum","rf","lat_0","lat0","lat_1","lat_2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","unit","from_greenwich","pm","nadgrids","datumCode","NEUTRAL","whitespace","latin","keyword","endThings","digets","Parser","place","currentObject","mapit","thing","newObj","sExpr","shift","readCharicter","test","neutral","quoted","afterquote","word","afterItem","newObjects","D2R$1","d2r","wkt","lisp","projName","local","PROJECTION","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","ellps","outName","inName","cleanWKT","defs","that","def","EPSG","ESRI","IAU2000","GOOGLE","globals","codeWords","testObj","testDef","some","testWKT","testProj","msfnz","eccent","sinphi","cosphi","con","adjust_lon","tsfnz","phi","com","phi2z","ts","dphi","eccnth","identity","pt","projs","init","es","names","names$$1","projStore","exports$2","MERIT","ellipseName","SGS85","GRS80","IAU76","airy","APL4","NWL9D","mod_airy","andrae","aust_SA","GRS67","bessel","bess_nam","clrk66","clrk80","clrk58","CPM","delmbr","engelis","evrst30","evrst48","evrst56","evrst69","evrstSS","fschr60","fschr60m","fschr68","helmert","hough","intl","kaula","lerch","mprts","new_intl","plessis","krass","SEasia","walbeck","WGS60","WGS66","WGS7","exports$3","Projection$1","srsCode","json","ourProj","datumDef","ellipse","datumName","sphere_","ecc","ep2","datumObj","datum_type","checkParams","wgs84","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","datum_transform","compareDatums","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","geodeticToGeocentric","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricToWgs84","x_tmp","y_tmp","z_tmp","geocentricFromWgs84","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","X","Y","Z","geocentricToGeodetic","adjust_axis","denorm","xin","yin","zin","toPoint","checkSanity","checkCoord","checkNotWGS","transformer","from","to","transformedArray","checkProj","oProj","proj4$1","fromProj","toProj","coord","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","A","I","O","V","mgrs","forward$1","UTMtoLL","decode","toUpperCase","toPoint$1","accuracy","utm","column","row","colOrigin","rowOrigin","colInt","rowInt","rollover","easting","northing","zoneNumber","setParm","setColumn","setRow","seasting","snorthing","zoneLetter","get100kSetForZone","encode","T","C","LongOriginRad","ZoneNumber","Lat","Long","LatRad","degToRad","LongRad","LetterDesignator","UTMEasting","UTMNorthing","LLtoUTM","radToDeg","rad","T1","C1","R1","D","LongOrigin","mu","phi1Rad","mgrsString","testChar","hunK","sb","substring","east100k","curCol","eastingValue","rewindMarker","getEastingFromChar","north100k","curRow","northingValue","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","fromMGRS","mgrsStr","toMGRS","C08","pj_enfn","en","pj_mlfn","sphi","cphi","pj_inv_mlfn","arg","tmerc","ml0","delta_lon","sin_phi","cos_phi","al","als","cs","tq","ml","tan_phi","ds","temp","sinh","hypot","asinhy","log1py","gatg","pp","B","cos_2B","h1","h2","clens","arg_r","hr","hr1","hr2","clens_cmplx","arg_i","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","cosh_arg_i","hi1","etmerc","cgb","cbg","utg","gtu","np","Qn","Zb","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","adjust_zone","dependsOn","srat","esinp","MAX_ITER$1","gauss","rc","phic0","ratexp","K","sterea","sinc0","cosc0","R2","title","sinc","cosc","cosl","rho","stere","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phit","eccen","somerc","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","omerc","no_off","no_rot","bl","fl","gl","t0","dl","t1","t2","hl","jl","pl","dlon12","dlon10","gamma0","uc","us","vs","ql","sl","tl","vl","ul","qp","sp","tp","vp","lcc","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","ns","f0","rh1","krovak","s45","s90","fi0","alfa","uq","n0","s0","ro0","ad","gfi","u","deltav","eps","ro","czech","fi1","ok","mlfn","e0","e3","e0fn","e1fn","e2fn","e3fn","gN","adjust_lat","imlfn","cass","lam","nl","asq","cl","ml1","phi1","nl1","rl1","tl1","dsq","qsfnz","P00","P01","P02","P10","P11","P20","laea","mode","S_POLE","N_POLE","EQUIT","OBLIQ","mmf","apa","APA","authset","rq","xmf","ymf","sinb1","cosb1","sinph0","cosph0","coslam","sinlam","q","sinb","cosb","phi0","cCe","sCe","beta","cosz","sinz","asinz","aea","sin_po","cos_po","qs1","qs2","t3","qs0","ns0","phi1z","eccnts","gnom","sin_p14","cos_p14","infinity_dist","coslon","iqsfnz","cea","eqc","dlat","MAX_ITER$2","poly","tanphi","mln","mlnp","ma","nzmg","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","mill","MAX_ITER$3","sinu","C_y","C_x","moll","delta_theta","eqdc","ml2","vandg","sinth","costh","gsq","msq","xx","yy","xys","c3","m1","th1","aeqd","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","H","GH","Hs","kp","cos_c","s3","s4","cosAz","Ee","F","ortho","FACE_ENUM","FRONT","BACK","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","qsc_fwd_equat_face_theta","qsc_shift_lon_origin","slon","proj4","qsc","face","one_minus_f","one_minus_f_squared","xy","sinlon","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","defaultDatum","Proj","factory","_net_js__WEBPACK_IMPORTED_MODULE_2__","_source_State_js__WEBPACK_IMPORTED_MODULE_4__","_source_TileImage_js__WEBPACK_IMPORTED_MODULE_5__","_tilecoord_js__WEBPACK_IMPORTED_MODULE_6__","BingMaps","culture_","culture","maxZoom_","apiKey_","imagerySet_","imagerySet","handleImageryMetadataResponse","getApiKey","getImagerySet","statusCode","statusDescription","authenticationResultCode","resourceSets","resources","resource","zoomMax","zoomMin","imageUrlSubdomains","subdomain","quadKeyTileCoord","imageUrl","imageryProviders","imageryProvider","intersecting","coverageAreas","coverageArea","epsg4326Extent","register","_proj_js__WEBPACK_IMPORTED_MODULE_0__","_transforms_js__WEBPACK_IMPORTED_MODULE_1__","_Projection_js__WEBPACK_IMPORTED_MODULE_2__","projCodes","code1","proj1","code2","proj2","_source_OSM_js__WEBPACK_IMPORTED_MODULE_0__","_source_XYZ_js__WEBPACK_IMPORTED_MODULE_1__","ATTRIBUTIONS","LayerConfig","terrain","terrain-background","terrain-labels","terrain-lines","toner-background","toner","toner-hybrid","toner-labels","toner-lines","toner-lite","watercolor","ProviderConfig","Stamen","providerConfig","layerConfig","_Feature_js__WEBPACK_IMPORTED_MODULE_0__","_array_js__WEBPACK_IMPORTED_MODULE_1__","_format_XMLFeature_js__WEBPACK_IMPORTED_MODULE_3__","_format_xsd_js__WEBPACK_IMPORTED_MODULE_4__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_5__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_6__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_7__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__","_proj_js__WEBPACK_IMPORTED_MODULE_9__","_xml_js__WEBPACK_IMPORTED_MODULE_10__","NAMESPACE_URIS","FEATURE_READER","rte","readRte","trk","readTrk","wpt","readWpt","GPX_PARSERS","LINK_PARSERS","GPX_SERIALIZERS","RTE_SEQUENCE","RTE_SERIALIZERS","TRK_SEQUENCE","TRK_SERIALIZERS","writeWptType","GPX","readExtensions_","readExtensions","handleReadExtensions_","extensionsNode","featureReader","gpx","setAttributeNS","GPX_NODE_FACTORY","RTE_PARSERS","cmt","desc","link","parseLink","extensions","parseExtensions","rtept","RTEPT_PARSERS","rteValues","layoutOptions","ele","TRK_PARSERS","trkseg","TRKSEG_PARSERS","trkpt","TRKPT_PARSERS","trkValues","WPT_PARSERS","magvar","geoidheight","sym","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid","LINK_SEQUENCE","LINK_SERIALIZERS","writeLink","RTEPT_TYPE_SEQUENCE","geometryLayout","TRKSEG_SERIALIZERS","TRKSEG_NODE_FACTORY","WPT_TYPE_SEQUENCE","WPT_TYPE_SERIALIZERS","GEOMETRY_TYPE_TO_NODENAME","getAttribute","hasZ","hasM","applyLayoutOptions","href","DEFAULT_COLOR","DEFAULT_IMAGE_STYLE_ANCHOR","DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS","DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS","DEFAULT_IMAGE_STYLE_SIZE","DEFAULT_IMAGE_STYLE_SRC","DEFAULT_IMAGE_SCALE_MULTIPLIER","_color_js__WEBPACK_IMPORTED_MODULE_3__","_format_Feature_js__WEBPACK_IMPORTED_MODULE_4__","_format_XMLFeature_js__WEBPACK_IMPORTED_MODULE_5__","_format_xsd_js__WEBPACK_IMPORTED_MODULE_6__","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_7__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_8__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_9__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_13__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_14__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_15__","_math_js__WEBPACK_IMPORTED_MODULE_16__","_proj_js__WEBPACK_IMPORTED_MODULE_17__","_style_Fill_js__WEBPACK_IMPORTED_MODULE_18__","_style_Icon_js__WEBPACK_IMPORTED_MODULE_19__","_style_IconAnchorUnits_js__WEBPACK_IMPORTED_MODULE_20__","_style_IconOrigin_js__WEBPACK_IMPORTED_MODULE_21__","_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__","_style_Style_js__WEBPACK_IMPORTED_MODULE_23__","_style_Text_js__WEBPACK_IMPORTED_MODULE_24__","_xml_js__WEBPACK_IMPORTED_MODULE_25__","GX_NAMESPACE_URIS","ICON_ANCHOR_UNITS_MAP","pixels","insetPixels","PLACEMARK_PARSERS","ExtendedData","extendedDataParser","Region","regionParser","MultiGeometry","readMultiGeometry","readLineString","readLinearRing","readPoint","readPolygon","readStyle","StyleMap","styleMapValue","readStyleMapValue","placemarkObject","address","description","phoneNumber","styleUrl","readURI","MultiTrack","GX_MULTITRACK_GEOMETRY_PARSERS","Track","readGxTrack","NETWORK_LINK_PARSERS","Link","REGION_PARSERS","LatLonAltBox","LAT_LON_ALT_BOX_PARSERS","regionObject","Lod","LOD_PARSERS","lodObject","KML_SEQUENCE","KML_SERIALIZERS","DOCUMENT_SERIALIZERS","DOCUMENT_NODE_FACTORY","Placemark","writePlacemark","DEFAULT_FILL_STYLE","DEFAULT_NO_IMAGE_STYLE","DEFAULT_IMAGE_STYLE","DEFAULT_TEXT_STROKE_STYLE","DEFAULT_STROKE_STYLE","DEFAULT_TEXT_STYLE","DEFAULT_STYLE","DEFAULT_STYLE_ARRAY","KML","defaultStyle_","defaultStyle","extractStyles_","extractStyles","writeStyles_","writeStyles","sharedStyles_","showPointNames_","showPointNames","readDocumentOrFolder_","Folder","readPlacemark_","readSharedStyle_","readSharedStyleMap_","sharedStyles","nameStyle","drawName","createNameStyleFunction","foundStyle","findStyle","styleValue","createFeatureStyleFunction","styleUri","baseURI","location","URL","fs","readName","readNameFromDocument","readNameFromNode","readNetworkLinks","networkLinks","readNetworkLinksFromDocument","readNetworkLinksFromNode","readRegion","regions","readRegionFromDocument","readRegionFromNode","kml","xmlnsUri","textOffset","imageScale","foundText","readColor","hexColor","readFlatCoordinates","readScale","STYLE_MAP_PARSERS","Pair","pairObject","PAIR_PARSERS","ICON_STYLE_PARSERS","iconObject","ICON_PARSERS","hotSpot","xunits","yunits","LABEL_STYLE_PARSERS","LINE_STYLE_PARSERS","POLY_STYLE_PARSERS","FLAT_LINEAR_RING_PARSERS","readFlatLinearRing","GX_TRACK_PARSERS","when","whens","gxTrackObject","GEOMETRY_FLAT_COORDINATES_PARSERS","readFlatCoordinatesFromNode","EXTRUDE_AND_ALTITUDE_MODE_PARSERS","extrude","tessellate","MULTI_GEOMETRY_PARSERS","multiGeometry","homogeneous","setCommonGeometryProperties","FLAT_LINEAR_RINGS_PARSERS","innerBoundaryIs","flatLinearRing","INNER_BOUNDARY_IS_PARSERS","flatLinearRings","outerBoundaryIs","OUTER_BOUNDARY_IS_PARSERS","STYLE_PARSERS","IconStyle","styleObject","IconObject","drawIcon","LineStyle","PolyStyle","hasExtrude","hasTessellate","hasAltitudeMode","extrudes","tessellates","altitudeModes","DATA_PARSERS","displayName","EXTENDED_DATA_PARSERS","Data","featureObject","SchemaData","SCHEMA_DATA_PARSERS","SimpleData","minAltitude","maxAltitude","north","east","west","minLodPixels","maxLodPixels","minFadeExtent","maxFadeExtent","writeColorTextNode","rgba","abgr","hex","EXTENDEDDATA_NODE_SERIALIZERS","pair","DATA_NODE_FACTORY","ICON_SEQUENCE","ICON_SERIALIZERS","GX_NODE_FACTORY","ICON_STYLE_SEQUENCE","ICON_STYLE_SERIALIZERS","icon","vec2","writeScaleTextNode","LABEL_STYLE_SEQUENCE","LABEL_STYLE_SERIALIZERS","LINE_STYLE_SEQUENCE","LINE_STYLE_SERIALIZERS","GEOMETRY_NODE_FACTORY","POINT_NODE_FACTORY","LINE_STRING_NODE_FACTORY","LINEAR_RING_NODE_FACTORY","POLYGON_NODE_FACTORY","MULTI_GEOMETRY_SERIALIZERS","writePrimitiveGeometry","writePolygon","writeMultiGeometry","BOUNDARY_IS_SERIALIZERS","writeBoundaryIs","PLACEMARK_SERIALIZERS","namesAndValues","STYLE_SEQUENCE","STYLE_SERIALIZERS","PLACEMARK_SEQUENCE","EXTENDEDDATA_NODE_FACTORY","PRIMITIVE_GEOMETRY_SEQUENCE","PRIMITIVE_GEOMETRY_SERIALIZERS","POLYGON_SERIALIZERS","INNER_BOUNDARY_NODE_FACTORY","OUTER_BOUNDARY_NODE_FACTORY","outerRing","POLY_STYLE_SERIALIZERS","COLOR_NODE_FACTORY","iconProperties","_format_JSONFeature_js__WEBPACK_IMPORTED_MODULE_2__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_3__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_4__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_5__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_6__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_7__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_8__","TopoJSON","layerName_","layerName","layers_","topoJSONTopology","arcs","transformArc","transformArcs","topoJSONFeatures","objectName","readFeaturesFromGeometryCollection","readFeatureFromGeometry","transformVertex","concatenateArcs","polyArray","ringCoords","indices","vertex","format_TextFeature","TextFeature","readFeatureFromText","readFeaturesFromText","readGeometryFromText","readProjectionFromText","writeFeatureText","writeFeaturesText","writeGeometryText","format_Feature","IGCZ","BAROMETRIC","GPS","B_RECORD_RE","H_RECORD_RE","HFDTE_RECORD_RE","NEWLINE_RE","IGC_IGC","IGC","altitudeMode_","year","month","day","lastDateTime","line","hour","minute","UTC","swap","defaultCompare","quickselectStep","sd","newLeft","newRight","control_Control","Control","target_","listenerKeys","mapEvent","updateElement_","control_Attribution","Attribution","ulElement_","collapsed_","collapsed","collapsible_","collapsible","tipLabel","collapseLabel","collapseLabel_","label_","activeLabel","handleClick_","cssClasses","renderedAttributions_","getSourceAttributions_","lookup","visibleAttributions","attributionGetter","innerHTML","handleToggle_","toggle","getCollapsible","setCollapsible","setCollapsed","getCollapsed","Rotate_render","autoHide_","msTransform","webkitTransform","control_Rotate","Rotate","callResetNorth_","resetNorth","autoHide","resetNorth_","control_Zoom","Zoom","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","outElement","zoomByDelta_","zoomOptions","rotateOptions","attributionOptions"],"mappings":"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","file":"commons.5e0740ebaa751473172f.js","sourcesContent":["/**\n * @module ol/xml\n */\nimport {extend} from './array.js';\n\n\n/**\n * When using {@link module:ol/xml~makeChildAppender} or\n * {@link module:ol/xml~makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Node} node\n */\n\n\n/**\n * @typedef {function(Node, Array<*>)} Parser\n */\n\n\n/**\n * @typedef {function(Node, *, Array<*>)} Serializer\n */\n\n\n/**\n * This document should be used when creating nodes for XML serializations. This\n * document is also used by {@link module:ol/xml~createElementNS}\n * @const\n * @type {Document}\n */\nexport const DOCUMENT = document.implementation.createDocument('', '', null);\n\n\n/**\n * @type {string}\n */\nexport const XML_SCHEMA_INSTANCE_URI = 'http://www.w3.org/2001/XMLSchema-instance';\n\n\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Node} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n  return DOCUMENT.createElementNS(namespaceURI, qualifiedName);\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n  return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array<string>} accumulator Accumulator.\n * @private\n * @return {Array<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n  if (node.nodeType == Node.CDATA_SECTION_NODE ||\n      node.nodeType == Node.TEXT_NODE) {\n    if (normalizeWhitespace) {\n      accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      accumulator.push(node.nodeValue);\n    }\n  } else {\n    let n;\n    for (n = node.firstChild; n; n = n.nextSibling) {\n      getAllTextContent_(n, normalizeWhitespace, accumulator);\n    }\n  }\n  return accumulator;\n}\n\n\n/**\n * @param {?} value Value.\n * @return {boolean} Is document.\n */\nexport function isDocument(value) {\n  return value instanceof Document;\n}\n\n\n/**\n * @param {?} value Value.\n * @return {boolean} Is node.\n */\nexport function isNode(value) {\n  return value instanceof Node;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n  return node.getAttributeNS(namespaceURI, name) || '';\n}\n\n\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n  return new DOMParser().parseFromString(xml, 'application/xml');\n}\n\n\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): (Array<*>|undefined)} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n        extend(array, value);\n      }\n    }\n  );\n}\n\n\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        objectStack[objectStack.length - 1] = value;\n      }\n    });\n}\n\n\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        let array;\n        if (property in object) {\n          array = object[property];\n        } else {\n          array = object[property] = [];\n        }\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object property setter function.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        object[property] = value;\n      }\n    });\n}\n\n\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array<*>)} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {module:ol/xml~Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, opt_this) {\n  return function(node, value, objectStack) {\n    nodeWriter.call(opt_this !== undefined ? opt_this : this, node, value, objectStack);\n    const parent = /** @type {module:ol/xml~NodeStackItem} */ (objectStack[objectStack.length - 1]);\n    const parentNode = parent.node;\n    parentNode.appendChild(node);\n  };\n}\n\n\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml~serialize}. This can be used by the parent writer to have the\n * 'nodeWriter' called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Node, V, Array<*>)} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {module:ol/xml~Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, opt_this) {\n  let serializersNS, nodeFactory;\n  return function(node, value, objectStack) {\n    if (serializersNS === undefined) {\n      serializersNS = {};\n      const serializers = {};\n      serializers[node.localName] = nodeWriter;\n      serializersNS[node.namespaceURI] = serializers;\n      nodeFactory = makeSimpleNodeFactory(node.localName);\n    }\n    serialize(serializersNS, nodeFactory, value, objectStack);\n  };\n}\n\n\n/**\n * Create a node factory which can use the `opt_keys` passed to\n * {@link module:ol/xml~serialize} or {@link module:ol/xml~pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string=} opt_nodeName Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string=} opt_namespaceURI Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(opt_nodeName, opt_namespaceURI) {\n  const fixedNodeName = opt_nodeName;\n  return (\n    /**\n     * @param {*} value Value.\n     * @param {Array<*>} objectStack Object stack.\n     * @param {string=} opt_nodeName Node name.\n     * @return {Node} Node.\n     */\n    function(value, objectStack, opt_nodeName) {\n      const context = /** @type {module:ol/xml~NodeStackItem} */ (objectStack[objectStack.length - 1]);\n      const node = context.node;\n      let nodeName = fixedNodeName;\n      if (nodeName === undefined) {\n        nodeName = opt_nodeName;\n      }\n\n      const namespaceURI = opt_namespaceURI !== undefined ? opt_namespaceURI : node.namespaceURI;\n      return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    }\n  );\n}\n\n\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nexport const OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n\n\n/**\n * Create an array of `values` to be used with {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `opt_key` argument.\n * @param {Object<string, V>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array<V>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n * @template V\n */\nexport function makeSequence(object, orderedKeys) {\n  const length = orderedKeys.length;\n  const sequence = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    sequence[i] = object[orderedKeys[i]];\n  }\n  return sequence;\n}\n\n\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object<string, T>=} opt_structureNS Namespaced structure to add to.\n * @return {Object<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, opt_structureNS) {\n  /**\n   * @type {Object<string, T>}\n   */\n  const structureNS = opt_structureNS !== undefined ? opt_structureNS : {};\n  let i, ii;\n  for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n    structureNS[namespaceURIs[i]] = structure;\n  }\n  return structureNS;\n}\n\n\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object<string, Object<string, module:ol/xml~Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, opt_this) {\n  let n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const parsers = parsersNS[n.namespaceURI];\n    if (parsers !== undefined) {\n      const parser = parsers[n.localName];\n      if (parser !== undefined) {\n        parser.call(opt_this, n, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object<string, Object<string, module:ol/xml~Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, opt_this) {\n  objectStack.push(object);\n  parseNode(parsersNS, node, objectStack, opt_this);\n  return /** @type {T} */ (objectStack.pop());\n}\n\n\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object<string, Object<string, module:ol/xml~Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(\n  serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  const length = (opt_keys !== undefined ? opt_keys : values).length;\n  let value, node;\n  for (let i = 0; i < length; ++i) {\n    value = values[i];\n    if (value !== undefined) {\n      node = nodeFactory.call(opt_this !== undefined ? opt_this : this, value, objectStack,\n        opt_keys !== undefined ? opt_keys[i] : undefined);\n      if (node !== undefined) {\n        serializersNS[node.namespaceURI][node.localName]\n          .call(opt_this, node, value, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * @param {O} object Object.\n * @param {Object<string, Object<string, module:ol/xml~Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(object, serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  objectStack.push(object);\n  serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this);\n  return /** @type {O|undefined} */ (objectStack.pop());\n}\n","/**\n * @module ol/extent\n */\nimport {assert} from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @return {module:ol/extent~Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent.\n * @private\n * @return {module:ol/extent~Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n\n\n/**\n * Return extent increased by the provided value.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0] - value;\n    opt_extent[1] = extent[1] - value;\n    opt_extent[2] = extent[2] + value;\n    opt_extent[3] = extent[3] + value;\n    return opt_extent;\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ];\n  }\n}\n\n\n/**\n * Creates a clone of an extent.\n *\n * @param {module:ol/extent~Extent} extent Extent to clone.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent.slice();\n  }\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n      extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {module:ol/extent~Extent} extent The extent.\n * @param {module:ol/coordinate~Coordinate} coordinate The coordinate.\n * @return {module:ol/extent/Relationship} The relationship (bitwise compare with\n *     module:ol/extent/Relationship~Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n\n/**\n * Create an empty extent.\n * @return {module:ol/extent~Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX;\n    opt_extent[1] = minY;\n    opt_extent[2] = maxX;\n    opt_extent[3] = maxY;\n    return opt_extent;\n  } else {\n    return [minX, minY, maxX, maxY];\n  }\n}\n\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n  return createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, opt_extent);\n}\n\n\n/**\n * @param {Array<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendCoordinates(extent, coordinates);\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} rings Rings.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendRings(extent, rings);\n}\n\n\n/**\n * Determine if two extents are equivalent.\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n      extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n\n\n/**\n * Modify an extent to include another extent.\n * @param {module:ol/extent~Extent} extent1 The extent to be modified.\n * @param {module:ol/extent~Extent} extent2 The extent that will be included in the first.\n * @return {module:ol/extent~Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {Array<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} rings Rings.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {function(this:T, module:ol/coordinate~Coordinate): S} callback Callback.\n * @param {T=} opt_this Value to use as `this` when executing `callback`.\n * @return {S|boolean} Value.\n * @template S, T\n */\nexport function forEachCorner(extent, callback, opt_this) {\n  let val;\n  val = callback.call(opt_this, getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n\n/**\n * Get the size of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n\n/**\n * Get the center coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n\n/**\n * Get a corner coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/extent/Corner} corner Corner.\n * @return {module:ol/coordinate~Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === Corner.BOTTOM_LEFT) {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === Corner.BOTTOM_RIGHT) {\n    coordinate = getBottomRight(extent);\n  } else if (corner === Corner.TOP_LEFT) {\n    coordinate = getTopLeft(extent);\n  } else if (corner === Corner.TOP_RIGHT) {\n    coordinate = getTopRight(extent);\n  } else {\n    assert(false, 13); // Invalid corner\n  }\n  return (\n    /** @type {!module:ol/coordinate~Coordinate} */ (coordinate)\n  );\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {module:ol/size~Size} size Size.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2;\n  const dy = resolution * size[1] / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  const x0 = x - xCos + ySin;\n  const x1 = x - xCos - ySin;\n  const x2 = x + xCos - ySin;\n  const x3 = x + xCos + ySin;\n  const y0 = y - xSin - yCos;\n  const y1 = y - xSin + yCos;\n  const y2 = y + xSin + yCos;\n  const y3 = y + xSin - yCos;\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent);\n}\n\n\n/**\n * Get the height of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n\n/**\n * Get the intersection of two extents.\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @param {module:ol/extent~Extent=} opt_extent Optional extent to populate with intersection.\n * @return {module:ol/extent~Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n\n/**\n * Get the size (width, height) of an extent.\n * @param {module:ol/extent~Extent} extent The extent.\n * @return {module:ol/size~Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n\n/**\n * Get the top left coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n\n/**\n * Get the top right coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n\n/**\n * Get the width of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n\n/**\n * Determine if one extent intersects another.\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n      extent1[2] >= extent2[0] &&\n      extent1[1] <= extent2[3] &&\n      extent1[3] >= extent2[1];\n}\n\n\n/**\n * Determine if an extent is empty.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent;\n  }\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {module:ol/extent~Extent} extent The extent.\n * @param {module:ol/coordinate~Coordinate} start Segment start coordinate.\n * @param {module:ol/coordinate~Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (startRel === Relationship.INTERSECTING ||\n      endRel === Relationship.INTERSECTING) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) &&\n        !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - ((endY - maxY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.RIGHT) &&\n        !(startRel & Relationship.RIGHT)) {\n      // potentially intersects right\n      y = endY - ((endX - maxX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n    if (!intersects && !!(endRel & Relationship.BELOW) &&\n        !(startRel & Relationship.BELOW)) {\n      // potentially intersects bottom\n      x = endX - ((endY - minY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.LEFT) &&\n        !(startRel & Relationship.LEFT)) {\n      // potentially intersects left\n      y = endY - ((endX - minX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n\n  }\n  return intersects;\n}\n\n\n/**\n * Apply a transform function to the extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/proj~TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n  const coordinates = [\n    extent[0], extent[1],\n    extent[0], extent[3],\n    extent[2], extent[1],\n    extent[2], extent[3]\n  ];\n  transformFn(coordinates, coordinates, 2);\n  const xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n  const ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n  return _boundingExtentXYs(xs, ys, opt_extent);\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {Object} [bindTo]\n * @property {module:ol/events~ListenerFunction} [boundListener]\n * @property {boolean} callOnce\n * @property {number} [deleteIndex]\n * @property {module:ol/events~ListenerFunction} listener\n * @property {module:ol/events/Target~EventTargetLike} target\n * @property {string} type\n * @api\n */\n\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function(module:ol/events/Event)|function(module:ol/events/Event): boolean} ListenerFunction\n * @api\n */\n\n\n/**\n * @param {module:ol/events~EventsKey} listenerObj Listener object.\n * @return {module:ol/events~ListenerFunction} Bound listener.\n */\nexport function bindListener(listenerObj) {\n  const boundListener = function(evt) {\n    const listener = listenerObj.listener;\n    const bindTo = listenerObj.bindTo || listenerObj.target;\n    if (listenerObj.callOnce) {\n      unlistenByKey(listenerObj);\n    }\n    return listener.call(bindTo, evt);\n  };\n  listenerObj.boundListener = boundListener;\n  return boundListener;\n}\n\n\n/**\n * Finds the matching {@link module:ol/events~EventsKey} in the given listener\n * array.\n *\n * @param {!Array<!module:ol/events~EventsKey>} listeners Array of listeners.\n * @param {!Function} listener The listener function.\n * @param {Object=} opt_this The `this` value inside the listener.\n * @param {boolean=} opt_setDeleteIndex Set the deleteIndex on the matching\n *     listener, for {@link module:ol/events~unlistenByKey}.\n * @return {module:ol/events~EventsKey|undefined} The matching listener object.\n */\nexport function findListener(listeners, listener, opt_this, opt_setDeleteIndex) {\n  let listenerObj;\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\n    listenerObj = listeners[i];\n    if (listenerObj.listener === listener &&\n        listenerObj.bindTo === opt_this) {\n      if (opt_setDeleteIndex) {\n        listenerObj.deleteIndex = i;\n      }\n      return listenerObj;\n    }\n  }\n  return undefined;\n}\n\n\n/**\n * @param {module:ol/events/Target~EventTargetLike} target Target.\n * @param {string} type Type.\n * @return {Array<module:ol/events~EventsKey>|undefined} Listeners.\n */\nexport function getListeners(target, type) {\n  const listenerMap = target.ol_lm;\n  return listenerMap ? listenerMap[type] : undefined;\n}\n\n\n/**\n * Get the lookup of listeners.  If one does not exist on the target, it is\n * created.\n * @param {module:ol/events/Target~EventTargetLike} target Target.\n * @return {!Object<string, Array<module:ol/events~EventsKey>>} Map of\n *     listeners by event type.\n */\nfunction getListenerMap(target) {\n  let listenerMap = target.ol_lm;\n  if (!listenerMap) {\n    listenerMap = target.ol_lm = {};\n  }\n  return listenerMap;\n}\n\n\n/**\n * Clean up all listener objects of the given type.  All properties on the\n * listener objects will be removed, and if no listeners remain in the listener\n * map, it will be removed from the target.\n * @param {module:ol/events/Target~EventTargetLike} target Target.\n * @param {string} type Type.\n */\nfunction removeListeners(target, type) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      target.removeEventListener(type, listeners[i].boundListener);\n      clear(listeners[i]);\n    }\n    listeners.length = 0;\n    const listenerMap = target.ol_lm;\n    if (listenerMap) {\n      delete listenerMap[type];\n      if (Object.keys(listenerMap).length === 0) {\n        delete target.ol_lm;\n      }\n    }\n  }\n}\n\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events~unlistenByKey}.\n *\n * @param {module:ol/events/Target~EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {module:ol/events~ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {module:ol/events~EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n  const listenerMap = getListenerMap(target);\n  let listeners = listenerMap[type];\n  if (!listeners) {\n    listeners = listenerMap[type] = [];\n  }\n  let listenerObj = findListener(listeners, listener, opt_this, false);\n  if (listenerObj) {\n    if (!opt_once) {\n      // Turn one-off listener into a permanent one.\n      listenerObj.callOnce = false;\n    }\n  } else {\n    listenerObj = /** @type {module:ol/events~EventsKey} */ ({\n      bindTo: opt_this,\n      callOnce: !!opt_once,\n      listener: listener,\n      target: target,\n      type: type\n    });\n    target.addEventListener(type, bindListener(listenerObj));\n    listeners.push(listenerObj);\n  }\n\n  return listenerObj;\n}\n\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events~unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events~listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {module:ol/events/Target~EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {module:ol/events~ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {module:ol/events~EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n  return listen(target, type, listener, opt_this, true);\n}\n\n\n/**\n * Unregisters an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * To return a listener, this function needs to be called with the exact same\n * arguments that were used for a previous {@link module:ol/events~listen} call.\n *\n * @param {module:ol/events/Target~EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {module:ol/events~ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n */\nexport function unlisten(target, type, listener, opt_this) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    const listenerObj = findListener(listeners, listener, opt_this, true);\n    if (listenerObj) {\n      unlistenByKey(listenerObj);\n    }\n  }\n}\n\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events~listen} or {@link module:ol/events~listenOnce}.\n *\n * @param {module:ol/events~EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.boundListener);\n    const listeners = getListeners(key.target, key.type);\n    if (listeners) {\n      const i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key);\n      if (i !== -1) {\n        listeners.splice(i, 1);\n      }\n      if (listeners.length === 0) {\n        removeListeners(key.target, key.type);\n      }\n    }\n    clear(key);\n  }\n}\n\n\n/**\n * Unregisters all event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * @param {module:ol/events/Target~EventTargetLike} target Target.\n */\nexport function unlistenAll(target) {\n  const listenerMap = getListenerMap(target);\n  for (const type in listenerMap) {\n    removeListeners(target, type);\n  }\n}\n","/**\n * @module ol/format/xsd\n */\nimport {getAllTextContent, DOCUMENT} from '../xml.js';\nimport {padNumber} from '../string.js';\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n  const s = getAllTextContent(node, false);\n  return readBooleanString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n  const s = getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n  const s = getAllTextContent(node, false);\n  return readDecimalString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeInteger(node) {\n  const s = getAllTextContent(node, false);\n  return readNonNegativeIntegerString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n  return getAllTextContent(node, false).trim();\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n  writeStringTextNode(node, (bool) ? '1' : '0');\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n  node.appendChild(DOCUMENT.createCDATASection(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string = date.getUTCFullYear() + '-' +\n      padNumber(date.getUTCMonth() + 1, 2) + '-' +\n      padNumber(date.getUTCDate(), 2) + 'T' +\n      padNumber(date.getUTCHours(), 2) + ':' +\n      padNumber(date.getUTCMinutes(), 2) + ':' +\n      padNumber(date.getUTCSeconds(), 2) + 'Z';\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n","/**\n * @module ol/proj/epsg3857\n */\nimport {cosh} from '../math.js';\nimport Projection from '../proj/Projection.js';\nimport Units from '../proj/Units.js';\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n\n/**\n * @const\n * @type {module:ol/extent~Extent}\n */\nexport const EXTENT = [\n  -HALF_SIZE, -HALF_SIZE,\n  HALF_SIZE, HALF_SIZE\n];\n\n\n/**\n * @const\n * @type {module:ol/extent~Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nclass EPSG3857Projection extends Projection {\n\n  /**\n   * @param {string} code Code.\n   */\n  constructor(code) {\n    super({\n      code: code,\n      units: Units.METERS,\n      extent: EXTENT,\n      global: true,\n      worldExtent: WORLD_EXTENT,\n      getPointResolution: function(resolution, point) {\n        return resolution / cosh(point[1] / RADIUS);\n      }\n    });\n\n  }\n\n}\n\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<module:ol/proj/Projection>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG::3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  const halfSize = HALF_SIZE;\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = halfSize * input[i] / 180;\n    let y = RADIUS *\n        Math.log(Math.tan(Math.PI * (input[i + 1] + 90) / 360));\n    if (y > halfSize) {\n      y = halfSize;\n    } else if (y < -halfSize) {\n      y = -halfSize;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = 180 * input[i] / HALF_SIZE;\n    output[i + 1] = 360 * Math.atan(\n      Math.exp(input[i + 1] / RADIUS)) / Math.PI - 90;\n  }\n  return output;\n}\n","/**\n * @module ol/proj/epsg4326\n */\nimport Projection from '../proj/Projection.js';\nimport Units from '../proj/Units.js';\n\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {module:ol/extent~Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = Math.PI * RADIUS / 180;\n\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nclass EPSG4326Projection extends Projection {\n\n  /**\n   * @param {string} code Code.\n   * @param {string=} opt_axisOrientation Axis orientation.\n   */\n  constructor(code, opt_axisOrientation) {\n    super({\n      code: code,\n      units: Units.DEGREES,\n      extent: EXTENT,\n      axisOrientation: opt_axisOrientation,\n      global: true,\n      metersPerUnit: METERS_PER_UNIT,\n      worldExtent: EXTENT\n    });\n\n  }\n\n}\n\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<module:ol/proj/Projection>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG::4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\n","/**\n * @module ol/proj/projections\n */\n\n\n/**\n * @type {Object<string, module:ol/proj/Projection>}\n */\nlet cache = {};\n\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {module:ol/proj/Projection} The projection (if cached).\n */\nexport function get(code) {\n  return cache[code] || null;\n}\n\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {module:ol/proj/Projection} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n","/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj~addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection} object for the new projection and add it with\n * {@link module:ol/proj~addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj~addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection} with\n * {@link module:ol/proj~addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport {getDistance} from './sphere.js';\nimport {applyTransform} from './extent.js';\nimport {modulo} from './math.js';\nimport {toEPSG4326, fromEPSG4326, PROJECTIONS as EPSG3857_PROJECTIONS} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport Projection from './proj/Projection.js';\nimport Units, {METERS_PER_UNIT} from './proj/Units.js';\nimport * as projections from './proj/projections.js';\nimport {add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc} from './proj/transforms.js';\n\n\n/**\n * A projection as {@link module:ol/proj/Projection}, SRS identifier\n * string or undefined.\n * @typedef {module:ol/proj/Projection|string|undefined} ProjectionLike\n * @api\n */\n\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\n\n\nexport {METERS_PER_UNIT};\n\nexport {Projection};\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n  let output;\n  if (opt_output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    output = opt_output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n  if (opt_output !== undefined && input !== opt_output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    input = opt_output;\n  }\n  return input;\n}\n\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {module:ol/proj/Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  projections.add(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n\n/**\n * @param {Array<module:ol/proj/Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {module:ol/proj~ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {module:ol/proj/Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  let projection = null;\n  if (projectionLike instanceof Projection) {\n    projection = projectionLike;\n  } else if (typeof projectionLike === 'string') {\n    const code = projectionLike;\n    projection = projections.get(code);\n  }\n  return projection;\n}\n\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {module:ol/proj~ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {module:ol/coordinate~Coordinate} point Point to find adjusted resolution at.\n * @param {module:ol/proj/Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n  } else {\n    const units = projection.getUnits();\n    if (units == Units.DEGREES && !opt_units || opt_units == Units.DEGREES) {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(projection, get('EPSG:4326'));\n      let vertices = [\n        point[0] - resolution / 2, point[1],\n        point[0] + resolution / 2, point[1],\n        point[0], point[1] - resolution / 2,\n        point[0], point[1] + resolution / 2\n      ];\n      vertices = toEPSG4326(vertices, vertices, 2);\n      const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n      const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n      pointResolution = (width + height) / 2;\n      const metersPerUnit = opt_units ?\n        METERS_PER_UNIT[opt_units] :\n        projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<module:ol/proj/Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function(source) {\n    projections.forEach(function(destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<module:ol/proj/Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<module:ol/proj/Projection>} projections2 Projections with equal\n *     meaning.\n * @param {module:ol/proj~TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {module:ol/proj~TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n  projections1.forEach(function(projection1) {\n    projections2.forEach(function(projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  projections.clear();\n  clearTransformFuncs();\n}\n\n\n/**\n * @param {module:ol/proj/Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {module:ol/proj/Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return get(projection);\n  } else {\n    return (\n      /** @type {module:ol/proj/Projection} */ (projection)\n    );\n  }\n}\n\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(module:ol/coordinate~Coordinate): module:ol/coordinate~Coordinate} coordTransform Coordinate\n *     transform.\n * @return {module:ol/proj~TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array<number>} Output.\n     */\n    function(input, opt_output, opt_dimension) {\n      const length = input.length;\n      const dimension = opt_dimension !== undefined ? opt_dimension : 2;\n      const output = opt_output !== undefined ? opt_output : new Array(length);\n      for (let i = 0; i < length; i += dimension) {\n        const point = coordTransform([input[i], input[i + 1]]);\n        output[i] = point[0];\n        output[i + 1] = point[1];\n        for (let j = dimension - 1; j >= 2; --j) {\n          output[i + j] = input[i + j];\n        }\n      }\n      return output;\n    });\n}\n\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {module:ol/proj~ProjectionLike} source Source projection.\n * @param {module:ol/proj~ProjectionLike} destination Destination projection.\n * @param {function(module:ol/coordinate~Coordinate): module:ol/coordinate~Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(module:ol/coordinate~Coordinate): module:ol/coordinate~Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n  addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {module:ol/proj~ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {module:ol/coordinate~Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n  return transform(coordinate, 'EPSG:4326',\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {module:ol/coordinate~Coordinate} coordinate Projected coordinate.\n * @param {module:ol/proj~ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {module:ol/coordinate~Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n  const lonLat = transform(coordinate,\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {module:ol/proj/Projection} projection1 Projection 1.\n * @param {module:ol/proj/Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    const transformFunc = getTransformFromProjections(projection1, projection2);\n    return transformFunc === cloneTransform && equalUnits;\n  }\n}\n\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {module:ol/proj/Projection} sourceProjection Source Projection object.\n * @param {module:ol/proj/Projection} destinationProjection Destination Projection\n *     object.\n * @return {module:ol/proj~TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {module:ol/proj~ProjectionLike} source Source.\n * @param {module:ol/proj~ProjectionLike} destination Destination.\n * @return {module:ol/proj~TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj~transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/proj~ProjectionLike} source Source projection-like.\n * @param {module:ol/proj~ProjectionLike} destination Destination projection-like.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {module:ol/extent~Extent} extent The extent to transform.\n * @param {module:ol/proj~ProjectionLike} source Source projection-like.\n * @param {module:ol/proj~ProjectionLike} destination Destination projection-like.\n * @return {module:ol/extent~Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc);\n}\n\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {module:ol/coordinate~Coordinate} point Point.\n * @param {module:ol/proj/Projection} sourceProjection Source projection.\n * @param {module:ol/proj/Projection} destinationProjection Destination projection.\n * @return {module:ol/coordinate~Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n  const transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n  return transformFunc(point);\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\n\naddCommon();\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~Event#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  ERROR: 'error',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  MOUSEDOWN: 'mousedown',\n  MOUSEMOVE: 'mousemove',\n  MOUSEOUT: 'mouseout',\n  MOUSEUP: 'mouseup',\n  MOUSEWHEEL: 'mousewheel',\n  MSPOINTERDOWN: 'MSPointerDown',\n  RESIZE: 'resize',\n  TOUCHSTART: 'touchstart',\n  TOUCHMOVE: 'touchmove',\n  TOUCHEND: 'touchend',\n  WHEEL: 'wheel'\n};\n","/**\n * @module ol/geom/GeometryType\n */\n\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  LINEAR_RING: 'LinearRing',\n  POLYGON: 'Polygon',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon',\n  GEOMETRY_COLLECTION: 'GeometryCollection',\n  CIRCLE: 'Circle'\n};\n","/**\n * @module ol/render/canvas\n */\nimport {getFontFamilies} from '../css.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {clear} from '../obj.js';\nimport LRUCache from '../structs/LRUCache.js';\nimport {create as createTransform} from '../transform.js';\n\n\n/**\n * @typedef {Object} FillState\n * @property {module:ol/colorlike~ColorLike} fillStyle\n */\n\n\n/**\n * @typedef {Object} FillStrokeState\n * @property {module:ol/colorlike~ColorLike} [currentFillStyle]\n * @property {module:ol/colorlike~ColorLike} [currentStrokeStyle]\n * @property {string} [currentLineCap]\n * @property {Array<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {string} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {module:ol/colorlike~ColorLike} [fillStyle]\n * @property {module:ol/colorlike~ColorLike} [strokeStyle]\n * @property {string} [lineCap]\n * @property {Array<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {string} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n\n\n/**\n * @typedef {Object} StrokeState\n * @property {string} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {module:ol/colorlike~ColorLike} strokeStyle\n */\n\n\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n */\n\n\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array<*>} DeclutterGroup\n */\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {module:ol/color~Color}\n */\nexport const defaultFillStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultMiterLimit = 10;\n\n\n/**\n * @const\n * @type {module:ol/color~Color}\n */\nexport const defaultStrokeStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextAlign = 'center';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextBaseline = 'middle';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultPadding = [0, 0, 0, 0];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineWidth = 1;\n\n\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * @type {module:ol/structs/LRUCache<HTMLCanvasElement>}\n * @api\n */\nexport const labelCache = new LRUCache();\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport const checkedFonts = {};\n\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet measureContext = null;\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport const textHeights = {};\n\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport const checkFont = (function() {\n  const retries = 60;\n  const checked = checkedFonts;\n  const size = '32px ';\n  const referenceFonts = ['monospace', 'serif'];\n  const len = referenceFonts.length;\n  const text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  let interval, referenceWidth;\n\n  function isAvailable(font) {\n    const context = getMeasureContext();\n    // Check weight ranges according to\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight#Fallback_weights\n    for (let weight = 100; weight <= 700; weight += 300) {\n      const fontWeight = weight + ' ';\n      let available = true;\n      for (let i = 0; i < len; ++i) {\n        const referenceFont = referenceFonts[i];\n        context.font = fontWeight + size + referenceFont;\n        referenceWidth = context.measureText(text).width;\n        if (font != referenceFont) {\n          context.font = fontWeight + size + font + ',' + referenceFont;\n          const width = context.measureText(text).width;\n          // If width and referenceWidth are the same, then the fallback was used\n          // instead of the font we wanted, so the font is not available.\n          available = available && width != referenceWidth;\n        }\n      }\n      if (available) {\n        // Consider font available when it is available in one weight range.\n        //FIXME With this we miss rare corner cases, so we should consider\n        //FIXME checking availability for each requested weight range.\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function check() {\n    let done = true;\n    for (const font in checked) {\n      if (checked[font] < retries) {\n        if (isAvailable(font)) {\n          checked[font] = retries;\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          labelCache.clear();\n        } else {\n          ++checked[font];\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function(fontSpec) {\n    const fontFamilies = getFontFamilies(fontSpec);\n    if (!fontFamilies) {\n      return;\n    }\n    for (let i = 0, ii = fontFamilies.length; i < ii; ++i) {\n      const fontFamily = fontFamilies[i];\n      if (!(fontFamily in checked)) {\n        checked[fontFamily] = retries;\n        if (!isAvailable(fontFamily)) {\n          checked[fontFamily] = 0;\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\nfunction getMeasureContext() {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  return measureContext;\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {module:ol/size~Size} Measurement.\n */\nexport const measureTextHeight = (function() {\n  let span;\n  const heights = textHeights;\n  return function(font) {\n    let height = heights[font];\n    if (height == undefined) {\n      if (!span) {\n        span = document.createElement('span');\n        span.textContent = 'M';\n        span.style.margin = span.style.padding = '0 !important';\n        span.style.position = 'absolute !important';\n        span.style.left = '-99999px !important';\n      }\n      span.style.font = font;\n      document.body.appendChild(span);\n      height = heights[font] = span.offsetHeight;\n      document.body.removeChild(span);\n    }\n    return height;\n  };\n})();\n\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  const measureContext = getMeasureContext();\n  if (font != measureContext.font) {\n    measureContext.font = font;\n  }\n  return measureContext.measureText(text).width;\n}\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n\nexport const resetTransform = createTransform();\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/transform~Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImage(context,\n  transform, opacity, image, originX, originY, w, h, x, y, scale) {\n  let alpha;\n  if (opacity != 1) {\n    alpha = context.globalAlpha;\n    context.globalAlpha = alpha * opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n\n  if (alpha) {\n    context.globalAlpha = alpha;\n  }\n  if (transform) {\n    context.setTransform.apply(context, resetTransform);\n  }\n}\n","/**\n * @module ol/math\n */\nimport {assert} from './asserts.js';\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport const cosh = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  let cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it\n    cosh = Math.cosh;\n  } else {\n    //  else, use the reference implementation of MDN:\n    cosh = function(x) {\n      const y = Math.exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\nexport function roundUpToPowerOfTwo(x) {\n  assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n}\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n","/**\n * @module ol/array\n */\n\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n  let mid, cmp;\n  const comparator = opt_comparator || numberSafeCompareFunction;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) { /* Too low. */\n      low = mid + 1;\n\n    } else { /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n  return arr.indexOf(obj) >= 0;\n}\n\n\n/**\n * @param {Array<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  const n = arr.length;\n  if (arr[0] <= target) {\n    return 0;\n  } else if (target <= arr[n - 1]) {\n    return n - 1;\n  } else {\n    let i;\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1;\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i;\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i;\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1;\n          } else {\n            return i;\n          }\n        }\n      }\n    }\n    return n - 1;\n  }\n}\n\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n  const length = arr.length >>> 0;\n  let value;\n\n  for (let i = 0; i < length; i++) {\n    value = arr[i];\n    if (func(value, i, arr)) {\n      return value;\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n  let index;\n  const found = !arr.every(function(el, idx) {\n    index = idx;\n    return !func(el, idx, arr);\n  });\n  return found ? index : -1;\n}\n\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n  const compare = opt_func || numberSafeCompareFunction;\n  return arr.every(function(currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || opt_strict && res === 0);\n  });\n}\n","/**\n * @module ol/util\n */\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n *\n *     function ParentClass(a, b) { }\n *     ParentClass.prototype.foo = function(a) { }\n *\n *     function ChildClass(a, b, c) {\n *       // Call parent constructor\n *       ParentClass.call(this, a, b);\n *     }\n *     inherits(ChildClass, ParentClass);\n *\n *     var child = new ChildClass('a', 'b', 'see');\n *     child.foo(); // This works.\n *\n * @param {!Function} childCtor Child constructor.\n * @param {!Function} parentCtor Parent constructor.\n * @function module:ol.inherits\n * @deprecated\n * @api\n */\nexport function inherits(childCtor, parentCtor) {\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = ++uidCounter_);\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = 'latest';\n","/**\n * @module ol/TileState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  /**\n   * Indicates that tile loading failed\n   * @type {number}\n   * @api\n   */\n  ERROR: 3,\n  EMPTY: 4,\n  ABORT: 5\n};\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol/obj\n */\n\n\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport const assign = (typeof Object.assign === 'function') ? Object.assign : function(target, var_sources) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1, ii = arguments.length; i < ii; ++i) {\n    const source = arguments[i];\n    if (source !== undefined && source !== null) {\n      for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n};\n\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n\n/**\n * Get an array of property values from an object.\n * @param {Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport function getValues(object) {\n  const values = [];\n  for (const property in object) {\n    values.push(object[property]);\n  }\n  return values;\n}\n\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/transform\n */\nimport {assert} from './asserts.js';\n\n\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n */\n\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 33 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n\n/**\n * @private\n * @type {module:ol/transform~Transform}\n */\nconst tmp_ = new Array(6);\n\n\n/**\n * Create an identity transform.\n * @return {!module:ol/transform~Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @return {!module:ol/transform~Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!module:ol/transform~Transform} transform1 Transform parameters of matrix 1.\n * @param {!module:ol/transform~Transform} transform2 Transform parameters of matrix 2.\n * @return {!module:ol/transform~Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!module:ol/transform~Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!module:ol/transform~Transform} transform1 Matrix to set transform to.\n * @param {!module:ol/transform~Transform} transform2 Matrix to set transform from.\n * @return {!module:ol/transform~Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {module:ol/transform~Transform} transform The transformation.\n * @param {module:ol/coordinate~Coordinate|module:ol/pixel~Pixel} coordinate The coordinate to transform.\n * @return {module:ol/coordinate~Coordinate|module:ol/pixel~Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n\n/**\n * Applies rotation to the given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!module:ol/transform~Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n\n/**\n * Applies scale to a given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!module:ol/transform~Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n\n/**\n * Applies translation to the given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!module:ol/transform~Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!module:ol/transform~Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!module:ol/transform~Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n\n/**\n * Invert the given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @return {!module:ol/transform~Transform} Inverse of the transform.\n */\nexport function invert(transform) {\n  const det = determinant(transform);\n  assert(det !== 0, 32); // Transformation matrix cannot be inverted\n\n  const a = transform[0];\n  const b = transform[1];\n  const c = transform[2];\n  const d = transform[3];\n  const e = transform[4];\n  const f = transform[5];\n\n  transform[0] = d / det;\n  transform[1] = -b / det;\n  transform[2] = -c / det;\n  transform[3] = a / det;\n  transform[4] = (c * f - d * e) / det;\n  transform[5] = -(a * f - b * e) / det;\n\n  return transform;\n}\n\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!module:ol/transform~Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n","/**\n * @module ol/functions\n */\n\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3\n};\n","/**\n * @module ol/geom/GeometryLayout\n */\n\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n  XY: 'XY',\n  XYZ: 'XYZ',\n  XYM: 'XYM',\n  XYZM: 'XYZM'\n};\n","/**\n * @module ol/layer/TileProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  PRELOAD: 'preload',\n  USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError'\n};\n","/**\n * @module ol/layer/Tile\n */\nimport LayerType from '../LayerType.js';\nimport Layer from '../layer/Layer.js';\nimport TileProperty from '../layer/TileProperty.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {module:ol/source/Tile} [source] Source for this layer.\n * @property {module:ol/PluggableMap} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass TileLayer extends Layer {\n  /**\n   * @param {module:ol/layer/Tile~Options=} opt_options Tile layer options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const baseOptions = assign({}, options);\n\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n    super(baseOptions);\n\n    this.setPreload(options.preload !== undefined ? options.preload : 0);\n    this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n      options.useInterimTilesOnError : true);\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {module:ol/LayerType}\n    */\n    this.type = LayerType.TILE;\n\n  }\n\n  /**\n  * Return the level as number to which we will preload tiles up to.\n  * @return {number} The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  getPreload() {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  }\n\n  /**\n  * Set the level as number to which we will preload tiles up to.\n  * @param {number} preload The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  setPreload(preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  }\n\n  /**\n  * Whether we use interim tiles on error.\n  * @return {boolean} Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  getUseInterimTilesOnError() {\n    return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n  }\n\n  /**\n  * Set whether we use interim tiles on error.\n  * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  setUseInterimTilesOnError(useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  }\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Tile tilesource} of the layer.\n * @function\n * @return {module:ol/source/Tile} Source.\n * @api\n */\nTileLayer.prototype.getSource;\n\n\nexport default TileLayer;\n","/**\n * @module olcs.util\n */\nconst exports = {};\n\n\n/**\n * Cast to object.\n * @param {Object} param\n * @return {Object}\n */\nexports.obj = function(param) {\n  return param;\n};\n\n\n/**\n * @type {boolean|undefined}\n * @private\n */\nexports.supportsImageRenderingPixelatedResult_ = undefined;\n\n\n/**\n * @type {string|undefined}\n * @private\n */\nexports.imageRenderingValueResult_ = undefined;\n\n\n/**\n * @return {boolean}\n */\nexports.supportsImageRenderingPixelated = function() {\n  if (exports.supportsImageRenderingPixelatedResult_ === undefined) {\n    const canvas = document.createElement('canvas');\n    canvas.setAttribute('style', 'image-rendering: -moz-crisp-edges; image-rendering: pixelated;');\n    // canvas.style.imageRendering will be undefined, null or an\n    // empty string on unsupported browsers.\n    const tmp = canvas.style['imageRendering']; // non standard\n    exports.supportsImageRenderingPixelatedResult_ = !!tmp;\n    if (exports.supportsImageRenderingPixelatedResult_) {\n      exports.imageRenderingValueResult_ = tmp;\n    }\n  }\n  return exports.supportsImageRenderingPixelatedResult_;\n};\n\n\n/**\n * @return {string}\n */\nexports.imageRenderingValue = function() {\n  exports.supportsImageRenderingPixelated();\n  return exports.imageRenderingValueResult_ || '';\n};\n\n/**\n * Return the projection of the source that Cesium should use.\n *\n * @param {ol.source.Source} source Source.\n * @returns {ol.proj.Projection} The projection of the source.\n */\nexports.getSourceProjection = function(source) {\n  return /** @type {ol.proj.Projection} */ (source.get('olcs.projection'))\n    || source.getProjection();\n};\n\n/**\n * @param {ol.Observable} observable\n * @param {string} type\n * @param {Function} listener\n * @return {!ol.events.EventsKey}\n */\nexport function olcsListen(observable, type, listener) {\n  // See https://github.com/openlayers/openlayers/pull/8481\n  // ol.events.listen is internal so we use `on` instead.\n  // And since `on` as a convoluted API (can return an EventsKey or an array of them)\n  // we use a cast here.\n  return /** @type {!ol.events.EventsKey} */ (observable.on(type, listener));\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\nexport function getUid(obj) {\n  return obj.olcs_uid || (obj.olcs_uid = ++uidCounter_);\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  for (let i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort((a, b) => compareFnc(a.value, b.value) || a.index - b.index);\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\nexport default exports;\n","/**\n * @module ol/dom\n */\n\n\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height) {\n  const canvas = /** @type {HTMLCanvasElement} */ (document.createElement('canvas'));\n  if (opt_width) {\n    canvas.width = opt_width;\n  }\n  if (opt_height) {\n    canvas.height = opt_height;\n  }\n  return /** @type {CanvasRenderingContext2D} */ (canvas.getContext('2d'));\n}\n\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n","/**\n * @module ol/ViewHint\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  ANIMATING: 0,\n  INTERACTING: 1\n};\n","/**\n * @module ol/style/Style\n */\n\n/**\n * Feature styles.\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n */\nimport {assert} from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from '../style/Circle.js';\nimport Fill from '../style/Fill.js';\nimport Stroke from '../style/Stroke.js';\n\n\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled.\n *\n * @typedef {function((module:ol/Feature|module:ol/render/Feature), number):\n *     (module:ol/style/Style|Array<module:ol/style/Style>)} StyleFunction\n */\n\n\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function((module:ol/Feature|module:ol/render/Feature)):\n *     (module:ol/geom/Geometry|module:ol/render/Feature|undefined)} GeometryFunction\n */\n\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((module:ol/coordinate~Coordinate|Array<module:ol/coordinate~Coordinate>|Array<Array<module:ol/coordinate~Coordinate>>),module:ol/render~State)}\n * RenderFunction\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string|module:ol/geom/Geometry|module:ol/style/Style~GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {module:ol/style/Fill} [fill] Fill style.\n * @property {module:ol/style/Image} [image] Image style.\n * @property {module:ol/style/Style~RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {module:ol/style/Text} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n * @api\n */\nclass Style {\n  /**\n   * @param {module:ol/style/Style~Options=} opt_options Style options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {string|module:ol/geom/Geometry|module:ol/style/Style~GeometryFunction}\n     */\n    this.geometry_ = null;\n\n    /**\n     * @private\n     * @type {!module:ol/style/Style~GeometryFunction}\n     */\n    this.geometryFunction_ = defaultGeometryFunction;\n\n    if (options.geometry !== undefined) {\n      this.setGeometry(options.geometry);\n    }\n\n    /**\n     * @private\n     * @type {module:ol/style/Fill}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n       * @private\n       * @type {module:ol/style/Image}\n       */\n    this.image_ = options.image !== undefined ? options.image : null;\n\n    /**\n     * @private\n     * @type {module:ol/style/Style~RenderFunction|null}\n     */\n    this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n    /**\n     * @private\n     * @type {module:ol/style/Stroke}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {module:ol/style/Text}\n     */\n    this.text_ = options.text !== undefined ? options.text : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zIndex_ = options.zIndex;\n\n  }\n\n  /**\n   * Clones the style.\n   * @return {module:ol/style/Style} The cloned style.\n   * @api\n   */\n  clone() {\n    let geometry = this.getGeometry();\n    if (geometry && geometry.clone) {\n      geometry = geometry.clone();\n    }\n    return new Style({\n      geometry: geometry,\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      image: this.getImage() ? this.getImage().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      text: this.getText() ? this.getText().clone() : undefined,\n      zIndex: this.getZIndex()\n    });\n  }\n\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setRenderer} or the `renderer` constructor option.\n   * @return {module:ol/style/Style~RenderFunction|null} Custom renderer function.\n   * @api\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n   * and `image` options of the style will be ignored.\n   * @param {module:ol/style/Style~RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n  setRenderer(renderer) {\n    this.renderer_ = renderer;\n  }\n\n  /**\n   * Get the geometry to be rendered.\n   * @return {string|module:ol/geom/Geometry|module:ol/style/Style~GeometryFunction}\n   * Feature property or geometry or function that returns the geometry that will\n   * be rendered with this style.\n   * @api\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n\n  /**\n   * Get the function used to generate a geometry for rendering.\n   * @return {!module:ol/style/Style~GeometryFunction} Function that is called with a feature\n   * and returns the geometry to render instead of the feature's geometry.\n   * @api\n   */\n  getGeometryFunction() {\n    return this.geometryFunction_;\n  }\n\n  /**\n   * Get the fill style.\n   * @return {module:ol/style/Fill} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Set the fill style.\n   * @param {module:ol/style/Fill} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n   * Get the image style.\n   * @return {module:ol/style/Image} Image style.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Set the image style.\n   * @param {module:ol/style/Image} image Image style.\n   * @api\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Get the stroke style.\n   * @return {module:ol/style/Stroke} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Set the stroke style.\n   * @param {module:ol/style/Stroke} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n   * Get the text style.\n   * @return {module:ol/style/Text} Text style.\n   * @api\n   */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n   * Set the text style.\n   * @param {module:ol/style/Text} text Text style.\n   * @api\n   */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n   * Get the z-index for the style.\n   * @return {number|undefined} ZIndex.\n   * @api\n   */\n  getZIndex() {\n    return this.zIndex_;\n  }\n\n  /**\n   * Set a geometry that is rendered instead of the feature's geometry.\n   *\n   * @param {string|module:ol/geom/Geometry|module:ol/style/Style~GeometryFunction} geometry\n   *     Feature property or geometry or function returning a geometry to render\n   *     for this style.\n   * @api\n   */\n  setGeometry(geometry) {\n    if (typeof geometry === 'function') {\n      this.geometryFunction_ = geometry;\n    } else if (typeof geometry === 'string') {\n      this.geometryFunction_ = function(feature) {\n        return (\n          /** @type {module:ol/geom/Geometry} */ (feature.get(geometry))\n        );\n      };\n    } else if (!geometry) {\n      this.geometryFunction_ = defaultGeometryFunction;\n    } else if (geometry !== undefined) {\n      this.geometryFunction_ = function() {\n        return (\n          /** @type {module:ol/geom/Geometry} */ (geometry)\n        );\n      };\n    }\n    this.geometry_ = geometry;\n  }\n\n  /**\n   * Set the z-index.\n   *\n   * @param {number|undefined} zIndex ZIndex.\n   * @api\n   */\n  setZIndex(zIndex) {\n    this.zIndex_ = zIndex;\n  }\n}\n\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of module:ol/style/Style or single style objects wrapped in a\n * new style function.\n * @param {module:ol/style/Style~StyleFunction|Array<module:ol/style/Style>|module:ol/style/Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {module:ol/style/Style~StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n  let styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array<module:ol/style/Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(obj instanceof Style,\n        41); // Expected an `module:ol/style/Style~Style` or an array of `module:ol/style/Style~Style`\n      styles = [obj];\n    }\n    styleFunction = function() {\n      return styles;\n    };\n  }\n  return styleFunction;\n}\n\n\n/**\n * @type {Array<module:ol/style/Style>}\n */\nlet defaultStyles = null;\n\n\n/**\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<module:ol/style/Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (module:ol/style/Circle~CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    const fill = new Fill({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    const stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25\n    });\n    defaultStyles = [\n      new Style({\n        image: new CircleStyle({\n          fill: fill,\n          stroke: stroke,\n          radius: 5\n        }),\n        fill: fill,\n        stroke: stroke\n      })\n    ];\n  }\n  return defaultStyles;\n}\n\n\n/**\n * Default styles for editing features.\n * @return {Object<module:ol/geom/GeometryType, Array<module:ol/style/Style>>} Styles\n */\nexport function createEditingStyle() {\n  /** @type {Object<module:ol/geom/GeometryType, Array<module:ol/style/Style>>} */\n  const styles = {};\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  styles[GeometryType.POLYGON] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5]\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_POLYGON] =\n      styles[GeometryType.POLYGON];\n\n  styles[GeometryType.LINE_STRING] = [\n    new Style({\n      stroke: new Stroke({\n        color: white,\n        width: width + 2\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: blue,\n        width: width\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_LINE_STRING] =\n      styles[GeometryType.LINE_STRING];\n\n  styles[GeometryType.CIRCLE] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING]\n      );\n\n\n  styles[GeometryType.POINT] = [\n    new Style({\n      image: new CircleStyle({\n        radius: width * 2,\n        fill: new Fill({\n          color: blue\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width / 2\n        })\n      }),\n      zIndex: Infinity\n    })\n  ];\n  styles[GeometryType.MULTI_POINT] =\n      styles[GeometryType.POINT];\n\n  styles[GeometryType.GEOMETRY_COLLECTION] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING],\n        styles[GeometryType.POINT]\n      );\n\n  return styles;\n}\n\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature to get the geometry for.\n * @return {module:ol/geom/Geometry|module:ol/render/Feature|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;\n","/**\n * @module ol/centerconstraint\n */\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((module:ol/coordinate~Coordinate|undefined)): (module:ol/coordinate~Coordinate|undefined)} Type\n */\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/centerconstraint~Type} The constraint.\n */\nexport function createExtent(extent) {\n  return (\n    /**\n     * @param {module:ol/coordinate~Coordinate=} center Center.\n     * @return {module:ol/coordinate~Coordinate|undefined} Center.\n     */\n    function(center) {\n      if (center) {\n        return [\n          clamp(center[0], extent[0], extent[2]),\n          clamp(center[1], extent[1], extent[3])\n        ];\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate=} center Center.\n * @return {module:ol/coordinate~Coordinate|undefined} Center.\n */\nexport function none(center) {\n  return center;\n}\n","/**\n * @module ol/ViewProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation'\n};\n","/**\n * @module ol/View\n */\nimport {DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {getUid} from './util.js';\nimport {VOID} from './functions.js';\nimport {createExtent, none as centerNone} from './centerconstraint.js';\nimport BaseObject from './Object.js';\nimport {createSnapToResolutions, createSnapToPower} from './resolutionconstraint.js';\nimport {createSnapToZero, createSnapToN, none as rotationNone, disable} from './rotationconstraint.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport {linearFindNearest} from './array.js';\nimport {assert} from './asserts.js';\nimport {add as addCoordinate, rotate as rotateCoordinate, equals as coordinatesEqual} from './coordinate.js';\nimport {inAndOut} from './easing.js';\nimport {getForViewAndSize, getCenter, getHeight, getWidth, isEmpty} from './extent.js';\nimport GeometryType from './geom/GeometryType.js';\nimport {fromExtent as polygonFromExtent} from './geom/Polygon.js';\nimport SimpleGeometry from './geom/SimpleGeometry.js';\nimport {clamp, modulo} from './math.js';\nimport {assign} from './obj.js';\nimport {createProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\n\n\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {module:ol/coordinate~Coordinate} [sourceCenter]\n * @property {module:ol/coordinate~Coordinate} [targetCenter]\n * @property {number} [sourceResolution]\n * @property {number} [targetResolution]\n * @property {number} [sourceRotation]\n * @property {number} [targetRotation]\n * @property {module:ol/coordinate~Coordinate} [anchor]\n * @property {number} start\n * @property {number} duration\n * @property {boolean} complete\n * @property {function(number):number} easing\n * @property {function(boolean)} callback\n */\n\n\n/**\n * @typedef {Object} Constraints\n * @property {module:ol/centerconstraint~Type} center\n * @property {module:ol/resolutionconstraint~Type} resolution\n * @property {module:ol/rotationconstraint~Type} rotation\n */\n\n\n/**\n * @typedef {Object} FitOptions\n * @property {module:ol/size~Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [constrainResolution=true] Constrain the resolution.\n * @property {boolean} [nearest=false] If `constrainResolution` is `true`, get\n * the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean)} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n\n\n/**\n * @typedef {Object} ViewOptions\n * @property {module:ol/coordinate~Coordinate} [center] The initial center for\n * the view. The coordinate system for the center is specified with the\n * `projection` option. Layer sources will not be fetched if this is not set,\n * but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {module:ol/extent~Extent} [extent] The extent that constrains the\n * center, in other words, center cannot be set outside this extent.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {module:ol/proj~ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions to determine the\n * resolution constraint. If set the `maxResolution`, `minResolution`,\n * `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view. The initial\n * resolution is determined using the {@link #constrainResolution} method.\n * @property {number} [zoomFactor=2] The zoom factor used to determine the\n * resolution constraint.\n */\n\n\n/**\n * @typedef {Object} AnimationOptions\n * @property {module:ol/coordinate~Coordinate|undefined} center The center of the view at the end of\n * the animation.\n * @property {number|undefined} zoom The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number|undefined} resolution The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number|undefined} rotation The rotation of the view at the end of\n * the animation.\n * @property {module:ol/coordinate~Coordinate|undefined} anchor Optional anchor to remained fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {module:ol/coordinate~Coordinate} center\n * @property {module:ol/proj/Projection} projection\n * @property {number} resolution\n * @property {number} rotation\n * @property {number} zoom\n */\n\n\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nconst DEFAULT_MIN_ZOOM = 0;\n\n\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * ### The view states\n *\n * An View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * An View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view. Any value can be passed to the setters. And the value\n * that is passed to a setter will effectively be the value set in the view,\n * and returned by the corresponding getter.\n *\n * But a View object also has a *resolution constraint*, a\n * *rotation constraint* and a *center constraint*.\n *\n * As said above, no constraints are applied when the setters are used to set\n * new states for the view. Applying constraints is done explicitly through\n * the use of the `constrain*` functions (`constrainResolution` and\n * `constrainRotation` and `constrainCenter`).\n *\n * The main users of the constraints are the interactions and the\n * controls. For example, double-clicking on the map changes the view to\n * the \"next\" resolution. And releasing the fingers after pinch-zooming\n * snaps to the closest resolution (with an animation).\n *\n * The *resolution constraint* snaps to specific resolutions. It is\n * determined by the following options: `resolutions`, `maxResolution`,\n * `maxZoom`, and `zoomFactor`. If `resolutions` is set, the other three\n * options are ignored. See documentation for each option for more\n * information.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default the rotation value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the center is not constrained at all.\n *\n  * @api\n */\nclass View extends BaseObject {\n\n  /**\n   * @param {module:ol/View~ViewOptions=} opt_options View options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = assign({}, opt_options);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.hints_ = [0, 0];\n\n    /**\n     * @private\n     * @type {Array<Array<module:ol/View~Animation>>}\n     */\n    this.animations_ = [];\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.updateAnimationKey_;\n\n    this.updateAnimations_ = this.updateAnimations_.bind(this);\n\n    /**\n     * @private\n     * @const\n     * @type {module:ol/proj/Projection}\n     */\n    this.projection_ = createProjection(options.projection, 'EPSG:3857');\n\n    this.applyOptions_(options);\n  }\n\n  /**\n   * Set up the view with the given options.\n   * @param {module:ol/View~ViewOptions} options View options.\n   */\n  applyOptions_(options) {\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = {};\n    properties[ViewProperty.CENTER] = options.center !== undefined ?\n      options.center : null;\n\n    const resolutionConstraintInfo = createResolutionConstraint(options);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n    /**\n     * @private\n     * @type {Array<number>|undefined}\n     */\n    this.resolutions_ = options.resolutions;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n    const centerConstraint = createCenterConstraint(options);\n    const resolutionConstraint = resolutionConstraintInfo.constraint;\n    const rotationConstraint = createRotationConstraint(options);\n\n    /**\n     * @private\n     * @type {module:ol/View~Constraints}\n     */\n    this.constraints_ = {\n      center: centerConstraint,\n      resolution: resolutionConstraint,\n      rotation: rotationConstraint\n    };\n\n    if (options.resolution !== undefined) {\n      properties[ViewProperty.RESOLUTION] = options.resolution;\n    } else if (options.zoom !== undefined) {\n      properties[ViewProperty.RESOLUTION] = this.constrainResolution(\n        this.maxResolution_, options.zoom - this.minZoom_);\n\n      if (this.resolutions_) { // in case map zoom is out of min/max zoom range\n        properties[ViewProperty.RESOLUTION] = clamp(\n          Number(this.getResolution() || properties[ViewProperty.RESOLUTION]),\n          this.minResolution_, this.maxResolution_);\n      }\n    }\n    properties[ViewProperty.ROTATION] = options.rotation !== undefined ? options.rotation : 0;\n    this.setProperties(properties);\n\n    /**\n     * @private\n     * @type {module:ol/View~ViewOptions}\n     */\n    this.options_ = options;\n\n  }\n\n  /**\n   * Get an updated version of the view options used to construct the view.  The\n   * current resolution (or zoom), center, and rotation are applied to any stored\n   * options.  The provided options can be used to apply new min/max zoom or\n   * resolution limits.\n   * @param {module:ol/View~ViewOptions} newOptions New options to be applied.\n   * @return {module:ol/View~ViewOptions} New options updated with the current view state.\n   */\n  getUpdatedOptions_(newOptions) {\n    const options = assign({}, this.options_);\n\n    // preserve resolution (or zoom)\n    if (options.resolution !== undefined) {\n      options.resolution = this.getResolution();\n    } else {\n      options.zoom = this.getZoom();\n    }\n\n    // preserve center\n    options.center = this.getCenter();\n\n    // preserve rotation\n    options.rotation = this.getRotation();\n\n    return assign({}, options, newOptions);\n  }\n\n  /**\n   * Animate the view.  The view's center, zoom (or resolution), and rotation\n   * can be animated for smooth transitions between view states.  For example,\n   * to animate the view to a new zoom level:\n   *\n   *     view.animate({zoom: view.getZoom() + 1});\n   *\n   * By default, the animation lasts one second and uses in-and-out easing.  You\n   * can customize this behavior by including `duration` (in milliseconds) and\n   * `easing` options (see {@link module:ol/easing}).\n   *\n   * To chain together multiple animations, call the method with multiple\n   * animation objects.  For example, to first zoom and then pan:\n   *\n   *     view.animate({zoom: 10}, {center: [0, 0]});\n   *\n   * If you provide a function as the last argument to the animate method, it\n   * will get called at the end of an animation series.  The callback will be\n   * called with `true` if the animation series completed on its own or `false`\n   * if it was cancelled.\n   *\n   * Animations are cancelled by user interactions (e.g. dragging the map) or by\n   * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n   * (or another method that calls one of these).\n   *\n   * @param {...(module:ol/View~AnimationOptions|function(boolean))} var_args Animation\n   *     options.  Multiple animations can be run in series by passing multiple\n   *     options objects.  To run multiple animations in parallel, call the method\n   *     multiple times.  An optional callback can be provided as a final\n   *     argument.  The callback will be called with a boolean indicating whether\n   *     the animation completed without being cancelled.\n   * @api\n   */\n  animate(var_args) {\n    let animationCount = arguments.length;\n    let callback;\n    if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {\n      callback = arguments[animationCount - 1];\n      --animationCount;\n    }\n    if (!this.isDef()) {\n      // if view properties are not yet set, shortcut to the final state\n      const state = arguments[animationCount - 1];\n      if (state.center) {\n        this.setCenter(state.center);\n      }\n      if (state.zoom !== undefined) {\n        this.setZoom(state.zoom);\n      }\n      if (state.rotation !== undefined) {\n        this.setRotation(state.rotation);\n      }\n      if (callback) {\n        animationCallback(callback, true);\n      }\n      return;\n    }\n    let start = Date.now();\n    let center = this.getCenter().slice();\n    let resolution = this.getResolution();\n    let rotation = this.getRotation();\n    const series = [];\n    for (let i = 0; i < animationCount; ++i) {\n      const options = /** @type {module:ol/View~AnimationOptions} */ (arguments[i]);\n\n      const animation = /** @type {module:ol/View~Animation} */ ({\n        start: start,\n        complete: false,\n        anchor: options.anchor,\n        duration: options.duration !== undefined ? options.duration : 1000,\n        easing: options.easing || inAndOut\n      });\n\n      if (options.center) {\n        animation.sourceCenter = center;\n        animation.targetCenter = options.center;\n        center = animation.targetCenter;\n      }\n\n      if (options.zoom !== undefined) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = this.constrainResolution(\n          this.maxResolution_, options.zoom - this.minZoom_, 0);\n        resolution = animation.targetResolution;\n      } else if (options.resolution) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = options.resolution;\n        resolution = animation.targetResolution;\n      }\n\n      if (options.rotation !== undefined) {\n        animation.sourceRotation = rotation;\n        const delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n        animation.targetRotation = rotation + delta;\n        rotation = animation.targetRotation;\n      }\n\n      animation.callback = callback;\n\n      // check if animation is a no-op\n      if (isNoopAnimation(animation)) {\n        animation.complete = true;\n        // we still push it onto the series for callback handling\n      } else {\n        start += animation.duration;\n      }\n      series.push(animation);\n    }\n    this.animations_.push(series);\n    this.setHint(ViewHint.ANIMATING, 1);\n    this.updateAnimations_();\n  }\n\n  /**\n   * Determine if the view is being animated.\n   * @return {boolean} The view is being animated.\n   * @api\n   */\n  getAnimating() {\n    return this.hints_[ViewHint.ANIMATING] > 0;\n  }\n\n  /**\n   * Determine if the user is interacting with the view, such as panning or zooming.\n   * @return {boolean} The view is being interacted with.\n   * @api\n   */\n  getInteracting() {\n    return this.hints_[ViewHint.INTERACTING] > 0;\n  }\n\n  /**\n   * Cancel any ongoing animations.\n   * @api\n   */\n  cancelAnimations() {\n    this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n    for (let i = 0, ii = this.animations_.length; i < ii; ++i) {\n      const series = this.animations_[i];\n      if (series[0].callback) {\n        animationCallback(series[0].callback, false);\n      }\n    }\n    this.animations_.length = 0;\n  }\n\n  /**\n   * Update all animations.\n   */\n  updateAnimations_() {\n    if (this.updateAnimationKey_ !== undefined) {\n      cancelAnimationFrame(this.updateAnimationKey_);\n      this.updateAnimationKey_ = undefined;\n    }\n    if (!this.getAnimating()) {\n      return;\n    }\n    const now = Date.now();\n    let more = false;\n    for (let i = this.animations_.length - 1; i >= 0; --i) {\n      const series = this.animations_[i];\n      let seriesComplete = true;\n      for (let j = 0, jj = series.length; j < jj; ++j) {\n        const animation = series[j];\n        if (animation.complete) {\n          continue;\n        }\n        const elapsed = now - animation.start;\n        let fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n        if (fraction >= 1) {\n          animation.complete = true;\n          fraction = 1;\n        } else {\n          seriesComplete = false;\n        }\n        const progress = animation.easing(fraction);\n        if (animation.sourceCenter) {\n          const x0 = animation.sourceCenter[0];\n          const y0 = animation.sourceCenter[1];\n          const x1 = animation.targetCenter[0];\n          const y1 = animation.targetCenter[1];\n          const x = x0 + progress * (x1 - x0);\n          const y = y0 + progress * (y1 - y0);\n          this.set(ViewProperty.CENTER, [x, y]);\n        }\n        if (animation.sourceResolution && animation.targetResolution) {\n          const resolution = progress === 1 ?\n            animation.targetResolution :\n            animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);\n          if (animation.anchor) {\n            this.set(ViewProperty.CENTER,\n              this.calculateCenterZoom(resolution, animation.anchor));\n          }\n          this.set(ViewProperty.RESOLUTION, resolution);\n        }\n        if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {\n          const rotation = progress === 1 ?\n            modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :\n            animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);\n          if (animation.anchor) {\n            this.set(ViewProperty.CENTER,\n              this.calculateCenterRotate(rotation, animation.anchor));\n          }\n          this.set(ViewProperty.ROTATION, rotation);\n        }\n        more = true;\n        if (!animation.complete) {\n          break;\n        }\n      }\n      if (seriesComplete) {\n        this.animations_[i] = null;\n        this.setHint(ViewHint.ANIMATING, -1);\n        const callback = series[0].callback;\n        if (callback) {\n          animationCallback(callback, true);\n        }\n      }\n    }\n    // prune completed series\n    this.animations_ = this.animations_.filter(Boolean);\n    if (more && this.updateAnimationKey_ === undefined) {\n      this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_);\n    }\n  }\n\n  /**\n   * @param {number} rotation Target rotation.\n   * @param {module:ol/coordinate~Coordinate} anchor Rotation anchor.\n   * @return {module:ol/coordinate~Coordinate|undefined} Center for rotation and anchor.\n   */\n  calculateCenterRotate(rotation, anchor) {\n    let center;\n    const currentCenter = this.getCenter();\n    if (currentCenter !== undefined) {\n      center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n      rotateCoordinate(center, rotation - this.getRotation());\n      addCoordinate(center, anchor);\n    }\n    return center;\n  }\n\n  /**\n   * @param {number} resolution Target resolution.\n   * @param {module:ol/coordinate~Coordinate} anchor Zoom anchor.\n   * @return {module:ol/coordinate~Coordinate|undefined} Center for resolution and anchor.\n   */\n  calculateCenterZoom(resolution, anchor) {\n    let center;\n    const currentCenter = this.getCenter();\n    const currentResolution = this.getResolution();\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n      const y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n      center = [x, y];\n    }\n    return center;\n  }\n\n  /**\n   * @private\n   * @return {module:ol/size~Size} Viewport size or `[100, 100]` when no viewport is found.\n   */\n  getSizeFromViewport_() {\n    const size = [100, 100];\n    const selector = '.ol-viewport[data-view=\"' + getUid(this) + '\"]';\n    const element = document.querySelector(selector);\n    if (element) {\n      const metrics = getComputedStyle(element);\n      size[0] = parseInt(metrics.width, 10);\n      size[1] = parseInt(metrics.height, 10);\n    }\n    return size;\n  }\n\n  /**\n   * Get the constrained center of this view.\n   * @param {module:ol/coordinate~Coordinate|undefined} center Center.\n   * @return {module:ol/coordinate~Coordinate|undefined} Constrained center.\n   * @api\n   */\n  constrainCenter(center) {\n    return this.constraints_.center(center);\n  }\n\n  /**\n   * Get the constrained resolution of this view.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number=} opt_delta Delta. Default is `0`.\n   * @param {number=} opt_direction Direction. Default is `0`.\n   * @return {number|undefined} Constrained resolution.\n   * @api\n   */\n  constrainResolution(resolution, opt_delta, opt_direction) {\n    const delta = opt_delta || 0;\n    const direction = opt_direction || 0;\n    return this.constraints_.resolution(resolution, delta, direction);\n  }\n\n  /**\n   * Get the constrained rotation of this view.\n   * @param {number|undefined} rotation Rotation.\n   * @param {number=} opt_delta Delta. Default is `0`.\n   * @return {number|undefined} Constrained rotation.\n   * @api\n   */\n  constrainRotation(rotation, opt_delta) {\n    const delta = opt_delta || 0;\n    return this.constraints_.rotation(rotation, delta);\n  }\n\n  /**\n   * Get the view center.\n   * @return {module:ol/coordinate~Coordinate|undefined} The center of the view.\n   * @observable\n   * @api\n   */\n  getCenter() {\n    return (\n      /** @type {module:ol/coordinate~Coordinate|undefined} */ (this.get(ViewProperty.CENTER))\n    );\n  }\n\n  /**\n   * @return {module:ol/View~Constraints} Constraints.\n   */\n  getConstraints() {\n    return this.constraints_;\n  }\n\n  /**\n   * @param {Array<number>=} opt_hints Destination array.\n   * @return {Array<number>} Hint.\n   */\n  getHints(opt_hints) {\n    if (opt_hints !== undefined) {\n      opt_hints[0] = this.hints_[0];\n      opt_hints[1] = this.hints_[1];\n      return opt_hints;\n    } else {\n      return this.hints_.slice();\n    }\n  }\n\n  /**\n   * Calculate the extent for the current view state and the passed size.\n   * The size is the pixel dimensions of the box into which the calculated extent\n   * should fit. In most cases you want to get the extent of the entire map,\n   * that is `map.getSize()`.\n   * @param {module:ol/size~Size=} opt_size Box pixel size. If not provided, the size of the\n   * first map that uses this view will be used.\n   * @return {module:ol/extent~Extent} Extent.\n   * @api\n   */\n  calculateExtent(opt_size) {\n    const size = opt_size || this.getSizeFromViewport_();\n    const center = /** @type {!module:ol/coordinate~Coordinate} */ (this.getCenter());\n    assert(center, 1); // The view center is not defined\n    const resolution = /** @type {!number} */ (this.getResolution());\n    assert(resolution !== undefined, 2); // The view resolution is not defined\n    const rotation = /** @type {!number} */ (this.getRotation());\n    assert(rotation !== undefined, 3); // The view rotation is not defined\n\n    return getForViewAndSize(center, resolution, rotation, size);\n  }\n\n  /**\n   * Get the maximum resolution of the view.\n   * @return {number} The maximum resolution of the view.\n   * @api\n   */\n  getMaxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * Get the minimum resolution of the view.\n   * @return {number} The minimum resolution of the view.\n   * @api\n   */\n  getMinResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * Get the maximum zoom level for the view.\n   * @return {number} The maximum zoom level.\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n  }\n\n  /**\n   * Set a new maximum zoom level for the view.\n   * @param {number} zoom The maximum zoom level.\n   * @api\n   */\n  setMaxZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n  }\n\n  /**\n   * Get the minimum zoom level for the view.\n   * @return {number} The minimum zoom level.\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n  }\n\n  /**\n   * Set a new minimum zoom level for the view.\n   * @param {number} zoom The minimum zoom level.\n   * @api\n   */\n  setMinZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n  }\n\n  /**\n   * Get the view projection.\n   * @return {module:ol/proj/Projection} The projection of the view.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * Get the view resolution.\n   * @return {number|undefined} The resolution of the view.\n   * @observable\n   * @api\n   */\n  getResolution() {\n    return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n  }\n\n  /**\n   * Get the resolutions for the view. This returns the array of resolutions\n   * passed to the constructor of the View, or undefined if none were given.\n   * @return {Array<number>|undefined} The resolutions of the view.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {module:ol/size~Size=} opt_size Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   * @api\n   */\n  getResolutionForExtent(extent, opt_size) {\n    const size = opt_size || this.getSizeFromViewport_();\n    const xResolution = getWidth(extent) / size[0];\n    const yResolution = getHeight(extent) / size[1];\n    return Math.max(xResolution, yResolution);\n  }\n\n  /**\n   * Return a function that returns a value between 0 and 1 for a\n   * resolution. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Resolution for value function.\n   */\n  getResolutionForValueFunction(opt_power) {\n    const power = opt_power || 2;\n    const maxResolution = this.maxResolution_;\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} value Value.\n       * @return {number} Resolution.\n       */\n      function(value) {\n        const resolution = maxResolution / Math.pow(power, value * max);\n        return resolution;\n      });\n  }\n\n  /**\n   * Get the view rotation.\n   * @return {number} The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  getRotation() {\n    return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n  }\n\n  /**\n   * Return a function that returns a resolution for a value between\n   * 0 and 1. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Value for resolution function.\n   */\n  getValueForResolutionFunction(opt_power) {\n    const power = opt_power || 2;\n    const maxResolution = this.maxResolution_;\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} resolution Resolution.\n       * @return {number} Value.\n       */\n      function(resolution) {\n        const value = (Math.log(maxResolution / resolution) / Math.log(power)) / max;\n        return value;\n      });\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio for center rounding.\n   * @return {module:ol/View~State} View state.\n   */\n  getState(pixelRatio) {\n    const center = /** @type {module:ol/coordinate~Coordinate} */ (this.getCenter());\n    const projection = this.getProjection();\n    const resolution = /** @type {number} */ (this.getResolution());\n    const pixelResolution = resolution / pixelRatio;\n    const rotation = this.getRotation();\n    return (\n      /** @type {module:ol/View~State} */ ({\n        center: [\n          Math.round(center[0] / pixelResolution) * pixelResolution,\n          Math.round(center[1] / pixelResolution) * pixelResolution\n        ],\n        projection: projection !== undefined ? projection : null,\n        resolution: resolution,\n        rotation: rotation,\n        zoom: this.getZoom()\n      })\n    );\n  }\n\n  /**\n   * Get the current zoom level.  If you configured your view with a resolutions\n   * array (this is rare), this method may return non-integer zoom levels (so\n   * the zoom level is not safe to use as an index into a resolutions array).\n   * @return {number|undefined} Zoom.\n   * @api\n   */\n  getZoom() {\n    let zoom;\n    const resolution = this.getResolution();\n    if (resolution !== undefined) {\n      zoom = this.getZoomForResolution(resolution);\n    }\n    return zoom;\n  }\n\n  /**\n   * Get the zoom level for a resolution.\n   * @param {number} resolution The resolution.\n   * @return {number|undefined} The zoom level for the provided resolution.\n   * @api\n   */\n  getZoomForResolution(resolution) {\n    let offset = this.minZoom_ || 0;\n    let max, zoomFactor;\n    if (this.resolutions_) {\n      const nearest = linearFindNearest(this.resolutions_, resolution, 1);\n      offset = nearest;\n      max = this.resolutions_[nearest];\n      if (nearest == this.resolutions_.length - 1) {\n        zoomFactor = 2;\n      } else {\n        zoomFactor = max / this.resolutions_[nearest + 1];\n      }\n    } else {\n      max = this.maxResolution_;\n      zoomFactor = this.zoomFactor_;\n    }\n    return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n  }\n\n  /**\n   * Get the resolution for a zoom level.\n   * @param {number} zoom Zoom level.\n   * @return {number} The view resolution for the provided zoom level.\n   * @api\n   */\n  getResolutionForZoom(zoom) {\n    return /** @type {number} */ (this.constrainResolution(\n      this.maxResolution_, zoom - this.minZoom_, 0));\n  }\n\n  /**\n   * Fit the given geometry or extent based on the given map size and border.\n   * The size is pixel dimensions of the box to fit the extent into.\n   * In most cases you will want to use the map size, that is `map.getSize()`.\n   * Takes care of the map angle.\n   * @param {module:ol/geom/SimpleGeometry|module:ol/extent~Extent} geometryOrExtent The geometry or\n   *     extent to fit the view to.\n   * @param {module:ol/View~FitOptions=} opt_options Options.\n   * @api\n   */\n  fit(geometryOrExtent, opt_options) {\n    const options = opt_options || {};\n    let size = options.size;\n    if (!size) {\n      size = this.getSizeFromViewport_();\n    }\n    /** @type {module:ol/geom/SimpleGeometry} */\n    let geometry;\n    if (!(geometryOrExtent instanceof SimpleGeometry)) {\n      assert(Array.isArray(geometryOrExtent),\n        24); // Invalid extent or geometry provided as `geometry`\n      assert(!isEmpty(geometryOrExtent),\n        25); // Cannot fit empty extent provided as `geometry`\n      geometry = polygonFromExtent(geometryOrExtent);\n    } else if (geometryOrExtent.getType() === GeometryType.CIRCLE) {\n      geometryOrExtent = geometryOrExtent.getExtent();\n      geometry = polygonFromExtent(geometryOrExtent);\n      geometry.rotate(this.getRotation(), getCenter(geometryOrExtent));\n    } else {\n      geometry = geometryOrExtent;\n    }\n\n    const padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n    const constrainResolution = options.constrainResolution !== undefined ?\n      options.constrainResolution : true;\n    const nearest = options.nearest !== undefined ? options.nearest : false;\n    let minResolution;\n    if (options.minResolution !== undefined) {\n      minResolution = options.minResolution;\n    } else if (options.maxZoom !== undefined) {\n      minResolution = this.constrainResolution(\n        this.maxResolution_, options.maxZoom - this.minZoom_, 0);\n    } else {\n      minResolution = 0;\n    }\n    const coords = geometry.getFlatCoordinates();\n\n    // calculate rotated extent\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(-rotation);\n    let sinAngle = Math.sin(-rotation);\n    let minRotX = +Infinity;\n    let minRotY = +Infinity;\n    let maxRotX = -Infinity;\n    let maxRotY = -Infinity;\n    const stride = geometry.getStride();\n    for (let i = 0, ii = coords.length; i < ii; i += stride) {\n      const rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n      const rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n      minRotX = Math.min(minRotX, rotX);\n      minRotY = Math.min(minRotY, rotY);\n      maxRotX = Math.max(maxRotX, rotX);\n      maxRotY = Math.max(maxRotY, rotY);\n    }\n\n    // calculate resolution\n    let resolution = this.getResolutionForExtent(\n      [minRotX, minRotY, maxRotX, maxRotY],\n      [size[0] - padding[1] - padding[3], size[1] - padding[0] - padding[2]]);\n    resolution = isNaN(resolution) ? minResolution :\n      Math.max(resolution, minResolution);\n    if (constrainResolution) {\n      let constrainedResolution = this.constrainResolution(resolution, 0, 0);\n      if (!nearest && constrainedResolution < resolution) {\n        constrainedResolution = this.constrainResolution(\n          constrainedResolution, -1, 0);\n      }\n      resolution = constrainedResolution;\n    }\n\n    // calculate center\n    sinAngle = -sinAngle; // go back to original rotation\n    let centerRotX = (minRotX + maxRotX) / 2;\n    let centerRotY = (minRotY + maxRotY) / 2;\n    centerRotX += (padding[1] - padding[3]) / 2 * resolution;\n    centerRotY += (padding[0] - padding[2]) / 2 * resolution;\n    const centerX = centerRotX * cosAngle - centerRotY * sinAngle;\n    const centerY = centerRotY * cosAngle + centerRotX * sinAngle;\n    const center = [centerX, centerY];\n    const callback = options.callback ? options.callback : VOID;\n\n    if (options.duration !== undefined) {\n      this.animate({\n        resolution: resolution,\n        center: center,\n        duration: options.duration,\n        easing: options.easing\n      }, callback);\n    } else {\n      this.setResolution(resolution);\n      this.setCenter(center);\n      animationCallback(callback, true);\n    }\n  }\n\n  /**\n   * Center on coordinate and view position.\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {module:ol/size~Size} size Box pixel size.\n   * @param {module:ol/pixel~Pixel} position Position on the view to center on.\n   * @api\n   */\n  centerOn(coordinate, size, position) {\n    // calculate rotated position\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(-rotation);\n    let sinAngle = Math.sin(-rotation);\n    let rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    let rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    const resolution = this.getResolution();\n    rotX += (size[0] / 2 - position[0]) * resolution;\n    rotY += (position[1] - size[1] / 2) * resolution;\n\n    // go back to original angle\n    sinAngle = -sinAngle; // go back to original rotation\n    const centerX = rotX * cosAngle - rotY * sinAngle;\n    const centerY = rotY * cosAngle + rotX * sinAngle;\n\n    this.setCenter([centerX, centerY]);\n  }\n\n  /**\n   * @return {boolean} Is defined.\n   */\n  isDef() {\n    return !!this.getCenter() && this.getResolution() !== undefined;\n  }\n\n  /**\n   * Rotate the view around a given coordinate.\n   * @param {number} rotation New rotation value for the view.\n   * @param {module:ol/coordinate~Coordinate=} opt_anchor The rotation center.\n   * @api\n   */\n  rotate(rotation, opt_anchor) {\n    if (opt_anchor !== undefined) {\n      const center = this.calculateCenterRotate(rotation, opt_anchor);\n      this.setCenter(center);\n    }\n    this.setRotation(rotation);\n  }\n\n  /**\n   * Set the center of the current view.\n   * @param {module:ol/coordinate~Coordinate|undefined} center The center of the view.\n   * @observable\n   * @api\n   */\n  setCenter(center) {\n    this.set(ViewProperty.CENTER, center);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * @param {module:ol/ViewHint} hint Hint.\n   * @param {number} delta Delta.\n   * @return {number} New value.\n   */\n  setHint(hint, delta) {\n    this.hints_[hint] += delta;\n    this.changed();\n    return this.hints_[hint];\n  }\n\n  /**\n   * Set the resolution for this view.\n   * @param {number|undefined} resolution The resolution of the view.\n   * @observable\n   * @api\n   */\n  setResolution(resolution) {\n    this.set(ViewProperty.RESOLUTION, resolution);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * Set the rotation for this view.\n   * @param {number} rotation The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  setRotation(rotation) {\n    this.set(ViewProperty.ROTATION, rotation);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * Zoom to a specific zoom level.\n   * @param {number} zoom Zoom level.\n   * @api\n   */\n  setZoom(zoom) {\n    this.setResolution(this.getResolutionForZoom(zoom));\n  }\n}\n\n\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n  setTimeout(function() {\n    callback(returnValue);\n  }, 0);\n}\n\n\n/**\n * @param {module:ol/View~ViewOptions} options View options.\n * @return {module:ol/centerconstraint~Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n  if (options.extent !== undefined) {\n    return createExtent(options.extent);\n  } else {\n    return centerNone;\n  }\n}\n\n\n/**\n * @param {module:ol/View~ViewOptions} options View options.\n * @return {{constraint: module:ol/resolutionconstraint~Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n  let resolutionConstraint;\n  let maxResolution;\n  let minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  const defaultMaxZoom = 28;\n  const defaultZoomFactor = 2;\n\n  let minZoom = options.minZoom !== undefined ?\n    options.minZoom : DEFAULT_MIN_ZOOM;\n\n  let maxZoom = options.maxZoom !== undefined ?\n    options.maxZoom : defaultMaxZoom;\n\n  const zoomFactor = options.zoomFactor !== undefined ?\n    options.zoomFactor : defaultZoomFactor;\n\n  if (options.resolutions !== undefined) {\n    const resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution = resolutions[maxZoom] !== undefined ?\n      resolutions[maxZoom] : resolutions[resolutions.length - 1];\n    resolutionConstraint = createSnapToResolutions(\n      resolutions);\n  } else {\n    // calculate the default min and max resolution\n    const projection = createProjection(options.projection, 'EPSG:3857');\n    const extent = projection.getExtent();\n    const size = !extent ?\n      // use an extent that can fit the whole world if need be\n      360 * METERS_PER_UNIT[Units.DEGREES] /\n            projection.getMetersPerUnit() :\n      Math.max(getWidth(extent), getHeight(extent));\n\n    const defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(\n      defaultZoomFactor, DEFAULT_MIN_ZOOM);\n\n    const defaultMinResolution = defaultMaxResolution / Math.pow(\n      defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom = minZoom + Math.floor(\n      Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    resolutionConstraint = createSnapToPower(\n      zoomFactor, maxResolution, maxZoom - minZoom);\n  }\n  return {constraint: resolutionConstraint, maxResolution: maxResolution,\n    minResolution: minResolution, minZoom: minZoom, zoomFactor: zoomFactor};\n}\n\n\n/**\n * @param {module:ol/View~ViewOptions} options View options.\n * @return {module:ol/rotationconstraint~Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n  const enableRotation = options.enableRotation !== undefined ?\n    options.enableRotation : true;\n  if (enableRotation) {\n    const constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return createSnapToZero();\n    } else if (constrainRotation === false) {\n      return rotationNone;\n    } else if (typeof constrainRotation === 'number') {\n      return createSnapToN(constrainRotation);\n    } else {\n      return rotationNone;\n    }\n  } else {\n    return disable;\n  }\n}\n\n\n/**\n * Determine if an animation involves no view change.\n * @param {module:ol/View~Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n}\n\nexport default View;\n","/**\n * @module ol/resolutionconstraint\n */\nimport {linearFindNearest} from './array.js';\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number, number): (number|undefined)} Type\n */\n\n\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @return {module:ol/resolutionconstraint~Type} Zoom function.\n */\nexport function createSnapToResolutions(resolutions) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        let z = linearFindNearest(resolutions, resolution, direction);\n        z = clamp(z + delta, 0, resolutions.length - 1);\n        const index = Math.floor(z);\n        if (z != index && index < resolutions.length - 1) {\n          const power = resolutions[index] / resolutions[index + 1];\n          return resolutions[index] / Math.pow(power, z - index);\n        } else {\n          return resolutions[index];\n        }\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number=} opt_maxLevel Maximum level.\n * @return {module:ol/resolutionconstraint~Type} Zoom function.\n */\nexport function createSnapToPower(power, maxResolution, opt_maxLevel) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        const offset = -direction / 2 + 0.5;\n        const oldLevel = Math.floor(\n          Math.log(maxResolution / resolution) / Math.log(power) + offset);\n        let newLevel = Math.max(oldLevel + delta, 0);\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel);\n        }\n        return maxResolution / Math.pow(power, newLevel);\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module olcs.core.OLImageryProvider\n */\nimport {get as getProjection} from 'ol/proj.js';\nimport olcsUtil from '../util.js';\n\nclass OLImageryProvider /* should not extend Cesium.ImageryProvider */ {\n  /**\n   * Special class derived from Cesium.ImageryProvider\n   * that is connected to the given ol.source.TileImage.\n   * @param {!ol.Map} olMap\n   * @param {!ol.source.TileImage} source\n   * @param {ol.proj.Projection=} opt_fallbackProj Projection to assume if the\n   *                                               projection of the source is not defined.\n   * @constructor\n   * @extends {Cesium.ImageryProvider}\n   */\n  constructor(olMap, source, opt_fallbackProj) {\n    // Do not extend or call super constructor from\n    // Cesium.ImageryProvider since this particular function is a\n    // 'non instanciable interface' which throws on instanciation.\n\n    /**\n     * @type {!ol.source.TileImage}\n     * @private\n     */\n    this.source_ = source;\n\n    /**\n     * @type {?ol.proj.Projection}\n     * @private\n     */\n    this.projection_ = null;\n\n    /**\n     * @type {?ol.proj.Projection}\n     * @private\n     */\n    this.fallbackProj_ = opt_fallbackProj || null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ready_ = false;\n\n    /**\n     * @type {?Cesium.TilingScheme}\n     * @private\n     */\n    this.tilingScheme_ = null;\n\n    /**\n     * @type {?Cesium.Rectangle}\n     * @private\n     */\n    this.rectangle_ = null;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = olMap;\n\n    const proxy = this.source_.get('olcs.proxy');\n    if (proxy) {\n      if (typeof proxy === 'function') {\n        this.proxy_ = {\n          'getURL': proxy\n        };\n      } else if (typeof proxy === 'string') {\n        this.proxy_ = new Cesium.DefaultProxy(proxy);\n      }\n    }\n\n    this.errorEvent_ = new Cesium.Event();\n\n    this.emptyCanvas_ = document.createElement('canvas');\n    this.emptyCanvas_.width = 1;\n    this.emptyCanvas_.height = 1;\n\n    this.source_.on('change', (e) => {\n      this.handleSourceChanged_();\n    });\n    this.handleSourceChanged_();\n  }\n\n  /**\n   * Checks if the underlying source is ready and cached required data.\n   * @private\n   */\n  handleSourceChanged_(frameState) {\n    if (!this.ready_ && this.source_.getState() == 'ready') {\n      this.projection_ = olcsUtil.getSourceProjection(this.source_) || this.fallbackProj_;\n      if (this.projection_ == getProjection('EPSG:4326')) {\n        this.tilingScheme_ = new Cesium.GeographicTilingScheme();\n      } else if (this.projection_ == getProjection('EPSG:3857')) {\n        this.tilingScheme_ = new Cesium.WebMercatorTilingScheme();\n      } else {\n        return;\n      }\n      this.rectangle_ = this.tilingScheme_.rectangle;\n\n      this.ready_ = true;\n    }\n  }\n\n  /**\n   * Generates the proper attributions for a given position and zoom\n   * level.\n   * @export\n   * @override\n   */\n  getTileCredits(x, y, level) {\n    const olExtent = this.map_.getView().calculateExtent(this.map_.getSize());\n    const zoom = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n\n    const frameState = {\n      viewState: {zoom},\n      extent: olExtent\n    };\n\n    const attributionsFunction = this.source_.getAttributions();\n    if (!attributionsFunction) {\n      return [];\n    }\n    let attributions = attributionsFunction(frameState);\n    if (!Array.isArray(attributions)) {\n      attributions = [attributions];\n    }\n\n    return attributions.map(html => new Cesium.Credit(html, true));\n  }\n\n  /**\n   * @export\n   * @override\n   */\n  requestImage(x, y, level) {\n    const tileUrlFunction = this.source_.getTileUrlFunction();\n    if (tileUrlFunction && this.projection_) {\n\n      // Perform mapping of Cesium tile coordinates to OpenLayers tile coordinates:\n      // 1) Cesium zoom level 0 is OpenLayers zoom level 1 for EPSG:4326\n      const z_ = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n      // 2) OpenLayers tile coordinates increase from bottom to top\n      const y_ = -y - 1;\n\n      let url = tileUrlFunction.call(this.source_,\n          [z_, x, y_], 1, this.projection_);\n      if (this.proxy_) {\n        url = this.proxy_.getURL(url);\n      }\n      return url ? Cesium.ImageryProvider.loadImage(this, url) : this.emptyCanvas_;\n    } else {\n      // return empty canvas to stop Cesium from retrying later\n      return this.emptyCanvas_;\n    }\n  }\n}\n\n// definitions of getters that are required to be present\n// in the Cesium.ImageryProvider instance:\nObject.defineProperties(OLImageryProvider.prototype, {\n  'ready': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.ready_;}\n  },\n\n  'rectangle': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.rectangle_;}\n  },\n\n  'tileWidth': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? (Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[0] : tg.getTileSize(0)) : 256;\n        }\n  },\n\n  'tileHeight': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? (Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[1] : tg.getTileSize(0)) : 256;\n        }\n  },\n\n  'maximumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getMaxZoom() : 18;\n        }\n  },\n\n  'minimumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          // WARNING: Do not use the minimum level (at least until the extent is\n          // properly set). Cesium assumes the minimumLevel to contain only\n          // a few tiles and tries to load them all at once -- this can\n          // freeze and/or crash the browser !\n          return 0;\n          //var tg = this.source_.getTileGrid();\n          //return tg ? tg.getMinZoom() : 0;\n        }\n  },\n\n  'tilingScheme': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tilingScheme_;}\n  },\n\n  'tileDiscardPolicy': {\n    'get': function() {return undefined;}\n  },\n\n  'errorEvent': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.errorEvent_;}\n  },\n\n  'proxy': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.proxy_;}\n  },\n\n  'hasAlphaChannel': {\n    'get': function() {return true;}\n  },\n\n  'pickFeatures': {\n    'get': function() {return undefined;}\n  }\n});\n\n\nexport default OLImageryProvider;\n","/**\n * @module olcs.core\n */\nconst exports = {};\nimport {linear as linearEasing} from 'ol/easing.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport {get as getProjection, transformExtent} from 'ol/proj.js';\nimport olSourceImageStatic from 'ol/source/ImageStatic';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport olSourceTileImage from 'ol/source/TileImage.js';\nimport olSourceTileWMS from 'ol/source/TileWMS.js';\nimport {defaultImageLoadFunction} from 'ol/source/Image.js';\nimport olcsCoreOLImageryProvider from './core/OLImageryProvider.js';\nimport olcsUtil from './util.js';\n\n\n/**\n * Compute the pixel width and height of a point in meters using the\n * camera frustum.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @return {!Cesium.Cartesian2} the pixel size\n * @api\n */\nexports.computePixelSizeAtCoordinate = function(scene, target) {\n  const camera = scene.camera;\n  const canvas = scene.canvas;\n  const frustum = camera.frustum;\n  const distance = Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(\n      camera.position, target, new Cesium.Cartesian3()));\n  const pixelSize = new Cesium.Cartesian2();\n  return frustum.getPixelDimensions(canvas.clientWidth, canvas.clientHeight,\n      distance, pixelSize);\n};\n\n\n/**\n * Compute bounding box around a target point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @param {number} amount Half the side of the box, in pixels.\n * @return {Array<Cesium.Cartographic>} bottom left and top right\n * coordinates of the box\n */\nexports.computeBoundingBoxAtTarget = function(scene, target, amount) {\n  const pixelSize = exports.computePixelSizeAtCoordinate(scene, target);\n  const transform = Cesium.Transforms.eastNorthUpToFixedFrame(target);\n\n  const bottomLeft = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(-pixelSize.x * amount, -pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  const topRight = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(pixelSize.x * amount, pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray(\n      [bottomLeft, topRight]);\n};\n\n\n/**\n *\n * @param {!ol.geom.Geometry} geometry\n * @param {number} height\n * @api\n */\nexports.applyHeightOffsetToGeometry = function(geometry, height) {\n  geometry.applyTransform((input, output, stride) => {\n    console.assert(input === output);\n    if (stride !== undefined && stride >= 3) {\n      for (let i = 0; i < output.length; i += stride) {\n        output[i + 2] = output[i + 2] + height;\n      }\n    }\n    return output;\n  });\n};\n\n\n/**\n * @param {ol.Coordinate} coordinates\n * @param {number=} rotation\n * @param {!Cesium.Cartesian3=} translation\n * @param {!Cesium.Cartesian3=} scale\n * @return {!Cesium.Matrix4}\n * @api\n */\nexports.createMatrixAtCoordinates = function(coordinates, rotation = 0, translation = Cesium.Cartesian3.ZERO, scale = new Cesium.Cartesian3(1, 1, 1)) {\n  const position = exports.ol4326CoordinateToCesiumCartesian(coordinates);\n  const rawMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(position);\n  const quaternion = Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Z, -rotation);\n  const rotationMatrix = Cesium.Matrix4.fromTranslationQuaternionRotationScale(translation, quaternion, scale);\n  return Cesium.Matrix4.multiply(rawMatrix, rotationMatrix, new Cesium.Matrix4());\n};\n\n\n/**\n * @param {!Cesium.Camera} camera\n * @param {number} angle\n * @param {!Cesium.Cartesian3} axis\n * @param {!Cesium.Matrix4} transform\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.rotateAroundAxis = function(camera, angle, axis, transform,\n    opt_options) {\n  const clamp = Cesium.Math.clamp;\n  const defaultValue = Cesium.defaultValue;\n\n  const options = opt_options || {};\n  const duration = defaultValue(options.duration, 500); // ms\n  const easing = defaultValue(options.easing, linearEasing);\n  const callback = options.callback;\n\n  let lastProgress = 0;\n  const oldTransform = new Cesium.Matrix4();\n\n  const start = Date.now();\n  const step = function() {\n    const timestamp = Date.now();\n    const timeDifference = timestamp - start;\n    const progress = easing(clamp(timeDifference / duration, 0, 1));\n    console.assert(progress >= lastProgress);\n\n    camera.transform.clone(oldTransform);\n    const stepAngle = (progress - lastProgress) * angle;\n    lastProgress = progress;\n    camera.lookAtTransform(transform);\n    camera.rotate(axis, stepAngle);\n    camera.lookAtTransform(oldTransform);\n\n    if (progress < 1) {\n      window.requestAnimationFrame(step);\n    } else {\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  window.requestAnimationFrame(step);\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} heading\n * @param {!Cesium.Cartesian3} bottomCenter\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.setHeadingUsingBottomCenter = function(scene, heading,\n    bottomCenter, opt_options) {\n  const camera = scene.camera;\n  // Compute the camera position to zenith quaternion\n  const angleToZenith = exports.computeAngleToZenith(scene, bottomCenter);\n  const axis = camera.right;\n  const quaternion = Cesium.Quaternion.fromAxisAngle(axis, angleToZenith);\n  const rotation = Cesium.Matrix3.fromQuaternion(quaternion);\n\n  // Get the zenith point from the rotation of the position vector\n  const vector = new Cesium.Cartesian3();\n  Cesium.Cartesian3.subtract(camera.position, bottomCenter, vector);\n  const zenith = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(rotation, vector, zenith);\n  Cesium.Cartesian3.add(zenith, bottomCenter, zenith);\n\n  // Actually rotate around the zenith normal\n  const transform = Cesium.Matrix4.fromTranslation(zenith);\n  const rotateAroundAxis = exports.rotateAroundAxis;\n  rotateAroundAxis(camera, heading, zenith, transform, opt_options);\n};\n\n\n/**\n * Get the 3D position of the given pixel of the canvas.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian2} pixel\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickOnTerrainOrEllipsoid = function(scene, pixel) {\n  const ray = scene.camera.getPickRay(pixel);\n  const target = scene.globe.pick(ray, scene);\n  return target || scene.camera.pickEllipsoid(pixel);\n};\n\n\n/**\n * Get the 3D position of the point at the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickBottomPoint = function(scene) {\n  const canvas = scene.canvas;\n  const bottom = new Cesium.Cartesian2(\n      canvas.clientWidth / 2, canvas.clientHeight);\n  return exports.pickOnTerrainOrEllipsoid(scene, bottom);\n};\n\n\n/**\n * Get the 3D position of the point at the center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickCenterPoint = function(scene) {\n  const canvas = scene.canvas;\n  const center = new Cesium.Cartesian2(\n      canvas.clientWidth / 2,\n      canvas.clientHeight / 2);\n  return exports.pickOnTerrainOrEllipsoid(scene, center);\n};\n\n\n/**\n * Compute the signed tilt angle on globe, between the opposite of the\n * camera direction and the target normal. Return undefined if there is no\n * intersection of the camera direction with the globe.\n * @param {!Cesium.Scene} scene\n * @return {number|undefined}\n * @api\n */\nexports.computeSignedTiltAngleOnGlobe = function(scene) {\n  const camera = scene.camera;\n  const ray = new Cesium.Ray(camera.position, camera.direction);\n  let target = scene.globe.pick(ray, scene);\n\n  if (!target) {\n    // no tiles in the area were loaded?\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const obj = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);\n    if (obj) {\n      target = Cesium.Ray.getPoint(ray, obj.start);\n    }\n  }\n\n  if (!target) {\n    return undefined;\n  }\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(target, normal);\n\n  const angleBetween = exports.signedAngleBetween;\n  const angle = angleBetween(camera.direction, normal, camera.right) - Math.PI;\n  return Cesium.Math.convertLongitudeRange(angle);\n};\n\n\n/**\n * Compute the ray from the camera to the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Ray}\n */\nexports.bottomFovRay = function(scene) {\n  const camera = scene.camera;\n  const fovy2 = camera.frustum.fovy / 2;\n  const direction = camera.direction;\n  const rotation = Cesium.Quaternion.fromAxisAngle(camera.right, fovy2);\n  const matrix = Cesium.Matrix3.fromQuaternion(rotation);\n  const vector = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(matrix, direction, vector);\n  return new Cesium.Ray(camera.position, vector);\n};\n\n\n/**\n * Compute the angle between two Cartesian3.\n * @param {!Cesium.Cartesian3} first\n * @param {!Cesium.Cartesian3} second\n * @param {!Cesium.Cartesian3} normal Normal to test orientation against.\n * @return {number}\n */\nexports.signedAngleBetween = function(first, second, normal) {\n  // We are using the dot for the angle.\n  // Then the cross and the dot for the sign.\n  const a = new Cesium.Cartesian3();\n  const b = new Cesium.Cartesian3();\n  const c = new Cesium.Cartesian3();\n  Cesium.Cartesian3.normalize(first, a);\n  Cesium.Cartesian3.normalize(second, b);\n  Cesium.Cartesian3.cross(a, b, c);\n\n  const cosine = Cesium.Cartesian3.dot(a, b);\n  const sine = Cesium.Cartesian3.magnitude(c);\n\n  // Sign of the vector product and the orientation normal\n  const sign = Cesium.Cartesian3.dot(normal, c);\n  const angle = Math.atan2(sine, cosine);\n  return sign >= 0 ? angle : -angle;\n};\n\n\n/**\n * Compute the rotation angle around a given point, needed to reach the\n * zenith position.\n * At a zenith position, the camera direction is going througth the earth\n * center and the frustrum bottom ray is going through the chosen pivot\n * point.\n * The bottom-center of the screen is a good candidate for the pivot point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} pivot Point around which the camera rotates.\n * @return {number}\n * @api\n */\nexports.computeAngleToZenith = function(scene, pivot) {\n  // This angle is the sum of the angles 'fy' and 'a', which are defined\n  // using the pivot point and its surface normal.\n  //        Zenith |    camera\n  //           \\   |   /\n  //            \\fy|  /\n  //             \\ |a/\n  //              \\|/pivot\n  const camera = scene.camera;\n  const fy = camera.frustum.fovy / 2;\n  const ray = exports.bottomFovRay(scene);\n  const direction = Cesium.Cartesian3.clone(ray.direction);\n  Cesium.Cartesian3.negate(direction, direction);\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(pivot, normal);\n\n  const left = new Cesium.Cartesian3();\n  Cesium.Cartesian3.negate(camera.right, left);\n\n  const a = exports.signedAngleBetween(normal, direction, left);\n  return a + fy;\n};\n\n\n/**\n * Convert an OpenLayers extent to a Cesium rectangle.\n * @param {ol.Extent} extent Extent.\n * @param {ol.ProjectionLike} projection Extent projection.\n * @return {Cesium.Rectangle} The corresponding Cesium rectangle.\n * @api\n */\nexports.extentToRectangle = function(extent, projection) {\n  if (extent && projection) {\n    const ext = transformExtent(extent, projection, 'EPSG:4326');\n    return Cesium.Rectangle.fromDegrees(ext[0], ext[1], ext[2], ext[3]);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Creates Cesium.ImageryLayer best corresponding to the given ol.layer.Layer.\n * Only supports raster layers and static images\n * @param {!ol.Map} olMap\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Cesium.ImageryLayer} null if not possible (or supported)\n * @api\n */\nexports.tileLayerToImageryLayer = function(olMap, olLayer, viewProj) {\n\n  if (!(olLayer instanceof olLayerTile) && !(olLayer instanceof olLayerImage)) {\n    return null;\n  }\n\n  let provider = null;\n  let source = olLayer.getSource();\n\n  // Convert ImageWMS to TileWMS\n  if (source instanceof olSourceImageWMS && source.getUrl() &&\n    source.getImageLoadFunction() === defaultImageLoadFunction) {\n    const sourceProps = {\n      'olcs.proxy': source.get('olcs.proxy'),\n      'olcs.extent': source.get('olcs.extent'),\n      'olcs.projection': source.get('olcs.projection'),\n      'olcs.imagesource': source\n    };\n    source = new olSourceTileWMS({\n      url: source.getUrl(),\n      attributions: source.getAttributions(),\n      projection: source.getProjection(),\n      params: source.getParams()\n    });\n    source.setProperties(sourceProps);\n  }\n\n  if (source instanceof olSourceTileImage) {\n    let projection = olcsUtil.getSourceProjection(source);\n\n    if (!projection) {\n      // if not explicit, assume the same projection as view\n      projection = viewProj;\n    }\n\n    if (exports.isCesiumProjection(projection)) {\n      provider = new olcsCoreOLImageryProvider(olMap, source, viewProj);\n    }\n    // Projection not supported by Cesium\n    else {\n      return null;\n    }\n\n  } else if (source instanceof olSourceImageStatic) {\n    let projection = olcsUtil.getSourceProjection(source);\n\n    if (!projection) {\n      projection = viewProj;\n    }\n\n    if (exports.isCesiumProjection(projection)) {\n      provider = new Cesium.SingleTileImageryProvider({\n        url: source.getUrl(),\n        rectangle: new Cesium.Rectangle.fromDegrees(\n            source.getImageExtent()[0],\n            source.getImageExtent()[1],\n            source.getImageExtent()[2],\n            source.getImageExtent()[3]\n        )\n      });\n    }\n    // Projection not supported by Cesium\n    else {\n      return null;\n    }\n  } else {\n    // sources other than TileImage|ImageStatic are currently not supported\n    return null;\n  }\n\n  // the provider is always non-null if we got this far\n\n  const layerOptions = {};\n\n  const forcedExtent = /** @type {ol.Extent} */ (olLayer.get('olcs.extent'));\n  const ext = forcedExtent || olLayer.getExtent();\n  if (ext) {\n    layerOptions.rectangle = exports.extentToRectangle(ext, viewProj);\n  }\n\n  const cesiumLayer = new Cesium.ImageryLayer(provider, layerOptions);\n  return cesiumLayer;\n};\n\n\n/**\n * Synchronizes the layer rendering properties (opacity, visible)\n * to the given Cesium ImageryLayer.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.ImageryLayer} csLayer\n * @api\n */\nexports.updateCesiumLayerProperties = function(olLayerWithParents, csLayer) {\n  let opacity = 1;\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerOpacity = olLayer.getOpacity();\n    if (layerOpacity !== undefined) {\n      opacity *= layerOpacity;\n    }\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    }\n  });\n  csLayer.alpha = opacity;\n  csLayer.show = visible;\n};\n\n\n/**\n * Convert a 2D or 3D OpenLayers coordinate to Cesium.\n * @param {ol.Coordinate} coordinate Ol3 coordinate.\n * @return {!Cesium.Cartesian3} Cesium cartesian coordinate\n * @api\n */\nexports.ol4326CoordinateToCesiumCartesian = function(coordinate) {\n  const coo = coordinate;\n  return coo.length > 2 ?\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1], coo[2]) :\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1]);\n};\n\n\n/**\n * Convert an array of 2D or 3D OpenLayers coordinates to Cesium.\n * @param {Array.<!ol.Coordinate>} coordinates Ol3 coordinates.\n * @return {!Array.<Cesium.Cartesian3>} Cesium cartesian coordinates\n * @api\n */\nexports.ol4326CoordinateArrayToCsCartesians = function(coordinates) {\n  console.assert(coordinates !== null);\n  const toCartesian = exports.ol4326CoordinateToCesiumCartesian;\n  const cartesians = [];\n  for (let i = 0; i < coordinates.length; ++i) {\n    cartesians.push(toCartesian(coordinates[i]));\n  }\n  return cartesians;\n};\n\n\n/**\n * Reproject an OpenLayers geometry to EPSG:4326 if needed.\n * The geometry will be cloned only when original projection is not EPSG:4326\n * and the properties will be shallow copied.\n * @param {!T} geometry\n * @param {!ol.ProjectionLike} projection\n * @return {!T}\n * @template T\n * @api\n */\nexports.olGeometryCloneTo4326 = function(geometry, projection) {\n  console.assert(projection);\n\n  const proj4326 = getProjection('EPSG:4326');\n  const proj = getProjection(projection);\n  if (proj !== proj4326) {\n    const properties = geometry.getProperties();\n    geometry = geometry.clone();\n    geometry.transform(proj, proj4326);\n    geometry.setProperties(properties);\n  }\n  return geometry;\n};\n\n\n/**\n * Convert an OpenLayers color to Cesium.\n * @param {ol.Color|CanvasGradient|CanvasPattern|string} olColor\n * @return {!Cesium.Color}\n * @api\n */\nexports.convertColorToCesium = function(olColor) {\n  olColor = olColor || 'black';\n  if (Array.isArray(olColor)) {\n    return new Cesium.Color(\n        Cesium.Color.byteToFloat(olColor[0]),\n        Cesium.Color.byteToFloat(olColor[1]),\n        Cesium.Color.byteToFloat(olColor[2]),\n        olColor[3]\n    );\n  } else if (typeof olColor == 'string') {\n    return Cesium.Color.fromCssColorString(olColor);\n  } else if (olColor instanceof CanvasPattern || olColor instanceof CanvasGradient) {\n    // Render the CanvasPattern/CanvasGradient into a canvas that will be sent to Cesium as material\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = canvas.height = 256;\n    ctx.fillStyle = olColor;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    return new Cesium.ImageMaterialProperty({\n      image: canvas\n    });\n  }\n  console.assert(false, 'impossible');\n};\n\n\n/**\n * Convert an OpenLayers url to Cesium.\n * @param {string} url\n * @return {!olcsx.core.CesiumUrlDefinition}\n * @api\n */\nexports.convertUrlToCesium = function(url) {\n  let subdomains = '';\n  const re = /\\{(\\d|[a-z])-(\\d|[a-z])\\}/;\n  const match = re.exec(url);\n  if (match) {\n    url = url.replace(re, '{s}');\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      subdomains += String.fromCharCode(charCode);\n    }\n  }\n  return {\n    url,\n    subdomains\n  };\n};\n\n\n/**\n * Animate the return to a top-down view from the zenith.\n * The camera is rotated to orient to the North.\n * @param {!ol.Map} map\n * @param {!Cesium.Scene} scene\n * @return {Promise<undefined>}\n * @api\n */\nexports.resetToNorthZenith = function(map, scene) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('Could not get bottom pivot');\n      return;\n    }\n\n    const currentHeading = map.getView().getRotation();\n    if (currentHeading === undefined) {\n      reject('The view is not initialized');\n      return;\n    }\n    const angle = exports.computeAngleToZenith(scene, pivot);\n\n    // Point to North\n    exports.setHeadingUsingBottomCenter(scene, currentHeading, pivot);\n\n    // Go to zenith\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const options = {\n      callback: () => {\n        const view = map.getView();\n        exports.normalizeView(view);\n        resolve();\n      }\n    };\n    exports.rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} angle in radian\n * @return {Promise<undefined>}\n * @api\n */\nexports.rotateAroundBottomCenter = function(scene, angle) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('could not get bottom pivot');\n      return;\n    }\n\n    const options = {callback: resolve};\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const rotateAroundAxis = exports.rotateAroundAxis;\n    rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * Set the OpenLayers view to a specific rotation and\n * the nearest resolution.\n * @param {ol.View} view\n * @param {number=} angle\n * @api\n */\nexports.normalizeView = function(view, angle = 0) {\n  const resolution = view.getResolution();\n  view.setRotation(angle);\n  view.setResolution(view.constrainResolution(resolution));\n};\n\n/**\n * Check if the given projection is managed by Cesium (WGS84 or Mercator Spheric)\n *\n * @param {ol.proj.Projection} projection Projection to check.\n * @returns {boolean} Whether it's managed by Cesium.\n */\nexports.isCesiumProjection = function(projection) {\n  const is3857 = projection === getProjection('EPSG:3857');\n  const is4326 = projection === getProjection('EPSG:4326');\n  return is3857 || is4326;\n};\n\n\nexport default exports;\n","/**\n * @module ol/source/OSM\n */\n\nimport XYZ from '../source/XYZ.js';\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nexport const ATTRIBUTION = '&#169; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {number} [maxZoom=19] Max zoom.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {number} [reprojectionErrorThreshold=1.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url='https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'] URL template.\n * Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n * @api\n */\nclass OSM extends XYZ {\n  /**\n   * @param {module:ol/source/OSM~Options=} [opt_options] Open Street Map options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    let attributions;\n    if (options.attributions !== undefined) {\n      attributions = options.attributions;\n    } else {\n      attributions = [ATTRIBUTION];\n    }\n\n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : 'anonymous';\n\n    const url = options.url !== undefined ?\n      options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n    super({\n      attributions: attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: crossOrigin,\n      opaque: options.opaque !== undefined ? options.opaque : true,\n      maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      url: url,\n      wrapX: options.wrapX\n    });\n\n  }\n\n}\n\nexport default OSM;\n","/**\n * @module ol/pointer/EventType\n */\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  POINTERMOVE: 'pointermove',\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/pointer/EventSource\n */\n\nclass EventSource {\n\n  /**\n   * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n   * @param {!Object<string, function(Event)>} mapping Event mapping.\n   */\n  constructor(dispatcher, mapping) {\n\n    /**\n     * @type {module:ol/pointer/PointerEventHandler}\n     */\n    this.dispatcher = dispatcher;\n\n    /**\n     * @private\n     * @const\n     * @type {!Object<string, function(Event)>}\n     */\n    this.mapping_ = mapping;\n  }\n\n  /**\n   * List of events supported by this source.\n   * @return {Array<string>} Event names\n   */\n  getEvents() {\n    return Object.keys(this.mapping_);\n  }\n\n  /**\n   * Returns the handler that should handle a given event type.\n   * @param {string} eventType The event type.\n   * @return {function(Event)} Handler\n   */\n  getHandlerForEvent(eventType) {\n    return this.mapping_[eventType];\n  }\n\n}\n\nexport default EventSource;\n","/**\n * @module ol/pointer/MouseSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from '../pointer/EventSource.js';\n\n\n/**\n * @type {number}\n */\nexport const POINTER_ID = 1;\n\n\n/**\n * @type {string}\n */\nexport const POINTER_TYPE = 'mouse';\n\n\n/**\n * Radius around touchend that swallows mouse events.\n *\n * @type {number}\n */\nconst DEDUP_DIST = 25;\n\n/**\n * Handler for `mousedown`.\n *\n * @this {module:ol/pointer/MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mousedown(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    // TODO(dfreedman) workaround for some elements not sending mouseup\n    // http://crbug/149091\n    if (POINTER_ID.toString() in this.pointerMap) {\n      this.cancel(inEvent);\n    }\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.pointerMap[POINTER_ID.toString()] = inEvent;\n    this.dispatcher.down(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mousemove`.\n *\n * @this {module:ol/pointer/MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mousemove(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.move(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mouseup`.\n *\n * @this {module:ol/pointer/MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseup(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const p = this.pointerMap[POINTER_ID.toString()];\n\n    if (p && p.button === inEvent.button) {\n      const e = prepareEvent(inEvent, this.dispatcher);\n      this.dispatcher.up(e, inEvent);\n      this.cleanupMouse();\n    }\n  }\n}\n\n/**\n * Handler for `mouseover`.\n *\n * @this {module:ol/pointer/MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseover(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.enterOver(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mouseout`.\n *\n * @this {module:ol/pointer/MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseout(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.leaveOut(e, inEvent);\n  }\n}\n\n\nclass MouseSource extends EventSource {\n\n  /**\n   * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'mousedown': mousedown,\n      'mousemove': mousemove,\n      'mouseup': mouseup,\n      'mouseover': mouseover,\n      'mouseout': mouseout\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n\n    /**\n     * @const\n     * @type {Array<module:ol/pixel~Pixel>}\n     */\n    this.lastTouches = [];\n  }\n\n  /**\n   * Detect if a mouse event was simulated from a touch by\n   * checking if previously there was a touch event at the\n   * same position.\n   *\n   * FIXME - Known problem with the native Android browser on\n   * Samsung GT-I9100 (Android 4.1.2):\n   * In case the page is scrolled, this function does not work\n   * correctly when a canvas is used (WebGL or canvas renderer).\n   * Mouse listeners on canvas elements (for this browser), create\n   * two mouse events: One 'good' and one 'bad' one (on other browsers or\n   * when a div is used, there is only one event). For the 'bad' one,\n   * clientX/clientY and also pageX/pageY are wrong when the page\n   * is scrolled. Because of that, this function can not detect if\n   * the events were simulated from a touch event. As result, a\n   * pointer event at a wrong position is dispatched, which confuses\n   * the map interactions.\n   * It is unclear, how one can get the correct position for the event\n   * or detect that the positions are invalid.\n   *\n   * @private\n   * @param {MouseEvent} inEvent The in event.\n   * @return {boolean} True, if the event was generated by a touch.\n   */\n  isEventSimulatedFromTouch_(inEvent) {\n    const lts = this.lastTouches;\n    const x = inEvent.clientX;\n    const y = inEvent.clientY;\n    for (let i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n      // simulated mouse events will be swallowed near a primary touchend\n      const dx = Math.abs(x - t[0]);\n      const dy = Math.abs(y - t[1]);\n      if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Dispatches a `pointercancel` event.\n   *\n   * @param {Event} inEvent The in event.\n   */\n  cancel(inEvent) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.cancel(e, inEvent);\n    this.cleanupMouse();\n  }\n\n  /**\n   * Remove the mouse from the list of active pointers.\n   */\n  cleanupMouse() {\n    delete this.pointerMap[POINTER_ID.toString()];\n  }\n}\n\n\n/**\n * Creates a copy of the original event that will be used\n * for the fake pointer event.\n *\n * @param {Event} inEvent The in event.\n * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n * @return {Object} The copied event.\n */\nfunction prepareEvent(inEvent, dispatcher) {\n  const e = dispatcher.cloneEvent(inEvent, inEvent);\n\n  // forward mouse preventDefault\n  const pd = e.preventDefault;\n  e.preventDefault = function() {\n    inEvent.preventDefault();\n    pd();\n  };\n\n  e.pointerId = POINTER_ID;\n  e.isPrimary = true;\n  e.pointerType = POINTER_TYPE;\n\n  return e;\n}\n\n\nexport default MouseSource;\n","/**\n * @module ol/pointer/MsSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from '../pointer/EventSource.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst POINTER_TYPES = [\n  '',\n  'unavailable',\n  'touch',\n  'pen',\n  'mouse'\n];\n\n/**\n * Handler for `msPointerDown`.\n *\n * @this {module:ol/pointer/MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerDown(inEvent) {\n  this.pointerMap[inEvent.pointerId.toString()] = inEvent;\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.down(e, inEvent);\n}\n\n/**\n * Handler for `msPointerMove`.\n *\n * @this {module:ol/pointer/MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerMove(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.move(e, inEvent);\n}\n\n/**\n * Handler for `msPointerUp`.\n *\n * @this {module:ol/pointer/MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerUp(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.up(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msPointerOut`.\n *\n * @this {module:ol/pointer/MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOut(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.leaveOut(e, inEvent);\n}\n\n/**\n * Handler for `msPointerOver`.\n *\n * @this {module:ol/pointer/MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOver(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.enterOver(e, inEvent);\n}\n\n/**\n * Handler for `msPointerCancel`.\n *\n * @this {module:ol/pointer/MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerCancel(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msLostPointerCapture`.\n *\n * @this {module:ol/pointer/MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msLostPointerCapture(inEvent) {\n  const e = this.dispatcher.makeEvent('lostpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\n/**\n * Handler for `msGotPointerCapture`.\n *\n * @this {module:ol/pointer/MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msGotPointerCapture(inEvent) {\n  const e = this.dispatcher.makeEvent('gotpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\nclass MsSource extends EventSource {\n\n  /**\n   * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'MSPointerDown': msPointerDown,\n      'MSPointerMove': msPointerMove,\n      'MSPointerUp': msPointerUp,\n      'MSPointerOut': msPointerOut,\n      'MSPointerOver': msPointerOver,\n      'MSPointerCancel': msPointerCancel,\n      'MSGotPointerCapture': msGotPointerCapture,\n      'MSLostPointerCapture': msLostPointerCapture\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, MSPointerEvent|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n  }\n\n  /**\n   * Creates a copy of the original event that will be used\n   * for the fake pointer event.\n   *\n   * @private\n   * @param {MSPointerEvent} inEvent The in event.\n   * @return {Object} The copied event.\n   */\n  prepareEvent_(inEvent) {\n    let e = inEvent;\n    if (typeof inEvent.pointerType === 'number') {\n      e = this.dispatcher.cloneEvent(inEvent, inEvent);\n      e.pointerType = POINTER_TYPES[inEvent.pointerType];\n    }\n\n    return e;\n  }\n\n  /**\n   * Remove this pointer from the list of active pointers.\n   * @param {number} pointerId Pointer identifier.\n   */\n  cleanup(pointerId) {\n    delete this.pointerMap[pointerId.toString()];\n  }\n\n}\n\nexport default MsSource;\n","/**\n * @module ol/pointer/NativeSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from '../pointer/EventSource.js';\n\n/**\n * Handler for `pointerdown`.\n *\n * @this {module:ol/pointer/NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerDown(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointermove`.\n *\n * @this {module:ol/pointer/NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerMove(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerup`.\n *\n * @this {module:ol/pointer/NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerUp(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerout`.\n *\n * @this {module:ol/pointer/NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerOut(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerover`.\n *\n * @this {module:ol/pointer/NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerOver(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointercancel`.\n *\n * @this {module:ol/pointer/NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerCancel(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `lostpointercapture`.\n *\n * @this {module:ol/pointer/NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction lostPointerCapture(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `gotpointercapture`.\n *\n * @this {module:ol/pointer/NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction gotPointerCapture(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\nclass NativeSource extends EventSource {\n\n  /**\n   * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'pointerdown': pointerDown,\n      'pointermove': pointerMove,\n      'pointerup': pointerUp,\n      'pointerout': pointerOut,\n      'pointerover': pointerOver,\n      'pointercancel': pointerCancel,\n      'gotpointercapture': gotPointerCapture,\n      'lostpointercapture': lostPointerCapture\n    };\n    super(dispatcher, mapping);\n  }\n\n}\n\nexport default NativeSource;\n","/**\n * @module ol/pointer/PointerEvent\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport Event from '../events/Event.js';\n\n\n/**\n * Is the `buttons` property supported?\n * @type {boolean}\n */\nlet HAS_BUTTONS = false;\n\n\nclass PointerEvent extends Event {\n\n  /**\n   * A class for pointer events.\n   *\n   * This class is used as an abstraction for mouse events,\n   * touch events and even native pointer events.\n   *\n   * @param {string} type The type of the event to create.\n   * @param {Event} originalEvent The event.\n   * @param {Object<string, ?>=} opt_eventDict An optional dictionary of\n   *    initial event properties.\n   */\n  constructor(type, originalEvent, opt_eventDict) {\n    super(type);\n\n    /**\n     * @const\n     * @type {Event}\n     */\n    this.originalEvent = originalEvent;\n\n    const eventDict = opt_eventDict ? opt_eventDict : {};\n\n    /**\n     * @type {number}\n     */\n    this.buttons = this.getButtons_(eventDict);\n\n    /**\n     * @type {number}\n     */\n    this.pressure = this.getPressure_(eventDict, this.buttons);\n\n    // MouseEvent related properties\n\n    /**\n     * @type {boolean}\n     */\n    this.bubbles = 'bubbles' in eventDict ? eventDict['bubbles'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.cancelable = 'cancelable' in eventDict ? eventDict['cancelable'] : false;\n\n    /**\n     * @type {Object}\n     */\n    this.view = 'view' in eventDict ? eventDict['view'] : null;\n\n    /**\n     * @type {number}\n     */\n    this.detail = 'detail' in eventDict ? eventDict['detail'] : null;\n\n    /**\n     * @type {number}\n     */\n    this.screenX = 'screenX' in eventDict ? eventDict['screenX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.screenY = 'screenY' in eventDict ? eventDict['screenY'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.clientX = 'clientX' in eventDict ? eventDict['clientX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.clientY = 'clientY' in eventDict ? eventDict['clientY'] : 0;\n\n    /**\n     * @type {boolean}\n     */\n    this.ctrlKey = 'ctrlKey' in eventDict ? eventDict['ctrlKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.altKey = 'altKey' in eventDict ? eventDict['altKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.shiftKey = 'shiftKey' in eventDict ? eventDict['shiftKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.metaKey = 'metaKey' in eventDict ? eventDict['metaKey'] : false;\n\n    /**\n     * @type {number}\n     */\n    this.button = 'button' in eventDict ? eventDict['button'] : 0;\n\n    /**\n     * @type {Node}\n     */\n    this.relatedTarget = 'relatedTarget' in eventDict ?\n      eventDict['relatedTarget'] : null;\n\n    // PointerEvent related properties\n\n    /**\n     * @const\n     * @type {number}\n     */\n    this.pointerId = 'pointerId' in eventDict ? eventDict['pointerId'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.width = 'width' in eventDict ? eventDict['width'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.height = 'height' in eventDict ? eventDict['height'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.tiltX = 'tiltX' in eventDict ? eventDict['tiltX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.tiltY = 'tiltY' in eventDict ? eventDict['tiltY'] : 0;\n\n    /**\n     * @type {string}\n     */\n    this.pointerType = 'pointerType' in eventDict ? eventDict['pointerType'] : '';\n\n    /**\n     * @type {number}\n     */\n    this.hwTimestamp = 'hwTimestamp' in eventDict ? eventDict['hwTimestamp'] : 0;\n\n    /**\n     * @type {boolean}\n     */\n    this.isPrimary = 'isPrimary' in eventDict ? eventDict['isPrimary'] : false;\n\n    // keep the semantics of preventDefault\n    if (originalEvent.preventDefault) {\n      this.preventDefault = function() {\n        originalEvent.preventDefault();\n      };\n    }\n  }\n\n  /**\n   * @private\n   * @param {Object<string, ?>} eventDict The event dictionary.\n   * @return {number} Button indicator.\n   */\n  getButtons_(eventDict) {\n    // According to the w3c spec,\n    // http://www.w3.org/TR/DOM-Level-3-Events/#events-MouseEvent-button\n    // MouseEvent.button == 0 can mean either no mouse button depressed, or the\n    // left mouse button depressed.\n    //\n    // As of now, the only way to distinguish between the two states of\n    // MouseEvent.button is by using the deprecated MouseEvent.which property, as\n    // this maps mouse buttons to positive integers > 0, and uses 0 to mean that\n    // no mouse button is held.\n    //\n    // MouseEvent.which is derived from MouseEvent.button at MouseEvent creation,\n    // but initMouseEvent does not expose an argument with which to set\n    // MouseEvent.which. Calling initMouseEvent with a buttonArg of 0 will set\n    // MouseEvent.button == 0 and MouseEvent.which == 1, breaking the expectations\n    // of app developers.\n    //\n    // The only way to propagate the correct state of MouseEvent.which and\n    // MouseEvent.button to a new MouseEvent.button == 0 and MouseEvent.which == 0\n    // is to call initMouseEvent with a buttonArg value of -1.\n    //\n    // This is fixed with DOM Level 4's use of buttons\n    let buttons;\n    if (eventDict.buttons || HAS_BUTTONS) {\n      buttons = eventDict.buttons;\n    } else {\n      switch (eventDict.which) {\n        case 1: buttons = 1; break;\n        case 2: buttons = 4; break;\n        case 3: buttons = 2; break;\n        default: buttons = 0;\n      }\n    }\n    return buttons;\n  }\n\n  /**\n   * @private\n   * @param {Object<string, ?>} eventDict The event dictionary.\n   * @param {number} buttons Button indicator.\n   * @return {number} The pressure.\n   */\n  getPressure_(eventDict, buttons) {\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    let pressure = 0;\n    if (eventDict.pressure) {\n      pressure = eventDict.pressure;\n    } else {\n      pressure = buttons ? 0.5 : 0;\n    }\n    return pressure;\n  }\n}\n\n\n/**\n * Checks if the `buttons` property is supported.\n */\n(function() {\n  try {\n    const ev = new MouseEvent('click', {buttons: 1});\n    HAS_BUTTONS = ev.buttons === 1;\n  } catch (e) {\n    // pass\n  }\n})();\n\nexport default PointerEvent;\n","/**\n * @module ol/pointer/TouchSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {remove} from '../array.js';\nimport EventSource from '../pointer/EventSource.js';\nimport {POINTER_ID} from '../pointer/MouseSource.js';\n\n\n/**\n * @type {number}\n */\nconst CLICK_COUNT_TIMEOUT = 200;\n\n/**\n * @type {string}\n */\nconst POINTER_TYPE = 'touch';\n\n/**\n * Handler for `touchstart`, triggers `pointerover`,\n * `pointerenter` and `pointerdown` events.\n *\n * @this {module:ol/pointer/TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchstart(inEvent) {\n  this.vacuumTouches_(inEvent);\n  this.setPrimaryTouch_(inEvent.changedTouches[0]);\n  this.dedupSynthMouse_(inEvent);\n  this.clickCount_++;\n  this.processTouches_(inEvent, this.overDown_);\n}\n\n/**\n * Handler for `touchmove`.\n *\n * @this {module:ol/pointer/TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchmove(inEvent) {\n  this.processTouches_(inEvent, this.moveOverOut_);\n}\n\n/**\n * Handler for `touchend`, triggers `pointerup`,\n * `pointerout` and `pointerleave` events.\n *\n * @this {module:ol/pointer/TouchSource}\n * @param {TouchEvent} inEvent The event.\n */\nfunction touchend(inEvent) {\n  this.dedupSynthMouse_(inEvent);\n  this.processTouches_(inEvent, this.upOut_);\n}\n\n/**\n * Handler for `touchcancel`, triggers `pointercancel`,\n * `pointerout` and `pointerleave` events.\n *\n * @this {module:ol/pointer/TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchcancel(inEvent) {\n  this.processTouches_(inEvent, this.cancelOut_);\n}\n\n\nclass TouchSource extends EventSource {\n\n  /**\n   * @param {module:ol/pointer/PointerEventHandler} dispatcher The event handler.\n   * @param {module:ol/pointer/MouseSource} mouseSource Mouse source.\n   */\n  constructor(dispatcher, mouseSource) {\n    const mapping = {\n      'touchstart': touchstart,\n      'touchmove': touchmove,\n      'touchend': touchend,\n      'touchcancel': touchcancel\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n\n    /**\n     * @const\n     * @type {module:ol/pointer/MouseSource}\n     */\n    this.mouseSource = mouseSource;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.firstTouchId_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.clickCount_ = 0;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.resetId_ = undefined;\n\n    /**\n     * Mouse event timeout: This should be long enough to\n     * ignore compat mouse events made by touch.\n     * @private\n     * @type {number}\n     */\n    this.dedupTimeout_ = 2500;\n  }\n\n  /**\n   * @private\n   * @param {Touch} inTouch The in touch.\n   * @return {boolean} True, if this is the primary touch.\n   */\n  isPrimaryTouch_(inTouch) {\n    return this.firstTouchId_ === inTouch.identifier;\n  }\n\n  /**\n   * Set primary touch if there are no pointers, or the only pointer is the mouse.\n   * @param {Touch} inTouch The in touch.\n   * @private\n   */\n  setPrimaryTouch_(inTouch) {\n    const count = Object.keys(this.pointerMap).length;\n    if (count === 0 || (count === 1 && POINTER_ID.toString() in this.pointerMap)) {\n      this.firstTouchId_ = inTouch.identifier;\n      this.cancelResetClickCount_();\n    }\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} inPointer The in pointer object.\n   */\n  removePrimaryPointer_(inPointer) {\n    if (inPointer.isPrimary) {\n      this.firstTouchId_ = undefined;\n      this.resetClickCount_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetClickCount_() {\n    this.resetId_ = setTimeout(\n      this.resetClickCountHandler_.bind(this),\n      CLICK_COUNT_TIMEOUT);\n  }\n\n  /**\n   * @private\n   */\n  resetClickCountHandler_() {\n    this.clickCount_ = 0;\n    this.resetId_ = undefined;\n  }\n\n  /**\n   * @private\n   */\n  cancelResetClickCount_() {\n    if (this.resetId_ !== undefined) {\n      clearTimeout(this.resetId_);\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent Browser event\n   * @param {Touch} inTouch Touch event\n   * @return {PointerEvent} A pointer object.\n   */\n  touchToPointer_(browserEvent, inTouch) {\n    const e = this.dispatcher.cloneEvent(browserEvent, inTouch);\n    // Spec specifies that pointerId 1 is reserved for Mouse.\n    // Touch identifiers can start at 0.\n    // Add 2 to the touch identifier for compatibility.\n    e.pointerId = inTouch.identifier + 2;\n    // TODO: check if this is necessary?\n    //e.target = findTarget(e);\n    e.bubbles = true;\n    e.cancelable = true;\n    e.detail = this.clickCount_;\n    e.button = 0;\n    e.buttons = 1;\n    e.width = inTouch.webkitRadiusX || inTouch.radiusX || 0;\n    e.height = inTouch.webkitRadiusY || inTouch.radiusY || 0;\n    e.pressure = inTouch.webkitForce || inTouch.force || 0.5;\n    e.isPrimary = this.isPrimaryTouch_(inTouch);\n    e.pointerType = POINTER_TYPE;\n\n    // make sure that the properties that are different for\n    // each `Touch` object are not copied from the BrowserEvent object\n    e.clientX = inTouch.clientX;\n    e.clientY = inTouch.clientY;\n    e.screenX = inTouch.screenX;\n    e.screenY = inTouch.screenY;\n\n    return e;\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} inEvent Touch event\n   * @param {function(TouchEvent, PointerEvent)} inFunction In function.\n   */\n  processTouches_(inEvent, inFunction) {\n    const touches = Array.prototype.slice.call(inEvent.changedTouches);\n    const count = touches.length;\n    function preventDefault() {\n      inEvent.preventDefault();\n    }\n    for (let i = 0; i < count; ++i) {\n      const pointer = this.touchToPointer_(inEvent, touches[i]);\n      // forward touch preventDefaults\n      pointer.preventDefault = preventDefault;\n      inFunction.call(this, inEvent, pointer);\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchList} touchList The touch list.\n   * @param {number} searchId Search identifier.\n   * @return {boolean} True, if the `Touch` with the given id is in the list.\n   */\n  findTouch_(touchList, searchId) {\n    const l = touchList.length;\n    for (let i = 0; i < l; i++) {\n      const touch = touchList[i];\n      if (touch.identifier === searchId) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * In some instances, a touchstart can happen without a touchend. This\n   * leaves the pointermap in a broken state.\n   * Therefore, on every touchstart, we remove the touches that did not fire a\n   * touchend event.\n   * To keep state globally consistent, we fire a pointercancel for\n   * this \"abandoned\" touch\n   *\n   * @private\n   * @param {TouchEvent} inEvent The in event.\n   */\n  vacuumTouches_(inEvent) {\n    const touchList = inEvent.touches;\n    // pointerMap.getCount() should be < touchList.length here,\n    // as the touchstart has not been processed yet.\n    const keys = Object.keys(this.pointerMap);\n    const count = keys.length;\n    if (count >= touchList.length) {\n      const d = [];\n      for (let i = 0; i < count; ++i) {\n        const key = keys[i];\n        const value = this.pointerMap[key];\n        // Never remove pointerId == 1, which is mouse.\n        // Touch identifiers are 2 smaller than their pointerId, which is the\n        // index in pointermap.\n        if (key != POINTER_ID && !this.findTouch_(touchList, key - 2)) {\n          d.push(value.out);\n        }\n      }\n      for (let i = 0; i < d.length; ++i) {\n        this.cancelOut_(inEvent, d[i]);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer object.\n   */\n  overDown_(browserEvent, inPointer) {\n    this.pointerMap[inPointer.pointerId] = {\n      target: inPointer.target,\n      out: inPointer,\n      outTarget: inPointer.target\n    };\n    this.dispatcher.over(inPointer, browserEvent);\n    this.dispatcher.enter(inPointer, browserEvent);\n    this.dispatcher.down(inPointer, browserEvent);\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer.\n   */\n  moveOverOut_(browserEvent, inPointer) {\n    const event = inPointer;\n    const pointer = this.pointerMap[event.pointerId];\n    // a finger drifted off the screen, ignore it\n    if (!pointer) {\n      return;\n    }\n    const outEvent = pointer.out;\n    const outTarget = pointer.outTarget;\n    this.dispatcher.move(event, browserEvent);\n    if (outEvent && outTarget !== event.target) {\n      outEvent.relatedTarget = event.target;\n      event.relatedTarget = outTarget;\n      // recover from retargeting by shadow\n      outEvent.target = outTarget;\n      if (event.target) {\n        this.dispatcher.leaveOut(outEvent, browserEvent);\n        this.dispatcher.enterOver(event, browserEvent);\n      } else {\n        // clean up case when finger leaves the screen\n        event.target = outTarget;\n        event.relatedTarget = null;\n        this.cancelOut_(browserEvent, event);\n      }\n    }\n    pointer.out = event;\n    pointer.outTarget = event.target;\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent An event.\n   * @param {PointerEvent} inPointer The inPointer object.\n   */\n  upOut_(browserEvent, inPointer) {\n    this.dispatcher.up(inPointer, browserEvent);\n    this.dispatcher.out(inPointer, browserEvent);\n    this.dispatcher.leave(inPointer, browserEvent);\n    this.cleanUpPointer_(inPointer);\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer.\n   */\n  cancelOut_(browserEvent, inPointer) {\n    this.dispatcher.cancel(inPointer, browserEvent);\n    this.dispatcher.out(inPointer, browserEvent);\n    this.dispatcher.leave(inPointer, browserEvent);\n    this.cleanUpPointer_(inPointer);\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} inPointer The inPointer object.\n   */\n  cleanUpPointer_(inPointer) {\n    delete this.pointerMap[inPointer.pointerId];\n    this.removePrimaryPointer_(inPointer);\n  }\n\n  /**\n   * Prevent synth mouse events from creating pointer events.\n   *\n   * @private\n   * @param {TouchEvent} inEvent The in event.\n   */\n  dedupSynthMouse_(inEvent) {\n    const lts = this.mouseSource.lastTouches;\n    const t = inEvent.changedTouches[0];\n    // only the primary finger will synth mouse events\n    if (this.isPrimaryTouch_(t)) {\n      // remember x/y of last touch\n      const lt = [t.clientX, t.clientY];\n      lts.push(lt);\n\n      setTimeout(function() {\n        // remove touch after timeout\n        remove(lts, lt);\n      }, this.dedupTimeout_);\n    }\n  }\n}\n\nexport default TouchSource;\n","/**\n * @module ol/pointer/PointerEventHandler\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {listen, unlisten} from '../events.js';\nimport EventTarget from '../events/Target.js';\nimport {POINTER, MSPOINTER, TOUCH} from '../has.js';\nimport PointerEventType from '../pointer/EventType.js';\nimport MouseSource from '../pointer/MouseSource.js';\nimport MsSource from '../pointer/MsSource.js';\nimport NativeSource from '../pointer/NativeSource.js';\nimport PointerEvent from '../pointer/PointerEvent.js';\nimport TouchSource from '../pointer/TouchSource.js';\n\n\n/**\n * Properties to copy when cloning an event, with default values.\n * @type {Array<Array>}\n */\nconst CLONE_PROPS = [\n  // MouseEvent\n  ['bubbles', false],\n  ['cancelable', false],\n  ['view', null],\n  ['detail', null],\n  ['screenX', 0],\n  ['screenY', 0],\n  ['clientX', 0],\n  ['clientY', 0],\n  ['ctrlKey', false],\n  ['altKey', false],\n  ['shiftKey', false],\n  ['metaKey', false],\n  ['button', 0],\n  ['relatedTarget', null],\n  // DOM Level 3\n  ['buttons', 0],\n  // PointerEvent\n  ['pointerId', 0],\n  ['width', 0],\n  ['height', 0],\n  ['pressure', 0],\n  ['tiltX', 0],\n  ['tiltY', 0],\n  ['pointerType', ''],\n  ['hwTimestamp', 0],\n  ['isPrimary', false],\n  // event instance\n  ['type', ''],\n  ['target', null],\n  ['currentTarget', null],\n  ['which', 0]\n];\n\n\nclass PointerEventHandler extends EventTarget {\n\n  /**\n   * @param {Element|HTMLDocument} element Viewport element.\n   */\n  constructor(element) {\n    super();\n\n    /**\n     * @const\n     * @private\n     * @type {Element|HTMLDocument}\n     */\n    this.element_ = element;\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = {};\n\n    /**\n     * @type {Object<string, function(Event)>}\n     * @private\n     */\n    this.eventMap_ = {};\n\n    /**\n     * @type {Array<module:ol/pointer/EventSource>}\n     * @private\n     */\n    this.eventSourceList_ = [];\n\n    this.registerSources();\n  }\n\n  /**\n   * Set up the event sources (mouse, touch and native pointers)\n   * that generate pointer events.\n   */\n  registerSources() {\n    if (POINTER) {\n      this.registerSource('native', new NativeSource(this));\n    } else if (MSPOINTER) {\n      this.registerSource('ms', new MsSource(this));\n    } else {\n      const mouseSource = new MouseSource(this);\n      this.registerSource('mouse', mouseSource);\n\n      if (TOUCH) {\n        this.registerSource('touch', new TouchSource(this, mouseSource));\n      }\n    }\n\n    // register events on the viewport element\n    this.register_();\n  }\n\n  /**\n   * Add a new event source that will generate pointer events.\n   *\n   * @param {string} name A name for the event source\n   * @param {module:ol/pointer/EventSource} source The source event.\n   */\n  registerSource(name, source) {\n    const s = source;\n    const newEvents = s.getEvents();\n\n    if (newEvents) {\n      newEvents.forEach(function(e) {\n        const handler = s.getHandlerForEvent(e);\n\n        if (handler) {\n          this.eventMap_[e] = handler.bind(s);\n        }\n      }.bind(this));\n      this.eventSourceList_.push(s);\n    }\n  }\n\n  /**\n   * Set up the events for all registered event sources.\n   * @private\n   */\n  register_() {\n    const l = this.eventSourceList_.length;\n    for (let i = 0; i < l; i++) {\n      const eventSource = this.eventSourceList_[i];\n      this.addEvents_(eventSource.getEvents());\n    }\n  }\n\n  /**\n   * Remove all registered events.\n   * @private\n   */\n  unregister_() {\n    const l = this.eventSourceList_.length;\n    for (let i = 0; i < l; i++) {\n      const eventSource = this.eventSourceList_[i];\n      this.removeEvents_(eventSource.getEvents());\n    }\n  }\n\n  /**\n   * Calls the right handler for a new event.\n   * @private\n   * @param {Event} inEvent Browser event.\n   */\n  eventHandler_(inEvent) {\n    const type = inEvent.type;\n    const handler = this.eventMap_[type];\n    if (handler) {\n      handler(inEvent);\n    }\n  }\n\n  /**\n   * Setup listeners for the given events.\n   * @private\n   * @param {Array<string>} events List of events.\n   */\n  addEvents_(events) {\n    events.forEach(function(eventName) {\n      listen(this.element_, eventName, this.eventHandler_, this);\n    }.bind(this));\n  }\n\n  /**\n   * Unregister listeners for the given events.\n   * @private\n   * @param {Array<string>} events List of events.\n   */\n  removeEvents_(events) {\n    events.forEach(function(e) {\n      unlisten(this.element_, e, this.eventHandler_, this);\n    }.bind(this));\n  }\n\n  /**\n   * Returns a snapshot of inEvent, with writable properties.\n   *\n   * @param {Event} event Browser event.\n   * @param {Event|Touch} inEvent An event that contains\n   *    properties to copy.\n   * @return {Object} An object containing shallow copies of\n   *    `inEvent`'s properties.\n   */\n  cloneEvent(event, inEvent) {\n    const eventCopy = {};\n    for (let i = 0, ii = CLONE_PROPS.length; i < ii; i++) {\n      const p = CLONE_PROPS[i][0];\n      eventCopy[p] = event[p] || inEvent[p] || CLONE_PROPS[i][1];\n    }\n\n    return eventCopy;\n  }\n\n  // EVENTS\n\n\n  /**\n   * Triggers a 'pointerdown' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  down(data, event) {\n    this.fireEvent(PointerEventType.POINTERDOWN, data, event);\n  }\n\n  /**\n   * Triggers a 'pointermove' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  move(data, event) {\n    this.fireEvent(PointerEventType.POINTERMOVE, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerup' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  up(data, event) {\n    this.fireEvent(PointerEventType.POINTERUP, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerenter' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  enter(data, event) {\n    data.bubbles = false;\n    this.fireEvent(PointerEventType.POINTERENTER, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerleave' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  leave(data, event) {\n    data.bubbles = false;\n    this.fireEvent(PointerEventType.POINTERLEAVE, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerover' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  over(data, event) {\n    data.bubbles = true;\n    this.fireEvent(PointerEventType.POINTEROVER, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerout' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  out(data, event) {\n    data.bubbles = true;\n    this.fireEvent(PointerEventType.POINTEROUT, data, event);\n  }\n\n  /**\n   * Triggers a 'pointercancel' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  cancel(data, event) {\n    this.fireEvent(PointerEventType.POINTERCANCEL, data, event);\n  }\n\n  /**\n   * Triggers a combination of 'pointerout' and 'pointerleave' events.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  leaveOut(data, event) {\n    this.out(data, event);\n    if (!this.contains_(data.target, data.relatedTarget)) {\n      this.leave(data, event);\n    }\n  }\n\n  /**\n   * Triggers a combination of 'pointerover' and 'pointerevents' events.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  enterOver(data, event) {\n    this.over(data, event);\n    if (!this.contains_(data.target, data.relatedTarget)) {\n      this.enter(data, event);\n    }\n  }\n\n  /**\n   * @private\n   * @param {Element} container The container element.\n   * @param {Element} contained The contained element.\n   * @return {boolean} Returns true if the container element\n   *   contains the other element.\n   */\n  contains_(container, contained) {\n    if (!container || !contained) {\n      return false;\n    }\n    return container.contains(contained);\n  }\n\n  // EVENT CREATION AND TRACKING\n  /**\n   * Creates a new Event of type `inType`, based on the information in\n   * `data`.\n   *\n   * @param {string} inType A string representing the type of event to create.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   * @return {module:ol/pointer/PointerEvent} A PointerEvent of type `inType`.\n   */\n  makeEvent(inType, data, event) {\n    return new PointerEvent(inType, event, data);\n  }\n\n  /**\n   * Make and dispatch an event in one call.\n   * @param {string} inType A string representing the type of event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  fireEvent(inType, data, event) {\n    const e = this.makeEvent(inType, data, event);\n    this.dispatchEvent(e);\n  }\n\n  /**\n   * Creates a pointer event from a native pointer event\n   * and dispatches this event.\n   * @param {Event} event A platform event with a target.\n   */\n  fireNativeEvent(event) {\n    const e = this.makeEvent(event.type, event, event);\n    this.dispatchEvent(e);\n  }\n\n  /**\n   * Wrap a native mouse event into a pointer event.\n   * This proxy method is required for the legacy IE support.\n   * @param {string} eventType The pointer event type.\n   * @param {Event} event The event.\n   * @return {module:ol/pointer/PointerEvent} The wrapped event.\n   */\n  wrapMouseEvent(eventType, event) {\n    const pointerEvent = this.makeEvent(\n      eventType, MouseSource.prepareEvent(event, this), event);\n    return pointerEvent;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.unregister_();\n    super.disposeInternal();\n  }\n}\n\nexport default PointerEventHandler;\n","/**\n * @module ol/MapBrowserEventHandler\n */\nimport {DEVICE_PIXEL_RATIO} from './has.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapBrowserPointerEvent from './MapBrowserPointerEvent.js';\nimport {listen, unlistenByKey} from './events.js';\nimport EventTarget from './events/Target.js';\nimport PointerEventType from './pointer/EventType.js';\nimport PointerEventHandler from './pointer/PointerEventHandler.js';\n\nclass MapBrowserEventHandler extends EventTarget {\n\n  /**\n   * @param {module:ol/PluggableMap} map The map with the viewport to listen to events on.\n   * @param {number=} moveTolerance The minimal distance the pointer must travel to trigger a move.\n   */\n  constructor(map, moveTolerance) {\n\n    super();\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {module:ol/PluggableMap}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.clickTimeoutId_ = 0;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<module:ol/events~EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance ?\n      moveTolerance * DEVICE_PIXEL_RATIO : DEVICE_PIXEL_RATIO;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {module:ol/pointer/PointerEvent}\n     * @private\n     */\n    this.down_ = null;\n\n    const element = this.map_.getViewport();\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.activePointers_ = 0;\n\n    /**\n     * @type {!Object<number, boolean>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    /**\n     * Event handler which generates pointer events for\n     * the viewport element.\n     *\n     * @type {module:ol/pointer/PointerEventHandler}\n     * @private\n     */\n    this.pointerEventHandler_ = new PointerEventHandler(element);\n\n    /**\n     * Event handler which generates pointer events for\n     * the document (used when dragging).\n     *\n     * @type {module:ol/pointer/PointerEventHandler}\n     * @private\n     */\n    this.documentPointerEventHandler_ = null;\n\n    /**\n     * @type {?module:ol/events~EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(this.pointerEventHandler_,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_, this);\n\n    /**\n     * @type {?module:ol/events~EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(this.pointerEventHandler_,\n      PointerEventType.POINTERMOVE,\n      this.relayEvent_, this);\n\n  }\n\n  /**\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  emulateClick_(pointerEvent) {\n    let newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.CLICK, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== 0) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = 0;\n      newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(function() {\n        this.clickTimeoutId_ = 0;\n        const newEvent = new MapBrowserPointerEvent(\n          MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n      }.bind(this), 250);\n    }\n  }\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n\n    if (event.type == MapBrowserEventType.POINTERUP ||\n        event.type == MapBrowserEventType.POINTERCANCEL) {\n      delete this.trackedTouches_[event.pointerId];\n    } else if (event.type == MapBrowserEventType.POINTERDOWN) {\n      this.trackedTouches_[event.pointerId] = true;\n    }\n    this.activePointers_ = Object.keys(this.trackedTouches_).length;\n  }\n\n  /**\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.stopPropagation() or event.preventDefault().\n    if (!newEvent.propagationStopped && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_ === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n      this.documentPointerEventHandler_.dispose();\n      this.documentPointerEventHandler_ = null;\n    }\n  }\n\n  /**\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n\n  /**\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerDown_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    this.down_ = pointerEvent;\n\n    if (this.dragListenerKeys_.length === 0) {\n      /* Set up a pointer event handler on the `document`,\n       * which is required when the pointer is moved outside\n       * the viewport when dragging.\n       */\n      this.documentPointerEventHandler_ =\n          new PointerEventHandler(document);\n\n      this.dragListenerKeys_.push(\n        listen(this.documentPointerEventHandler_,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_, this),\n        listen(this.documentPointerEventHandler_,\n          MapBrowserEventType.POINTERUP,\n          this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(this.pointerEventHandler_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_, this)\n      );\n    }\n  }\n\n  /**\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerMove_(pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.dragging_ = true;\n      const newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent,\n        this.dragging_);\n      this.dispatchEvent(newEvent);\n    }\n\n    // Some native android browser triggers mousemove events during small period\n    // of time. See: https://code.google.com/p/android/issues/detail?id=5491 or\n    // https://code.google.com/p/android/issues/detail?id=19827\n    // ex: Galaxy Tab P3110 + Android 4.1.1\n    pointerEvent.preventDefault();\n  }\n\n  /**\n   * Wrap and relay a pointer event.  Note that this requires that the type\n   * string for the MapBrowserPointerEvent matches the PointerEvent type.\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  relayEvent_(pointerEvent) {\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(new MapBrowserPointerEvent(\n      pointerEvent.type, this.map_, pointerEvent, dragging));\n  }\n\n  /**\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  isMoving_(pointerEvent) {\n    return this.dragging_ ||\n        Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ ||\n        Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    if (this.documentPointerEventHandler_) {\n      this.documentPointerEventHandler_.dispose();\n      this.documentPointerEventHandler_ = null;\n    }\n    if (this.pointerEventHandler_) {\n      this.pointerEventHandler_.dispose();\n      this.pointerEventHandler_ = null;\n    }\n    super.disposeInternal();\n  }\n}\n\n\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view'\n};\n","/**\n * @module ol/structs/PriorityQueue\n */\nimport {assert} from '../asserts.js';\nimport {clear} from '../obj.js';\n\n\n/**\n * @type {number}\n */\nexport const DROP = Infinity;\n\n\n/**\n * @classdesc\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * See http://closure-library.googlecode.com/svn/docs/closure_goog_structs_heap.js.source.html\n * and http://hg.python.org/cpython/file/2.7/Lib/heapq.py.\n *\n * @template T\n */\nclass PriorityQueue {\n\n  /**\n   * @param {function(T): number} priorityFunction Priority function.\n   * @param {function(T): string} keyFunction Key function.\n   */\n  constructor(priorityFunction, keyFunction) {\n\n    /**\n     * @type {function(T): number}\n     * @private\n     */\n    this.priorityFunction_ = priorityFunction;\n\n    /**\n     * @type {function(T): string}\n     * @private\n     */\n    this.keyFunction_ = keyFunction;\n\n    /**\n     * @type {Array<T>}\n     * @private\n     */\n    this.elements_ = [];\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.priorities_ = [];\n\n    /**\n     * @type {!Object<string, boolean>}\n     * @private\n     */\n    this.queuedElements_ = {};\n\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.elements_.length = 0;\n    this.priorities_.length = 0;\n    clear(this.queuedElements_);\n  }\n\n\n  /**\n   * Remove and return the highest-priority element. O(log N).\n   * @return {T} Element.\n   */\n  dequeue() {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[0];\n    if (elements.length == 1) {\n      elements.length = 0;\n      priorities.length = 0;\n    } else {\n      elements[0] = elements.pop();\n      priorities[0] = priorities.pop();\n      this.siftUp_(0);\n    }\n    const elementKey = this.keyFunction_(element);\n    delete this.queuedElements_[elementKey];\n    return element;\n  }\n\n\n  /**\n   * Enqueue an element. O(log N).\n   * @param {T} element Element.\n   * @return {boolean} The element was added to the queue.\n   */\n  enqueue(element) {\n    assert(!(this.keyFunction_(element) in this.queuedElements_),\n      31); // Tried to enqueue an `element` that was already added to the queue\n    const priority = this.priorityFunction_(element);\n    if (priority != DROP) {\n      this.elements_.push(element);\n      this.priorities_.push(priority);\n      this.queuedElements_[this.keyFunction_(element)] = true;\n      this.siftDown_(0, this.elements_.length - 1);\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.elements_.length;\n  }\n\n\n  /**\n   * Gets the index of the left child of the node at the given index.\n   * @param {number} index The index of the node to get the left child for.\n   * @return {number} The index of the left child.\n   * @private\n   */\n  getLeftChildIndex_(index) {\n    return index * 2 + 1;\n  }\n\n\n  /**\n   * Gets the index of the right child of the node at the given index.\n   * @param {number} index The index of the node to get the right child for.\n   * @return {number} The index of the right child.\n   * @private\n   */\n  getRightChildIndex_(index) {\n    return index * 2 + 2;\n  }\n\n\n  /**\n   * Gets the index of the parent of the node at the given index.\n   * @param {number} index The index of the node to get the parent for.\n   * @return {number} The index of the parent.\n   * @private\n   */\n  getParentIndex_(index) {\n    return (index - 1) >> 1;\n  }\n\n\n  /**\n   * Make this a heap. O(N).\n   * @private\n   */\n  heapify_() {\n    let i;\n    for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n      this.siftUp_(i);\n    }\n  }\n\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.elements_.length === 0;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Is key queued.\n   */\n  isKeyQueued(key) {\n    return key in this.queuedElements_;\n  }\n\n\n  /**\n   * @param {T} element Element.\n   * @return {boolean} Is queued.\n   */\n  isQueued(element) {\n    return this.isKeyQueued(this.keyFunction_(element));\n  }\n\n\n  /**\n   * @param {number} index The index of the node to move down.\n   * @private\n   */\n  siftUp_(index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const count = elements.length;\n    const element = elements[index];\n    const priority = priorities[index];\n    const startIndex = index;\n\n    while (index < (count >> 1)) {\n      const lIndex = this.getLeftChildIndex_(index);\n      const rIndex = this.getRightChildIndex_(index);\n\n      const smallerChildIndex = rIndex < count &&\n          priorities[rIndex] < priorities[lIndex] ?\n        rIndex : lIndex;\n\n      elements[index] = elements[smallerChildIndex];\n      priorities[index] = priorities[smallerChildIndex];\n      index = smallerChildIndex;\n    }\n\n    elements[index] = element;\n    priorities[index] = priority;\n    this.siftDown_(startIndex, index);\n  }\n\n\n  /**\n   * @param {number} startIndex The index of the root.\n   * @param {number} index The index of the node to move up.\n   * @private\n   */\n  siftDown_(startIndex, index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[index];\n    const priority = priorities[index];\n\n    while (index > startIndex) {\n      const parentIndex = this.getParentIndex_(index);\n      if (priorities[parentIndex] > priority) {\n        elements[index] = elements[parentIndex];\n        priorities[index] = priorities[parentIndex];\n        index = parentIndex;\n      } else {\n        break;\n      }\n    }\n    elements[index] = element;\n    priorities[index] = priority;\n  }\n\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  reprioritize() {\n    const priorityFunction = this.priorityFunction_;\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    let index = 0;\n    const n = elements.length;\n    let element, i, priority;\n    for (i = 0; i < n; ++i) {\n      element = elements[i];\n      priority = priorityFunction(element);\n      if (priority == DROP) {\n        delete this.queuedElements_[this.keyFunction_(element)];\n      } else {\n        priorities[index] = priority;\n        elements[index++] = element;\n      }\n    }\n    elements.length = index;\n    priorities.length = index;\n    this.heapify_();\n  }\n\n}\n\n\nexport default PriorityQueue;\n","/**\n * @module ol/TileQueue\n */\nimport TileState from './TileState.js';\nimport {listen, unlisten} from './events.js';\nimport EventType from './events/EventType.js';\nimport PriorityQueue from './structs/PriorityQueue.js';\n\n\n/**\n * @typedef {function(module:ol/Tile, string, module:ol/coordinate~Coordinate, number): number} PriorityFunction\n */\n\n\nclass TileQueue extends PriorityQueue {\n\n  /**\n   * @param {module:ol/TileQueue~PriorityFunction} tilePriorityFunction Tile priority function.\n   * @param {function(): ?} tileChangeCallback Function called on each tile change event.\n   */\n  constructor(tilePriorityFunction, tileChangeCallback) {\n\n    super(\n      /**\n       * @param {Array} element Element.\n       * @return {number} Priority.\n       */\n      function(element) {\n        return tilePriorityFunction.apply(null, element);\n      },\n      /**\n       * @param {Array} element Element.\n       * @return {string} Key.\n       */\n      function(element) {\n        return (/** @type {module:ol/Tile} */ (element[0]).getKey());\n      });\n\n    /**\n     * @private\n     * @type {function(): ?}\n     */\n    this.tileChangeCallback_ = tileChangeCallback;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilesLoading_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string,boolean>}\n     */\n    this.tilesLoadingKeys_ = {};\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  enqueue(element) {\n    const added = super.enqueue(element);\n    if (added) {\n      const tile = element[0];\n      listen(tile, EventType.CHANGE, this.handleTileChange, this);\n    }\n    return added;\n  }\n\n  /**\n   * @return {number} Number of tiles loading.\n   */\n  getTilesLoading() {\n    return this.tilesLoading_;\n  }\n\n  /**\n   * @param {module:ol/events/Event} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {module:ol/Tile} */ (event.target);\n    const state = tile.getState();\n    if (state === TileState.LOADED || state === TileState.ERROR ||\n        state === TileState.EMPTY || state === TileState.ABORT) {\n      unlisten(tile, EventType.CHANGE, this.handleTileChange, this);\n      const tileKey = tile.getKey();\n      if (tileKey in this.tilesLoadingKeys_) {\n        delete this.tilesLoadingKeys_[tileKey];\n        --this.tilesLoading_;\n      }\n      this.tileChangeCallback_();\n    }\n  }\n\n  /**\n   * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n   * @param {number} maxNewLoads Maximum number of new tiles to load.\n   */\n  loadMoreTiles(maxTotalLoading, maxNewLoads) {\n    let newLoads = 0;\n    let abortedTiles = false;\n    let state, tile, tileKey;\n    while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads &&\n           this.getCount() > 0) {\n      tile = /** @type {module:ol/Tile} */ (this.dequeue()[0]);\n      tileKey = tile.getKey();\n      state = tile.getState();\n      if (state === TileState.ABORT) {\n        abortedTiles = true;\n      } else if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n        this.tilesLoadingKeys_[tileKey] = true;\n        ++this.tilesLoading_;\n        ++newLoads;\n        tile.load();\n      }\n    }\n    if (newLoads === 0 && abortedTiles) {\n      // Do not stop the render loop when all wanted tiles were aborted due to\n      // a small, saturated tile cache.\n      this.tileChangeCallback_();\n    }\n  }\n}\n\n\nexport default TileQueue;\n","/**\n * @module ol/PluggableMap\n */\nimport {getUid} from './util.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport RenderEventType from './render/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport TileQueue from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport {assert} from './asserts.js';\nimport {removeNode} from './dom.js';\nimport {listen, unlistenByKey, unlisten} from './events.js';\nimport {stopPropagation} from './events/Event.js';\nimport EventType from './events/EventType.js';\nimport {createEmpty, clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty} from './extent.js';\nimport {TRUE} from './functions.js';\nimport {DEVICE_PIXEL_RATIO, TOUCH} from './has.js';\nimport LayerGroup from './layer/Group.js';\nimport {hasArea} from './size.js';\nimport {DROP} from './structs/PriorityQueue.js';\nimport {create as createTransform, apply as applyTransform} from './transform.js';\n\n\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {module:ol/View~State} viewState The state of the current view.\n * @property {boolean} animate\n * @property {module:ol/transform~Transform} coordinateToPixelTransform\n * @property {null|module:ol/extent~Extent} extent\n * @property {module:ol/coordinate~Coordinate} focus\n * @property {number} index\n * @property {Object<number, module:ol/layer/Layer~State>} layerStates\n * @property {Array<module:ol/layer/Layer~State>} layerStatesArray\n * @property {module:ol/transform~Transform} pixelToCoordinateTransform\n * @property {Array<module:ol/PluggableMap~PostRenderFunction>} postRenderFunctions\n * @property {module:ol/size~Size} size\n * @property {!Object<string, boolean>} skippedFeatureUids\n * @property {module:ol/TileQueue} tileQueue\n * @property {Object<string, Object<string, module:ol/TileRange>>} usedTiles\n * @property {Array<number>} viewHints\n * @property {!Object<string, Object<string, boolean>>} wantedTiles\n */\n\n\n/**\n * @typedef {function(module:ol/PluggableMap, ?module:ol/PluggableMap~FrameState): boolean} PostRenderFunction\n */\n\n\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(module:ol/layer/Layer): boolean} layerFilter Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in pixels. Pixels\n * inside the radius around the given position will be checked for features. This only\n * works for the canvas renderer and not for WebGL.\n */\n\n\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {module:ol/Collection<module:ol/control/Control>} [controls]\n * @property {module:ol/Collection<module:ol/interaction/Interaction>} [interactions]\n * @property {HTMLElement|Document} keyboardEventTarget\n * @property {module:ol/Collection<module:ol/Overlay>} overlays\n * @property {Object<string, *>} values\n */\n\n\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {module:ol/Collection<module:ol/control/Control>|Array<module:ol/control/Control>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control/util~defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {module:ol/Collection<module:ol/interaction/Interaction>|Array<module:ol/interaction/Interaction>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction~defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<module:ol/layer/Base>|module:ol/Collection<module:ol/layer/Base>} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {boolean} [loadTilesWhileAnimating=false] When set to `true`, tiles\n * will be loaded during animations. This may improve the user experience, but\n * can also make animations stutter on devices with slow memory.\n * @property {boolean} [loadTilesWhileInteracting=false] When set to `true`,\n * tiles will be loaded while interacting with the map. This may improve the\n * user experience, but can also make map panning and zooming choppy on devices\n * with slow memory.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {module:ol/Collection<module:ol/Overlay>|Array<module:ol/Overlay>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered.\n * @property {module:ol/View} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n\n\n/**\n * @fires module:ol/MapBrowserEvent~MapBrowserEvent\n * @fires module:ol/MapEvent~MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @fires module:ol/render/Event~RenderEvent#rendercomplete\n * @api\n */\nclass PluggableMap extends BaseObject {\n\n  /**\n   * @param {module:ol/PluggableMap~MapOptions} options Map options.\n   */\n  constructor(options) {\n\n    super();\n\n    const optionsInternal = createOptionsInternal(options);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilesLoading_ = options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.loadTilesWhileAnimating_ =\n        options.loadTilesWhileAnimating !== undefined ?\n          options.loadTilesWhileAnimating : false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.loadTilesWhileInteracting_ =\n        options.loadTilesWhileInteracting !== undefined ?\n          options.loadTilesWhileInteracting : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = options.pixelRatio !== undefined ?\n      options.pixelRatio : DEVICE_PIXEL_RATIO;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.animationDelayKey_;\n\n    /**\n     * @private\n     */\n    this.animationDelay_ = function() {\n      this.animationDelayKey_ = undefined;\n      this.renderFrame_.call(this, Date.now());\n    }.bind(this);\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.coordinateToPixelTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.pixelToCoordinateTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.frameIndex_ = 0;\n\n    /**\n     * @private\n     * @type {?module:ol/PluggableMap~FrameState}\n     */\n    this.frameState_ = null;\n\n    /**\n     * The extent at the previous 'moveend' event.\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.previousExtent_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/events~EventsKey}\n     */\n    this.viewPropertyListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/events~EventsKey}\n     */\n    this.viewChangeListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {Array<module:ol/events~EventsKey>}\n     */\n    this.layerGroupPropertyListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.viewport_ = document.createElement('div');\n    this.viewport_.className = 'ol-viewport' + (TOUCH ? ' ol-touch' : '');\n    this.viewport_.style.position = 'relative';\n    this.viewport_.style.overflow = 'hidden';\n    this.viewport_.style.width = '100%';\n    this.viewport_.style.height = '100%';\n    // prevent page zoom on IE >= 10 browsers\n    this.viewport_.style.msTouchAction = 'none';\n    this.viewport_.style.touchAction = 'none';\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainer_ = document.createElement('div');\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.viewport_.appendChild(this.overlayContainer_);\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainerStopEvent_ = document.createElement('div');\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    const overlayEvents = [\n      EventType.CLICK,\n      EventType.DBLCLICK,\n      EventType.MOUSEDOWN,\n      EventType.TOUCHSTART,\n      EventType.MSPOINTERDOWN,\n      MapBrowserEventType.POINTERDOWN,\n      EventType.MOUSEWHEEL,\n      EventType.WHEEL\n    ];\n    for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n      listen(this.overlayContainerStopEvent_, overlayEvents[i], stopPropagation);\n    }\n    this.viewport_.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n     * @private\n     * @type {module:ol/MapBrowserEventHandler}\n     */\n    this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, options.moveTolerance);\n    for (const key in MapBrowserEventType) {\n      listen(this.mapBrowserEventHandler_, MapBrowserEventType[key],\n        this.handleMapBrowserEvent, this);\n    }\n\n    /**\n     * @private\n     * @type {HTMLElement|Document}\n     */\n    this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n\n    /**\n     * @private\n     * @type {Array<module:ol/events~EventsKey>}\n     */\n    this.keyHandlerKeys_ = null;\n\n    listen(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n    listen(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n    listen(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n\n    /**\n     * @type {module:ol/Collection<module:ol/control/Control>}\n     * @protected\n     */\n    this.controls = optionsInternal.controls || new Collection();\n\n    /**\n     * @type {module:ol/Collection<module:ol/interaction/Interaction>}\n     * @protected\n     */\n    this.interactions = optionsInternal.interactions || new Collection();\n\n    /**\n     * @type {module:ol/Collection<module:ol/Overlay>}\n     * @private\n     */\n    this.overlays_ = optionsInternal.overlays;\n\n    /**\n     * A lookup of overlays by id.\n     * @private\n     * @type {Object<string, module:ol/Overlay>}\n     */\n    this.overlayIdIndex_ = {};\n\n    /**\n     * @type {module:ol/renderer/Map}\n     * @private\n     */\n    this.renderer_ = this.createRenderer();\n\n    /**\n     * @type {function(Event)|undefined}\n     * @private\n     */\n    this.handleResize_;\n\n    /**\n     * @private\n     * @type {module:ol/coordinate~Coordinate}\n     */\n    this.focus_ = null;\n\n    /**\n     * @private\n     * @type {!Array<module:ol/PluggableMap~PostRenderFunction>}\n     */\n    this.postRenderFunctions_ = [];\n\n    /**\n     * @private\n     * @type {module:ol/TileQueue}\n     */\n    this.tileQueue_ = new TileQueue(\n      this.getTilePriority.bind(this),\n      this.handleTileChange_.bind(this));\n\n    /**\n     * Uids of features to skip at rendering time.\n     * @type {Object<string, boolean>}\n     * @private\n     */\n    this.skippedFeatureUids_ = {};\n\n    listen(\n      this, getChangeEventType(MapProperty.LAYERGROUP),\n      this.handleLayerGroupChanged_, this);\n    listen(this, getChangeEventType(MapProperty.VIEW),\n      this.handleViewChanged_, this);\n    listen(this, getChangeEventType(MapProperty.SIZE),\n      this.handleSizeChanged_, this);\n    listen(this, getChangeEventType(MapProperty.TARGET),\n      this.handleTargetChanged_, this);\n\n    // setProperties will trigger the rendering of the map if the map\n    // is \"defined\" already.\n    this.setProperties(optionsInternal.values);\n\n    this.controls.forEach(\n      /**\n       * @param {module:ol/control/Control} control Control.\n       * @this {module:ol/PluggableMap}\n       */\n      (function(control) {\n        control.setMap(this);\n      }).bind(this));\n\n    listen(this.controls, CollectionEventType.ADD,\n      /**\n       * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n    listen(this.controls, CollectionEventType.REMOVE,\n      /**\n       * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n    this.interactions.forEach(\n      /**\n       * @param {module:ol/interaction/Interaction} interaction Interaction.\n       * @this {module:ol/PluggableMap}\n       */\n      (function(interaction) {\n        interaction.setMap(this);\n      }).bind(this));\n\n    listen(this.interactions, CollectionEventType.ADD,\n      /**\n       * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n    listen(this.interactions, CollectionEventType.REMOVE,\n      /**\n       * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n    this.overlays_.forEach(this.addOverlayInternal_.bind(this));\n\n    listen(this.overlays_, CollectionEventType.ADD,\n      /**\n       * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        this.addOverlayInternal_(/** @type {module:ol/Overlay} */ (event.element));\n      }, this);\n\n    listen(this.overlays_, CollectionEventType.REMOVE,\n      /**\n       * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        const overlay = /** @type {module:ol/Overlay} */ (event.element);\n        const id = overlay.getId();\n        if (id !== undefined) {\n          delete this.overlayIdIndex_[id.toString()];\n        }\n        event.element.setMap(null);\n      }, this);\n\n  }\n\n  createRenderer() {\n    throw new Error('Use a map type that has a createRenderer method');\n  }\n\n  /**\n   * Add the given control to the map.\n   * @param {module:ol/control/Control} control Control.\n   * @api\n   */\n  addControl(control) {\n    this.getControls().push(control);\n  }\n\n  /**\n   * Add the given interaction to the map.\n   * @param {module:ol/interaction/Interaction} interaction Interaction to add.\n   * @api\n   */\n  addInteraction(interaction) {\n    this.getInteractions().push(interaction);\n  }\n\n  /**\n   * Adds the given layer to the top of this map. If you want to add a layer\n   * elsewhere in the stack, use `getLayers()` and the methods available on\n   * {@link module:ol/Collection~Collection}.\n   * @param {module:ol/layer/Base} layer Layer.\n   * @api\n   */\n  addLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    layers.push(layer);\n  }\n\n  /**\n   * Add the given overlay to the map.\n   * @param {module:ol/Overlay} overlay Overlay.\n   * @api\n   */\n  addOverlay(overlay) {\n    this.getOverlays().push(overlay);\n  }\n\n  /**\n   * This deals with map's overlay collection changes.\n   * @param {module:ol/Overlay} overlay Overlay.\n   * @private\n   */\n  addOverlayInternal_(overlay) {\n    const id = overlay.getId();\n    if (id !== undefined) {\n      this.overlayIdIndex_[id.toString()] = overlay;\n    }\n    overlay.setMap(this);\n  }\n\n  /**\n   *\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.mapBrowserEventHandler_.dispose();\n    unlisten(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n    unlisten(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n    unlisten(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n    if (this.handleResize_ !== undefined) {\n      removeEventListener(EventType.RESIZE, this.handleResize_, false);\n      this.handleResize_ = undefined;\n    }\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n      this.animationDelayKey_ = undefined;\n    }\n    this.setTarget(null);\n    super.disposeInternal();\n  }\n\n  /**\n   * Detect features that intersect a pixel on the viewport, and execute a\n   * callback with each intersecting feature. Layers included in the detection can\n   * be configured through the `layerFilter` option in `opt_options`.\n   * @param {module:ol/pixel~Pixel} pixel Pixel.\n   * @param {function(this: S, (module:ol/Feature|module:ol/render/Feature),\n   *     module:ol/layer/Layer): T} callback Feature callback. The callback will be\n   *     called with two arguments. The first argument is one\n   *     {@link module:ol/Feature feature} or\n   *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n   *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n   *     unmanaged layers. To stop detection, callback functions can return a\n   *     truthy value.\n   * @param {module:ol/PluggableMap~AtPixelOptions=} opt_options Optional options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  forEachFeatureAtPixel(pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    const coordinate = this.getCoordinateFromPixel(pixel);\n    opt_options = opt_options !== undefined ? opt_options : {};\n    const hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const layerFilter = opt_options.layerFilter !== undefined ?\n      opt_options.layerFilter : TRUE;\n    return this.renderer_.forEachFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, callback, null,\n      layerFilter, null);\n  }\n\n  /**\n   * Get all features that intersect a pixel on the viewport.\n   * @param {module:ol/pixel~Pixel} pixel Pixel.\n   * @param {module:ol/PluggableMap~AtPixelOptions=} opt_options Optional options.\n   * @return {Array<module:ol/Feature|module:ol/render/Feature>} The detected features or\n   * `null` if none were found.\n   * @api\n   */\n  getFeaturesAtPixel(pixel, opt_options) {\n    let features = null;\n    this.forEachFeatureAtPixel(pixel, function(feature) {\n      if (!features) {\n        features = [];\n      }\n      features.push(feature);\n    }, opt_options);\n    return features;\n  }\n\n  /**\n   * Detect layers that have a color value at a pixel on the viewport, and\n   * execute a callback with each matching layer. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {module:ol/pixel~Pixel} pixel Pixel.\n   * @param {function(this: S, module:ol/layer/Layer, (Uint8ClampedArray|Uint8Array)): T} callback\n   *     Layer callback. This callback will receive two arguments: first is the\n   *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n   *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n   *     that do not currently support this argument. To stop detection, callback\n   *     functions can return a truthy value.\n   * @param {module:ol/PluggableMap~AtPixelOptions=} opt_options Configuration options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  forEachLayerAtPixel(pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    const options = opt_options || {};\n    const hitTolerance = options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const layerFilter = options.layerFilter || TRUE;\n    return this.renderer_.forEachLayerAtPixel(\n      pixel, this.frameState_, hitTolerance, callback, null, layerFilter, null);\n  }\n\n  /**\n   * Detect if features intersect a pixel on the viewport. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {module:ol/pixel~Pixel} pixel Pixel.\n   * @param {module:ol/PluggableMap~AtPixelOptions=} opt_options Optional options.\n   * @return {boolean} Is there a feature at the given pixel?\n   * @template U\n   * @api\n   */\n  hasFeatureAtPixel(pixel, opt_options) {\n    if (!this.frameState_) {\n      return false;\n    }\n    const coordinate = this.getCoordinateFromPixel(pixel);\n    opt_options = opt_options !== undefined ? opt_options : {};\n    const layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n    const hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    return this.renderer_.hasFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, layerFilter, null);\n  }\n\n  /**\n   * Returns the coordinate in view projection for a browser event.\n   * @param {Event} event Event.\n   * @return {module:ol/coordinate~Coordinate} Coordinate.\n   * @api\n   */\n  getEventCoordinate(event) {\n    return this.getCoordinateFromPixel(this.getEventPixel(event));\n  }\n\n  /**\n   * Returns the map pixel position for a browser event relative to the viewport.\n   * @param {Event} event Event.\n   * @return {module:ol/pixel~Pixel} Pixel.\n   * @api\n   */\n  getEventPixel(event) {\n    const viewportPosition = this.viewport_.getBoundingClientRect();\n    const eventPosition = event.changedTouches ? event.changedTouches[0] : event;\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ];\n  }\n\n  /**\n   * Get the target in which this map is rendered.\n   * Note that this returns what is entered as an option or in setTarget:\n   * if that was an element, it returns an element; if a string, it returns that.\n   * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n   *     map is rendered in.\n   * @observable\n   * @api\n   */\n  getTarget() {\n    return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n  }\n\n  /**\n   * Get the DOM element into which this map is rendered. In contrast to\n   * `getTarget` this method always return an `Element`, or `null` if the\n   * map has no target.\n   * @return {HTMLElement} The element that the map is rendered in.\n   * @api\n   */\n  getTargetElement() {\n    const target = this.getTarget();\n    if (target !== undefined) {\n      return typeof target === 'string' ? document.getElementById(target) : target;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Get the coordinate for a given pixel.  This returns a coordinate in the\n   * map view projection.\n   * @param {module:ol/pixel~Pixel} pixel Pixel position in the map viewport.\n   * @return {module:ol/coordinate~Coordinate} The coordinate for the pixel position.\n   * @api\n   */\n  getCoordinateFromPixel(pixel) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n    }\n  }\n\n  /**\n   * Get the map controls. Modifying this collection changes the controls\n   * associated with the map.\n   * @return {module:ol/Collection<module:ol/control/Control>} Controls.\n   * @api\n   */\n  getControls() {\n    return this.controls;\n  }\n\n  /**\n   * Get the map overlays. Modifying this collection changes the overlays\n   * associated with the map.\n   * @return {module:ol/Collection<module:ol/Overlay>} Overlays.\n   * @api\n   */\n  getOverlays() {\n    return this.overlays_;\n  }\n\n  /**\n   * Get an overlay by its identifier (the value returned by overlay.getId()).\n   * Note that the index treats string and numeric identifiers as the same. So\n   * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n   * @param {string|number} id Overlay identifier.\n   * @return {module:ol/Overlay} Overlay.\n   * @api\n   */\n  getOverlayById(id) {\n    const overlay = this.overlayIdIndex_[id.toString()];\n    return overlay !== undefined ? overlay : null;\n  }\n\n  /**\n   * Get the map interactions. Modifying this collection changes the interactions\n   * associated with the map.\n   *\n   * Interactions are used for e.g. pan, zoom and rotate.\n   * @return {module:ol/Collection<module:ol/interaction/Interaction>} Interactions.\n   * @api\n   */\n  getInteractions() {\n    return this.interactions;\n  }\n\n  /**\n   * Get the layergroup associated with this map.\n   * @return {module:ol/layer/Group} A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  getLayerGroup() {\n    return (\n      /** @type {module:ol/layer/Group} */ (this.get(MapProperty.LAYERGROUP))\n    );\n  }\n\n  /**\n   * Get the collection of layers associated with this map.\n   * @return {!module:ol/Collection<module:ol/layer/Base>} Layers.\n   * @api\n   */\n  getLayers() {\n    const layers = this.getLayerGroup().getLayers();\n    return layers;\n  }\n\n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   * @param {module:ol/coordinate~Coordinate} coordinate A map coordinate.\n   * @return {module:ol/pixel~Pixel} A pixel position in the map viewport.\n   * @api\n   */\n  getPixelFromCoordinate(coordinate) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n    }\n  }\n\n  /**\n   * Get the map renderer.\n   * @return {module:ol/renderer/Map} Renderer\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Get the size of this map.\n   * @return {module:ol/size~Size|undefined} The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  getSize() {\n    return (\n      /** @type {module:ol/size~Size|undefined} */ (this.get(MapProperty.SIZE))\n    );\n  }\n\n  /**\n   * Get the view associated with this map. A view manages properties such as\n   * center and resolution.\n   * @return {module:ol/View} The view that controls this map.\n   * @observable\n   * @api\n   */\n  getView() {\n    return (\n      /** @type {module:ol/View} */ (this.get(MapProperty.VIEW))\n    );\n  }\n\n  /**\n   * Get the element that serves as the map viewport.\n   * @return {HTMLElement} Viewport.\n   * @api\n   */\n  getViewport() {\n    return this.viewport_;\n  }\n\n  /**\n   * Get the element that serves as the container for overlays.  Elements added to\n   * this container will let mousedown and touchstart events through to the map,\n   * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n   * events.\n   * @return {!HTMLElement} The map's overlay container.\n   */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n   * Get the element that serves as a container for overlays that don't allow\n   * event propagation. Elements added to this container won't let mousedown and\n   * touchstart events through to the map, so clicks and gestures on an overlay\n   * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n   * @return {!HTMLElement} The map's overlay container that stops events.\n   */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n   * @param {module:ol/Tile} tile Tile.\n   * @param {string} tileSourceKey Tile source key.\n   * @param {module:ol/coordinate~Coordinate} tileCenter Tile center.\n   * @param {number} tileResolution Tile resolution.\n   * @return {number} Tile priority.\n   */\n  getTilePriority(tile, tileSourceKey, tileCenter, tileResolution) {\n    // Filter out tiles at higher zoom levels than the current zoom level, or that\n    // are outside the visible extent.\n    const frameState = this.frameState_;\n    if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n      return DROP;\n    }\n    if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n      return DROP;\n    }\n    // Prioritize the highest zoom level tiles closest to the focus.\n    // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n    // Within a zoom level, tiles are prioritized by the distance in pixels\n    // between the center of the tile and the focus.  The factor of 65536 means\n    // that the prioritization should behave as desired for tiles up to\n    // 65536 * Math.log(2) = 45426 pixels from the focus.\n    const deltaX = tileCenter[0] - frameState.focus[0];\n    const deltaY = tileCenter[1] - frameState.focus[1];\n    return 65536 * Math.log(tileResolution) +\n        Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n  }\n\n  /**\n   * @param {Event} browserEvent Browser event.\n   * @param {string=} opt_type Type.\n   */\n  handleBrowserEvent(browserEvent, opt_type) {\n    const type = opt_type || browserEvent.type;\n    const mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n    this.handleMapBrowserEvent(mapBrowserEvent);\n  }\n\n  /**\n   * @param {module:ol/MapBrowserEvent} mapBrowserEvent The event to handle.\n   */\n  handleMapBrowserEvent(mapBrowserEvent) {\n    if (!this.frameState_) {\n      // With no view defined, we cannot translate pixels into geographical\n      // coordinates so interactions cannot be used.\n      return;\n    }\n    this.focus_ = mapBrowserEvent.coordinate;\n    mapBrowserEvent.frameState = this.frameState_;\n    const interactionsArray = this.getInteractions().getArray();\n    if (this.dispatchEvent(mapBrowserEvent) !== false) {\n      for (let i = interactionsArray.length - 1; i >= 0; i--) {\n        const interaction = interactionsArray[i];\n        if (!interaction.getActive()) {\n          continue;\n        }\n        const cont = interaction.handleEvent(mapBrowserEvent);\n        if (!cont) {\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePostRender() {\n\n    const frameState = this.frameState_;\n\n    // Manage the tile queue\n    // Image loads are expensive and a limited resource, so try to use them\n    // efficiently:\n    // * When the view is static we allow a large number of parallel tile loads\n    //   to complete the frame as quickly as possible.\n    // * When animating or interacting, image loads can cause janks, so we reduce\n    //   the maximum number of loads per frame and limit the number of parallel\n    //   tile loads to remain reactive to view changes and to reduce the chance of\n    //   loading tiles that will quickly disappear from view.\n    const tileQueue = this.tileQueue_;\n    if (!tileQueue.isEmpty()) {\n      let maxTotalLoading = this.maxTilesLoading_;\n      let maxNewLoads = maxTotalLoading;\n      if (frameState) {\n        const hints = frameState.viewHints;\n        if (hints[ViewHint.ANIMATING]) {\n          maxTotalLoading = this.loadTilesWhileAnimating_ ? 8 : 0;\n          maxNewLoads = 2;\n        }\n        if (hints[ViewHint.INTERACTING]) {\n          maxTotalLoading = this.loadTilesWhileInteracting_ ? 8 : 0;\n          maxNewLoads = 2;\n        }\n      }\n      if (tileQueue.getTilesLoading() < maxTotalLoading) {\n        tileQueue.reprioritize(); // FIXME only call if view has changed\n        tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n      }\n    }\n    if (frameState && this.hasListener(MapEventType.RENDERCOMPLETE) && !frameState.animate &&\n        !this.tileQueue_.getTilesLoading() && !getLoading(this.getLayers().getArray())) {\n      this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n    }\n\n    const postRenderFunctions = this.postRenderFunctions_;\n    for (let i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n      postRenderFunctions[i](this, frameState);\n    }\n    postRenderFunctions.length = 0;\n  }\n\n  /**\n   * @private\n   */\n  handleSizeChanged_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleTargetChanged_() {\n    // target may be undefined, null, a string or an Element.\n    // If it's a string we convert it to an Element before proceeding.\n    // If it's not now an Element we remove the viewport from the DOM.\n    // If it's an Element we append the viewport element to it.\n\n    let targetElement;\n    if (this.getTarget()) {\n      targetElement = this.getTargetElement();\n    }\n\n    if (this.keyHandlerKeys_) {\n      for (let i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n        unlistenByKey(this.keyHandlerKeys_[i]);\n      }\n      this.keyHandlerKeys_ = null;\n    }\n\n    if (!targetElement) {\n      this.renderer_.removeLayerRenderers();\n      removeNode(this.viewport_);\n      if (this.handleResize_ !== undefined) {\n        removeEventListener(EventType.RESIZE, this.handleResize_, false);\n        this.handleResize_ = undefined;\n      }\n    } else {\n      targetElement.appendChild(this.viewport_);\n\n      const keyboardEventTarget = !this.keyboardEventTarget_ ?\n        targetElement : this.keyboardEventTarget_;\n      this.keyHandlerKeys_ = [\n        listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n        listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this)\n      ];\n\n      if (!this.handleResize_) {\n        this.handleResize_ = this.updateSize.bind(this);\n        addEventListener(EventType.RESIZE, this.handleResize_, false);\n      }\n    }\n\n    this.updateSize();\n    // updateSize calls setSize, so no need to call this.render\n    // ourselves here.\n  }\n\n  /**\n   * @private\n   */\n  handleTileChange_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewPropertyChanged_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewChanged_() {\n    if (this.viewPropertyListenerKey_) {\n      unlistenByKey(this.viewPropertyListenerKey_);\n      this.viewPropertyListenerKey_ = null;\n    }\n    if (this.viewChangeListenerKey_) {\n      unlistenByKey(this.viewChangeListenerKey_);\n      this.viewChangeListenerKey_ = null;\n    }\n    const view = this.getView();\n    if (view) {\n      this.viewport_.setAttribute('data-view', getUid(view));\n      this.viewPropertyListenerKey_ = listen(\n        view, ObjectEventType.PROPERTYCHANGE,\n        this.handleViewPropertyChanged_, this);\n      this.viewChangeListenerKey_ = listen(\n        view, EventType.CHANGE,\n        this.handleViewPropertyChanged_, this);\n    }\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleLayerGroupChanged_() {\n    if (this.layerGroupPropertyListenerKeys_) {\n      this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n      this.layerGroupPropertyListenerKeys_ = null;\n    }\n    const layerGroup = this.getLayerGroup();\n    if (layerGroup) {\n      this.layerGroupPropertyListenerKeys_ = [\n        listen(\n          layerGroup, ObjectEventType.PROPERTYCHANGE,\n          this.render, this),\n        listen(\n          layerGroup, EventType.CHANGE,\n          this.render, this)\n      ];\n    }\n    this.render();\n  }\n\n  /**\n   * @return {boolean} Is rendered.\n   */\n  isRendered() {\n    return !!this.frameState_;\n  }\n\n  /**\n   * Requests an immediate render in a synchronous manner.\n   * @api\n   */\n  renderSync() {\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n    }\n    this.animationDelay_();\n  }\n\n  /**\n   * Request a map rendering (at the next animation frame).\n   * @api\n   */\n  render() {\n    if (this.animationDelayKey_ === undefined) {\n      this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n    }\n  }\n\n  /**\n   * Remove the given control from the map.\n   * @param {module:ol/control/Control} control Control.\n   * @return {module:ol/control/Control|undefined} The removed control (or undefined\n   *     if the control was not found).\n   * @api\n   */\n  removeControl(control) {\n    return this.getControls().remove(control);\n  }\n\n  /**\n   * Remove the given interaction from the map.\n   * @param {module:ol/interaction/Interaction} interaction Interaction to remove.\n   * @return {module:ol/interaction/Interaction|undefined} The removed interaction (or\n   *     undefined if the interaction was not found).\n   * @api\n   */\n  removeInteraction(interaction) {\n    return this.getInteractions().remove(interaction);\n  }\n\n  /**\n   * Removes the given layer from the map.\n   * @param {module:ol/layer/Base} layer Layer.\n   * @return {module:ol/layer/Base|undefined} The removed layer (or undefined if the\n   *     layer was not found).\n   * @api\n   */\n  removeLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    return layers.remove(layer);\n  }\n\n  /**\n   * Remove the given overlay from the map.\n   * @param {module:ol/Overlay} overlay Overlay.\n   * @return {module:ol/Overlay|undefined} The removed overlay (or undefined\n   *     if the overlay was not found).\n   * @api\n   */\n  removeOverlay(overlay) {\n    return this.getOverlays().remove(overlay);\n  }\n\n  /**\n   * @param {number} time Time.\n   * @private\n   */\n  renderFrame_(time) {\n    let viewState;\n\n    const size = this.getSize();\n    const view = this.getView();\n    const extent = createEmpty();\n    const previousFrameState = this.frameState_;\n    /** @type {?module:ol/PluggableMap~FrameState} */\n    let frameState = null;\n    if (size !== undefined && hasArea(size) && view && view.isDef()) {\n      const viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n      const layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n      const layerStates = {};\n      for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n        layerStates[getUid(layerStatesArray[i].layer)] = layerStatesArray[i];\n      }\n      viewState = view.getState(this.pixelRatio_);\n      frameState = /** @type {module:ol/PluggableMap~FrameState} */ ({\n        animate: false,\n        coordinateToPixelTransform: this.coordinateToPixelTransform_,\n        extent: extent,\n        focus: this.focus_ ? this.focus_ : viewState.center,\n        index: this.frameIndex_++,\n        layerStates: layerStates,\n        layerStatesArray: layerStatesArray,\n        pixelRatio: this.pixelRatio_,\n        pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n        postRenderFunctions: [],\n        size: size,\n        skippedFeatureUids: this.skippedFeatureUids_,\n        tileQueue: this.tileQueue_,\n        time: time,\n        usedTiles: {},\n        viewState: viewState,\n        viewHints: viewHints,\n        wantedTiles: {}\n      });\n    }\n\n    if (frameState) {\n      frameState.extent = getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent);\n    }\n\n    this.frameState_ = frameState;\n    this.renderer_.renderFrame(frameState);\n\n    if (frameState) {\n      if (frameState.animate) {\n        this.render();\n      }\n      Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n\n      if (previousFrameState) {\n        const moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                    !equals(frameState.extent, this.previousExtent_));\n        if (moveStart) {\n          this.dispatchEvent(\n            new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n          this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n        }\n      }\n\n      const idle = this.previousExtent_ &&\n          !frameState.viewHints[ViewHint.ANIMATING] &&\n          !frameState.viewHints[ViewHint.INTERACTING] &&\n          !equals(frameState.extent, this.previousExtent_);\n\n      if (idle) {\n        this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n        clone(frameState.extent, this.previousExtent_);\n      }\n    }\n\n    this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n\n    setTimeout(this.handlePostRender.bind(this), 0);\n\n  }\n\n  /**\n   * Sets the layergroup of this map.\n   * @param {module:ol/layer/Group} layerGroup A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  setLayerGroup(layerGroup) {\n    this.set(MapProperty.LAYERGROUP, layerGroup);\n  }\n\n  /**\n   * Set the size of this map.\n   * @param {module:ol/size~Size|undefined} size The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  setSize(size) {\n    this.set(MapProperty.SIZE, size);\n  }\n\n  /**\n   * Set the target element to render this map into.\n   * @param {HTMLElement|string|undefined} target The Element or id of the Element\n   *     that the map is rendered in.\n   * @observable\n   * @api\n   */\n  setTarget(target) {\n    this.set(MapProperty.TARGET, target);\n  }\n\n  /**\n   * Set the view for this map.\n   * @param {module:ol/View} view The view that controls this map.\n   * @observable\n   * @api\n   */\n  setView(view) {\n    this.set(MapProperty.VIEW, view);\n  }\n\n  /**\n   * @param {module:ol/Feature} feature Feature.\n   */\n  skipFeature(feature) {\n    const featureUid = getUid(feature).toString();\n    this.skippedFeatureUids_[featureUid] = true;\n    this.render();\n  }\n\n  /**\n   * Force a recalculation of the map viewport size.  This should be called when\n   * third-party code changes the size of the map viewport.\n   * @api\n   */\n  updateSize() {\n    const targetElement = this.getTargetElement();\n\n    if (!targetElement) {\n      this.setSize(undefined);\n    } else {\n      const computedStyle = getComputedStyle(targetElement);\n      this.setSize([\n        targetElement.offsetWidth -\n            parseFloat(computedStyle['borderLeftWidth']) -\n            parseFloat(computedStyle['paddingLeft']) -\n            parseFloat(computedStyle['paddingRight']) -\n            parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n            parseFloat(computedStyle['borderTopWidth']) -\n            parseFloat(computedStyle['paddingTop']) -\n            parseFloat(computedStyle['paddingBottom']) -\n            parseFloat(computedStyle['borderBottomWidth'])\n      ]);\n    }\n  }\n\n  /**\n   * @param {module:ol/Feature} feature Feature.\n   */\n  unskipFeature(feature) {\n    const featureUid = getUid(feature).toString();\n    delete this.skippedFeatureUids_[featureUid];\n    this.render();\n  }\n}\n\n\n/**\n * @param {MapOptions} options Map options.\n * @return {module:ol/PluggableMap~MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n\n  /**\n   * @type {HTMLElement|Document}\n   */\n  let keyboardEventTarget = null;\n  if (options.keyboardEventTarget !== undefined) {\n    keyboardEventTarget = typeof options.keyboardEventTarget === 'string' ?\n      document.getElementById(options.keyboardEventTarget) :\n      options.keyboardEventTarget;\n  }\n\n  /**\n   * @type {Object<string, *>}\n   */\n  const values = {};\n\n  const layerGroup = (options.layers instanceof LayerGroup) ?\n    options.layers : new LayerGroup({layers: options.layers});\n  values[MapProperty.LAYERGROUP] = layerGroup;\n\n  values[MapProperty.TARGET] = options.target;\n\n  values[MapProperty.VIEW] = options.view !== undefined ?\n    options.view : new View();\n\n  let controls;\n  if (options.controls !== undefined) {\n    if (Array.isArray(options.controls)) {\n      controls = new Collection(options.controls.slice());\n    } else {\n      assert(options.controls instanceof Collection,\n        47); // Expected `controls` to be an array or an `module:ol/Collection~Collection`\n      controls = options.controls;\n    }\n  }\n\n  let interactions;\n  if (options.interactions !== undefined) {\n    if (Array.isArray(options.interactions)) {\n      interactions = new Collection(options.interactions.slice());\n    } else {\n      assert(options.interactions instanceof Collection,\n        48); // Expected `interactions` to be an array or an `module:ol/Collection~Collection`\n      interactions = options.interactions;\n    }\n  }\n\n  let overlays;\n  if (options.overlays !== undefined) {\n    if (Array.isArray(options.overlays)) {\n      overlays = new Collection(options.overlays.slice());\n    } else {\n      assert(options.overlays instanceof Collection,\n        49); // Expected `overlays` to be an array or an `module:ol/Collection~Collection`\n      overlays = options.overlays;\n    }\n  } else {\n    overlays = new Collection();\n  }\n\n  return {\n    controls: controls,\n    interactions: interactions,\n    keyboardEventTarget: keyboardEventTarget,\n    overlays: overlays,\n    values: values\n  };\n\n}\nexport default PluggableMap;\n\n/**\n * @param  {Array<module:ol/layer/Base>} layers Layers.\n * @return {boolean} Layers have sources that are still loading.\n */\nfunction getLoading(layers) {\n  for (let i = 0, ii = layers.length; i < ii; ++i) {\n    const layer = layers[i];\n    if (layer instanceof LayerGroup) {\n      return getLoading(layer.getLayers().getArray());\n    }\n    const source = layers[i].getSource();\n    if (source && source.loading) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * @module ol/ImageCanvas\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\n\n\n/**\n * A function that is called to trigger asynchronous canvas drawing.  It is\n * called with a \"done\" callback that should be called when drawing is done.\n * If any error occurs during drawing, the \"done\" callback should be called with\n * that error.\n *\n * @typedef {function(function(Error))} Loader\n */\n\n\nclass ImageCanvas extends ImageBase {\n\n  /**\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {HTMLCanvasElement} canvas Canvas.\n   * @param {module:ol/ImageCanvas~Loader=} opt_loader Optional loader function to\n   *     support asynchronous canvas drawing.\n   */\n  constructor(extent, resolution, pixelRatio, canvas, opt_loader) {\n\n    const state = opt_loader !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n    super(extent, resolution, pixelRatio, state);\n\n    /**\n     * Optional canvas loader function.\n     * @type {?module:ol/ImageCanvas~Loader}\n     * @private\n     */\n    this.loader_ = opt_loader !== undefined ? opt_loader : null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = canvas;\n\n    /**\n     * @private\n     * @type {Error}\n     */\n    this.error_ = null;\n\n  }\n\n  /**\n   * Get any error associated with asynchronous rendering.\n   * @return {Error} Any error that occurred during rendering.\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Handle async drawing complete.\n   * @param {Error} err Any error during drawing.\n   * @private\n   */\n  handleLoad_(err) {\n    if (err) {\n      this.error_ = err;\n      this.state = ImageState.ERROR;\n    } else {\n      this.state = ImageState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.loader_(this.handleLoad_.bind(this));\n    }\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Canvas element.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n}\n\n\nexport default ImageCanvas;\n","/**\n * @module ol/render/Event\n */\n\nimport Event from '../events/Event.js';\n\nclass RenderEvent extends Event {\n\n  /**\n   * @param {module:ol/render/EventType} type Type.\n   * @param {module:ol/render/VectorContext=} opt_vectorContext Vector context.\n   * @param {module:ol/PluggableMap~FrameState=} opt_frameState Frame state.\n   * @param {?CanvasRenderingContext2D=} opt_context Context.\n   * @param {?module:ol/webgl/Context=} opt_glContext WebGL Context.\n   */\n  constructor(type, opt_vectorContext, opt_frameState, opt_context, opt_glContext) {\n\n    super(type);\n\n    /**\n     * For canvas, this is an instance of {@link module:ol/render/canvas/Immediate}.\n     * @type {module:ol/render/VectorContext|undefined}\n     * @api\n     */\n    this.vectorContext = opt_vectorContext;\n\n    /**\n     * An object representing the current render frame state.\n     * @type {module:ol/PluggableMap~FrameState|undefined}\n     * @api\n     */\n    this.frameState = opt_frameState;\n\n    /**\n     * Canvas context. Only available when a Canvas renderer is used, null\n     * otherwise.\n     * @type {CanvasRenderingContext2D|null|undefined}\n     * @api\n     */\n    this.context = opt_context;\n\n    /**\n     * WebGL context. Only available when a WebGL renderer is used, null\n     * otherwise.\n     * @type {module:ol/webgl/Context|null|undefined}\n     * @api\n     */\n    this.glContext = opt_glContext;\n\n  }\n\n}\n\nexport default RenderEvent;\n","/**\n * @module ol/render/VectorContext\n */\n\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nclass VectorContext {\n  /**\n   * Render a geometry with a custom renderer.\n   *\n   * @param {module:ol/geom/SimpleGeometry} geometry Geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   * @param {Function} renderer Renderer.\n   */\n  drawCustom(geometry, feature, renderer) {}\n\n  /**\n   * Render a geometry.\n   *\n   * @param {module:ol/geom/Geometry} geometry The geometry to render.\n   */\n  drawGeometry(geometry) {}\n\n  /**\n   * Set the rendering style.\n   *\n   * @param {module:ol/style/Style} style The rendering style.\n   */\n  setStyle(style) {}\n\n  /**\n   * @param {module:ol/geom/Circle} circleGeometry Circle geometry.\n   * @param {module:ol/Feature} feature Feature.\n   */\n  drawCircle(circleGeometry, feature) {}\n\n  /**\n   * @param {module:ol/Feature} feature Feature.\n   * @param {module:ol/style/Style} style Style.\n   */\n  drawFeature(feature, style) {}\n\n  /**\n   * @param {module:ol/geom/GeometryCollection} geometryCollectionGeometry Geometry collection.\n   * @param {module:ol/Feature} feature Feature.\n   */\n  drawGeometryCollection(geometryCollectionGeometry, feature) {}\n\n  /**\n   * @param {module:ol/geom/LineString|module:ol/render/Feature} lineStringGeometry Line string geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  drawLineString(lineStringGeometry, feature) {}\n\n  /**\n   * @param {module:ol/geom/MultiLineString|module:ol/render/Feature} multiLineStringGeometry MultiLineString geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {}\n\n  /**\n   * @param {module:ol/geom/MultiPoint|module:ol/render/Feature} multiPointGeometry MultiPoint geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  drawMultiPoint(multiPointGeometry, feature) {}\n\n  /**\n   * @param {module:ol/geom/MultiPolygon} multiPolygonGeometry MultiPolygon geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {}\n\n  /**\n   * @param {module:ol/geom/Point|module:ol/render/Feature} pointGeometry Point geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  drawPoint(pointGeometry, feature) {}\n\n  /**\n   * @param {module:ol/geom/Polygon|module:ol/render/Feature} polygonGeometry Polygon geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  drawPolygon(polygonGeometry, feature) {}\n\n  /**\n   * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  drawText(geometry, feature) {}\n\n  /**\n   * @param {module:ol/style/Fill} fillStyle Fill style.\n   * @param {module:ol/style/Stroke} strokeStyle Stroke style.\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {}\n\n  /**\n   * @param {module:ol/style/Image} imageStyle Image style.\n   * @param {module:ol/render/canvas~DeclutterGroup=} opt_declutterGroup Declutter.\n   */\n  setImageStyle(imageStyle, opt_declutterGroup) {}\n\n  /**\n   * @param {module:ol/style/Text} textStyle Text style.\n   * @param {module:ol/render/canvas~DeclutterGroup=} opt_declutterGroup Declutter.\n   */\n  setTextStyle(textStyle, opt_declutterGroup) {}\n}\n\nexport default VectorContext;\n","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\n\nimport {equals} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {intersects} from '../../extent.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {transformGeom2D} from '../../geom/SimpleGeometry.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport VectorContext from '../VectorContext.js';\nimport {defaultTextAlign, defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline, defaultFont} from '../canvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\nclass CanvasImmediateRenderer extends VectorContext {\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {module:ol/transform~Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   */\n  constructor(context, pixelRatio, extent, transform, viewRotation) {\n    super();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = context;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.extent_ = extent;\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.transform_ = transform;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = viewRotation;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~FillState}\n     */\n    this.contextFillState_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~StrokeState}\n     */\n    this.contextStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~TextState}\n     */\n    this.contextTextState_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~FillState}\n     */\n    this.fillState_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~StrokeState}\n     */\n    this.strokeState_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorY_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageHeight_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOpacity_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.imageRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageScale_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageWidth_ = 0;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.textRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textScale_ = 0;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~TextState}\n     */\n    this.textState_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = [];\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.tmpLocalTransform_ = createTransform();\n\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawImages_(flatCoordinates, offset, end, stride) {\n    if (!this.image_) {\n      return;\n    }\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, 2, this.transform_,\n      this.pixelCoordinates_);\n    const context = this.context_;\n    const localTransform = this.tmpLocalTransform_;\n    const alpha = context.globalAlpha;\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha * this.imageOpacity_;\n    }\n    let rotation = this.imageRotation_;\n    if (this.imageRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (let i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n      const x = pixelCoordinates[i] - this.imageAnchorX_;\n      const y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n      if (rotation !== 0 || this.imageScale_ != 1) {\n        const centerX = x + this.imageAnchorX_;\n        const centerY = y + this.imageAnchorY_;\n        composeTransform(localTransform,\n          centerX, centerY,\n          this.imageScale_, this.imageScale_,\n          rotation,\n          -centerX, -centerY);\n        context.setTransform.apply(context, localTransform);\n      }\n      context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_,\n        this.imageWidth_, this.imageHeight_, x, y,\n        this.imageWidth_, this.imageHeight_);\n    }\n    if (rotation !== 0 || this.imageScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha;\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawText_(flatCoordinates, offset, end, stride) {\n    if (!this.textState_ || this.text_ === '') {\n      return;\n    }\n    if (this.textFillState_) {\n      this.setContextFillState_(this.textFillState_);\n    }\n    if (this.textStrokeState_) {\n      this.setContextStrokeState_(this.textStrokeState_);\n    }\n    this.setContextTextState_(this.textState_);\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    const context = this.context_;\n    let rotation = this.textRotation_;\n    if (this.textRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (; offset < end; offset += stride) {\n      const x = pixelCoordinates[offset] + this.textOffsetX_;\n      const y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n      if (rotation !== 0 || this.textScale_ != 1) {\n        const localTransform = composeTransform(this.tmpLocalTransform_,\n          x, y,\n          this.textScale_, this.textScale_,\n          rotation,\n          -x, -y);\n        context.setTransform.apply(context, localTransform);\n      }\n      if (this.textStrokeState_) {\n        context.strokeText(this.text_, x, y);\n      }\n      if (this.textFillState_) {\n        context.fillText(this.text_, x, y);\n      }\n    }\n    if (rotation !== 0 || this.textScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} close Close.\n   * @private\n   * @return {number} end End.\n   */\n  moveToLineTo_(flatCoordinates, offset, end, stride, close) {\n    const context = this.context_;\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n    let length = pixelCoordinates.length;\n    if (close) {\n      length -= 2;\n    }\n    for (let i = 2; i < length; i += 2) {\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n    }\n    if (close) {\n      context.closePath();\n    }\n    return end;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawRings_(flatCoordinates, offset, ends, stride) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n    }\n    return offset;\n  }\n\n  /**\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\n   * the current fill and stroke styles.\n   *\n   * @param {module:ol/geom/Circle} geometry Circle geometry.\n   * @override\n   * @api\n   */\n  drawCircle(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.fillState_ || this.strokeState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const pixelCoordinates = transformGeom2D(\n        geometry, this.transform_, this.pixelCoordinates_);\n      const dx = pixelCoordinates[2] - pixelCoordinates[0];\n      const dy = pixelCoordinates[3] - pixelCoordinates[1];\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      const context = this.context_;\n      context.beginPath();\n      context.arc(\n        pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\n    }\n  }\n\n  /**\n   * Set the rendering style.  Note that since this is an immediate rendering API,\n   * any `zIndex` on the provided style will be ignored.\n   *\n   * @param {module:ol/style/Style} style The rendering style.\n   * @override\n   * @api\n   */\n  setStyle(style) {\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\n    this.setImageStyle(style.getImage());\n    this.setTextStyle(style.getText());\n  }\n\n  /**\n   * Render a geometry into the canvas.  Call\n   * {@link module:ol/render/canvas/Immediate#setStyle} first to set the rendering style.\n   *\n   * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry The geometry to render.\n   * @override\n   * @api\n   */\n  drawGeometry(geometry) {\n    const type = geometry.getType();\n    switch (type) {\n      case GeometryType.POINT:\n        this.drawPoint(/** @type {module:ol/geom/Point} */ (geometry));\n        break;\n      case GeometryType.LINE_STRING:\n        this.drawLineString(/** @type {module:ol/geom/LineString} */ (geometry));\n        break;\n      case GeometryType.POLYGON:\n        this.drawPolygon(/** @type {module:ol/geom/Polygon} */ (geometry));\n        break;\n      case GeometryType.MULTI_POINT:\n        this.drawMultiPoint(/** @type {module:ol/geom/MultiPoint} */ (geometry));\n        break;\n      case GeometryType.MULTI_LINE_STRING:\n        this.drawMultiLineString(/** @type {module:ol/geom/MultiLineString} */ (geometry));\n        break;\n      case GeometryType.MULTI_POLYGON:\n        this.drawMultiPolygon(/** @type {module:ol/geom/MultiPolygon} */ (geometry));\n        break;\n      case GeometryType.GEOMETRY_COLLECTION:\n        this.drawGeometryCollection(/** @type {module:ol/geom/GeometryCollection} */ (geometry));\n        break;\n      case GeometryType.CIRCLE:\n        this.drawCircle(/** @type {module:ol/geom/Circle} */ (geometry));\n        break;\n      default:\n    }\n  }\n\n  /**\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\n   * style will be ignored - features are rendered immediately in the order that\n   * this method is called.  If you need `zIndex` support, you should be using an\n   * {@link module:ol/layer/Vector~VectorLayer} instead.\n   *\n   * @param {module:ol/Feature} feature Feature.\n   * @param {module:ol/style/Style} style Style.\n   * @override\n   * @api\n   */\n  drawFeature(feature, style) {\n    const geometry = style.getGeometryFunction()(feature);\n    if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    this.setStyle(style);\n    this.drawGeometry(geometry);\n  }\n\n  /**\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\n   * uses the current styles appropriate for each geometry in the collection.\n   *\n   * @param {module:ol/geom/GeometryCollection} geometry Geometry collection.\n   * @override\n   */\n  drawGeometryCollection(geometry) {\n    const geometries = geometry.getGeometriesArray();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      this.drawGeometry(geometries[i]);\n    }\n  }\n\n  /**\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {module:ol/geom/Point|module:ol/render/Feature} geometry Point geometry.\n   * @override\n   */\n  drawPoint(geometry) {\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n   * uses the current style.\n   *\n   * @param {module:ol/geom/MultiPoint|module:ol/render/Feature} geometry MultiPoint geometry.\n   * @override\n   */\n  drawMultiPoint(geometry) {\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a LineString into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {module:ol/geom/LineString|module:ol/render/Feature} geometry LineString geometry.\n   * @override\n   */\n  drawLineString(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      context.beginPath();\n      this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length,\n        geometry.getStride(), false);\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoint = geometry.getFlatMidpoint();\n      this.drawText_(flatMidpoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n   * and uses the current style.\n   *\n   * @param {module:ol/geom/MultiLineString|module:ol/render/Feature} geometry MultiLineString geometry.\n   * @override\n   */\n  drawMultiLineString(geometry) {\n    const geometryExtent = geometry.getExtent();\n    if (!intersects(this.extent_, geometryExtent)) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      let offset = 0;\n      const ends = geometry.getEnds();\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n      }\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoints = geometry.getFlatMidpoints();\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n    }\n  }\n\n  /**\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {module:ol/geom/Polygon|module:ol/render/Feature} geometry Polygon geometry.\n   * @override\n   */\n  drawPolygon(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      context.beginPath();\n      this.drawRings_(geometry.getOrientedFlatCoordinates(),\n        0, geometry.getEnds(), geometry.getStride());\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoint = geometry.getFlatInteriorPoint();\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n   * uses the current style.\n   * @param {module:ol/geom/MultiPolygon} geometry MultiPolygon geometry.\n   * @override\n   */\n  drawMultiPolygon(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      const flatCoordinates = geometry.getOrientedFlatCoordinates();\n      let offset = 0;\n      const endss = geometry.getEndss();\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const ends = endss[i];\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n      }\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoints = geometry.getFlatInteriorPoints();\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n    }\n  }\n\n  /**\n   * @param {module:ol/render/canvas~FillState} fillState Fill state.\n   * @private\n   */\n  setContextFillState_(fillState) {\n    const context = this.context_;\n    const contextFillState = this.contextFillState_;\n    if (!contextFillState) {\n      context.fillStyle = fillState.fillStyle;\n      this.contextFillState_ = {\n        fillStyle: fillState.fillStyle\n      };\n    } else {\n      if (contextFillState.fillStyle != fillState.fillStyle) {\n        contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {module:ol/render/canvas~StrokeState} strokeState Stroke state.\n   * @private\n   */\n  setContextStrokeState_(strokeState) {\n    const context = this.context_;\n    const contextStrokeState = this.contextStrokeState_;\n    if (!contextStrokeState) {\n      context.lineCap = strokeState.lineCap;\n      if (CANVAS_LINE_DASH) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n      context.lineJoin = strokeState.lineJoin;\n      context.lineWidth = strokeState.lineWidth;\n      context.miterLimit = strokeState.miterLimit;\n      context.strokeStyle = strokeState.strokeStyle;\n      this.contextStrokeState_ = {\n        lineCap: strokeState.lineCap,\n        lineDash: strokeState.lineDash,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineJoin: strokeState.lineJoin,\n        lineWidth: strokeState.lineWidth,\n        miterLimit: strokeState.miterLimit,\n        strokeStyle: strokeState.strokeStyle\n      };\n    } else {\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\n        contextStrokeState.lineCap = context.lineCap = strokeState.lineCap;\n      }\n      if (CANVAS_LINE_DASH) {\n        if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n          context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n        }\n        if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n          contextStrokeState.lineDashOffset = context.lineDashOffset =\n              strokeState.lineDashOffset;\n        }\n      }\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n        contextStrokeState.lineJoin = context.lineJoin = strokeState.lineJoin;\n      }\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n        contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\n      }\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n        contextStrokeState.miterLimit = context.miterLimit =\n            strokeState.miterLimit;\n      }\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n        contextStrokeState.strokeStyle = context.strokeStyle =\n            strokeState.strokeStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {module:ol/render/canvas~TextState} textState Text state.\n   * @private\n   */\n  setContextTextState_(textState) {\n    const context = this.context_;\n    const contextTextState = this.contextTextState_;\n    const textAlign = textState.textAlign ?\n      textState.textAlign : defaultTextAlign;\n    if (!contextTextState) {\n      context.font = textState.font;\n      context.textAlign = textAlign;\n      context.textBaseline = textState.textBaseline;\n      this.contextTextState_ = {\n        font: textState.font,\n        textAlign: textAlign,\n        textBaseline: textState.textBaseline\n      };\n    } else {\n      if (contextTextState.font != textState.font) {\n        contextTextState.font = context.font = textState.font;\n      }\n      if (contextTextState.textAlign != textAlign) {\n        contextTextState.textAlign = context.textAlign = textAlign;\n      }\n      if (contextTextState.textBaseline != textState.textBaseline) {\n        contextTextState.textBaseline = context.textBaseline =\n            textState.textBaseline;\n      }\n    }\n  }\n\n  /**\n   * Set the fill and stroke style for subsequent draw operations.  To clear\n   * either fill or stroke styles, pass null for the appropriate parameter.\n   *\n   * @param {module:ol/style/Fill} fillStyle Fill style.\n   * @param {module:ol/style/Stroke} strokeStyle Stroke style.\n   * @override\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    if (!fillStyle) {\n      this.fillState_ = null;\n    } else {\n      const fillStyleColor = fillStyle.getColor();\n      this.fillState_ = {\n        fillStyle: asColorLike(fillStyleColor ?\n          fillStyleColor : defaultFillStyle)\n      };\n    }\n    if (!strokeStyle) {\n      this.strokeState_ = null;\n    } else {\n      const strokeStyleColor = strokeStyle.getColor();\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      const strokeStyleWidth = strokeStyle.getWidth();\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      this.strokeState_ = {\n        lineCap: strokeStyleLineCap !== undefined ?\n          strokeStyleLineCap : defaultLineCap,\n        lineDash: strokeStyleLineDash ?\n          strokeStyleLineDash : defaultLineDash,\n        lineDashOffset: strokeStyleLineDashOffset ?\n          strokeStyleLineDashOffset : defaultLineDashOffset,\n        lineJoin: strokeStyleLineJoin !== undefined ?\n          strokeStyleLineJoin : defaultLineJoin,\n        lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\n          strokeStyleWidth : defaultLineWidth),\n        miterLimit: strokeStyleMiterLimit !== undefined ?\n          strokeStyleMiterLimit : defaultMiterLimit,\n        strokeStyle: asColorLike(strokeStyleColor ?\n          strokeStyleColor : defaultStrokeStyle)\n      };\n    }\n  }\n\n  /**\n   * Set the image style for subsequent draw operations.  Pass null to remove\n   * the image style.\n   *\n   * @param {module:ol/style/Image} imageStyle Image style.\n   * @override\n   */\n  setImageStyle(imageStyle) {\n    if (!imageStyle) {\n      this.image_ = null;\n    } else {\n      const imageAnchor = imageStyle.getAnchor();\n      // FIXME pixel ratio\n      const imageImage = imageStyle.getImage(1);\n      const imageOrigin = imageStyle.getOrigin();\n      const imageSize = imageStyle.getSize();\n      this.imageAnchorX_ = imageAnchor[0];\n      this.imageAnchorY_ = imageAnchor[1];\n      this.imageHeight_ = imageSize[1];\n      this.image_ = imageImage;\n      this.imageOpacity_ = imageStyle.getOpacity();\n      this.imageOriginX_ = imageOrigin[0];\n      this.imageOriginY_ = imageOrigin[1];\n      this.imageRotateWithView_ = imageStyle.getRotateWithView();\n      this.imageRotation_ = imageStyle.getRotation();\n      this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\n      this.imageWidth_ = imageSize[0];\n    }\n  }\n\n  /**\n   * Set the text style for subsequent draw operations.  Pass null to\n   * remove the text style.\n   *\n   * @param {module:ol/style/Text} textStyle Text style.\n   * @override\n   */\n  setTextStyle(textStyle) {\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        this.textFillState_ = null;\n      } else {\n        const textFillStyleColor = textFillStyle.getColor();\n        this.textFillState_ = {\n          fillStyle: asColorLike(textFillStyleColor ?\n            textFillStyleColor : defaultFillStyle)\n        };\n      }\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        this.textStrokeState_ = null;\n      } else {\n        const textStrokeStyleColor = textStrokeStyle.getColor();\n        const textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n        const textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n        const textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n        const textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n        const textStrokeStyleWidth = textStrokeStyle.getWidth();\n        const textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n        this.textStrokeState_ = {\n          lineCap: textStrokeStyleLineCap !== undefined ?\n            textStrokeStyleLineCap : defaultLineCap,\n          lineDash: textStrokeStyleLineDash ?\n            textStrokeStyleLineDash : defaultLineDash,\n          lineDashOffset: textStrokeStyleLineDashOffset ?\n            textStrokeStyleLineDashOffset : defaultLineDashOffset,\n          lineJoin: textStrokeStyleLineJoin !== undefined ?\n            textStrokeStyleLineJoin : defaultLineJoin,\n          lineWidth: textStrokeStyleWidth !== undefined ?\n            textStrokeStyleWidth : defaultLineWidth,\n          miterLimit: textStrokeStyleMiterLimit !== undefined ?\n            textStrokeStyleMiterLimit : defaultMiterLimit,\n          strokeStyle: asColorLike(textStrokeStyleColor ?\n            textStrokeStyleColor : defaultStrokeStyle)\n        };\n      }\n      const textFont = textStyle.getFont();\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      const textScale = textStyle.getScale();\n      const textText = textStyle.getText();\n      const textTextAlign = textStyle.getTextAlign();\n      const textTextBaseline = textStyle.getTextBaseline();\n      this.textState_ = {\n        font: textFont !== undefined ?\n          textFont : defaultFont,\n        textAlign: textTextAlign !== undefined ?\n          textTextAlign : defaultTextAlign,\n        textBaseline: textTextBaseline !== undefined ?\n          textTextBaseline : defaultTextBaseline\n      };\n      this.text_ = textText !== undefined ? textText : '';\n      this.textOffsetX_ =\n          textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\n      this.textOffsetY_ =\n          textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\n      this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n      this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\n        textScale : 1);\n    }\n  }\n}\n\n\nexport default CanvasImmediateRenderer;\n","/**\n * @module ol/renderer/Map\n */\nimport {getUid} from '../util.js';\nimport Disposable from '../Disposable.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getWidth} from '../extent.js';\nimport {TRUE, VOID} from '../functions.js';\nimport {visibleAtResolution} from '../layer/Layer.js';\nimport {shared as iconImageCache} from '../style/IconImageCache.js';\nimport {compose as composeTransform, invert as invertTransform, setFromArray as transformSetFromArray} from '../transform.js';\n\n\nclass MapRenderer extends Disposable {\n\n  /**\n   * @param {module:ol/PluggableMap} map Map.\n   */\n  constructor(map) {\n    super();\n\n    /**\n     * @private\n     * @type {module:ol/PluggableMap}\n     */\n    this.map_ = map;\n\n    /**\n     * @private\n     * @type {!Object<string, module:ol/renderer/Layer>}\n     */\n    this.layerRenderers_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, module:ol/events~EventsKey>}\n     */\n    this.layerRendererListeners_ = {};\n\n    /**\n     * @private\n     * @type {Array<module:ol/renderer/Layer>}\n     */\n    this.layerRendererConstructors_ = [];\n\n  }\n\n  /**\n   * Register layer renderer constructors.\n   * @param {Array<module:ol/renderer/Layer>} constructors Layer renderers.\n   */\n  registerLayerRenderers(constructors) {\n    this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_, constructors);\n  }\n\n  /**\n   * Get the registered layer renderer constructors.\n   * @return {Array<module:ol/renderer/Layer>} Registered layer renderers.\n   */\n  getLayerRendererConstructors() {\n    return this.layerRendererConstructors_;\n  }\n\n  /**\n   * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n   * @protected\n   */\n  calculateMatrices2D(frameState) {\n    const viewState = frameState.viewState;\n    const coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n    const pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n\n    composeTransform(coordinateToPixelTransform,\n      frameState.size[0] / 2, frameState.size[1] / 2,\n      1 / viewState.resolution, -1 / viewState.resolution,\n      -viewState.rotation,\n      -viewState.center[0], -viewState.center[1]);\n\n    invertTransform(\n      transformSetFromArray(pixelToCoordinateTransform, coordinateToPixelTransform));\n  }\n\n  /**\n   * Removes all layer renderers.\n   */\n  removeLayerRenderers() {\n    for (const key in this.layerRenderers_) {\n      this.removeLayerRendererByKey_(key).dispose();\n    }\n  }\n\n  /**\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, (module:ol/Feature|module:ol/render/Feature),\n   *     module:ol/layer/Layer): T} callback Feature callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @param {function(this: U, module:ol/layer/Layer): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    callback,\n    thisArg,\n    layerFilter,\n    thisArg2\n  ) {\n    let result;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    /**\n     * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n     * @param {module:ol/layer/Layer} layer Layer.\n     * @return {?} Callback result.\n     */\n    function forEachFeatureAtCoordinate(feature, layer) {\n      const key = getUid(feature).toString();\n      const managed = frameState.layerStates[getUid(layer)].managed;\n      if (!(key in frameState.skippedFeatureUids && !managed)) {\n        return callback.call(thisArg, feature, managed ? layer : null);\n      }\n    }\n\n    const projection = viewState.projection;\n\n    let translatedCoordinate = coordinate;\n    if (projection.canWrapX()) {\n      const projectionExtent = projection.getExtent();\n      const worldWidth = getWidth(projectionExtent);\n      const x = coordinate[0];\n      if (x < projectionExtent[0] || x > projectionExtent[2]) {\n        const worldsAway = Math.ceil((projectionExtent[0] - x) / worldWidth);\n        translatedCoordinate = [x + worldWidth * worldsAway, coordinate[1]];\n      }\n    }\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n        const layerRenderer = this.getLayerRenderer(layer);\n        if (layer.getSource()) {\n          result = layerRenderer.forEachFeatureAtCoordinate(\n            layer.getSource().getWrapX() ? translatedCoordinate : coordinate,\n            frameState, hitTolerance, forEachFeatureAtCoordinate, thisArg);\n        }\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @abstract\n   * @param {module:ol/pixel~Pixel} pixel Pixel.\n   * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, module:ol/layer/Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n   *     callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @param {function(this: U, module:ol/layer/Layer): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {}\n\n  /**\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: U, module:ol/layer/Layer): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n   * @return {boolean} Is there a feature at the given coordinate?\n   * @template U\n   */\n  hasFeatureAtCoordinate(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\n    const hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate, frameState, hitTolerance, TRUE, this, layerFilter, thisArg);\n\n    return hasFeature !== undefined;\n  }\n\n  /**\n   * @param {module:ol/layer/Layer} layer Layer.\n   * @protected\n   * @return {module:ol/renderer/Layer} Layer renderer.\n   */\n  getLayerRenderer(layer) {\n    const layerKey = getUid(layer).toString();\n    if (layerKey in this.layerRenderers_) {\n      return this.layerRenderers_[layerKey];\n    } else {\n      let renderer;\n      for (let i = 0, ii = this.layerRendererConstructors_.length; i < ii; ++i) {\n        const candidate = this.layerRendererConstructors_[i];\n        if (candidate['handles'](layer)) {\n          renderer = candidate['create'](this, layer);\n          break;\n        }\n      }\n      if (renderer) {\n        this.layerRenderers_[layerKey] = renderer;\n        this.layerRendererListeners_[layerKey] = listen(renderer,\n          EventType.CHANGE, this.handleLayerRendererChange_, this);\n      } else {\n        throw new Error('Unable to create renderer for layer: ' + layer.getType());\n      }\n      return renderer;\n    }\n  }\n\n  /**\n   * @param {string} layerKey Layer key.\n   * @protected\n   * @return {module:ol/renderer/Layer} Layer renderer.\n   */\n  getLayerRendererByKey(layerKey) {\n    return this.layerRenderers_[layerKey];\n  }\n\n  /**\n   * @protected\n   * @return {Object<string, module:ol/renderer/Layer>} Layer renderers.\n   */\n  getLayerRenderers() {\n    return this.layerRenderers_;\n  }\n\n  /**\n   * @return {module:ol/PluggableMap} Map.\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Handle changes in a layer renderer.\n   * @private\n   */\n  handleLayerRendererChange_() {\n    this.map_.render();\n  }\n\n  /**\n   * @param {string} layerKey Layer key.\n   * @return {module:ol/renderer/Layer} Layer renderer.\n   * @private\n   */\n  removeLayerRendererByKey_(layerKey) {\n    const layerRenderer = this.layerRenderers_[layerKey];\n    delete this.layerRenderers_[layerKey];\n\n    unlistenByKey(this.layerRendererListeners_[layerKey]);\n    delete this.layerRendererListeners_[layerKey];\n\n    return layerRenderer;\n  }\n\n  /**\n   * @param {module:ol/PluggableMap} map Map.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @private\n   */\n  removeUnusedLayerRenderers_(map, frameState) {\n    for (const layerKey in this.layerRenderers_) {\n      if (!frameState || !(layerKey in frameState.layerStates)) {\n        this.removeLayerRendererByKey_(layerKey).dispose();\n      }\n    }\n  }\n\n  /**\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @protected\n   */\n  scheduleExpireIconCache(frameState) {\n    frameState.postRenderFunctions.push(/** @type {module:ol/PluggableMap~PostRenderFunction} */ (expireIconCache));\n  }\n\n  /**\n   * @param {!module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @protected\n   */\n  scheduleRemoveUnusedLayerRenderers(frameState) {\n    for (const layerKey in this.layerRenderers_) {\n      if (!(layerKey in frameState.layerStates)) {\n        frameState.postRenderFunctions.push(\n          /** @type {module:ol/PluggableMap~PostRenderFunction} */ (this.removeUnusedLayerRenderers_.bind(this))\n        );\n        return;\n      }\n    }\n  }\n}\n\n\n/**\n * @param {module:ol/PluggableMap} map Map.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n  iconImageCache.expire();\n}\n\n\n/**\n * Render.\n * @param {?module:ol/PluggableMap~FrameState} frameState Frame state.\n */\nMapRenderer.prototype.renderFrame = VOID;\n\n\n/**\n * @param {module:ol/render/EventType} type Event type.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n */\nMapRenderer.prototype.dispatchRenderEvent = VOID;\n\n\n/**\n * @param {module:ol/layer/Layer~State} state1 First layer state.\n * @param {module:ol/layer/Layer~State} state2 Second layer state.\n * @return {number} The zIndex difference.\n */\nexport function sortByZIndex(state1, state2) {\n  return state1.zIndex - state2.zIndex;\n}\nexport default MapRenderer;\n","/**\n * @module ol/renderer/canvas/Map\n */\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\nimport {includes, stableSort} from '../../array.js';\nimport {CLASS_UNSELECTABLE} from '../../css.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {visibleAtResolution} from '../../layer/Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport MapRenderer, {sortByZIndex} from '../Map.js';\nimport SourceState from '../../source/State.js';\n\n\n/**\n * @type {Array<module:ol/renderer/Layer>}\n */\nexport const layerRendererConstructors = [];\n\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nclass CanvasMapRenderer extends MapRenderer {\n\n  /**\n   * @param {module:ol/PluggableMap} map Map.\n   */\n  constructor(map) {\n    super(map);\n\n    const container = map.getViewport();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = this.context_.canvas;\n\n    this.canvas_.style.width = '100%';\n    this.canvas_.style.height = '100%';\n    this.canvas_.style.display = 'block';\n    this.canvas_.className = CLASS_UNSELECTABLE;\n    container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.transform_ = createTransform();\n\n  }\n\n  /**\n   * @param {module:ol/render/EventType} type Event type.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    const map = this.getMap();\n    const context = this.context_;\n    if (map.hasListener(type)) {\n      const extent = frameState.extent;\n      const pixelRatio = frameState.pixelRatio;\n      const viewState = frameState.viewState;\n      const rotation = viewState.rotation;\n\n      const transform = this.getTransform(frameState);\n\n      const vectorContext = new CanvasImmediateRenderer(context, pixelRatio,\n        extent, transform, rotation);\n      const composeEvent = new RenderEvent(type, vectorContext,\n        frameState, context, null);\n      map.dispatchEvent(composeEvent);\n    }\n  }\n\n  /**\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @protected\n   * @return {!module:ol/transform~Transform} Transform.\n   */\n  getTransform(frameState) {\n    const viewState = frameState.viewState;\n    const dx1 = this.canvas_.width / 2;\n    const dy1 = this.canvas_.height / 2;\n    const sx = frameState.pixelRatio / viewState.resolution;\n    const sy = -sx;\n    const angle = -viewState.rotation;\n    const dx2 = -viewState.center[0];\n    const dy2 = -viewState.center[1];\n    return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState) {\n\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.canvas_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const context = this.context_;\n    const pixelRatio = frameState.pixelRatio;\n    const width = Math.round(frameState.size[0] * pixelRatio);\n    const height = Math.round(frameState.size[1] * pixelRatio);\n    if (this.canvas_.width != width || this.canvas_.height != height) {\n      this.canvas_.width = width;\n      this.canvas_.height = height;\n    } else {\n      context.clearRect(0, 0, width, height);\n    }\n\n    const rotation = frameState.viewState.rotation;\n\n    this.calculateMatrices2D(frameState);\n\n    this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n\n    const layerStatesArray = frameState.layerStatesArray;\n    stableSort(layerStatesArray, sortByZIndex);\n\n    if (rotation) {\n      context.save();\n      rotateAtOffset(context, rotation, width / 2, height / 2);\n    }\n\n    const viewResolution = frameState.viewState.resolution;\n    let i, ii, layer, layerRenderer, layerState;\n    for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      layerState = layerStatesArray[i];\n      layer = layerState.layer;\n      layerRenderer = /** @type {module:ol/renderer/canvas/Layer} */ (this.getLayerRenderer(layer));\n      if (!visibleAtResolution(layerState, viewResolution) ||\n          layerState.sourceState != SourceState.READY) {\n        continue;\n      }\n      if (layerRenderer.prepareFrame(frameState, layerState)) {\n        layerRenderer.composeFrame(frameState, layerState, context);\n      }\n    }\n\n    if (rotation) {\n      context.restore();\n    }\n\n    this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n\n    if (!this.renderedVisible_) {\n      this.canvas_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n    this.scheduleRemoveUnusedLayerRenderers(frameState);\n    this.scheduleExpireIconCache(frameState);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\n    let result;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n\n    const coordinate = applyTransform(\n      frameState.pixelToCoordinateTransform, pixel.slice());\n\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n        const layerRenderer = /** @type {module:ol/renderer/canvas/Layer} */ (this.getLayerRenderer(layer));\n        result = layerRenderer.forEachLayerAtCoordinate(\n          coordinate, frameState, hitTolerance, callback, thisArg);\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  registerLayerRenderers(constructors) {\n    super.registerLayerRenderers(constructors);\n    for (let i = 0, ii = constructors.length; i < ii; ++i) {\n      const ctor = constructors[i];\n      if (!includes(layerRendererConstructors, ctor)) {\n        layerRendererConstructors.push(ctor);\n      }\n    }\n  }\n}\n\n\nexport default CanvasMapRenderer;\n","/**\n * @module ol/renderer/Layer\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport TileState from '../TileState.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {FALSE, VOID} from '../functions.js';\nimport SourceState from '../source/State.js';\n\nclass LayerRenderer extends Observable {\n\n  /**\n   * @param {module:ol/layer/Layer} layer Layer.\n   */\n  constructor(layer) {\n\n    super();\n\n    /**\n     * @private\n     * @type {module:ol/layer/Layer}\n     */\n    this.layer_ = layer;\n\n  }\n\n  /**\n   * Create a function that adds loaded tiles to the tile lookup.\n   * @param {module:ol/source/Tile} source Tile source.\n   * @param {module:ol/proj/Projection} projection Projection of the tiles.\n   * @param {Object<number, Object<string, module:ol/Tile>>} tiles Lookup of loaded tiles by zoom level.\n   * @return {function(number, module:ol/TileRange):boolean} A function that can be\n   *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n   * @protected\n   */\n  createLoadedTileFinder(source, projection, tiles) {\n    return (\n      /**\n       * @param {number} zoom Zoom level.\n       * @param {module:ol/TileRange} tileRange Tile range.\n       * @return {boolean} The tile range is fully loaded.\n       */\n      function(zoom, tileRange) {\n        function callback(tile) {\n          if (!tiles[zoom]) {\n            tiles[zoom] = {};\n          }\n          tiles[zoom][tile.tileCoord.toString()] = tile;\n        }\n        return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n      }\n    );\n  }\n\n  /**\n   * @return {module:ol/layer/Layer} Layer.\n   */\n  getLayer() {\n    return this.layer_;\n  }\n\n  /**\n   * Handle changes in image state.\n   * @param {module:ol/events/Event} event Image change event.\n   * @private\n   */\n  handleImageChange_(event) {\n    const image = /** @type {module:ol/Image} */ (event.target);\n    if (image.getState() === ImageState.LOADED) {\n      this.renderIfReadyAndVisible();\n    }\n  }\n\n  /**\n   * Load the image if not already loaded, and register the image change\n   * listener if needed.\n   * @param {module:ol/ImageBase} image Image.\n   * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n   * @protected\n   */\n  loadImage(image) {\n    let imageState = image.getState();\n    if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n      listen(image, EventType.CHANGE, this.handleImageChange_, this);\n    }\n    if (imageState == ImageState.IDLE) {\n      image.load();\n      imageState = image.getState();\n    }\n    return imageState == ImageState.LOADED;\n  }\n\n  /**\n   * @protected\n   */\n  renderIfReadyAndVisible() {\n    const layer = this.getLayer();\n    if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n      this.changed();\n    }\n  }\n\n  /**\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/source/Tile} tileSource Tile source.\n   * @protected\n   */\n  scheduleExpireCache(frameState, tileSource) {\n    if (tileSource.canExpireCache()) {\n      /**\n       * @param {module:ol/source/Tile} tileSource Tile source.\n       * @param {module:ol/PluggableMap} map Map.\n       * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n       */\n      const postRenderFunction = function(tileSource, map, frameState) {\n        const tileSourceKey = getUid(tileSource).toString();\n        if (tileSourceKey in frameState.usedTiles) {\n          tileSource.expireCache(frameState.viewState.projection,\n            frameState.usedTiles[tileSourceKey]);\n        }\n      }.bind(null, tileSource);\n\n      frameState.postRenderFunctions.push(\n        /** @type {module:ol/PluggableMap~PostRenderFunction} */ (postRenderFunction)\n      );\n    }\n  }\n\n  /**\n   * @param {!Object<string, !Object<string, module:ol/TileRange>>} usedTiles Used tiles.\n   * @param {module:ol/source/Tile} tileSource Tile source.\n   * @param {number} z Z.\n   * @param {module:ol/TileRange} tileRange Tile range.\n   * @protected\n   */\n  updateUsedTiles(usedTiles, tileSource, z, tileRange) {\n    // FIXME should we use tilesToDrawByZ instead?\n    const tileSourceKey = getUid(tileSource).toString();\n    const zKey = z.toString();\n    if (tileSourceKey in usedTiles) {\n      if (zKey in usedTiles[tileSourceKey]) {\n        usedTiles[tileSourceKey][zKey].extend(tileRange);\n      } else {\n        usedTiles[tileSourceKey][zKey] = tileRange;\n      }\n    } else {\n      usedTiles[tileSourceKey] = {};\n      usedTiles[tileSourceKey][zKey] = tileRange;\n    }\n  }\n\n  /**\n   * Manage tile pyramid.\n   * This function performs a number of functions related to the tiles at the\n   * current zoom and lower zoom levels:\n   * - registers idle tiles in frameState.wantedTiles so that they are not\n   *   discarded by the tile queue\n   * - enqueues missing tiles\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/source/Tile} tileSource Tile source.\n   * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number} currentZ Current Z.\n   * @param {number} preload Load low resolution tiles up to 'preload' levels.\n   * @param {function(this: T, module:ol/Tile)=} opt_tileCallback Tile callback.\n   * @param {T=} opt_this Object to use as `this` in `opt_tileCallback`.\n   * @protected\n   * @template T\n   */\n  manageTilePyramid(\n    frameState,\n    tileSource,\n    tileGrid,\n    pixelRatio,\n    projection,\n    extent,\n    currentZ,\n    preload,\n    opt_tileCallback,\n    opt_this\n  ) {\n    const tileSourceKey = getUid(tileSource).toString();\n    if (!(tileSourceKey in frameState.wantedTiles)) {\n      frameState.wantedTiles[tileSourceKey] = {};\n    }\n    const wantedTiles = frameState.wantedTiles[tileSourceKey];\n    const tileQueue = frameState.tileQueue;\n    const minZoom = tileGrid.getMinZoom();\n    let tile, tileRange, tileResolution, x, y, z;\n    for (z = minZoom; z <= currentZ; ++z) {\n      tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n      tileResolution = tileGrid.getResolution(z);\n      for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n        for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n          if (currentZ - z <= preload) {\n            tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n            if (tile.getState() == TileState.IDLE) {\n              wantedTiles[tile.getKey()] = true;\n              if (!tileQueue.isKeyQueued(tile.getKey())) {\n                tileQueue.enqueue([tile, tileSourceKey,\n                  tileGrid.getTileCoordCenter(tile.tileCoord), tileResolution]);\n              }\n            }\n            if (opt_tileCallback !== undefined) {\n              opt_tileCallback.call(opt_this, tile);\n            }\n          } else {\n            tileSource.useTile(z, x, y, projection);\n          }\n        }\n      }\n    }\n  }\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: S, (module:ol/Feature|module:ol/render/Feature), module:ol/layer/Layer): T} callback Feature callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|void} Callback result.\n * @template S,T\n */\nLayerRenderer.prototype.forEachFeatureAtCoordinate = VOID;\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @return {boolean} Is there a feature at the given coordinate?\n */\nLayerRenderer.prototype.hasFeatureAtCoordinate = FALSE;\n\n\nexport default LayerRenderer;\n","/**\n * @module ol/renderer/canvas/Layer\n */\nimport {getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../../extent.js';\nimport {TRUE} from '../../functions.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport LayerRenderer from '../Layer.js';\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\n\nclass CanvasLayerRenderer extends LayerRenderer {\n\n  /**\n   * @param {module:ol/layer/Layer} layer Layer.\n   */\n  constructor(layer) {\n\n    super(layer);\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedResolution;\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.transform_ = createTransform();\n\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/extent~Extent} extent Clip extent.\n   * @protected\n   */\n  clip(context, frameState, extent) {\n    const pixelRatio = frameState.pixelRatio;\n    const width = frameState.size[0] * pixelRatio;\n    const height = frameState.size[1] * pixelRatio;\n    const rotation = frameState.viewState.rotation;\n    const topLeft = getTopLeft(/** @type {module:ol/extent~Extent} */ (extent));\n    const topRight = getTopRight(/** @type {module:ol/extent~Extent} */ (extent));\n    const bottomRight = getBottomRight(/** @type {module:ol/extent~Extent} */ (extent));\n    const bottomLeft = getBottomLeft(/** @type {module:ol/extent~Extent} */ (extent));\n\n    applyTransform(frameState.coordinateToPixelTransform, topLeft);\n    applyTransform(frameState.coordinateToPixelTransform, topRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n\n    context.save();\n    rotateAtOffset(context, -rotation, width / 2, height / 2);\n    context.beginPath();\n    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n    context.clip();\n    rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n\n  /**\n   * @param {module:ol/render/EventType} type Event type.\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/transform~Transform=} opt_transform Transform.\n   * @private\n   */\n  dispatchComposeEvent_(type, context, frameState, opt_transform) {\n    const layer = this.getLayer();\n    if (layer.hasListener(type)) {\n      const width = frameState.size[0] * frameState.pixelRatio;\n      const height = frameState.size[1] * frameState.pixelRatio;\n      const rotation = frameState.viewState.rotation;\n      rotateAtOffset(context, -rotation, width / 2, height / 2);\n      const transform = opt_transform !== undefined ?\n        opt_transform : this.getTransform(frameState, 0);\n      const render = new CanvasImmediateRenderer(\n        context, frameState.pixelRatio, frameState.extent, transform,\n        frameState.viewState.rotation);\n      const composeEvent = new RenderEvent(type, render, frameState,\n        context, null);\n      layer.dispatchEvent(composeEvent);\n      rotateAtOffset(context, rotation, width / 2, height / 2);\n    }\n  }\n\n  /**\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, module:ol/layer/Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n   *     callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachLayerAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    const hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, TRUE, this);\n\n    if (hasFeature) {\n      return callback.call(thisArg, this.getLayer(), null);\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/layer/Layer~State} layerState Layer state.\n   * @param {module:ol/transform~Transform=} opt_transform Transform.\n   * @protected\n   */\n  postCompose(context, frameState, layerState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.POSTCOMPOSE, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/transform~Transform=} opt_transform Transform.\n   * @protected\n   */\n  preCompose(context, frameState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.PRECOMPOSE, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/transform~Transform=} opt_transform Transform.\n   * @protected\n   */\n  dispatchRenderEvent(context, frameState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.RENDER, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {number} offsetX Offset on the x-axis in view coordinates.\n   * @protected\n   * @return {!module:ol/transform~Transform} Transform.\n   */\n  getTransform(frameState, offsetX) {\n    const viewState = frameState.viewState;\n    const pixelRatio = frameState.pixelRatio;\n    const dx1 = pixelRatio * frameState.size[0] / 2;\n    const dy1 = pixelRatio * frameState.size[1] / 2;\n    const sx = pixelRatio / viewState.resolution;\n    const sy = -sx;\n    const angle = -viewState.rotation;\n    const dx2 = -viewState.center[0] + offsetX;\n    const dy2 = -viewState.center[1];\n    return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n  }\n\n  /**\n   * @abstract\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/layer/Layer~State} layerState Layer state.\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  composeFrame(frameState, layerState, context) {}\n\n  /**\n   * @abstract\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/layer/Layer~State} layerState Layer state.\n   * @return {boolean} whether composeFrame should be called.\n   */\n  prepareFrame(frameState, layerState) {}\n}\n\nexport default CanvasLayerRenderer;\n","/**\n * @module ol/renderer/canvas/IntermediateCanvas\n */\nimport {scale as scaleCoordinate} from '../../coordinate.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {containsExtent, intersects} from '../../extent.js';\nimport {VOID} from '../../functions.js';\nimport CanvasLayerRenderer from '../canvas/Layer.js';\nimport {create as createTransform, apply as applyTransform} from '../../transform.js';\n\nclass IntermediateCanvasRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {module:ol/layer/Layer} layer Layer.\n   */\n  constructor(layer) {\n\n    super(layer);\n\n    /**\n     * @protected\n     * @type {module:ol/transform~Transform}\n     */\n    this.coordinateToCanvasPixelTransform = createTransform();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitCanvasContext_ = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  composeFrame(frameState, layerState, context) {\n\n    this.preCompose(context, frameState);\n\n    const image = this.getImage();\n    if (image) {\n\n      // clipped rendering if layer extent is set\n      const extent = layerState.extent;\n      const clipped = extent !== undefined &&\n          !containsExtent(extent, frameState.extent) &&\n          intersects(extent, frameState.extent);\n      if (clipped) {\n        this.clip(context, frameState, /** @type {module:ol/extent~Extent} */ (extent));\n      }\n\n      const imageTransform = this.getImageTransform();\n      // for performance reasons, context.save / context.restore is not used\n      // to save and restore the transformation matrix and the opacity.\n      // see http://jsperf.com/context-save-restore-versus-variable\n      const alpha = context.globalAlpha;\n      context.globalAlpha = layerState.opacity;\n\n      // for performance reasons, context.setTransform is only used\n      // when the view is rotated. see http://jsperf.com/canvas-transform\n      const dx = imageTransform[4];\n      const dy = imageTransform[5];\n      const dw = image.width * imageTransform[0];\n      const dh = image.height * imageTransform[3];\n      context.drawImage(image, 0, 0, +image.width, +image.height,\n        Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n      context.globalAlpha = alpha;\n\n      if (clipped) {\n        context.restore();\n      }\n    }\n\n    this.postCompose(context, frameState, layerState);\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Canvas.\n   */\n  getImage() {}\n\n  /**\n   * @abstract\n   * @return {!module:ol/transform~Transform} Image transform.\n   */\n  getImageTransform() {}\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    const layer = this.getLayer();\n    const source = layer.getSource();\n    const resolution = frameState.viewState.resolution;\n    const rotation = frameState.viewState.rotation;\n    const skippedFeatureUids = frameState.skippedFeatureUids;\n    return source.forEachFeatureAtCoordinate(\n      coordinate, resolution, rotation, hitTolerance, skippedFeatureUids,\n      /**\n       * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n       * @return {?} Callback result.\n       */\n      function(feature) {\n        return callback.call(thisArg, feature, layer);\n      });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    if (!this.getImage()) {\n      return undefined;\n    }\n\n    if (this.getLayer().getSource().forEachFeatureAtCoordinate !== VOID) {\n      // for ImageCanvas sources use the original hit-detection logic,\n      // so that for example also transparent polygons are detected\n      return super.forEachLayerAtCoordinate(arguments);\n    } else {\n      const pixel = applyTransform(this.coordinateToCanvasPixelTransform, coordinate.slice());\n      scaleCoordinate(pixel, frameState.viewState.resolution / this.renderedResolution);\n\n      if (!this.hitCanvasContext_) {\n        this.hitCanvasContext_ = createCanvasContext2D(1, 1);\n      }\n\n      this.hitCanvasContext_.clearRect(0, 0, 1, 1);\n      this.hitCanvasContext_.drawImage(this.getImage(), pixel[0], pixel[1], 1, 1, 0, 0, 1, 1);\n\n      const imageData = this.hitCanvasContext_.getImageData(0, 0, 1, 1).data;\n      if (imageData[3] > 0) {\n        return callback.call(thisArg, this.getLayer(), imageData);\n      } else {\n        return undefined;\n      }\n    }\n  }\n}\n\n\nexport default IntermediateCanvasRenderer;\n","/**\n * @module ol/renderer/canvas/ImageLayer\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../../reproj/common.js';\nimport ImageCanvas from '../../ImageCanvas.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {equals} from '../../array.js';\nimport {getHeight, getIntersection, getWidth, isEmpty} from '../../extent.js';\nimport VectorRenderType from '../../layer/VectorRenderType.js';\nimport {assign} from '../../obj.js';\nimport {layerRendererConstructors} from './Map.js';\nimport IntermediateCanvasRenderer from './IntermediateCanvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nclass CanvasImageLayerRenderer extends IntermediateCanvasRenderer {\n\n  /**\n   * @param {module:ol/layer/Image|module:ol/layer/Vector} imageLayer Image or vector layer.\n   */\n  constructor(imageLayer) {\n\n    super(imageLayer);\n\n    /**\n     * @private\n     * @type {?module:ol/ImageBase}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.imageTransform_ = createTransform();\n\n    /**\n     * @type {!Array<string>}\n     */\n    this.skippedFeatures_ = [];\n\n    /**\n     * @private\n     * @type {module:ol/renderer/canvas/VectorLayer}\n     */\n    this.vectorRenderer_ = null;\n\n    if (imageLayer.getType() === LayerType.VECTOR) {\n      for (let i = 0, ii = layerRendererConstructors.length; i < ii; ++i) {\n        const ctor = layerRendererConstructors[i];\n        if (ctor !== CanvasImageLayerRenderer && ctor['handles'](imageLayer)) {\n          this.vectorRenderer_ = new ctor(imageLayer);\n          break;\n        }\n      }\n    }\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.vectorRenderer_) {\n      this.vectorRenderer_.dispose();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    return !this.image_ ? null : this.image_.getImage();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageTransform() {\n    return this.imageTransform_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n\n    const pixelRatio = frameState.pixelRatio;\n    const size = frameState.size;\n    const viewState = frameState.viewState;\n    const viewCenter = viewState.center;\n    const viewResolution = viewState.resolution;\n\n    let image;\n    const imageLayer = /** @type {module:ol/layer/Image} */ (this.getLayer());\n    const imageSource = imageLayer.getSource();\n\n    const hints = frameState.viewHints;\n\n    const vectorRenderer = this.vectorRenderer_;\n    let renderedExtent = frameState.extent;\n    if (!vectorRenderer && layerState.extent !== undefined) {\n      renderedExtent = getIntersection(renderedExtent, layerState.extent);\n    }\n\n    if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] &&\n        !isEmpty(renderedExtent)) {\n      let projection = viewState.projection;\n      if (!ENABLE_RASTER_REPROJECTION) {\n        const sourceProjection = imageSource.getProjection();\n        if (sourceProjection) {\n          projection = sourceProjection;\n        }\n      }\n      let skippedFeatures = this.skippedFeatures_;\n      if (vectorRenderer) {\n        const context = vectorRenderer.context;\n        const imageFrameState = /** @type {module:ol/PluggableMap~FrameState} */ (assign({}, frameState, {\n          size: [\n            getWidth(renderedExtent) / viewResolution,\n            getHeight(renderedExtent) / viewResolution\n          ],\n          viewState: /** @type {module:ol/View~State} */ (assign({}, frameState.viewState, {\n            rotation: 0\n          }))\n        }));\n        const newSkippedFeatures = Object.keys(imageFrameState.skippedFeatureUids).sort();\n        image = new ImageCanvas(renderedExtent, viewResolution, pixelRatio, context.canvas, function(callback) {\n          if (vectorRenderer.prepareFrame(imageFrameState, layerState) &&\n              (vectorRenderer.replayGroupChanged ||\n              !equals(skippedFeatures, newSkippedFeatures))) {\n            context.canvas.width = imageFrameState.size[0] * pixelRatio;\n            context.canvas.height = imageFrameState.size[1] * pixelRatio;\n            vectorRenderer.compose(context, imageFrameState, layerState);\n            skippedFeatures = newSkippedFeatures;\n            callback();\n          }\n        });\n      } else {\n        image = imageSource.getImage(\n          renderedExtent, viewResolution, pixelRatio, projection);\n      }\n      if (image && this.loadImage(image)) {\n        this.image_ = image;\n        this.skippedFeatures_ = skippedFeatures;\n      }\n    }\n\n    if (this.image_) {\n      image = this.image_;\n      const imageExtent = image.getExtent();\n      const imageResolution = image.getResolution();\n      const imagePixelRatio = image.getPixelRatio();\n      const scale = pixelRatio * imageResolution /\n          (viewResolution * imagePixelRatio);\n      const transform = composeTransform(this.imageTransform_,\n        pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n        scale, scale,\n        0,\n        imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n        imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n      composeTransform(this.coordinateToCanvasPixelTransform,\n        pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n        pixelRatio / viewResolution, -pixelRatio / viewResolution,\n        0,\n        -viewCenter[0], -viewCenter[1]);\n\n      this.renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n    }\n\n    return !!this.image_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    if (this.vectorRenderer_) {\n      return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg);\n    } else {\n      return super.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg);\n    }\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasImageLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.IMAGE ||\n    layer.getType() === LayerType.VECTOR &&\n    /** @type {module:ol/layer/Vector} */ (layer).getRenderMode() === VectorRenderType.IMAGE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/canvas/ImageLayer} The layer renderer.\n */\nCanvasImageLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasImageLayerRenderer(/** @type {module:ol/layer/Image} */ (layer));\n};\n\n\nexport default CanvasImageLayerRenderer;\n","/**\n * @module ol/renderer/canvas/TileLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {containsExtent, createEmpty, equals, getIntersection, isEmpty} from '../../extent.js';\nimport IntermediateCanvasRenderer from '../canvas/IntermediateCanvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * Canvas renderer for tile layers.\n * @api\n */\nclass CanvasTileLayerRenderer extends IntermediateCanvasRenderer {\n\n  /**\n   * @param {module:ol/layer/Tile|module:ol/layer/VectorTile} tileLayer Tile layer.\n   * @param {boolean=} opt_noContext Skip the context creation.\n   */\n  constructor(tileLayer, opt_noContext) {\n\n    super(tileLayer);\n\n    /**\n     * @protected\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = opt_noContext ? null : createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.oversampling_;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.renderedExtent_ = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedRevision;\n\n    /**\n     * @protected\n     * @type {!Array<module:ol/Tile>}\n     */\n    this.renderedTiles = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.newTiles_ = false;\n\n    /**\n     * @protected\n     * @type {module:ol/extent~Extent}\n     */\n    this.tmpExtent = createEmpty();\n\n    /**\n     * @private\n     * @type {module:ol/TileRange}\n     */\n    this.tmpTileRange_ = new TileRange(0, 0, 0, 0);\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.imageTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.zDirection = 0;\n\n  }\n\n  /**\n   * @private\n   * @param {module:ol/Tile} tile Tile.\n   * @return {boolean} Tile is drawable.\n   */\n  isDrawableTile_(tile) {\n    const tileState = tile.getState();\n    const useInterimTilesOnError = this.getLayer().getUseInterimTilesOnError();\n    return tileState == TileState.LOADED ||\n        tileState == TileState.EMPTY ||\n        tileState == TileState.ERROR && !useInterimTilesOnError;\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {!module:ol/Tile} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const layer = this.getLayer();\n    const source = /** @type {module:ol/source/Tile} */ (layer.getSource());\n    let tile = source.getTile(z, x, y, pixelRatio, projection);\n    if (tile.getState() == TileState.ERROR) {\n      if (!layer.getUseInterimTilesOnError()) {\n        // When useInterimTilesOnError is false, we consider the error tile as loaded.\n        tile.setState(TileState.LOADED);\n      } else if (layer.getPreload() > 0) {\n        // Preloaded tiles for lower resolutions might have finished loading.\n        this.newTiles_ = true;\n      }\n    }\n    if (!this.isDrawableTile_(tile)) {\n      tile = tile.getInterimTile();\n    }\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n\n    const pixelRatio = frameState.pixelRatio;\n    const size = frameState.size;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const viewResolution = viewState.resolution;\n    const viewCenter = viewState.center;\n\n    const tileLayer = this.getLayer();\n    const tileSource = /** @type {module:ol/source/Tile} */ (tileLayer.getSource());\n    const sourceRevision = tileSource.getRevision();\n    const tileGrid = tileSource.getTileGridForProjection(projection);\n    const z = tileGrid.getZForResolution(viewResolution, this.zDirection);\n    const tileResolution = tileGrid.getResolution(z);\n    let oversampling = Math.round(viewResolution / tileResolution) || 1;\n    let extent = frameState.extent;\n\n    if (layerState.extent !== undefined) {\n      extent = getIntersection(extent, layerState.extent);\n    }\n    if (isEmpty(extent)) {\n      // Return false to prevent the rendering of the layer.\n      return false;\n    }\n\n    const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n    const imageExtent = tileGrid.getTileRangeExtent(z, tileRange);\n\n    const tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n\n    /**\n     * @type {Object<number, Object<string, module:ol/Tile>>}\n     */\n    const tilesToDrawByZ = {};\n    tilesToDrawByZ[z] = {};\n\n    const findLoadedTiles = this.createLoadedTileFinder(\n      tileSource, projection, tilesToDrawByZ);\n\n    const hints = frameState.viewHints;\n    const animatingOrInteracting = hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING];\n\n    const tmpExtent = this.tmpExtent;\n    const tmpTileRange = this.tmpTileRange_;\n    this.newTiles_ = false;\n    let tile, x, y;\n    for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        if (Date.now() - frameState.time > 16 && animatingOrInteracting) {\n          continue;\n        }\n        tile = this.getTile(z, x, y, pixelRatio, projection);\n        if (this.isDrawableTile_(tile)) {\n          const uid = getUid(this);\n          if (tile.getState() == TileState.LOADED) {\n            tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n            const inTransition = tile.inTransition(uid);\n            if (!this.newTiles_ && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {\n              this.newTiles_ = true;\n            }\n          }\n          if (tile.getAlpha(uid, frameState.time) === 1) {\n            // don't look for alt tiles if alpha is 1\n            continue;\n          }\n        }\n\n        const childTileRange = tileGrid.getTileCoordChildTileRange(\n          tile.tileCoord, tmpTileRange, tmpExtent);\n        let covered = false;\n        if (childTileRange) {\n          covered = findLoadedTiles(z + 1, childTileRange);\n        }\n        if (!covered) {\n          tileGrid.forEachTileCoordParentTileRange(\n            tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);\n        }\n\n      }\n    }\n\n    const renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n    if (!(this.renderedResolution && Date.now() - frameState.time > 16 && animatingOrInteracting) && (\n      this.newTiles_ ||\n          !(this.renderedExtent_ && containsExtent(this.renderedExtent_, extent)) ||\n          this.renderedRevision != sourceRevision ||\n          oversampling != this.oversampling_ ||\n          !animatingOrInteracting && renderedResolution != this.renderedResolution\n    )) {\n\n      const context = this.context;\n      if (context) {\n        const tilePixelSize = tileSource.getTilePixelSize(z, pixelRatio, projection);\n        const width = Math.round(tileRange.getWidth() * tilePixelSize[0] / oversampling);\n        const height = Math.round(tileRange.getHeight() * tilePixelSize[1] / oversampling);\n        const canvas = context.canvas;\n        if (canvas.width != width || canvas.height != height) {\n          this.oversampling_ = oversampling;\n          canvas.width = width;\n          canvas.height = height;\n        } else {\n          if (this.renderedExtent_ && !equals(imageExtent, this.renderedExtent_)) {\n            context.clearRect(0, 0, width, height);\n          }\n          oversampling = this.oversampling_;\n        }\n      }\n\n      this.renderedTiles.length = 0;\n      /** @type {Array<number>} */\n      const zs = Object.keys(tilesToDrawByZ).map(Number);\n      zs.sort(function(a, b) {\n        if (a === z) {\n          return 1;\n        } else if (b === z) {\n          return -1;\n        } else {\n          return a > b ? 1 : a < b ? -1 : 0;\n        }\n      });\n      let currentResolution, currentScale, currentTilePixelSize, currentZ, i, ii;\n      let tileExtent, tileGutter, tilesToDraw, w, h;\n      for (i = 0, ii = zs.length; i < ii; ++i) {\n        currentZ = zs[i];\n        currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);\n        currentResolution = tileGrid.getResolution(currentZ);\n        currentScale = currentResolution / tileResolution;\n        tileGutter = tilePixelRatio * tileSource.getGutterForProjection(projection);\n        tilesToDraw = tilesToDrawByZ[currentZ];\n        for (const tileCoordKey in tilesToDraw) {\n          tile = tilesToDraw[tileCoordKey];\n          tileExtent = tileGrid.getTileCoordExtent(tile.getTileCoord(), tmpExtent);\n          x = (tileExtent[0] - imageExtent[0]) / tileResolution * tilePixelRatio / oversampling;\n          y = (imageExtent[3] - tileExtent[3]) / tileResolution * tilePixelRatio / oversampling;\n          w = currentTilePixelSize[0] * currentScale / oversampling;\n          h = currentTilePixelSize[1] * currentScale / oversampling;\n          this.drawTileImage(tile, frameState, layerState, x, y, w, h, tileGutter, z === currentZ);\n          this.renderedTiles.push(tile);\n        }\n      }\n\n      this.renderedRevision = sourceRevision;\n      this.renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n      this.renderedExtent_ = imageExtent;\n    }\n\n    const scale = this.renderedResolution / viewResolution;\n    const transform = composeTransform(this.imageTransform_,\n      pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n      scale, scale,\n      0,\n      (this.renderedExtent_[0] - viewCenter[0]) / this.renderedResolution * pixelRatio,\n      (viewCenter[1] - this.renderedExtent_[3]) / this.renderedResolution * pixelRatio);\n    composeTransform(this.coordinateToCanvasPixelTransform,\n      pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n      pixelRatio / viewResolution, -pixelRatio / viewResolution,\n      0,\n      -viewCenter[0], -viewCenter[1]);\n\n\n    this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);\n    this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio,\n      projection, extent, z, tileLayer.getPreload());\n    this.scheduleExpireCache(frameState, tileSource);\n\n    return this.renderedTiles.length > 0;\n  }\n\n  /**\n   * @param {module:ol/Tile} tile Tile.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/layer/Layer~State} layerState Layer state.\n   * @param {number} x Left of the tile.\n   * @param {number} y Top of the tile.\n   * @param {number} w Width of the tile.\n   * @param {number} h Height of the tile.\n   * @param {number} gutter Tile gutter.\n   * @param {boolean} transition Apply an alpha transition.\n   */\n  drawTileImage(tile, frameState, layerState, x, y, w, h, gutter, transition) {\n    const image = tile.getImage(this.getLayer());\n    if (!image) {\n      return;\n    }\n    const uid = getUid(this);\n    const alpha = transition ? tile.getAlpha(uid, frameState.time) : 1;\n    if (alpha === 1 && !this.getLayer().getSource().getOpaque(frameState.viewState.projection)) {\n      this.context.clearRect(x, y, w, h);\n    }\n    const alphaChanged = alpha !== this.context.globalAlpha;\n    if (alphaChanged) {\n      this.context.save();\n      this.context.globalAlpha = alpha;\n    }\n    this.context.drawImage(image, gutter, gutter,\n      image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);\n\n    if (alphaChanged) {\n      this.context.restore();\n    }\n    if (alpha !== 1) {\n      frameState.animate = true;\n    } else if (transition) {\n      tile.endTransition(uid);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    const context = this.context;\n    return context ? context.canvas : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageTransform() {\n    return this.imageTransform_;\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/canvas/TileLayer} The layer renderer.\n */\nCanvasTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasTileLayerRenderer(/** @type {module:ol/layer/Tile} */ (layer));\n};\n\n\n/**\n * @function\n * @return {module:ol/layer/Tile|module:ol/layer/VectorTile}\n */\nCanvasTileLayerRenderer.prototype.getLayer;\n\n\nexport default CanvasTileLayerRenderer;\n","/**\n * @module ol/render/ReplayGroup\n */\n/**\n * Base class for replay groups.\n */\nclass ReplayGroup {\n  /**\n   * @abstract\n   * @param {number|undefined} zIndex Z index.\n   * @param {module:ol/render/ReplayType} replayType Replay type.\n   * @return {module:ol/render/VectorContext} Replay.\n   */\n  getReplay(zIndex, replayType) {}\n\n  /**\n   * @abstract\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {}\n}\n\nexport default ReplayGroup;\n","/**\n * @module ol/render/ReplayType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};\n","/**\n * @module ol/geom/flat/textpath\n */\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {function(string):number} measure Measure function returning the\n * width of the character passed as 1st argument.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @return {Array<Array<*>>} The result array of null if `maxAngle` was\n * exceeded. Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(\n  flatCoordinates, offset, end, stride, text, measure, startM, maxAngle) {\n  const result = [];\n\n  // Keep text upright\n  const reverse = flatCoordinates[offset] > flatCoordinates[end - stride];\n\n  const numChars = text.length;\n\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  offset += stride;\n  let x2 = flatCoordinates[offset];\n  let y2 = flatCoordinates[offset + 1];\n  let segmentM = 0;\n  let segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\n  let chunk = '';\n  let chunkLength = 0;\n  let data, index, previousAngle;\n  for (let i = 0; i < numChars; ++i) {\n    index = reverse ? numChars - i - 1 : i;\n    const char = text.charAt(index);\n    chunk = reverse ? char + chunk : chunk + char;\n    const charLength = measure(chunk) - chunkLength;\n    chunkLength += charLength;\n    const charM = startM + charLength / 2;\n    while (offset < end - stride && segmentM + segmentLength < charM) {\n      x1 = x2;\n      y1 = y2;\n      offset += stride;\n      x2 = flatCoordinates[offset];\n      y2 = flatCoordinates[offset + 1];\n      segmentM += segmentLength;\n      segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    }\n    const segmentPos = charM - segmentM;\n    let angle = Math.atan2(y2 - y1, x2 - x1);\n    if (reverse) {\n      angle += angle > 0 ? -Math.PI : Math.PI;\n    }\n    if (previousAngle !== undefined) {\n      let delta = angle - previousAngle;\n      delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n    const interpolate = segmentPos / segmentLength;\n    const x = lerp(x1, x2, interpolate);\n    const y = lerp(y1, y2, interpolate);\n    if (previousAngle == angle) {\n      if (reverse) {\n        data[0] = x;\n        data[1] = y;\n        data[2] = charLength / 2;\n      }\n      data[4] = chunk;\n    } else {\n      chunk = char;\n      chunkLength = charLength;\n      data = [x, y, charLength / 2, angle, chunk];\n      if (reverse) {\n        result.unshift(data);\n      } else {\n        result.push(data);\n      }\n      previousAngle = angle;\n    }\n    startM += charLength;\n  }\n  return result;\n}\n","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nconst Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const fillInstruction = [Instruction.FILL];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const strokeInstruction = [Instruction.STROKE];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const beginPathInstruction = [Instruction.BEGIN_PATH];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const closePathInstruction = [Instruction.CLOSE_PATH];\n\n\nexport default Instruction;\n","/**\n * @module ol/render/replay\n */\nimport ReplayType from '../render/ReplayType.js';\n\n\n/**\n * @const\n * @type {Array<module:ol/render/ReplayType>}\n */\nexport const ORDER = [\n  ReplayType.POLYGON,\n  ReplayType.CIRCLE,\n  ReplayType.LINE_STRING,\n  ReplayType.IMAGE,\n  ReplayType.TEXT,\n  ReplayType.DEFAULT\n];\n\n/**\n * @const\n * @enum {number}\n */\nexport const TEXT_ALIGN = {};\nTEXT_ALIGN['left'] = 0;\nTEXT_ALIGN['end'] = 0;\nTEXT_ALIGN['center'] = 0.5;\nTEXT_ALIGN['right'] = 1;\nTEXT_ALIGN['start'] = 1;\nTEXT_ALIGN['top'] = 0;\nTEXT_ALIGN['middle'] = 0.5;\nTEXT_ALIGN['hanging'] = 0.2;\nTEXT_ALIGN['alphabetic'] = 0.8;\nTEXT_ALIGN['ideographic'] = 0.8;\nTEXT_ALIGN['bottom'] = 1;\n","/**\n * @module ol/render/canvas/Replay\n */\nimport {getUid} from '../../util.js';\nimport {VOID} from '../../functions.js';\nimport {equals, reverseSubArray} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {buffer, clone, coordinateRelationship, createEmpty, createOrUpdate,\n  createOrUpdateEmpty, extend, extendCoordinate, intersects} from '../../extent.js';\nimport Relationship from '../../extent/Relationship.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray} from '../../geom/flat/inflate.js';\nimport {lineStringLength} from '../../geom/flat/length.js';\nimport {drawTextOnPath} from '../../geom/flat/textpath.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {isEmpty} from '../../obj.js';\nimport VectorContext from '../VectorContext.js';\nimport {drawImage, resetTransform, defaultPadding, defaultFillStyle, defaultStrokeStyle,\n  defaultMiterLimit, defaultLineWidth, defaultLineJoin, defaultLineDashOffset,\n  defaultLineDash, defaultLineCap} from '../canvas.js';\nimport CanvasInstruction from '../canvas/Instruction.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  apply as applyTransform,\n  setFromArray as transformSetFromArray\n} from '../../transform.js';\n\n\n/**\n * @type {module:ol/extent~Extent}\n */\nconst tmpExtent = createEmpty();\n\n\n/**\n * @type {!module:ol/transform~Transform}\n */\nconst tmpTransform = createTransform();\n\n\nclass CanvasReplay extends VectorContext {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super();\n\n    /**\n     * @type {?}\n     */\n    this.declutterTree = declutterTree;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.tolerance = tolerance;\n\n    /**\n     * @protected\n     * @const\n     * @type {module:ol/extent~Extent}\n     */\n    this.maxExtent = maxExtent;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.overlaps = overlaps;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.pixelRatio = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxLineWidth = 0;\n\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.alignFill_;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction1_ = null;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction2_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.bufferedMaxExtent_ = null;\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.instructions = [];\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.coordinates = [];\n\n    /**\n     * @private\n     * @type {!Object<number,module:ol/coordinate~Coordinate|Array<module:ol/coordinate~Coordinate>|Array<Array<module:ol/coordinate~Coordinate>>>}\n     */\n    this.coordinateCache_ = {};\n\n    /**\n     * @private\n     * @type {!module:ol/transform~Transform}\n     */\n    this.renderedTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.hitDetectionInstructions = [];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = null;\n\n    /**\n     * @protected\n     * @type {module:ol/render/canvas~FillStrokeState}\n     */\n    this.state = /** @type {module:ol/render/canvas~FillStrokeState} */ ({});\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = 0;\n\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/coordinate~Coordinate} p1 1st point of the background box.\n   * @param {module:ol/coordinate~Coordinate} p2 2nd point of the background box.\n   * @param {module:ol/coordinate~Coordinate} p3 3rd point of the background box.\n   * @param {module:ol/coordinate~Coordinate} p4 4th point of the background box.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayTextBackground_(context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n    context.beginPath();\n    context.moveTo.apply(context, p1);\n    context.lineTo.apply(context, p2);\n    context.lineTo.apply(context, p3);\n    context.lineTo.apply(context, p4);\n    context.lineTo.apply(context, p1);\n    if (fillInstruction) {\n      this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n      this.fill_(context);\n    }\n    if (strokeInstruction) {\n      this.setStrokeStyle_(context, /** @type {Array<*>} */ (strokeInstruction));\n      context.stroke();\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n   * @param {number} anchorX Anchor X.\n   * @param {number} anchorY Anchor Y.\n   * @param {module:ol/render/canvas~DeclutterGroup} declutterGroup Declutter group.\n   * @param {number} height Height.\n   * @param {number} opacity Opacity.\n   * @param {number} originX Origin X.\n   * @param {number} originY Origin Y.\n   * @param {number} rotation Rotation.\n   * @param {number} scale Scale.\n   * @param {boolean} snapToPixel Snap to pixel.\n   * @param {number} width Width.\n   * @param {Array<number>} padding Padding.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayImage_(\n    context,\n    x,\n    y,\n    image,\n    anchorX,\n    anchorY,\n    declutterGroup,\n    height,\n    opacity,\n    originX,\n    originY,\n    rotation,\n    scale,\n    snapToPixel,\n    width,\n    padding,\n    fillInstruction,\n    strokeInstruction\n  ) {\n    const fillStroke = fillInstruction || strokeInstruction;\n    anchorX *= scale;\n    anchorY *= scale;\n    x -= anchorX;\n    y -= anchorY;\n\n    const w = (width + originX > image.width) ? image.width - originX : width;\n    const h = (height + originY > image.height) ? image.height - originY : height;\n    const boxW = padding[3] + w * scale + padding[1];\n    const boxH = padding[0] + h * scale + padding[2];\n    const boxX = x - padding[3];\n    const boxY = y - padding[0];\n\n    /** @type {module:ol/coordinate~Coordinate} */\n    let p1;\n    /** @type {module:ol/coordinate~Coordinate} */\n    let p2;\n    /** @type {module:ol/coordinate~Coordinate} */\n    let p3;\n    /** @type {module:ol/coordinate~Coordinate} */\n    let p4;\n    if (fillStroke || rotation !== 0) {\n      p1 = [boxX, boxY];\n      p2 = [boxX + boxW, boxY];\n      p3 = [boxX + boxW, boxY + boxH];\n      p4 = [boxX, boxY + boxH];\n    }\n\n    let transform = null;\n    if (rotation !== 0) {\n      const centerX = x + anchorX;\n      const centerY = y + anchorY;\n      transform = composeTransform(tmpTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n\n      createOrUpdateEmpty(tmpExtent);\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p1));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p2));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p3));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p4));\n    } else {\n      createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, tmpExtent);\n    }\n    const canvas = context.canvas;\n    const strokePadding = strokeInstruction ? (strokeInstruction[2] * scale / 2) : 0;\n    const intersects =\n        tmpExtent[0] - strokePadding <= canvas.width && tmpExtent[2] + strokePadding >= 0 &&\n        tmpExtent[1] - strokePadding <= canvas.height && tmpExtent[3] + strokePadding >= 0;\n\n    if (snapToPixel) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n\n    if (declutterGroup) {\n      if (!intersects && declutterGroup[4] == 1) {\n        return;\n      }\n      extend(declutterGroup, tmpExtent);\n      const declutterArgs = intersects ?\n        [context, transform ? transform.slice(0) : null, opacity, image, originX, originY, w, h, x, y, scale] :\n        null;\n      if (declutterArgs && fillStroke) {\n        declutterArgs.push(fillInstruction, strokeInstruction, p1, p2, p3, p4);\n      }\n      declutterGroup.push(declutterArgs);\n    } else if (intersects) {\n      if (fillStroke) {\n        this.replayTextBackground_(context, p1, p2, p3, p4,\n          /** @type {Array<*>} */ (fillInstruction),\n          /** @type {Array<*>} */ (strokeInstruction));\n      }\n      drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale);\n    }\n  }\n\n  /**\n   * @protected\n   * @param {Array<number>} dashArray Dash array.\n   * @return {Array<number>} Dash array with pixel ratio applied\n   */\n  applyPixelRatio(dashArray) {\n    const pixelRatio = this.pixelRatio;\n    return pixelRatio == 1 ? dashArray : dashArray.map(function(dash) {\n      return dash * pixelRatio;\n    });\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} closed Last input coordinate equals first.\n   * @param {boolean} skipFirst Skip first coordinate.\n   * @protected\n   * @return {number} My end.\n   */\n  appendFlatCoordinates(flatCoordinates, offset, end, stride, closed, skipFirst) {\n\n    let myEnd = this.coordinates.length;\n    const extent = this.getBufferedMaxExtent();\n    if (skipFirst) {\n      offset += stride;\n    }\n    const lastCoord = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n    const nextCoord = [NaN, NaN];\n    let skipped = true;\n\n    let i, lastRel, nextRel;\n    for (i = offset + stride; i < end; i += stride) {\n      nextCoord[0] = flatCoordinates[i];\n      nextCoord[1] = flatCoordinates[i + 1];\n      nextRel = coordinateRelationship(extent, nextCoord);\n      if (nextRel !== lastRel) {\n        if (skipped) {\n          this.coordinates[myEnd++] = lastCoord[0];\n          this.coordinates[myEnd++] = lastCoord[1];\n        }\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else if (nextRel === Relationship.INTERSECTING) {\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else {\n        skipped = true;\n      }\n      lastCoord[0] = nextCoord[0];\n      lastCoord[1] = nextCoord[1];\n      lastRel = nextRel;\n    }\n\n    // Last coordinate equals first or only one point to append:\n    if ((closed && skipped) || i === offset + stride) {\n      this.coordinates[myEnd++] = lastCoord[0];\n      this.coordinates[myEnd++] = lastCoord[1];\n    }\n    return myEnd;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Array<number>} replayEnds Replay ends.\n   * @return {number} Offset.\n   */\n  drawCustomCoordinates_(flatCoordinates, offset, ends, stride, replayEnds) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const replayEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n      replayEnds.push(replayEnd);\n      offset = end;\n    }\n    return offset;\n  }\n\n  /**\n   * @inheritDoc.\n   */\n  drawCustom(geometry, feature, renderer) {\n    this.beginGeometry(geometry, feature);\n    const type = geometry.getType();\n    const stride = geometry.getStride();\n    const replayBegin = this.coordinates.length;\n    let flatCoordinates, replayEnd, replayEnds, replayEndss;\n    let offset;\n    if (type == GeometryType.MULTI_POLYGON) {\n      geometry = /** @type {module:ol/geom/MultiPolygon} */ (geometry);\n      flatCoordinates = geometry.getOrientedFlatCoordinates();\n      replayEndss = [];\n      const endss = geometry.getEndss();\n      offset = 0;\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const myEnds = [];\n        offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n        replayEndss.push(myEnds);\n      }\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n    } else if (type == GeometryType.POLYGON || type == GeometryType.MULTI_LINE_STRING) {\n      replayEnds = [];\n      flatCoordinates = (type == GeometryType.POLYGON) ?\n        /** @type {module:ol/geom/Polygon} */ (geometry).getOrientedFlatCoordinates() :\n        geometry.getFlatCoordinates();\n      offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n        /** @type {module:ol/geom/Polygon|module:ol/geom/MultiLineString} */ (geometry).getEnds(),\n        stride, replayEnds);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnds, geometry, renderer, inflateCoordinatesArray]);\n    } else if (type == GeometryType.LINE_STRING || type == GeometryType.MULTI_POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      replayEnd = this.appendFlatCoordinates(\n        flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnd, geometry, renderer, inflateCoordinates]);\n    } else if (type == GeometryType.POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n      replayEnd = this.coordinates.length;\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnd, geometry, renderer]);\n    }\n    this.endGeometry(geometry, feature);\n  }\n\n  /**\n   * @protected\n   * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  beginGeometry(geometry, feature) {\n    this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n    this.instructions.push(this.beginGeometryInstruction1_);\n    this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n    this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  fill_(context) {\n    if (this.alignFill_) {\n      const origin = applyTransform(this.renderedTransform_, [0, 0]);\n      const repeatSize = 512 * this.pixelRatio;\n      context.translate(origin[0] % repeatSize, origin[1] % repeatSize);\n      context.rotate(this.viewRotation_);\n    }\n    context.fill();\n    if (this.alignFill_) {\n      context.setTransform.apply(context, resetTransform);\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {Array<*>} instruction Instruction.\n   */\n  setStrokeStyle_(context, instruction) {\n    context.strokeStyle = /** @type {module:ol/colorlike~ColorLike} */ (instruction[1]);\n    context.lineWidth = /** @type {number} */ (instruction[2]);\n    context.lineCap = /** @type {string} */ (instruction[3]);\n    context.lineJoin = /** @type {string} */ (instruction[4]);\n    context.miterLimit = /** @type {number} */ (instruction[5]);\n    if (CANVAS_LINE_DASH) {\n      context.lineDashOffset = /** @type {number} */ (instruction[7]);\n      context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n    }\n  }\n\n  /**\n   * @param {module:ol/render/canvas~DeclutterGroup} declutterGroup Declutter group.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  renderDeclutter_(declutterGroup, feature) {\n    if (declutterGroup && declutterGroup.length > 5) {\n      const groupCount = declutterGroup[4];\n      if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n        /** @type {module:ol/structs/RBush~Entry} */\n        const box = {\n          minX: /** @type {number} */ (declutterGroup[0]),\n          minY: /** @type {number} */ (declutterGroup[1]),\n          maxX: /** @type {number} */ (declutterGroup[2]),\n          maxY: /** @type {number} */ (declutterGroup[3]),\n          value: feature\n        };\n        if (!this.declutterTree.collides(box)) {\n          this.declutterTree.insert(box);\n          for (let j = 5, jj = declutterGroup.length; j < jj; ++j) {\n            const declutterData = /** @type {Array} */ (declutterGroup[j]);\n            if (declutterData) {\n              if (declutterData.length > 11) {\n                this.replayTextBackground_(declutterData[0],\n                  declutterData[13], declutterData[14], declutterData[15], declutterData[16],\n                  declutterData[11], declutterData[12]);\n              }\n              drawImage.apply(undefined, declutterData);\n            }\n          }\n        }\n        declutterGroup.length = 5;\n        createOrUpdateEmpty(declutterGroup);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/transform~Transform} transform Transform.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {Array<*>} instructions Instructions array.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} featureCallback Feature callback.\n   * @param {module:ol/extent~Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  replay_(\n    context,\n    transform,\n    skippedFeaturesHash,\n    instructions,\n    snapToPixel,\n    featureCallback,\n    opt_hitExtent\n  ) {\n    /** @type {Array<number>} */\n    let pixelCoordinates;\n    if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n      pixelCoordinates = this.pixelCoordinates_;\n    } else {\n      if (!this.pixelCoordinates_) {\n        this.pixelCoordinates_ = [];\n      }\n      pixelCoordinates = transform2D(\n        this.coordinates, 0, this.coordinates.length, 2,\n        transform, this.pixelCoordinates_);\n      transformSetFromArray(this.renderedTransform_, transform);\n    }\n    const skipFeatures = !isEmpty(skippedFeaturesHash);\n    let i = 0; // instruction index\n    const ii = instructions.length; // end of instructions\n    let d = 0; // data index\n    let dd; // end of per-instruction data\n    let anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, image;\n    let pendingFill = 0;\n    let pendingStroke = 0;\n    let lastFillInstruction = null;\n    let lastStrokeInstruction = null;\n    const coordinateCache = this.coordinateCache_;\n    const viewRotation = this.viewRotation_;\n\n    const state = /** @type {module:ol/render~State} */ ({\n      context: context,\n      pixelRatio: this.pixelRatio,\n      resolution: this.resolution,\n      rotation: viewRotation\n    });\n\n    // When the batch size gets too big, performance decreases. 200 is a good\n    // balance between batch size and number of fill/stroke instructions.\n    const batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n    let /** @type {module:ol/Feature|module:ol/render/Feature} */ feature;\n    let x, y;\n    while (i < ii) {\n      const instruction = instructions[i];\n      const type = /** @type {module:ol/render/canvas/Instruction} */ (instruction[0]);\n      switch (type) {\n        case CanvasInstruction.BEGIN_GEOMETRY:\n          feature = /** @type {module:ol/Feature|module:ol/render/Feature} */ (instruction[1]);\n          if ((skipFeatures &&\n              skippedFeaturesHash[getUid(feature).toString()]) ||\n              !feature.getGeometry()) {\n            i = /** @type {number} */ (instruction[2]);\n          } else if (opt_hitExtent !== undefined && !intersects(\n            opt_hitExtent, feature.getGeometry().getExtent())) {\n            i = /** @type {number} */ (instruction[2]) + 1;\n          } else {\n            ++i;\n          }\n          break;\n        case CanvasInstruction.BEGIN_PATH:\n          if (pendingFill > batchSize) {\n            this.fill_(context);\n            pendingFill = 0;\n          }\n          if (pendingStroke > batchSize) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          if (!pendingFill && !pendingStroke) {\n            context.beginPath();\n            prevX = prevY = NaN;\n          }\n          ++i;\n          break;\n        case CanvasInstruction.CIRCLE:\n          d = /** @type {number} */ (instruction[1]);\n          const x1 = pixelCoordinates[d];\n          const y1 = pixelCoordinates[d + 1];\n          const x2 = pixelCoordinates[d + 2];\n          const y2 = pixelCoordinates[d + 3];\n          const dx = x2 - x1;\n          const dy = y2 - y1;\n          const r = Math.sqrt(dx * dx + dy * dy);\n          context.moveTo(x1 + r, y1);\n          context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n          ++i;\n          break;\n        case CanvasInstruction.CLOSE_PATH:\n          context.closePath();\n          ++i;\n          break;\n        case CanvasInstruction.CUSTOM:\n          d = /** @type {number} */ (instruction[1]);\n          dd = instruction[2];\n          const geometry = /** @type {module:ol/geom/SimpleGeometry} */ (instruction[3]);\n          const renderer = instruction[4];\n          const fn = instruction.length == 6 ? instruction[5] : undefined;\n          state.geometry = geometry;\n          state.feature = feature;\n          if (!(i in coordinateCache)) {\n            coordinateCache[i] = [];\n          }\n          const coords = coordinateCache[i];\n          if (fn) {\n            fn(pixelCoordinates, d, dd, 2, coords);\n          } else {\n            coords[0] = pixelCoordinates[d];\n            coords[1] = pixelCoordinates[d + 1];\n            coords.length = 2;\n          }\n          renderer(coords, state);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_IMAGE:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          image = /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */\n              (instruction[3]);\n          // Remaining arguments in DRAW_IMAGE are in alphabetical order\n          anchorX = /** @type {number} */ (instruction[4]);\n          anchorY = /** @type {number} */ (instruction[5]);\n          declutterGroup = featureCallback ? null : /** @type {module:ol/render/canvas~DeclutterGroup} */ (instruction[6]);\n          const height = /** @type {number} */ (instruction[7]);\n          const opacity = /** @type {number} */ (instruction[8]);\n          const originX = /** @type {number} */ (instruction[9]);\n          const originY = /** @type {number} */ (instruction[10]);\n          const rotateWithView = /** @type {boolean} */ (instruction[11]);\n          let rotation = /** @type {number} */ (instruction[12]);\n          const scale = /** @type {number} */ (instruction[13]);\n          const width = /** @type {number} */ (instruction[14]);\n\n          let padding, backgroundFill, backgroundStroke;\n          if (instruction.length > 16) {\n            padding = /** @type {Array<number>} */ (instruction[15]);\n            backgroundFill = /** @type {boolean} */ (instruction[16]);\n            backgroundStroke = /** @type {boolean} */ (instruction[17]);\n          } else {\n            padding = defaultPadding;\n            backgroundFill = backgroundStroke = false;\n          }\n\n          if (rotateWithView) {\n            rotation += viewRotation;\n          }\n          for (; d < dd; d += 2) {\n            this.replayImage_(context,\n              pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY,\n              declutterGroup, height, opacity, originX, originY, rotation, scale,\n              snapToPixel, width, padding,\n              backgroundFill ? /** @type {Array<*>} */ (lastFillInstruction) : null,\n              backgroundStroke ? /** @type {Array<*>} */ (lastStrokeInstruction) : null);\n          }\n          this.renderDeclutter_(declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_CHARS:\n          const begin = /** @type {number} */ (instruction[1]);\n          const end = /** @type {number} */ (instruction[2]);\n          const baseline = /** @type {number} */ (instruction[3]);\n          declutterGroup = featureCallback ? null : /** @type {module:ol/render/canvas~DeclutterGroup} */ (instruction[4]);\n          const overflow = /** @type {number} */ (instruction[5]);\n          const fillKey = /** @type {string} */ (instruction[6]);\n          const maxAngle = /** @type {number} */ (instruction[7]);\n          const measure = /** @type {function(string):number} */ (instruction[8]);\n          const offsetY = /** @type {number} */ (instruction[9]);\n          const strokeKey = /** @type {string} */ (instruction[10]);\n          const strokeWidth = /** @type {number} */ (instruction[11]);\n          const text = /** @type {string} */ (instruction[12]);\n          const textKey = /** @type {string} */ (instruction[13]);\n          const textScale = /** @type {number} */ (instruction[14]);\n\n          const pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n          const textLength = measure(text);\n          if (overflow || textLength <= pathLength) {\n            const textAlign = /** @type {module:ol~render} */ (this).textStates[textKey].textAlign;\n            const startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n            const parts = drawTextOnPath(\n              pixelCoordinates, begin, end, 2, text, measure, startM, maxAngle);\n            if (parts) {\n              let c, cc, chars, label, part;\n              if (strokeKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = /** @type {module:ol~render} */ (this).getImage(chars, textKey, '', strokeKey);\n                  anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                  anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n              if (fillKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = /** @type {module:ol~render} */ (this).getImage(chars, textKey, fillKey, '');\n                  anchorX = /** @type {number} */ (part[2]);\n                  anchorY = baseline * label.height - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n            }\n          }\n          this.renderDeclutter_(declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.END_GEOMETRY:\n          if (featureCallback !== undefined) {\n            feature = /** @type {module:ol/Feature|module:ol/render/Feature} */ (instruction[1]);\n            const result = featureCallback(feature);\n            if (result) {\n              return result;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.FILL:\n          if (batchSize) {\n            pendingFill++;\n          } else {\n            this.fill_(context);\n          }\n          ++i;\n          break;\n        case CanvasInstruction.MOVE_TO_LINE_TO:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = (x + 0.5) | 0;\n          roundY = (y + 0.5) | 0;\n          if (roundX !== prevX || roundY !== prevY) {\n            context.moveTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n          for (d += 2; d < dd; d += 2) {\n            x = pixelCoordinates[d];\n            y = pixelCoordinates[d + 1];\n            roundX = (x + 0.5) | 0;\n            roundY = (y + 0.5) | 0;\n            if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n              context.lineTo(x, y);\n              prevX = roundX;\n              prevY = roundY;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.SET_FILL_STYLE:\n          lastFillInstruction = instruction;\n          this.alignFill_ = instruction[2];\n\n          if (pendingFill) {\n            this.fill_(context);\n            pendingFill = 0;\n            if (pendingStroke) {\n              context.stroke();\n              pendingStroke = 0;\n            }\n          }\n\n          context.fillStyle = /** @type {module:ol/colorlike~ColorLike} */ (instruction[1]);\n          ++i;\n          break;\n        case CanvasInstruction.SET_STROKE_STYLE:\n          lastStrokeInstruction = instruction;\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n          ++i;\n          break;\n        case CanvasInstruction.STROKE:\n          if (batchSize) {\n            pendingStroke++;\n          } else {\n            context.stroke();\n          }\n          ++i;\n          break;\n        default:\n          ++i; // consume the instruction anyway, to avoid an infinite loop\n          break;\n      }\n    }\n    if (pendingFill) {\n      this.fill_(context);\n    }\n    if (pendingStroke) {\n      context.stroke();\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/transform~Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   */\n  replay(context, transform, viewRotation, skippedFeaturesHash, snapToPixel) {\n    this.viewRotation_ = viewRotation;\n    this.replay_(context, transform,\n      skippedFeaturesHash, this.instructions, snapToPixel, undefined, undefined);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/transform~Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {function((module:ol/Feature|module:ol/render/Feature)): T=} opt_featureCallback\n   *     Feature callback.\n   * @param {module:ol/extent~Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  replayHitDetection(\n    context,\n    transform,\n    viewRotation,\n    skippedFeaturesHash,\n    opt_featureCallback,\n    opt_hitExtent\n  ) {\n    this.viewRotation_ = viewRotation;\n    return this.replay_(context, transform, skippedFeaturesHash,\n      this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n  }\n\n  /**\n   * Reverse the hit detection instructions.\n   */\n  reverseHitDetectionInstructions() {\n    const hitDetectionInstructions = this.hitDetectionInstructions;\n    // step 1 - reverse array\n    hitDetectionInstructions.reverse();\n    // step 2 - reverse instructions within geometry blocks\n    let i;\n    const n = hitDetectionInstructions.length;\n    let instruction;\n    let type;\n    let begin = -1;\n    for (i = 0; i < n; ++i) {\n      instruction = hitDetectionInstructions[i];\n      type = /** @type {module:ol/render/canvas/Instruction} */ (instruction[0]);\n      if (type == CanvasInstruction.END_GEOMETRY) {\n        begin = i;\n      } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n        instruction[2] = i;\n        reverseSubArray(this.hitDetectionInstructions, begin, i);\n        begin = -1;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    const state = this.state;\n    if (fillStyle) {\n      const fillStyleColor = fillStyle.getColor();\n      state.fillStyle = asColorLike(fillStyleColor ?\n        fillStyleColor : defaultFillStyle);\n    } else {\n      state.fillStyle = undefined;\n    }\n    if (strokeStyle) {\n      const strokeStyleColor = strokeStyle.getColor();\n      state.strokeStyle = asColorLike(strokeStyleColor ?\n        strokeStyleColor : defaultStrokeStyle);\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      state.lineCap = strokeStyleLineCap !== undefined ?\n        strokeStyleLineCap : defaultLineCap;\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      state.lineDash = strokeStyleLineDash ?\n        strokeStyleLineDash.slice() : defaultLineDash;\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      state.lineDashOffset = strokeStyleLineDashOffset ?\n        strokeStyleLineDashOffset : defaultLineDashOffset;\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      state.lineJoin = strokeStyleLineJoin !== undefined ?\n        strokeStyleLineJoin : defaultLineJoin;\n      const strokeStyleWidth = strokeStyle.getWidth();\n      state.lineWidth = strokeStyleWidth !== undefined ?\n        strokeStyleWidth : defaultLineWidth;\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      state.miterLimit = strokeStyleMiterLimit !== undefined ?\n        strokeStyleMiterLimit : defaultMiterLimit;\n\n      if (state.lineWidth > this.maxLineWidth) {\n        this.maxLineWidth = state.lineWidth;\n        // invalidate the buffered max extent cache\n        this.bufferedMaxExtent_ = null;\n      }\n    } else {\n      state.strokeStyle = undefined;\n      state.lineCap = undefined;\n      state.lineDash = null;\n      state.lineDashOffset = undefined;\n      state.lineJoin = undefined;\n      state.lineWidth = undefined;\n      state.miterLimit = undefined;\n    }\n  }\n\n  /**\n   * @param {module:ol/render/canvas~FillStrokeState} state State.\n   * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n   * @return {Array<*>} Fill instruction.\n   */\n  createFill(state, geometry) {\n    const fillStyle = state.fillStyle;\n    const fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n    if (typeof fillStyle !== 'string') {\n      // Fill is a pattern or gradient - align it!\n      fillInstruction.push(true);\n    }\n    return fillInstruction;\n  }\n\n  /**\n   * @param {module:ol/render/canvas~FillStrokeState} state State.\n   */\n  applyStroke(state) {\n    this.instructions.push(this.createStroke(state));\n  }\n\n  /**\n   * @param {module:ol/render/canvas~FillStrokeState} state State.\n   * @return {Array<*>} Stroke instruction.\n   */\n  createStroke(state) {\n    return [\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n      state.lineJoin, state.miterLimit,\n      this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n    ];\n  }\n\n  /**\n   * @param {module:ol/render/canvas~FillStrokeState} state State.\n   * @param {function(this:module:ol/render/canvas/Replay, module:ol/render/canvas~FillStrokeState, (module:ol/geom/Geometry|module:ol/render/Feature)):Array<*>} createFill Create fill.\n   * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n   */\n  updateFillStyle(state, createFill, geometry) {\n    const fillStyle = state.fillStyle;\n    if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n      if (fillStyle !== undefined) {\n        this.instructions.push(createFill.call(this, state, geometry));\n      }\n      state.currentFillStyle = fillStyle;\n    }\n  }\n\n  /**\n   * @param {module:ol/render/canvas~FillStrokeState} state State.\n   * @param {function(this:module:ol/render/canvas/Replay, module:ol/render/canvas~FillStrokeState)} applyStroke Apply stroke.\n   */\n  updateStrokeStyle(state, applyStroke) {\n    const strokeStyle = state.strokeStyle;\n    const lineCap = state.lineCap;\n    const lineDash = state.lineDash;\n    const lineDashOffset = state.lineDashOffset;\n    const lineJoin = state.lineJoin;\n    const lineWidth = state.lineWidth;\n    const miterLimit = state.miterLimit;\n    if (state.currentStrokeStyle != strokeStyle ||\n        state.currentLineCap != lineCap ||\n        (lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash)) ||\n        state.currentLineDashOffset != lineDashOffset ||\n        state.currentLineJoin != lineJoin ||\n        state.currentLineWidth != lineWidth ||\n        state.currentMiterLimit != miterLimit) {\n      if (strokeStyle !== undefined) {\n        applyStroke.call(this, state);\n      }\n      state.currentStrokeStyle = strokeStyle;\n      state.currentLineCap = lineCap;\n      state.currentLineDash = lineDash;\n      state.currentLineDashOffset = lineDashOffset;\n      state.currentLineJoin = lineJoin;\n      state.currentLineWidth = lineWidth;\n      state.currentMiterLimit = miterLimit;\n    }\n  }\n\n  /**\n   * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   */\n  endGeometry(geometry, feature) {\n    this.beginGeometryInstruction1_[2] = this.instructions.length;\n    this.beginGeometryInstruction1_ = null;\n    this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n    this.beginGeometryInstruction2_ = null;\n    const endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n    this.instructions.push(endGeometryInstruction);\n    this.hitDetectionInstructions.push(endGeometryInstruction);\n  }\n\n  /**\n   * Get the buffered rendering extent.  Rendering will be clipped to the extent\n   * provided to the constructor.  To account for symbolizers that may intersect\n   * this extent, we calculate a buffered extent (e.g. based on stroke width).\n   * @return {module:ol/extent~Extent} The buffered rendering extent.\n   * @protected\n   */\n  getBufferedMaxExtent() {\n    if (!this.bufferedMaxExtent_) {\n      this.bufferedMaxExtent_ = clone(this.maxExtent);\n      if (this.maxLineWidth > 0) {\n        const width = this.resolution * (this.maxLineWidth + 1) / 2;\n        buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n      }\n    }\n    return this.bufferedMaxExtent_;\n  }\n}\n\n\n/**\n * FIXME empty description for jsdoc\n */\nCanvasReplay.prototype.finish = VOID;\n\n\nexport default CanvasReplay;\n","/**\n * @module ol/render/canvas/ImageReplay\n */\nimport CanvasInstruction from '../canvas/Instruction.js';\nimport CanvasReplay from '../canvas/Replay.js';\n\nclass CanvasImageReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {module:ol/render/canvas~DeclutterGroup}\n     */\n    this.declutterGroup_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorY_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.height_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.opacity_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originY_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = undefined;\n\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} My end.\n   */\n  drawCoordinates_(flatCoordinates, offset, end, stride) {\n    return this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawPoint(pointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(pointGeometry, feature);\n    const flatCoordinates = pointGeometry.getFlatCoordinates();\n    const stride = pointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(pointGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiPoint(multiPointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(multiPointGeometry, feature);\n    const flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    const stride = multiPointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.drawCoordinates_(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(multiPointGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    // FIXME this doesn't really protect us against further calls to draw*Geometry\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setImageStyle(imageStyle, declutterGroup) {\n    const anchor = imageStyle.getAnchor();\n    const size = imageStyle.getSize();\n    const hitDetectionImage = imageStyle.getHitDetectionImage(1);\n    const image = imageStyle.getImage(1);\n    const origin = imageStyle.getOrigin();\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.declutterGroup_ = /** @type {module:ol/render/canvas~DeclutterGroup} */ (declutterGroup);\n    this.hitDetectionImage_ = hitDetectionImage;\n    this.image_ = image;\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0];\n    this.originY_ = origin[1];\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScale();\n    this.width_ = size[0];\n  }\n}\n\n\nexport default CanvasImageReplay;\n","/**\n * @module ol/render/canvas/LineStringReplay\n */\nimport CanvasInstruction, {strokeInstruction, beginPathInstruction} from '../canvas/Instruction.js';\nimport CanvasReplay from '../canvas/Replay.js';\n\nclass CanvasLineStringReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n  drawFlatCoordinates_(flatCoordinates, offset, end, stride) {\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatCoordinates(\n      flatCoordinates, offset, end, stride, false, false);\n    const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawLineString(lineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    const flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    const stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(lineStringGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    const ends = multiLineStringGeometry.getEnds();\n    const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    const stride = multiLineStringGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(flatCoordinates, offset, ends[i], stride);\n    }\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(multiLineStringGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    const state = this.state;\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n    }\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n  }\n\n  /**\n   * @inheritDoc.\n   */\n  applyStroke(state) {\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n    state.lastStroke = 0;\n    super.applyStroke(state);\n    this.instructions.push(beginPathInstruction);\n  }\n}\n\n\nexport default CanvasLineStringReplay;\n","/**\n * @module ol/render/canvas/PolygonReplay\n */\nimport {asString} from '../../color.js';\nimport {snap} from '../../geom/flat/simplify.js';\nimport {defaultFillStyle} from '../canvas.js';\nimport CanvasInstruction, {\n  fillInstruction, strokeInstruction, beginPathInstruction, closePathInstruction\n} from '../canvas/Instruction.js';\nimport CanvasReplay from '../canvas/Replay.js';\n\n\nclass CanvasPolygonReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawFlatCoordinatess_(flatCoordinates, offset, ends, stride) {\n    const state = this.state;\n    const fill = state.fillStyle !== undefined;\n    const stroke = state.strokeStyle != undefined;\n    const numEnds = ends.length;\n    this.instructions.push(beginPathInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction);\n    for (let i = 0; i < numEnds; ++i) {\n      const end = ends[i];\n      const myBegin = this.coordinates.length;\n      const myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n      const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n      this.instructions.push(moveToLineToInstruction);\n      this.hitDetectionInstructions.push(moveToLineToInstruction);\n      if (stroke) {\n        // Performance optimization: only call closePath() when we have a stroke.\n        // Otherwise the ring is closed already (see appendFlatCoordinates above).\n        this.instructions.push(closePathInstruction);\n        this.hitDetectionInstructions.push(closePathInstruction);\n      }\n      offset = end;\n    }\n    if (fill) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n    if (stroke) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    return offset;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawCircle(circleGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(circleGeometry);\n    this.beginGeometry(circleGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const flatCoordinates = circleGeometry.getFlatCoordinates();\n    const stride = circleGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    this.appendFlatCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    const circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n    this.instructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(fillInstruction);\n    if (state.fillStyle !== undefined) {\n      this.instructions.push(fillInstruction);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    this.endGeometry(circleGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawPolygon(polygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(polygonGeometry);\n    this.beginGeometry(polygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const ends = polygonGeometry.getEnds();\n    const flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n    const stride = polygonGeometry.getStride();\n    this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n    this.endGeometry(polygonGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(multiPolygonGeometry);\n    this.beginGeometry(multiPolygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const endss = multiPolygonGeometry.getEndss();\n    const flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n    const stride = multiPolygonGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n    }\n    this.endGeometry(multiPolygonGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    // We want to preserve topology when drawing polygons.  Polygons are\n    // simplified using quantization and point elimination. However, we might\n    // have received a mix of quantized and non-quantized geometries, so ensure\n    // that all are quantized by quantizing all coordinates in the batch.\n    const tolerance = this.tolerance;\n    if (tolerance !== 0) {\n      const coordinates = this.coordinates;\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = snap(coordinates[i], tolerance);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n   */\n  setFillStrokeStyles_(geometry) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    if (fillStyle !== undefined) {\n      this.updateFillStyle(state, this.createFill, geometry);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.updateStrokeStyle(state, this.applyStroke);\n    }\n  }\n}\n\n\nexport default CanvasPolygonReplay;\n","/**\n * @module ol/geom/flat/straightchunk\n */\n\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n  let chunkStart = offset;\n  let chunkEnd = offset;\n  let chunkM = 0;\n  let m = 0;\n  let start = offset;\n  let acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n  for (i = offset; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n          m = 0;\n          start = i - stride;\n        }\n      }\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n","/**\n * @module ol/render/canvas/TextReplay\n */\nimport {getUid} from '../../util.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {intersects} from '../../extent.js';\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {labelCache, measureTextWidth, defaultTextAlign, measureTextHeight, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline} from '../canvas.js';\nimport CanvasInstruction from '../canvas/Instruction.js';\nimport CanvasReplay from '../canvas/Replay.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n\nclass CanvasTextReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {module:ol/render/canvas~DeclutterGroup}\n     */\n    this.declutterGroup_;\n\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n    this.labels_ = null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.textRotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @type {!Object<string, module:ol/render/canvas~FillState>}\n     */\n    this.fillStates = {};\n\n    /**\n     * @private\n     * @type {?module:ol/render/canvas~StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @type {!Object<string, module:ol/render/canvas~StrokeState>}\n     */\n    this.strokeStates = {};\n\n    /**\n     * @private\n     * @type {module:ol/render/canvas~TextState}\n     */\n    this.textState_ = /** @type {module:ol/render/canvas~TextState} */ ({});\n\n    /**\n     * @type {!Object<string, module:ol/render/canvas~TextState>}\n     */\n    this.textStates = {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.textKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.fillKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.strokeKey_ = '';\n\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n    this.widths_ = {};\n\n    labelCache.prune();\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawText(geometry, feature) {\n    const fillState = this.textFillState_;\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n      return;\n    }\n\n    let begin = this.coordinates.length;\n\n    const geometryType = geometry.getType();\n    let flatCoordinates = null;\n    let end = 2;\n    let stride = 2;\n    let i, ii;\n\n    if (textState.placement === TextPlacement.LINE) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n      let ends;\n      flatCoordinates = geometry.getFlatCoordinates();\n      stride = geometry.getStride();\n      if (geometryType == GeometryType.LINE_STRING) {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n        ends = geometry.getEnds();\n      } else if (geometryType == GeometryType.POLYGON) {\n        ends = geometry.getEnds().slice(0, 1);\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\n        const endss = geometry.getEndss();\n        ends = [];\n        for (i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      const textAlign = textState.textAlign;\n      let flatOffset = 0;\n      let flatEnd;\n      for (let o = 0, oo = ends.length; o < oo; ++o) {\n        if (textAlign == undefined) {\n          const range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n          flatOffset = range[0];\n          flatEnd = range[1];\n        } else {\n          flatEnd = ends[o];\n        }\n        for (i = flatOffset; i < flatEnd; i += stride) {\n          this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n        }\n        end = this.coordinates.length;\n        flatOffset = ends[o];\n        this.drawChars_(begin, end, this.declutterGroup_);\n        begin = end;\n      }\n      this.endGeometry(geometry, feature);\n\n    } else {\n      const label = this.getImage(this.text_, this.textKey_, this.fillKey_, this.strokeKey_);\n      const width = label.width / this.pixelRatio;\n      switch (geometryType) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n          flatCoordinates = geometry.getFlatCoordinates();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.LINE_STRING:\n          flatCoordinates = /** @type {module:ol/geom/LineString} */ (geometry).getFlatMidpoint();\n          break;\n        case GeometryType.CIRCLE:\n          flatCoordinates = /** @type {module:ol/geom/Circle} */ (geometry).getCenter();\n          break;\n        case GeometryType.MULTI_LINE_STRING:\n          flatCoordinates = /** @type {module:ol/geom/MultiLineString} */ (geometry).getFlatMidpoints();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.POLYGON:\n          flatCoordinates = /** @type {module:ol/geom/Polygon} */ (geometry).getFlatInteriorPoint();\n          if (!textState.overflow && flatCoordinates[2] / this.resolution < width) {\n            return;\n          }\n          stride = 3;\n          break;\n        case GeometryType.MULTI_POLYGON:\n          const interiorPoints = /** @type {module:ol/geom/MultiPolygon} */ (geometry).getFlatInteriorPoints();\n          flatCoordinates = [];\n          for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (textState.overflow || interiorPoints[i + 2] / this.resolution >= width) {\n              flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n            }\n          }\n          end = flatCoordinates.length;\n          if (end == 0) {\n            return;\n          }\n          break;\n        default:\n      }\n      end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill, geometry);\n          this.hitDetectionInstructions.push(this.createFill(this.state, geometry));\n        }\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      this.drawTextImage_(label, begin, end);\n      this.endGeometry(geometry, feature);\n    }\n  }\n\n  /**\n   * @param {string} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {HTMLCanvasElement} Image.\n   */\n  getImage(text, textKey, fillKey, strokeKey) {\n    let label;\n    const key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n\n    if (!labelCache.containsKey(key)) {\n      const strokeState = strokeKey ? this.strokeStates[strokeKey] || this.textStrokeState_ : null;\n      const fillState = fillKey ? this.fillStates[fillKey] || this.textFillState_ : null;\n      const textState = this.textStates[textKey] || this.textState_;\n      const pixelRatio = this.pixelRatio;\n      const scale = textState.scale * pixelRatio;\n      const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n      const strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n      const lines = text.split('\\n');\n      const numLines = lines.length;\n      const widths = [];\n      const width = measureTextWidths(textState.font, lines, widths);\n      const lineHeight = measureTextHeight(textState.font);\n      const height = lineHeight * numLines;\n      const renderWidth = (width + strokeWidth);\n      const context = createCanvasContext2D(\n        Math.ceil(renderWidth * scale),\n        Math.ceil((height + strokeWidth) * scale));\n      label = context.canvas;\n      labelCache.set(key, label);\n      if (scale != 1) {\n        context.scale(scale, scale);\n      }\n      context.font = textState.font;\n      if (strokeKey) {\n        context.strokeStyle = strokeState.strokeStyle;\n        context.lineWidth = strokeWidth;\n        context.lineCap = strokeState.lineCap;\n        context.lineJoin = strokeState.lineJoin;\n        context.miterLimit = strokeState.miterLimit;\n        if (CANVAS_LINE_DASH && strokeState.lineDash.length) {\n          context.setLineDash(strokeState.lineDash);\n          context.lineDashOffset = strokeState.lineDashOffset;\n        }\n      }\n      if (fillKey) {\n        context.fillStyle = fillState.fillStyle;\n      }\n      context.textBaseline = 'middle';\n      context.textAlign = 'center';\n      const leftRight = (0.5 - align);\n      const x = align * label.width / scale + leftRight * strokeWidth;\n      let i;\n      if (strokeKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n      if (fillKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n    }\n    return labelCache.get(key);\n  }\n\n  /**\n   * @private\n   * @param {HTMLCanvasElement} label Label.\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   */\n  drawTextImage_(label, begin, end) {\n    const textState = this.textState_;\n    const strokeState = this.textStrokeState_;\n    const pixelRatio = this.pixelRatio;\n    const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n    const strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    const anchorX = align * label.width / pixelRatio + 2 * (0.5 - align) * strokeWidth;\n    const anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1, label.width,\n      textState.padding == defaultPadding ?\n        defaultPadding : textState.padding.map(function(p) {\n          return p * pixelRatio;\n        }),\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1 / pixelRatio, label.width, textState.padding,\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n  }\n\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   * @param {module:ol/render/canvas~DeclutterGroup} declutterGroup Declutter group.\n   */\n  drawChars_(begin, end, declutterGroup) {\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    const fillState = this.textFillState_;\n\n    const strokeKey = this.strokeKey_;\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = /** @type {module:ol/render/canvas~StrokeState} */ ({\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash\n        });\n      }\n    }\n    const textKey = this.textKey_;\n    if (!(this.textKey_ in this.textStates)) {\n      this.textStates[this.textKey_] = /** @type {module:ol/render/canvas~TextState} */ ({\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        scale: textState.scale\n      });\n    }\n    const fillKey = this.fillKey_;\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = /** @type {module:ol/render/canvas~FillState} */ ({\n          fillStyle: fillState.fillStyle\n        });\n      }\n    }\n\n    const pixelRatio = this.pixelRatio;\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n\n    const offsetY = this.textOffsetY_ * pixelRatio;\n    const text = this.text_;\n    const font = textState.font;\n    const textScale = textState.scale;\n    const strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n    let widths = this.widths_[font];\n    if (!widths) {\n      this.widths_[font] = widths = {};\n    }\n    this.instructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        let width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale * pixelRatio;\n      },\n      offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        let width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale;\n      },\n      offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n    ]);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setTextStyle(textStyle, declutterGroup) {\n    let textState, fillState, strokeState;\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      this.declutterGroup_ = /** @type {module:ol/render/canvas~DeclutterGroup} */ (declutterGroup);\n\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        fillState = this.textFillState_ = null;\n      } else {\n        fillState = this.textFillState_;\n        if (!fillState) {\n          fillState = this.textFillState_ = /** @type {module:ol/render/canvas~FillState} */ ({});\n        }\n        fillState.fillStyle = asColorLike(\n          textFillStyle.getColor() || defaultFillStyle);\n      }\n\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        strokeState = this.textStrokeState_ = null;\n      } else {\n        strokeState = this.textStrokeState_;\n        if (!strokeState) {\n          strokeState = this.textStrokeState_ = /** @type {module:ol/render/canvas~StrokeState} */ ({});\n        }\n        const lineDash = textStrokeStyle.getLineDash();\n        const lineDashOffset = textStrokeStyle.getLineDashOffset();\n        const lineWidth = textStrokeStyle.getWidth();\n        const miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset =\n            lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth =\n            lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit =\n            miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(\n          textStrokeStyle.getColor() || defaultStrokeStyle);\n      }\n\n      textState = this.textState_;\n      const font = textStyle.getFont() || defaultFont;\n      checkFont(font);\n      const textScale = textStyle.getScale();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? 1 : textScale;\n\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n      this.strokeKey_ = strokeState ?\n        (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n        strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n        strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n        '';\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n      this.fillKey_ = fillState ?\n        (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n        '';\n    }\n  }\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n  const numLines = lines.length;\n  let width = 0;\n  for (let i = 0; i < numLines; ++i) {\n    const currentWidth = measureTextWidth(font, lines[i]);\n    width = Math.max(width, currentWidth);\n    widths.push(currentWidth);\n  }\n  return width;\n}\n\n\nexport default CanvasTextReplay;\n","/**\n * @module ol/render/canvas/ReplayGroup\n */\n\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {buffer, createEmpty, extendCoordinate} from '../../extent.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {isEmpty} from '../../obj.js';\nimport ReplayGroup from '../ReplayGroup.js';\nimport ReplayType from '../ReplayType.js';\nimport CanvasReplay from '../canvas/Replay.js';\nimport CanvasImageReplay from '../canvas/ImageReplay.js';\nimport CanvasLineStringReplay from '../canvas/LineStringReplay.js';\nimport CanvasPolygonReplay from '../canvas/PolygonReplay.js';\nimport CanvasTextReplay from '../canvas/TextReplay.js';\nimport {ORDER} from '../replay.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n\n/**\n * @type {Object<module:ol/render/ReplayType,\n *                function(new: module:ol/render/canvas/Replay, number, module:ol/extent~Extent,\n *                number, number, boolean, Array<module:ol/render/canvas~DeclutterGroup>)>}\n */\nconst BATCH_CONSTRUCTORS = {\n  'Circle': CanvasPolygonReplay,\n  'Default': CanvasReplay,\n  'Image': CanvasImageReplay,\n  'LineString': CanvasLineStringReplay,\n  'Polygon': CanvasPolygonReplay,\n  'Text': CanvasTextReplay\n};\n\n\nclass CanvasReplayGroup extends ReplayGroup {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {module:ol/extent~Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay group can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree for declutter processing in postrender.\n   * @param {number=} opt_renderBuffer Optional rendering buffer.\n   */\n  constructor(\n    tolerance,\n    maxExtent,\n    resolution,\n    pixelRatio,\n    overlaps,\n    declutterTree,\n    opt_renderBuffer\n  ) {\n    super();\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = declutterTree;\n\n    /**\n     * @type {module:ol/render/canvas~DeclutterGroup}\n     * @private\n     */\n    this.declutterGroup_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.maxExtent_ = maxExtent;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = overlaps;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderBuffer_ = opt_renderBuffer;\n\n    /**\n     * @private\n     * @type {!Object<string, !Object<module:ol/render/ReplayType, module:ol/render/canvas/Replay>>}\n     */\n    this.replaysByZIndex_ = {};\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitDetectionContext_ = createCanvasContext2D(1, 1);\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.hitDetectionTransform_ = createTransform();\n  }\n\n  /**\n   * @param {boolean} group Group with previous replay.\n   * @return {module:ol/render/canvas~DeclutterGroup} Declutter instruction group.\n   */\n  addDeclutter(group) {\n    let declutter = null;\n    if (this.declutterTree_) {\n      if (group) {\n        declutter = this.declutterGroup_;\n        /** @type {number} */ (declutter[4])++;\n      } else {\n        declutter = this.declutterGroup_ = createEmpty();\n        declutter.push(1);\n      }\n    }\n    return declutter;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/transform~Transform} transform Transform.\n   */\n  clip(context, transform) {\n    const flatClipCoords = this.getClipCoords(transform);\n    context.beginPath();\n    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n    context.clip();\n  }\n\n  /**\n   * @param {Array<module:ol/render/ReplayType>} replays Replays.\n   * @return {boolean} Has replays of the provided types.\n   */\n  hasReplays(replays) {\n    for (const zIndex in this.replaysByZIndex_) {\n      const candidates = this.replaysByZIndex_[zIndex];\n      for (let i = 0, ii = replays.length; i < ii; ++i) {\n        if (replays[i] in candidates) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  finish() {\n    for (const zKey in this.replaysByZIndex_) {\n      const replays = this.replaysByZIndex_[zKey];\n      for (const replayKey in replays) {\n        replays[replayKey].finish();\n      }\n    }\n  }\n\n  /**\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features to skip.\n   * @param {function((module:ol/Feature|module:ol/render/Feature)): T} callback Feature callback.\n   * @param {Object<string, module:ol/render/canvas~DeclutterGroup>} declutterReplays Declutter replays.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    resolution,\n    rotation,\n    hitTolerance,\n    skippedFeaturesHash,\n    callback,\n    declutterReplays\n  ) {\n\n    hitTolerance = Math.round(hitTolerance);\n    const contextSize = hitTolerance * 2 + 1;\n    const transform = composeTransform(this.hitDetectionTransform_,\n      hitTolerance + 0.5, hitTolerance + 0.5,\n      1 / resolution, -1 / resolution,\n      -rotation,\n      -coordinate[0], -coordinate[1]);\n    const context = this.hitDetectionContext_;\n\n    if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n      context.canvas.width = contextSize;\n      context.canvas.height = contextSize;\n    } else {\n      context.clearRect(0, 0, contextSize, contextSize);\n    }\n\n    /**\n     * @type {module:ol/extent~Extent}\n     */\n    let hitExtent;\n    if (this.renderBuffer_ !== undefined) {\n      hitExtent = createEmpty();\n      extendCoordinate(hitExtent, coordinate);\n      buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n    }\n\n    const mask = getCircleArray(hitTolerance);\n    let declutteredFeatures;\n    if (this.declutterTree_) {\n      declutteredFeatures = this.declutterTree_.all().map(function(entry) {\n        return entry.value;\n      });\n    }\n\n    let replayType;\n\n    /**\n     * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n     * @return {?} Callback result.\n     */\n    function featureCallback(feature) {\n      const imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n      for (let i = 0; i < contextSize; i++) {\n        for (let j = 0; j < contextSize; j++) {\n          if (mask[i][j]) {\n            if (imageData[(j * contextSize + i) * 4 + 3] > 0) {\n              let result;\n              if (!(declutteredFeatures && (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) ||\n                  declutteredFeatures.indexOf(feature) !== -1) {\n                result = callback(feature);\n              }\n              if (result) {\n                return result;\n              } else {\n                context.clearRect(0, 0, contextSize, contextSize);\n                return undefined;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.replaysByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    let i, j, replays, replay, result;\n    for (i = zs.length - 1; i >= 0; --i) {\n      const zIndexKey = zs[i].toString();\n      replays = this.replaysByZIndex_[zIndexKey];\n      for (j = ORDER.length - 1; j >= 0; --j) {\n        replayType = ORDER[j];\n        replay = replays[replayType];\n        if (replay !== undefined) {\n          if (declutterReplays &&\n              (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n            const declutter = declutterReplays[zIndexKey];\n            if (!declutter) {\n              declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            result = replay.replayHitDetection(context, transform, rotation,\n              skippedFeaturesHash, featureCallback, hitExtent);\n            if (result) {\n              return result;\n            }\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {module:ol/transform~Transform} transform Transform.\n   * @return {Array<number>} Clip coordinates.\n   */\n  getClipCoords(transform) {\n    const maxExtent = this.maxExtent_;\n    const minX = maxExtent[0];\n    const minY = maxExtent[1];\n    const maxX = maxExtent[2];\n    const maxY = maxExtent[3];\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n    transform2D(\n      flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n    return flatClipCoords;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getReplay(zIndex, replayType) {\n    const zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    let replays = this.replaysByZIndex_[zIndexKey];\n    if (replays === undefined) {\n      replays = {};\n      this.replaysByZIndex_[zIndexKey] = replays;\n    }\n    let replay = replays[replayType];\n    if (replay === undefined) {\n      const Constructor = BATCH_CONSTRUCTORS[replayType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_,\n        this.resolution_, this.pixelRatio_, this.overlaps_, this.declutterTree_);\n      replays[replayType] = replay;\n    }\n    return replay;\n  }\n\n  /**\n   * @return {Object<string, Object<module:ol/render/ReplayType, module:ol/render/canvas/Replay>>} Replays.\n   */\n  getReplays() {\n    return this.replaysByZIndex_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isEmpty() {\n    return isEmpty(this.replaysByZIndex_);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/transform~Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features to skip.\n   * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n   * @param {Array<module:ol/render/ReplayType>=} opt_replayTypes Ordered replay types to replay.\n   *     Default is {@link module:ol/render/replay~ORDER}\n   * @param {Object<string, module:ol/render/canvas~DeclutterGroup>=} opt_declutterReplays Declutter replays.\n   */\n  replay(\n    context,\n    transform,\n    viewRotation,\n    skippedFeaturesHash,\n    snapToPixel,\n    opt_replayTypes,\n    opt_declutterReplays\n  ) {\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.replaysByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    // setup clipping so that the parts of over-simplified geometries are not\n    // visible outside the current extent when panning\n    context.save();\n    this.clip(context, transform);\n\n    const replayTypes = opt_replayTypes ? opt_replayTypes : ORDER;\n    let i, ii, j, jj, replays, replay;\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      const zIndexKey = zs[i].toString();\n      replays = this.replaysByZIndex_[zIndexKey];\n      for (j = 0, jj = replayTypes.length; j < jj; ++j) {\n        const replayType = replayTypes[j];\n        replay = replays[replayType];\n        if (replay !== undefined) {\n          if (opt_declutterReplays &&\n              (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n            const declutter = opt_declutterReplays[zIndexKey];\n            if (!declutter) {\n              opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            replay.replay(context, transform, viewRotation, skippedFeaturesHash, snapToPixel);\n          }\n        }\n      }\n    }\n\n    context.restore();\n  }\n}\n\n\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<Array<(boolean|undefined)>>>}\n */\nconst circleArrayCache = {\n  0: [[true]]\n};\n\n\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array<Array<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n */\nfunction fillCircleArrayRowToMiddle(array, x, y) {\n  let i;\n  const radius = Math.floor(array.length / 2);\n  if (x >= radius) {\n    for (i = radius; i < x; i++) {\n      array[i][y] = true;\n    }\n  } else if (x < radius) {\n    for (i = x + 1; i < radius; i++) {\n      array[i][y] = true;\n    }\n  }\n}\n\n\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array<Array<(boolean|undefined)>>} An array with marked circle points.\n */\nexport function getCircleArray(radius) {\n  if (circleArrayCache[radius] !== undefined) {\n    return circleArrayCache[radius];\n  }\n\n  const arraySize = radius * 2 + 1;\n  const arr = new Array(arraySize);\n  for (let i = 0; i < arraySize; i++) {\n    arr[i] = new Array(arraySize);\n  }\n\n  let x = radius;\n  let y = 0;\n  let error = 0;\n\n  while (x >= y) {\n    fillCircleArrayRowToMiddle(arr, radius + x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius - y);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + x, radius - y);\n\n    y++;\n    error += 1 + 2 * y;\n    if (2 * (error - x) + 1 > 0) {\n      x -= 1;\n      error += 1 - 2 * x;\n    }\n  }\n\n  circleArrayCache[radius] = arr;\n  return arr;\n}\n\n\n/**\n * @param {!Object<string, Array<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n */\nexport function replayDeclutter(declutterReplays, context, rotation, snapToPixel) {\n  const zs = Object.keys(declutterReplays).map(Number).sort(numberSafeCompareFunction);\n  const skippedFeatureUids = {};\n  for (let z = 0, zz = zs.length; z < zz; ++z) {\n    const replayData = declutterReplays[zs[z].toString()];\n    for (let i = 0, ii = replayData.length; i < ii;) {\n      const replay = replayData[i++];\n      const transform = replayData[i++];\n      replay.replay(context, transform, rotation, skippedFeatureUids, snapToPixel);\n    }\n  }\n}\n\n\nexport default CanvasReplayGroup;\n","/**\n * @module ol/renderer/vector\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport ReplayType from '../render/ReplayType.js';\n\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\nconst SIMPLIFY_TOLERANCE = 0.5;\n\n\n/**\n * @const\n * @type {Object<module:ol/geom/GeometryType,\n *                function(module:ol/render/ReplayGroup, module:ol/geom/Geometry,\n *                         module:ol/style/Style, Object)>}\n */\nconst GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry\n};\n\n\n/**\n * @param {module:ol/Feature|module:ol/render/Feature} feature1 Feature 1.\n * @param {module:ol/Feature|module:ol/render/Feature} feature2 Feature 2.\n * @return {number} Order.\n */\nexport function defaultOrder(feature1, feature2) {\n  return getUid(feature1) - getUid(feature2);\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  const tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\nexport function getTolerance(resolution, pixelRatio) {\n  return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Circle} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature} feature Feature.\n */\nfunction renderCircleGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const circleReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {module:ol/style/Style} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(this: T, module:ol/events/Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @return {boolean} `true` if style is loading.\n * @template T\n */\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, thisArg) {\n  let loading = false;\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    let imageState = imageStyle.getImageState();\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener, thisArg);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener, thisArg);\n      loading = true;\n    }\n  }\n  renderFeatureInternal(replayGroup, feature, style, squaredTolerance);\n\n  return loading;\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {module:ol/style/Style} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n */\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance) {\n  const geometry = style.getGeometryFunction()(feature);\n  if (!geometry) {\n    return;\n  }\n  const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n  const renderer = style.getRenderer();\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    const geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    const geometries = /** @type {module:ol/geom/GeometryCollection} */ (geometry).getGeometries();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n    return;\n  }\n  const replay = replayGroup.getReplay(style.getZIndex(), ReplayType.DEFAULT);\n  replay.drawCustom(/** @type {module:ol/geom/SimpleGeometry} */ (geometry), feature, style.getRenderer());\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/GeometryCollection} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature} feature Feature.\n */\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature) {\n  const geometries = geometry.getGeometriesArray();\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    const geometryRenderer =\n        GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/LineString|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderLineStringGeometry(replayGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/MultiLineString|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderMultiLineStringGeometry(replayGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/MultiPolygon} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature} feature Feature.\n */\nfunction renderMultiPolygonGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (strokeStyle || fillStyle) {\n    const polygonReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Point|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderPointGeometry(replayGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/MultiPoint|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderMultiPointGeometry(replayGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Polygon|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderPolygonGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const polygonReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n","/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen, unlisten} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport rbush from 'rbush';\nimport {buffer, createEmpty, containsExtent, getWidth} from '../../extent.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {labelCache, rotateAtOffset} from '../../render/canvas.js';\nimport CanvasReplayGroup from '../../render/canvas/ReplayGroup.js';\nimport CanvasLayerRenderer from '../canvas/Layer.js';\nimport {defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\n\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\nclass CanvasVectorLayerRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {module:ol/layer/Vector} vectorLayer Vector layer.\n   */\n  constructor(vectorLayer) {\n\n    super(vectorLayer);\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = vectorLayer.getDeclutter() ? rbush(9, undefined) : null;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.dirty_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedResolution_ = NaN;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.renderedExtent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {function(module:ol/Feature, module:ol/Feature): number|null}\n     */\n    this.renderedRenderOrder_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/render/canvas/ReplayGroup}\n     */\n    this.replayGroup_ = null;\n\n    /**\n     * A new replay group had to be created by `prepareFrame()`\n     * @type {boolean}\n     */\n    this.replayGroupChanged = true;\n\n    /**\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = createCanvasContext2D();\n\n    listen(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlisten(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n    super.disposeInternal();\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @param {module:ol/layer/Layer~State} layerState Layer state.\n   */\n  compose(context, frameState, layerState) {\n    const extent = frameState.extent;\n    const pixelRatio = frameState.pixelRatio;\n    const skippedFeatureUids = layerState.managed ?\n      frameState.skippedFeatureUids : {};\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const rotation = viewState.rotation;\n    const projectionExtent = projection.getExtent();\n    const vectorSource = /** @type {module:ol/source/Vector} */ (this.getLayer().getSource());\n\n    let transform = this.getTransform(frameState, 0);\n\n    // clipped rendering if layer extent is set\n    const clipExtent = layerState.extent;\n    const clipped = clipExtent !== undefined;\n    if (clipped) {\n      this.clip(context, frameState, /** @type {module:ol/extent~Extent} */ (clipExtent));\n    }\n    const replayGroup = this.replayGroup_;\n    if (replayGroup && !replayGroup.isEmpty()) {\n      if (this.declutterTree_) {\n        this.declutterTree_.clear();\n      }\n      const layer = /** @type {module:ol/layer/Vector} */ (this.getLayer());\n      let drawOffsetX = 0;\n      let drawOffsetY = 0;\n      let replayContext;\n      const transparentLayer = layerState.opacity !== 1;\n      const hasRenderListeners = layer.hasListener(RenderEventType.RENDER);\n      if (transparentLayer || hasRenderListeners) {\n        let drawWidth = context.canvas.width;\n        let drawHeight = context.canvas.height;\n        if (rotation) {\n          const drawSize = Math.round(Math.sqrt(drawWidth * drawWidth + drawHeight * drawHeight));\n          drawOffsetX = (drawSize - drawWidth) / 2;\n          drawOffsetY = (drawSize - drawHeight) / 2;\n          drawWidth = drawHeight = drawSize;\n        }\n        // resize and clear\n        this.context.canvas.width = drawWidth;\n        this.context.canvas.height = drawHeight;\n        replayContext = this.context;\n      } else {\n        replayContext = context;\n      }\n\n      const alpha = replayContext.globalAlpha;\n      if (!transparentLayer) {\n        // for performance reasons, context.save / context.restore is not used\n        // to save and restore the transformation matrix and the opacity.\n        // see http://jsperf.com/context-save-restore-versus-variable\n        replayContext.globalAlpha = layerState.opacity;\n      }\n\n      if (replayContext != context) {\n        replayContext.translate(drawOffsetX, drawOffsetY);\n      }\n\n      const viewHints = frameState.viewHints;\n      const snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n      const width = frameState.size[0] * pixelRatio;\n      const height = frameState.size[1] * pixelRatio;\n      rotateAtOffset(replayContext, -rotation,\n        width / 2, height / 2);\n      replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n      if (vectorSource.getWrapX() && projection.canWrapX() &&\n          !containsExtent(projectionExtent, extent)) {\n        let startX = extent[0];\n        const worldWidth = getWidth(projectionExtent);\n        let world = 0;\n        let offsetX;\n        while (startX < projectionExtent[0]) {\n          --world;\n          offsetX = worldWidth * world;\n          transform = this.getTransform(frameState, offsetX);\n          replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n          startX += worldWidth;\n        }\n        world = 0;\n        startX = extent[2];\n        while (startX > projectionExtent[2]) {\n          ++world;\n          offsetX = worldWidth * world;\n          transform = this.getTransform(frameState, offsetX);\n          replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n          startX -= worldWidth;\n        }\n      }\n      rotateAtOffset(replayContext, rotation,\n        width / 2, height / 2);\n\n      if (hasRenderListeners) {\n        this.dispatchRenderEvent(replayContext, frameState, transform);\n      }\n      if (replayContext != context) {\n        if (transparentLayer) {\n          const mainContextAlpha = context.globalAlpha;\n          context.globalAlpha = layerState.opacity;\n          context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n          context.globalAlpha = mainContextAlpha;\n        } else {\n          context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n        }\n        replayContext.translate(-drawOffsetX, -drawOffsetY);\n      }\n\n      if (!transparentLayer) {\n        replayContext.globalAlpha = alpha;\n      }\n    }\n\n    if (clipped) {\n      context.restore();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  composeFrame(frameState, layerState, context) {\n    const transform = this.getTransform(frameState, 0);\n    this.preCompose(context, frameState, transform);\n    this.compose(context, frameState, layerState);\n    this.postCompose(context, frameState, layerState, transform);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    if (!this.replayGroup_) {\n      return undefined;\n    } else {\n      const resolution = frameState.viewState.resolution;\n      const rotation = frameState.viewState.rotation;\n      const layer = /** @type {module:ol/layer/Vector} */ (this.getLayer());\n      /** @type {!Object<string, boolean>} */\n      const features = {};\n      const result = this.replayGroup_.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {},\n        /**\n         * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n         * @return {?} Callback result.\n         */\n        function(feature) {\n          const key = getUid(feature).toString();\n          if (!(key in features)) {\n            features[key] = true;\n            return callback.call(thisArg, feature, layer);\n          }\n        }, null);\n      return result;\n    }\n  }\n\n  /**\n   * @param {module:ol/events/Event} event Event.\n   */\n  handleFontsChanged_(event) {\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.replayGroup_) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {module:ol/events/Event} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n    const vectorLayer = /** @type {module:ol/layer/Vector} */ (this.getLayer());\n    const vectorSource = vectorLayer.getSource();\n\n    const animating = frameState.viewHints[ViewHint.ANIMATING];\n    const interacting = frameState.viewHints[ViewHint.INTERACTING];\n    const updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n    const updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n    if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n        (!updateWhileInteracting && interacting)) {\n      return true;\n    }\n\n    const frameStateExtent = frameState.extent;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const resolution = viewState.resolution;\n    const pixelRatio = frameState.pixelRatio;\n    const vectorLayerRevision = vectorLayer.getRevision();\n    const vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n    let vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n    if (vectorLayerRenderOrder === undefined) {\n      vectorLayerRenderOrder = defaultRenderOrder;\n    }\n\n    const extent = buffer(frameStateExtent,\n      vectorLayerRenderBuffer * resolution);\n    const projectionExtent = viewState.projection.getExtent();\n\n    if (vectorSource.getWrapX() && viewState.projection.canWrapX() &&\n        !containsExtent(projectionExtent, frameState.extent)) {\n      // For the replay group, we need an extent that intersects the real world\n      // (-180 to +180). To support geometries in a coordinate range from -540\n      // to +540, we add at least 1 world width on each side of the projection\n      // extent. If the viewport is wider than the world, we need to add half of\n      // the viewport width to make sure we cover the whole viewport.\n      const worldWidth = getWidth(projectionExtent);\n      const gutter = Math.max(getWidth(extent) / 2, worldWidth);\n      extent[0] = projectionExtent[0] - gutter;\n      extent[2] = projectionExtent[2] + gutter;\n    }\n\n    if (!this.dirty_ &&\n        this.renderedResolution_ == resolution &&\n        this.renderedRevision_ == vectorLayerRevision &&\n        this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n        containsExtent(this.renderedExtent_, extent)) {\n      this.replayGroupChanged = false;\n      return true;\n    }\n\n    this.replayGroup_ = null;\n\n    this.dirty_ = false;\n\n    const replayGroup = new CanvasReplayGroup(\n      getRenderTolerance(resolution, pixelRatio), extent, resolution,\n      pixelRatio, vectorSource.getOverlaps(), this.declutterTree_, vectorLayer.getRenderBuffer());\n    vectorSource.loadFeatures(extent, resolution, projection);\n    /**\n     * @param {module:ol/Feature} feature Feature.\n     * @this {module:ol/renderer/canvas/VectorLayer}\n     */\n    const render = function(feature) {\n      let styles;\n      const styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n      if (styles) {\n        const dirty = this.renderFeature(\n          feature, resolution, pixelRatio, styles, replayGroup);\n        this.dirty_ = this.dirty_ || dirty;\n      }\n    }.bind(this);\n    if (vectorLayerRenderOrder) {\n      /** @type {Array<module:ol/Feature>} */\n      const features = [];\n      vectorSource.forEachFeatureInExtent(extent,\n        /**\n         * @param {module:ol/Feature} feature Feature.\n         */\n        function(feature) {\n          features.push(feature);\n        }, this);\n      features.sort(vectorLayerRenderOrder);\n      for (let i = 0, ii = features.length; i < ii; ++i) {\n        render(features[i]);\n      }\n    } else {\n      vectorSource.forEachFeatureInExtent(extent, render, this);\n    }\n    replayGroup.finish();\n\n    this.renderedResolution_ = resolution;\n    this.renderedRevision_ = vectorLayerRevision;\n    this.renderedRenderOrder_ = vectorLayerRenderOrder;\n    this.renderedExtent_ = extent;\n    this.replayGroup_ = replayGroup;\n\n    this.replayGroupChanged = true;\n    return true;\n  }\n\n  /**\n   * @param {module:ol/Feature} feature Feature.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/style/Style|Array<module:ol/style/Style>} styles The style or array of styles.\n   * @param {module:ol/render/canvas/ReplayGroup} replayGroup Replay group.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(feature, resolution, pixelRatio, styles, replayGroup) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(\n          replayGroup, feature, styles[i],\n          getSquaredRenderTolerance(resolution, pixelRatio),\n          this.handleStyleImageChange_, this) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        replayGroup, feature, styles,\n        getSquaredRenderTolerance(resolution, pixelRatio),\n        this.handleStyleImageChange_, this);\n    }\n    return loading;\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasVectorLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/canvas/VectorLayer} The layer renderer.\n */\nCanvasVectorLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasVectorLayerRenderer(/** @type {module:ol/layer/Vector} */ (layer));\n};\n\n\nexport default CanvasVectorLayerRenderer;\n","/**\n * @module ol/layer/VectorTileRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance than the other options.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  HYBRID: 'hybrid',\n  VECTOR: 'vector'\n};\n","/**\n * @module ol/renderer/canvas/VectorTileLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen, unlisten} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport rbush from 'rbush';\nimport {buffer, containsCoordinate, equals, getIntersection, getTopLeft, intersects} from '../../extent.js';\nimport VectorTileRenderType from '../../layer/VectorTileRenderType.js';\nimport {equivalent as equivalentProjection} from '../../proj.js';\nimport Units from '../../proj/Units.js';\nimport ReplayType from '../../render/ReplayType.js';\nimport {labelCache, rotateAtOffset} from '../../render/canvas.js';\nimport CanvasReplayGroup, {replayDeclutter} from '../../render/canvas/ReplayGroup.js';\nimport {ORDER} from '../../render/replay.js';\nimport CanvasTileLayerRenderer from '../canvas/TileLayer.js';\nimport {getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  reset as resetTransform,\n  scale as scaleTransform,\n  translate as translateTransform\n} from '../../transform.js';\n\n\n/**\n * @type {!Object<string, Array<module:ol/render/ReplayType>>}\n */\nconst IMAGE_REPLAYS = {\n  'image': [ReplayType.POLYGON, ReplayType.CIRCLE,\n    ReplayType.LINE_STRING, ReplayType.IMAGE, ReplayType.TEXT],\n  'hybrid': [ReplayType.POLYGON, ReplayType.LINE_STRING]\n};\n\n\n/**\n * @type {!Object<string, Array<module:ol/render/ReplayType>>}\n */\nconst VECTOR_REPLAYS = {\n  'image': [ReplayType.DEFAULT],\n  'hybrid': [ReplayType.IMAGE, ReplayType.TEXT, ReplayType.DEFAULT],\n  'vector': ORDER\n};\n\n\n/**\n * @classdesc\n * Canvas renderer for vector tile layers.\n * @api\n */\nclass CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer {\n\n  /**\n   * @param {module:ol/layer/VectorTile} layer VectorTile layer.\n   */\n  constructor(layer) {\n\n    super(layer, true);\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = layer.getDeclutter() ? rbush(9, undefined) : null;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.dirty_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedLayerRevision_;\n\n    /**\n     * @private\n     * @type {module:ol/transform~Transform}\n     */\n    this.tmpTransform_ = createTransform();\n\n    // Use lower resolution for pure vector rendering. Closest resolution otherwise.\n    this.zDirection = layer.getRenderMode() == VectorTileRenderType.VECTOR ? 1 : 0;\n\n    listen(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlisten(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const tile = super.getTile(z, x, y, pixelRatio, projection);\n    if (tile.getState() === TileState.LOADED) {\n      this.createReplayGroup_(tile, pixelRatio, projection);\n      if (this.context) {\n        this.renderTileImage_(tile, pixelRatio, projection);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n    const layer = this.getLayer();\n    const layerRevision = layer.getRevision();\n    if (this.renderedLayerRevision_ != layerRevision) {\n      this.renderedTiles.length = 0;\n      const renderMode = layer.getRenderMode();\n      if (!this.context && renderMode != VectorTileRenderType.VECTOR) {\n        this.context = createCanvasContext2D();\n      }\n      if (this.context && renderMode == VectorTileRenderType.VECTOR) {\n        this.context = null;\n      }\n    }\n    this.renderedLayerRevision_ = layerRevision;\n    return super.prepareFrame(frameState, layerState);\n  }\n\n  /**\n   * @param {module:ol/VectorImageTile} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @private\n   */\n  createReplayGroup_(tile, pixelRatio, projection) {\n    const layer = this.getLayer();\n    const revision = layer.getRevision();\n    const renderOrder = /** @type {module:ol/render~OrderFunction} */ (layer.getRenderOrder()) || null;\n\n    const replayState = tile.getReplayState(layer);\n    if (!replayState.dirty && replayState.renderedRevision == revision &&\n        replayState.renderedRenderOrder == renderOrder) {\n      return;\n    }\n\n    const source = /** @type {module:ol/source/VectorTile} */ (layer.getSource());\n    const sourceTileGrid = source.getTileGrid();\n    const tileGrid = source.getTileGridForProjection(projection);\n    const resolution = tileGrid.getResolution(tile.tileCoord[0]);\n    const tileExtent = tile.extent;\n\n    const zIndexKeys = {};\n    for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n      const sourceTile = tile.getTile(tile.tileKeys[t]);\n      if (sourceTile.getState() != TileState.LOADED) {\n        continue;\n      }\n\n      const sourceTileCoord = sourceTile.tileCoord;\n      const sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);\n      const sharedExtent = getIntersection(tileExtent, sourceTileExtent);\n      const bufferedExtent = equals(sourceTileExtent, sharedExtent) ? null :\n        buffer(sharedExtent, layer.getRenderBuffer() * resolution, this.tmpExtent);\n      const tileProjection = sourceTile.getProjection();\n      let reproject = false;\n      if (!equivalentProjection(projection, tileProjection)) {\n        reproject = true;\n        sourceTile.setProjection(projection);\n      }\n      replayState.dirty = false;\n      const replayGroup = new CanvasReplayGroup(0, sharedExtent, resolution,\n        pixelRatio, source.getOverlaps(), this.declutterTree_, layer.getRenderBuffer());\n      const squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n\n      /**\n       * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n       * @this {module:ol/renderer/canvas/VectorTileLayer}\n       */\n      const render = function(feature) {\n        let styles;\n        const styleFunction = feature.getStyleFunction() || layer.getStyleFunction();\n        if (styleFunction) {\n          styles = styleFunction(feature, resolution);\n        }\n        if (styles) {\n          const dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup);\n          this.dirty_ = this.dirty_ || dirty;\n          replayState.dirty = replayState.dirty || dirty;\n        }\n      };\n\n      const features = sourceTile.getFeatures();\n      if (renderOrder && renderOrder !== replayState.renderedRenderOrder) {\n        features.sort(renderOrder);\n      }\n      for (let i = 0, ii = features.length; i < ii; ++i) {\n        const feature = features[i];\n        if (reproject) {\n          if (tileProjection.getUnits() == Units.TILE_PIXELS) {\n            // projected tile extent\n            tileProjection.setWorldExtent(sourceTileExtent);\n            // tile extent in tile pixel space\n            tileProjection.setExtent(sourceTile.getExtent());\n          }\n          feature.getGeometry().transform(tileProjection, projection);\n        }\n        if (!bufferedExtent || intersects(bufferedExtent, feature.getGeometry().getExtent())) {\n          render.call(this, feature);\n        }\n      }\n      replayGroup.finish();\n      for (const r in replayGroup.getReplays()) {\n        zIndexKeys[r] = true;\n      }\n      sourceTile.setReplayGroup(layer, tile.tileCoord.toString(), replayGroup);\n    }\n    replayState.renderedRevision = revision;\n    replayState.renderedRenderOrder = renderOrder;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    const resolution = frameState.viewState.resolution;\n    const rotation = frameState.viewState.rotation;\n    hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;\n    const layer = this.getLayer();\n    /** @type {!Object<string, boolean>} */\n    const features = {};\n\n    /** @type {Array<module:ol/VectorImageTile>} */\n    const renderedTiles = this.renderedTiles;\n\n    let bufferedExtent, found;\n    let i, ii, replayGroup;\n    for (i = 0, ii = renderedTiles.length; i < ii; ++i) {\n      const tile = renderedTiles[i];\n      bufferedExtent = buffer(tile.extent, hitTolerance * resolution, bufferedExtent);\n      if (!containsCoordinate(bufferedExtent, coordinate)) {\n        continue;\n      }\n      for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n        const sourceTile = tile.getTile(tile.tileKeys[t]);\n        if (sourceTile.getState() != TileState.LOADED) {\n          continue;\n        }\n        replayGroup = sourceTile.getReplayGroup(layer, tile.tileCoord.toString());\n        found = found || replayGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {},\n          /**\n           * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n           * @return {?} Callback result.\n           */\n          function(feature) {\n            const key = getUid(feature).toString();\n            if (!(key in features)) {\n              features[key] = true;\n              return callback.call(thisArg, feature, layer);\n            }\n          }, null);\n      }\n    }\n    return found;\n  }\n\n  /**\n   * @param {module:ol/VectorTile} tile Tile.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @return {module:ol/transform~Transform} transform Transform.\n   * @private\n   */\n  getReplayTransform_(tile, frameState) {\n    const layer = this.getLayer();\n    const source = /** @type {module:ol/source/VectorTile} */ (layer.getSource());\n    const tileGrid = source.getTileGrid();\n    const tileCoord = tile.tileCoord;\n    const tileResolution = tileGrid.getResolution(tileCoord[0]);\n    const viewState = frameState.viewState;\n    const pixelRatio = frameState.pixelRatio;\n    const renderResolution = viewState.resolution / pixelRatio;\n    const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n    const center = viewState.center;\n    const origin = getTopLeft(tileExtent);\n    const size = frameState.size;\n    const offsetX = Math.round(pixelRatio * size[0] / 2);\n    const offsetY = Math.round(pixelRatio * size[1] / 2);\n    return composeTransform(this.tmpTransform_,\n      offsetX, offsetY,\n      tileResolution / renderResolution, tileResolution / renderResolution,\n      viewState.rotation,\n      (origin[0] - center[0]) / tileResolution,\n      (center[1] - origin[1]) / tileResolution);\n  }\n\n  /**\n   * @param {module:ol/events/Event} event Event.\n   */\n  handleFontsChanged_(event) {\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.renderedLayerRevision_ !== undefined) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {module:ol/events/Event} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  postCompose(context, frameState, layerState) {\n    const layer = this.getLayer();\n    const renderMode = layer.getRenderMode();\n    if (renderMode != VectorTileRenderType.IMAGE) {\n      const declutterReplays = layer.getDeclutter() ? {} : null;\n      const source = /** @type {module:ol/source/VectorTile} */ (layer.getSource());\n      const replayTypes = VECTOR_REPLAYS[renderMode];\n      const pixelRatio = frameState.pixelRatio;\n      const rotation = frameState.viewState.rotation;\n      const size = frameState.size;\n      let offsetX, offsetY;\n      if (rotation) {\n        offsetX = Math.round(pixelRatio * size[0] / 2);\n        offsetY = Math.round(pixelRatio * size[1] / 2);\n        rotateAtOffset(context, -rotation, offsetX, offsetY);\n      }\n      if (declutterReplays) {\n        this.declutterTree_.clear();\n      }\n      const viewHints = frameState.viewHints;\n      const snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n      const tiles = this.renderedTiles;\n      const tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n      const clips = [];\n      const zs = [];\n      for (let i = tiles.length - 1; i >= 0; --i) {\n        const tile = /** @type {module:ol/VectorImageTile} */ (tiles[i]);\n        if (tile.getState() == TileState.ABORT) {\n          continue;\n        }\n        const tileCoord = tile.tileCoord;\n        const worldOffset = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent)[0] - tile.extent[0];\n        let transform = undefined;\n        for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n          const sourceTile = tile.getTile(tile.tileKeys[t]);\n          if (sourceTile.getState() != TileState.LOADED) {\n            continue;\n          }\n          const replayGroup = sourceTile.getReplayGroup(layer, tileCoord.toString());\n          if (!replayGroup || !replayGroup.hasReplays(replayTypes)) {\n            // sourceTile was not yet loaded when this.createReplayGroup_() was\n            // called, or it has no replays of the types we want to render\n            continue;\n          }\n          if (!transform) {\n            transform = this.getTransform(frameState, worldOffset);\n          }\n          const currentZ = sourceTile.tileCoord[0];\n          const currentClip = replayGroup.getClipCoords(transform);\n          context.save();\n          context.globalAlpha = layerState.opacity;\n          // Create a clip mask for regions in this low resolution tile that are\n          // already filled by a higher resolution tile\n          for (let j = 0, jj = clips.length; j < jj; ++j) {\n            const clip = clips[j];\n            if (currentZ < zs[j]) {\n              context.beginPath();\n              // counter-clockwise (outer ring) for current tile\n              context.moveTo(currentClip[0], currentClip[1]);\n              context.lineTo(currentClip[2], currentClip[3]);\n              context.lineTo(currentClip[4], currentClip[5]);\n              context.lineTo(currentClip[6], currentClip[7]);\n              // clockwise (inner ring) for higher resolution tile\n              context.moveTo(clip[6], clip[7]);\n              context.lineTo(clip[4], clip[5]);\n              context.lineTo(clip[2], clip[3]);\n              context.lineTo(clip[0], clip[1]);\n              context.clip();\n            }\n          }\n          replayGroup.replay(context, transform, rotation, {}, snapToPixel, replayTypes, declutterReplays);\n          context.restore();\n          clips.push(currentClip);\n          zs.push(currentZ);\n        }\n      }\n      if (declutterReplays) {\n        replayDeclutter(declutterReplays, context, rotation, snapToPixel);\n      }\n      if (rotation) {\n        rotateAtOffset(context, rotation,\n          /** @type {number} */ (offsetX), /** @type {number} */ (offsetY));\n      }\n    }\n    super.postCompose(context, frameState, layerState);\n  }\n\n  /**\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {module:ol/style/Style|Array<module:ol/style/Style>} styles The style or array of styles.\n   * @param {module:ol/render/canvas/ReplayGroup} replayGroup Replay group.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(feature, squaredTolerance, styles, replayGroup) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(\n          replayGroup, feature, styles[i], squaredTolerance,\n          this.handleStyleImageChange_, this) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        replayGroup, feature, styles, squaredTolerance,\n        this.handleStyleImageChange_, this);\n    }\n    return loading;\n  }\n\n  /**\n   * @param {module:ol/VectorImageTile} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @private\n   */\n  renderTileImage_(tile, pixelRatio, projection) {\n    const layer = this.getLayer();\n    const replayState = tile.getReplayState(layer);\n    const revision = layer.getRevision();\n    const replays = IMAGE_REPLAYS[layer.getRenderMode()];\n    if (replays && replayState.renderedTileRevision !== revision) {\n      replayState.renderedTileRevision = revision;\n      const tileCoord = tile.wrappedTileCoord;\n      const z = tileCoord[0];\n      const source = /** @type {module:ol/source/VectorTile} */ (layer.getSource());\n      const tileGrid = source.getTileGridForProjection(projection);\n      const resolution = tileGrid.getResolution(z);\n      const context = tile.getContext(layer);\n      const size = source.getTilePixelSize(z, pixelRatio, projection);\n      context.canvas.width = size[0];\n      context.canvas.height = size[1];\n      const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n      for (let i = 0, ii = tile.tileKeys.length; i < ii; ++i) {\n        const sourceTile = tile.getTile(tile.tileKeys[i]);\n        if (sourceTile.getState() != TileState.LOADED) {\n          continue;\n        }\n        const pixelScale = pixelRatio / resolution;\n        const transform = resetTransform(this.tmpTransform_);\n        scaleTransform(transform, pixelScale, -pixelScale);\n        translateTransform(transform, -tileExtent[0], -tileExtent[3]);\n        const replayGroup = sourceTile.getReplayGroup(layer, tile.tileCoord.toString());\n        replayGroup.replay(context, transform, 0, {}, true, replays);\n      }\n    }\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasVectorTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR_TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/canvas/VectorTileLayer} The layer renderer.\n */\nCanvasVectorTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasVectorTileLayerRenderer(/** @type {module:ol/layer/VectorTile} */ (layer));\n};\n\n\nexport default CanvasVectorTileLayerRenderer;\n","/**\n * @module ol/Map\n */\nimport PluggableMap from './PluggableMap.js';\nimport {defaults as defaultControls} from './control/util.js';\nimport {defaults as defaultInteractions} from './interaction.js';\nimport {assign} from './obj.js';\nimport CanvasImageLayerRenderer from './renderer/canvas/ImageLayer.js';\nimport CanvasMapRenderer from './renderer/canvas/Map.js';\nimport CanvasTileLayerRenderer from './renderer/canvas/TileLayer.js';\nimport CanvasVectorLayerRenderer from './renderer/canvas/VectorLayer.js';\nimport CanvasVectorTileLayerRenderer from './renderer/canvas/VectorTileLayer.js';\n\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @fires module:ol/MapBrowserEvent~MapBrowserEvent\n * @fires module:ol/MapEvent~MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @api\n */\nclass Map extends PluggableMap {\n\n  /**\n   * @param {module:ol/PluggableMap~MapOptions} options Map options.\n   */\n  constructor(options) {\n    options = assign({}, options);\n    if (!options.controls) {\n      options.controls = defaultControls();\n    }\n    if (!options.interactions) {\n      options.interactions = defaultInteractions();\n    }\n\n    super(options);\n  }\n\n  createRenderer() {\n    const renderer = new CanvasMapRenderer(this);\n    renderer.registerLayerRenderers([\n      CanvasImageLayerRenderer,\n      CanvasTileLayerRenderer,\n      CanvasVectorLayerRenderer,\n      CanvasVectorTileLayerRenderer\n    ]);\n    return renderer;\n  }\n}\n\n\nexport default Map;\n","/**\n * @module olcs.AutoRenderLoop\n */\n\nclass AutoRenderLoop {\n  /**\n   * @constructor\n   * @param {olcs.OLCesium} ol3d\n   */\n  constructor(ol3d) {\n    this.ol3d = ol3d;\n    this.scene_ = ol3d.getCesiumScene();\n    this.canvas_ = this.scene_.canvas;\n    this._boundNotifyRepaintRequired = this.notifyRepaintRequired.bind(this);\n\n    this.repaintEventNames_ = [\n      'mousemove', 'mousedown', 'mouseup',\n      'touchstart', 'touchend', 'touchmove',\n      'pointerdown', 'pointerup', 'pointermove',\n      'wheel'\n    ];\n\n    this.enable();\n  }\n\n  /**\n   * Enable.\n   */\n  enable() {\n    this.scene_.requestRenderMode = true;\n    this.scene_.maximumRenderTimeChange = 1000;\n    for (const repaintKey of this.repaintEventNames_) {\n      this.canvas_.addEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n    }\n\n    window.addEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n    // Listen for changes on the layer group\n    this.ol3d.getOlMap().getLayerGroup().on('change', this._boundNotifyRepaintRequired);\n  }\n\n  /**\n   * Disable.\n   */\n  disable() {\n    for (const repaintKey of this.repaintEventNames_) {\n      this.canvas_.removeEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n    }\n\n    window.removeEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n    this.ol3d.getOlMap().getLayerGroup().un('change', this._boundNotifyRepaintRequired);\n    this.scene_.requestRenderMode = false;\n  }\n\n  /**\n   * Restart render loop.\n   * Force a restart of the render loop.\n   * @api\n   */\n  restartRenderLoop() {\n    this.notifyRepaintRequired();\n  }\n\n  notifyRepaintRequired() {\n    this.scene_.requestRender();\n  }\n}\n\n\nexport default AutoRenderLoop;\n","/**\n * @module olcs.Camera\n */\n\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\nimport {toRadians, toDegrees} from './math.js';\nimport {getTransform} from 'ol/proj.js';\nimport olcsCore from './core.js';\n\nclass Camera {\n  /**\n   * This object takes care of additional 3d-specific properties of the view and\n   * ensures proper synchronization with the underlying raw Cesium.Camera object.\n   * @param {!Cesium.Scene} scene\n   * @param {!ol.Map} map\n   * @api\n   */\n  constructor(scene, map) {\n    /**\n     * @type {!Cesium.Scene}\n     * @private\n     */\n    this.scene_ = scene;\n\n    /**\n     * @type {!Cesium.Camera}\n     * @private\n     */\n    this.cam_ = scene.camera;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {?ol.View}\n     * @private\n     */\n    this.view_ = null;\n\n    /**\n     * @type {?ol.EventsKey}\n     * @private\n     */\n    this.viewListenKey_ = null;\n\n    /**\n     * @type {!ol.TransformFunction}\n     * @private\n     */\n    this.toLonLat_ = Camera.identityProjection;\n\n    /**\n     * @type {!ol.TransformFunction}\n     * @private\n     */\n    this.fromLonLat_ = Camera.identityProjection;\n\n    /**\n     * 0 -- topdown, PI/2 -- the horizon\n     * @type {number}\n     * @private\n     */\n    this.tilt_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.distance_ = 0;\n\n    /**\n     * @type {?Cesium.Matrix4}\n     * @private\n     */\n    this.lastCameraViewMatrix_ = null;\n\n    /**\n     * This is used to discard change events on view caused by updateView method.\n     * @type {boolean}\n     * @private\n     */\n    this.viewUpdateInProgress_ = false;\n\n    this.map_.on('change:view', (e) => {\n      this.setView_(this.map_.getView());\n    });\n    this.setView_(this.map_.getView());\n  }\n\n  /**\n   * @param {Array.<number>} input Input coordinate array.\n   * @param {Array.<number>=} opt_output Output array of coordinate values.\n   * @param {number=} opt_dimension Dimension.\n   * @return {Array.<number>} Input coordinate array (same array as input).\n   */\n  static identityProjection(input, opt_output, opt_dimension) {\n    const dim = opt_dimension || input.length;\n    if (opt_output) {\n      for (let i = 0; i < dim; ++i) {\n        opt_output[i] = input[i];\n      }\n    }\n    return input;\n  }\n\n  /**\n   * @param {?ol.View} view New view to use.\n   * @private\n   */\n  setView_(view) {\n    if (this.view_) {\n      olObservableUnByKey(this.viewListenKey_);\n      this.viewListenKey_ = null;\n    }\n\n    this.view_ = view;\n    if (view) {\n      const toLonLat = getTransform(view.getProjection(), 'EPSG:4326');\n      const fromLonLat = getTransform('EPSG:4326', view.getProjection());\n      console.assert(toLonLat && fromLonLat);\n\n      this.toLonLat_ = toLonLat;\n      this.fromLonLat_ = fromLonLat;\n\n      this.viewListenKey_ = view.on('propertychange', e => this.handleViewEvent_(e));\n\n      this.readFromView();\n    } else {\n      this.toLonLat_ = Camera.identityProjection;\n      this.fromLonLat_ = Camera.identityProjection;\n    }\n  }\n\n  /**\n   * @param {?} e\n   * @private\n   */\n  handleViewEvent_(e) {\n    if (!this.viewUpdateInProgress_) {\n      this.readFromView();\n    }\n  }\n\n  /**\n   * @param {number} heading In radians.\n   * @api\n   */\n  setHeading(heading) {\n    if (!this.view_) {\n      return;\n    }\n\n    this.view_.setRotation(heading);\n  }\n\n  /**\n   * @return {number|undefined} Heading in radians.\n   * @api\n   */\n  getHeading() {\n    if (!this.view_) {\n      return undefined;\n    }\n    const rotation = this.view_.getRotation();\n    return rotation || 0;\n  }\n\n  /**\n   * @param {number} tilt In radians.\n   * @api\n   */\n  setTilt(tilt) {\n    this.tilt_ = tilt;\n    this.updateCamera_();\n  }\n\n  /**\n   * @return {number} Tilt in radians.\n   * @api\n   */\n  getTilt() {\n    return this.tilt_;\n  }\n\n  /**\n   * @param {number} distance In meters.\n   * @api\n   */\n  setDistance(distance) {\n    this.distance_ = distance;\n    this.updateCamera_();\n    this.updateView();\n  }\n\n  /**\n   * @return {number} Distance in meters.\n   * @api\n   */\n  getDistance() {\n    return this.distance_;\n  }\n\n  /**\n   * Shortcut for ol.View.setCenter().\n   * @param {!ol.Coordinate} center Same projection as the ol.View.\n   * @api\n   */\n  setCenter(center) {\n    if (!this.view_) {\n      return;\n    }\n    this.view_.setCenter(center);\n  }\n\n  /**\n   * Shortcut for ol.View.getCenter().\n   * @return {ol.Coordinate|undefined} Same projection as the ol.View.\n   * @api\n   */\n  getCenter() {\n    if (!this.view_) {\n      return undefined;\n    }\n    return this.view_.getCenter();\n  }\n\n  /**\n   * Sets the position of the camera.\n   * @param {!ol.Coordinate} position Same projection as the ol.View.\n   * @api\n   */\n  setPosition(position) {\n    if (!this.toLonLat_) {\n      return;\n    }\n    const ll = this.toLonLat_(position);\n    console.assert(ll);\n\n    const carto = new Cesium.Cartographic(\n        toRadians(ll[0]),\n        toRadians(ll[1]),\n        this.getAltitude());\n\n    this.cam_.setView({\n      destination: Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto)\n    });\n    this.updateView();\n  }\n\n  /**\n   * Calculates position under the camera.\n   * @return {!ol.Coordinate|undefined} Same projection as the ol.View.\n   * @api\n   */\n  getPosition() {\n    if (!this.fromLonLat_) {\n      return undefined;\n    }\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);\n\n    const pos = this.fromLonLat_([\n      toDegrees(carto.longitude),\n      toDegrees(carto.latitude)\n    ]);\n    console.assert(pos);\n    return pos;\n  }\n\n  /**\n   * @param {number} altitude In meters.\n   * @api\n   */\n  setAltitude(altitude) {\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n        this.cam_.position);\n    carto.height = altitude;\n    this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n    this.updateView();\n  }\n\n  /**\n   * @return {number} Altitude in meters.\n   * @api\n   */\n  getAltitude() {\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n        this.cam_.position);\n\n    return carto.height;\n  }\n\n  /**\n   * Updates the state of the underlying Cesium.Camera\n   * according to the current values of the properties.\n   * @private\n   */\n  updateCamera_() {\n    if (!this.view_ || !this.toLonLat_) {\n      return;\n    }\n    const center = this.view_.getCenter();\n    if (!center) {\n      return;\n    }\n    const ll = this.toLonLat_(center);\n    console.assert(ll);\n\n    const carto = new Cesium.Cartographic(toRadians(ll[0]),\n        toRadians(ll[1]));\n    if (this.scene_.globe) {\n      const height = this.scene_.globe.getHeight(carto);\n      carto.height = height || 0;\n    }\n\n    const destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n    /** @type {Cesium.optionsOrientation} */\n    const orientation = {\n      pitch: this.tilt_ - Cesium.Math.PI_OVER_TWO,\n      heading: -this.view_.getRotation(),\n      roll: undefined\n    };\n    this.cam_.setView({\n      destination,\n      orientation\n    });\n\n    this.cam_.moveBackward(this.distance_);\n\n    this.checkCameraChange(true);\n  }\n\n  /**\n   * Calculates the values of the properties from the current ol.View state.\n   * @api\n   */\n  readFromView() {\n    if (!this.view_ || !this.toLonLat_) {\n      return;\n    }\n    const center = this.view_.getCenter();\n    if (center === undefined || center === null) {\n      return;\n    }\n    const ll = this.toLonLat_(center);\n    console.assert(ll);\n\n    const resolution = this.view_.getResolution();\n    this.distance_ = this.calcDistanceForResolution(\n        resolution || 0, toRadians(ll[1]));\n\n    this.updateCamera_();\n  }\n\n  /**\n   * Calculates the values of the properties from the current Cesium.Camera state.\n   * Modifies the center, resolution and rotation properties of the view.\n   * @api\n   */\n  updateView() {\n    if (!this.view_ || !this.fromLonLat_) {\n      return;\n    }\n    this.viewUpdateInProgress_ = true;\n\n    // target & distance\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const scene = this.scene_;\n    const target = olcsCore.pickCenterPoint(scene);\n\n    let bestTarget = target;\n    if (!bestTarget) {\n      //TODO: how to handle this properly ?\n      const globe = scene.globe;\n      const carto = this.cam_.positionCartographic.clone();\n      const height = globe.getHeight(carto);\n      carto.height = height || 0;\n      bestTarget = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n    }\n    this.distance_ = Cesium.Cartesian3.distance(bestTarget, this.cam_.position);\n    const bestTargetCartographic = ellipsoid.cartesianToCartographic(bestTarget);\n    this.view_.setCenter(this.fromLonLat_([\n      toDegrees(bestTargetCartographic.longitude),\n      toDegrees(bestTargetCartographic.latitude)]));\n\n    // resolution\n    this.view_.setResolution(\n        this.calcResolutionForDistance(this.distance_,\n            bestTargetCartographic ? bestTargetCartographic.latitude : 0));\n\n\n    /*\n     * Since we are positioning the target, the values of heading and tilt\n     * need to be calculated _at the target_.\n     */\n    if (target) {\n      const pos = this.cam_.position;\n\n      // normal to the ellipsoid at the target\n      const targetNormal = new Cesium.Cartesian3();\n      ellipsoid.geocentricSurfaceNormal(target, targetNormal);\n\n      // vector from the target to the camera\n      const targetToCamera = new Cesium.Cartesian3();\n      Cesium.Cartesian3.subtract(pos, target, targetToCamera);\n      Cesium.Cartesian3.normalize(targetToCamera, targetToCamera);\n\n\n      // HEADING\n      const up = this.cam_.up;\n      const right = this.cam_.right;\n      const normal = new Cesium.Cartesian3(-target.y, target.x, 0); // what is it?\n      const heading = Cesium.Cartesian3.angleBetween(right, normal);\n      const cross = Cesium.Cartesian3.cross(target, up, new Cesium.Cartesian3());\n      const orientation = cross.z;\n\n      this.view_.setRotation((orientation < 0 ? heading : -heading));\n\n      // TILT\n      const tiltAngle = Math.acos(\n          Cesium.Cartesian3.dot(targetNormal, targetToCamera));\n      this.tilt_ = isNaN(tiltAngle) ? 0 : tiltAngle;\n    } else {\n      // fallback when there is no target\n      this.view_.setRotation(this.cam_.heading);\n      this.tilt_ = -this.cam_.pitch + Math.PI / 2;\n    }\n\n    this.viewUpdateInProgress_ = false;\n  }\n\n  /**\n   * Check if the underlying camera state has changed and ensure synchronization.\n   * @param {boolean=} opt_dontSync Do not synchronize the view.\n   */\n  checkCameraChange(opt_dontSync) {\n    const old = this.lastCameraViewMatrix_;\n    const current = this.cam_.viewMatrix;\n\n    if (!old || !Cesium.Matrix4.equalsEpsilon(old, current, 1e-5)) {\n      this.lastCameraViewMatrix_ = current.clone();\n      if (opt_dontSync !== true) {\n        this.updateView();\n      }\n    }\n  }\n\n  /**\n   * calculate the distance between camera and centerpoint based on the resolution and latitude value\n   * @param {number} resolution Number of map units per pixel.\n   * @param {number} latitude Latitude in radians.\n   * @return {number} The calculated distance.\n   * @api\n   */\n  calcDistanceForResolution(resolution, latitude) {\n    const canvas = this.scene_.canvas;\n    const fovy = this.cam_.frustum.fovy; // vertical field of view\n    console.assert(!isNaN(fovy));\n    const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n    // number of \"map units\" visible in 2D (vertically)\n    const visibleMapUnits = resolution * canvas.clientHeight;\n\n    // The metersPerUnit does not take latitude into account, but it should\n    // be lower with increasing latitude -- we have to compensate.\n    // In 3D it is not possible to maintain the resolution at more than one point,\n    // so it only makes sense to use the latitude of the \"target\" point.\n    const relativeCircumference = Math.cos(Math.abs(latitude));\n\n    // how many meters should be visible in 3D\n    const visibleMeters = visibleMapUnits * metersPerUnit * relativeCircumference;\n\n    // distance required to view the calculated length in meters\n    //\n    //  fovy/2\n    //    |\\\n    //  x | \\\n    //    |--\\\n    // visibleMeters/2\n    const requiredDistance = (visibleMeters / 2) / Math.tan(fovy / 2);\n\n    // NOTE: This calculation is not absolutely precise, because metersPerUnit\n    // is a great simplification. It does not take ellipsoid/terrain into account.\n\n    return requiredDistance;\n  }\n\n  /**\n   * calculate the resolution based on a distance(camera to position) and latitude value\n   * @param {number} distance\n   * @param {number} latitude\n   * @return {number} The calculated resolution.\n   * @api\n   */\n  calcResolutionForDistance(distance, latitude) {\n    // See the reverse calculation (calcDistanceForResolution) for details\n    const canvas = this.scene_.canvas;\n    const fovy = this.cam_.frustum.fovy;\n    const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n    const visibleMeters = 2 * distance * Math.tan(fovy / 2);\n    const relativeCircumference = Math.cos(Math.abs(latitude));\n    const visibleMapUnits = visibleMeters / metersPerUnit / relativeCircumference;\n    const resolution = visibleMapUnits / canvas.clientHeight;\n\n    return resolution;\n  }\n}\n\n\nexport default Camera;\n","/**\n * @module olcs.AbstractSynchronizer\n */\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport {olcsListen, getUid} from './util.js';\n\n\nclass AbstractSynchronizer {\n  /**\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @template T\n   * @abstract\n   * @api\n   */\n  constructor(map, scene) {\n    /**\n     * @type {!ol.Map}\n     * @protected\n     */\n    this.map = map;\n\n    /**\n     * @type {ol.View}\n     * @protected\n     */\n    this.view = map.getView();\n\n    /**\n     * @type {!Cesium.Scene}\n     * @protected\n     */\n    this.scene = scene;\n\n    /**\n     * @type {ol.Collection.<ol.layer.Base>}\n     * @protected\n     */\n    this.olLayers = map.getLayerGroup().getLayers();\n\n    /**\n     * @type {ol.layer.Group}\n     */\n    this.mapLayerGroup = map.getLayerGroup();\n\n    /**\n     * Map of OpenLayers layer ids (from getUid) to the Cesium ImageryLayers.\n     * Null value means, that we are unable to create equivalent layers.\n     * @type {Object.<string, ?Array.<T>>}\n     * @protected\n     */\n    this.layerMap = {};\n\n    /**\n     * Map of listen keys for OpenLayers layer layers ids (from getUid).\n     * @type {!Object.<string, Array<ol.EventsKey>>}\n     * @protected\n     */\n    this.olLayerListenKeys = {};\n\n    /**\n     * Map of listen keys for OpenLayers layer groups ids (from getUid).\n     * @type {!Object.<string, !Array.<ol.EventsKey>>}\n     * @private\n     */\n    this.olGroupListenKeys_ = {};\n  }\n\n  /**\n   * Destroy all and perform complete synchronization of the layers.\n   * @api\n   */\n  synchronize() {\n    this.destroyAll();\n    this.addLayers_(this.mapLayerGroup);\n  }\n\n  /**\n   * Order counterparts using the same algorithm as the Openlayers renderer:\n   * z-index then original sequence order.\n   * @protected\n   */\n  orderLayers() {\n    // Ordering logics is handled in subclasses.\n  }\n\n  /**\n   * Add a layer hierarchy.\n   * @param {ol.layer.Base} root\n   * @private\n   */\n  addLayers_(root) {\n    /** @type {Array<olcsx.LayerWithParents>} */\n    const fifo = [{\n      layer: root,\n      parents: []\n    }];\n    while (fifo.length > 0) {\n      const olLayerWithParents = fifo.splice(0, 1)[0];\n      const olLayer = olLayerWithParents.layer;\n      const olLayerId = getUid(olLayer).toString();\n      this.olLayerListenKeys[olLayerId] = [];\n      console.assert(!this.layerMap[olLayerId]);\n\n      let cesiumObjects = null;\n      if (olLayer instanceof olLayerGroup) {\n        this.listenForGroupChanges_(olLayer);\n        if (olLayer !== this.mapLayerGroup) {\n          cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n        }\n        if (!cesiumObjects) {\n          olLayer.getLayers().forEach((l) => {\n            if (l) {\n              const newOlLayerWithParents = {\n                layer: l,\n                parents: olLayer === this.mapLayerGroup ?\n                  [] :\n                  [olLayerWithParents.layer].concat(olLayerWithParents.parents)\n              };\n              fifo.push(newOlLayerWithParents);\n            }\n          });\n        }\n      } else {\n        cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n        if (!cesiumObjects) {\n          // keep an eye on the layers that once failed to be added (might work when the layer is updated)\n          // for example when a source is set after the layer is added to the map\n          const layerId = olLayerId;\n          const layerWithParents = olLayerWithParents;\n          const onLayerChange = (e) => {\n            const cesiumObjs = this.createSingleLayerCounterparts(layerWithParents);\n            if (cesiumObjs) {\n              // unsubscribe event listener\n              layerWithParents.layer.un('change', onLayerChange);\n              this.addCesiumObjects_(cesiumObjs, layerId, layerWithParents.layer);\n              this.orderLayers();\n            }\n          };\n          this.olLayerListenKeys[olLayerId].push(olcsListen(layerWithParents.layer, 'change', onLayerChange));\n        }\n      }\n      // add Cesium layers\n      if (cesiumObjects) {\n        this.addCesiumObjects_(cesiumObjects, olLayerId, olLayer);\n      }\n    }\n\n    this.orderLayers();\n  }\n\n  /**\n   * Add Cesium objects.\n   * @param {Array.<T>} cesiumObjects\n   * @param {string} layerId\n   * @param {ol.layer.Base} layer\n   * @private\n   */\n  addCesiumObjects_(cesiumObjects, layerId, layer) {\n    this.layerMap[layerId] = cesiumObjects;\n    this.olLayerListenKeys[layerId].push(olcsListen(layer, 'change:zIndex', () => this.orderLayers()));\n    cesiumObjects.forEach((cesiumObject) => {\n      this.addCesiumObject(cesiumObject);\n    });\n  }\n\n  /**\n   * Remove and destroy a single layer.\n   * @param {ol.layer.Layer} layer\n   * @return {boolean} counterpart destroyed\n   * @private\n   */\n  removeAndDestroySingleLayer_(layer) {\n    const uid = getUid(layer).toString();\n    const counterparts = this.layerMap[uid];\n    if (!!counterparts) {\n      counterparts.forEach((counterpart) => {\n        this.removeSingleCesiumObject(counterpart, false);\n        this.destroyCesiumObject(counterpart);\n      });\n      this.olLayerListenKeys[uid].forEach(olObservableUnByKey);\n      delete this.olLayerListenKeys[uid];\n    }\n    delete this.layerMap[uid];\n    return !!counterparts;\n  }\n\n  /**\n   * Unlisten a single layer group.\n   * @param {ol.layer.Group} group\n   * @private\n   */\n  unlistenSingleGroup_(group) {\n    if (group === this.mapLayerGroup) {\n      return;\n    }\n    const uid = getUid(group).toString();\n    const keys = this.olGroupListenKeys_[uid];\n    keys.forEach((key) => {\n      olObservableUnByKey(key);\n    });\n    delete this.olGroupListenKeys_[uid];\n    delete this.layerMap[uid];\n  }\n\n  /**\n   * Remove layer hierarchy.\n   * @param {ol.layer.Base} root\n   * @private\n   */\n  removeLayer_(root) {\n    if (!!root) {\n      const fifo = [root];\n      while (fifo.length > 0) {\n        const olLayer = fifo.splice(0, 1)[0];\n        const done = this.removeAndDestroySingleLayer_(olLayer);\n        if (olLayer instanceof olLayerGroup) {\n          this.unlistenSingleGroup_(olLayer);\n          if (!done) {\n            // No counterpart for the group itself so removing\n            // each of the child layers.\n            olLayer.getLayers().forEach((l) => {\n              fifo.push(l);\n            });\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Register listeners for single layer group change.\n   * @param {ol.layer.Group} group\n   * @private\n   */\n  listenForGroupChanges_(group) {\n    const uuid = getUid(group).toString();\n\n    console.assert(this.olGroupListenKeys_[uuid] === undefined);\n\n    const listenKeyArray = [];\n    this.olGroupListenKeys_[uuid] = listenKeyArray;\n\n    // only the keys that need to be relistened when collection changes\n    let contentKeys = [];\n    const listenAddRemove = (function() {\n      const collection = group.getLayers();\n      if (collection) {\n        contentKeys = [\n          collection.on('add', (event) => {\n            this.addLayers_(event.element);\n          }),\n          collection.on('remove', (event) => {\n            this.removeLayer_(event.element);\n          })\n        ];\n        listenKeyArray.push(...contentKeys);\n      }\n    }).bind(this);\n\n    listenAddRemove();\n\n    listenKeyArray.push(group.on('change:layers', (e) => {\n      contentKeys.forEach((el) => {\n        const i = listenKeyArray.indexOf(el);\n        if (i >= 0) {\n          listenKeyArray.splice(i, 1);\n        }\n        olObservableUnByKey(el);\n      });\n      listenAddRemove();\n    }));\n  }\n\n  /**\n   * Destroys all the created Cesium objects.\n   * @protected\n   */\n  destroyAll() {\n    this.removeAllCesiumObjects(true); // destroy\n    let objKey;\n    for (objKey in this.olGroupListenKeys_) {\n      const keys = this.olGroupListenKeys_[objKey];\n      keys.forEach(olObservableUnByKey);\n    }\n    for (objKey in this.olLayerListenKeys) {\n      this.olLayerListenKeys[objKey].forEach(olObservableUnByKey);\n    }\n    this.olGroupListenKeys_ = {};\n    this.olLayerListenKeys = {};\n    this.layerMap = {};\n  }\n\n  /**\n   * Adds a single Cesium object to the collection.\n   * @param {!T} object\n   * @abstract\n   * @protected\n   */\n  addCesiumObject(object) {}\n\n  /**\n   * @param {!T} object\n   * @abstract\n   * @protected\n   */\n  destroyCesiumObject(object) {}\n\n  /**\n   * Remove single Cesium object from the collection.\n   * @param {!T} object\n   * @param {boolean} destroy\n   * @abstract\n   * @protected\n   */\n  removeSingleCesiumObject(object, destroy) {}\n\n  /**\n   * Remove all Cesium objects from the collection.\n   * @param {boolean} destroy\n   * @abstract\n   * @protected\n   */\n  removeAllCesiumObjects(destroy) {}\n\n  /**\n   * @param {olcsx.LayerWithParents} olLayerWithParents\n   * @return {?Array.<T>}\n   * @abstract\n   * @protected\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {}\n}\n\n\nexport default AbstractSynchronizer;\n","/**\n * @module olcs.RasterSynchronizer\n */\nimport olLayerGroup from 'ol/layer/Group.js';\nimport {getUid, stableSort} from './util.js';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsCore from './core.js';\n\nclass RasterSynchronizer extends olcsAbstractSynchronizer {\n  /**\n   * This object takes care of one-directional synchronization of\n   * Openlayers raster layers to the given Cesium globe.\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @constructor\n   * @extends {olcsAbstractSynchronizer.<Cesium.ImageryLayer>}\n   * @api\n   */\n  constructor(map, scene) {\n    super(map, scene);\n\n    /**\n     * @type {!Cesium.ImageryLayerCollection}\n     * @private\n     */\n    this.cesiumLayers_ = scene.imageryLayers;\n\n    /**\n     * @type {!Cesium.ImageryLayerCollection}\n     * @private\n     */\n    this.ourLayers_ = new Cesium.ImageryLayerCollection();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addCesiumObject(object) {\n    this.cesiumLayers_.add(object);\n    this.ourLayers_.add(object);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  destroyCesiumObject(object) {\n    object.destroy();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeSingleCesiumObject(object, destroy) {\n    this.cesiumLayers_.remove(object, destroy);\n    this.ourLayers_.remove(object, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeAllCesiumObjects(destroy) {\n    for (let i = 0; i < this.ourLayers_.length; ++i) {\n      this.cesiumLayers_.remove(this.ourLayers_.get(i), destroy);\n    }\n    this.ourLayers_.removeAll(false);\n  }\n\n  /**\n   * Creates an array of Cesium.ImageryLayer.\n   * May be overriden by child classes to implement custom behavior.\n   * The default implementation handles tiled imageries in EPSG:4326 or\n   * EPSG:3859.\n   * @param {!ol.layer.Base} olLayer\n   * @param {!ol.proj.Projection} viewProj Projection of the view.\n   * @return {?Array.<!Cesium.ImageryLayer>} array or null if not possible\n   * (or supported)\n   * @protected\n   */\n  convertLayerToCesiumImageries(olLayer, viewProj) {\n    const result = olcsCore.tileLayerToImageryLayer(this.map, olLayer, viewProj);\n    return result ? [result] : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {\n    const olLayer = olLayerWithParents.layer;\n    const uid = getUid(olLayer).toString();\n    const viewProj = this.view.getProjection();\n    console.assert(viewProj);\n    const cesiumObjects = this.convertLayerToCesiumImageries(olLayer, viewProj);\n    if (cesiumObjects) {\n      const listenKeyArray = [];\n      [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n        listenKeyArray.push(olLayerItem.on(['change:opacity', 'change:visible'], () => {\n          // the compiler does not seem to be able to infer this\n          console.assert(cesiumObjects);\n          for (let i = 0; i < cesiumObjects.length; ++i) {\n            olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n          }\n        }));\n      });\n\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n      }\n\n      // there is no way to modify Cesium layer extent,\n      // we have to recreate when OpenLayers layer extent changes:\n      listenKeyArray.push(olLayer.on('change:extent', (e) => {\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          this.cesiumLayers_.remove(cesiumObjects[i], true); // destroy\n          this.ourLayers_.remove(cesiumObjects[i], false);\n        }\n        delete this.layerMap[getUid(olLayer)]; // invalidate the map entry\n        this.synchronize();\n      }));\n\n      listenKeyArray.push(olLayer.on('change', (e) => {\n        // when the source changes, re-add the layer to force update\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          const position = this.cesiumLayers_.indexOf(cesiumObjects[i]);\n          if (position >= 0) {\n            this.cesiumLayers_.remove(cesiumObjects[i], false);\n            this.cesiumLayers_.add(cesiumObjects[i], position);\n          }\n        }\n      }));\n\n      this.olLayerListenKeys[uid].push(...listenKeyArray);\n    }\n\n    return Array.isArray(cesiumObjects) ? cesiumObjects : null;\n  }\n\n  /**\n   * Order counterparts using the same algorithm as the Openlayers renderer:\n   * z-index then original sequence order.\n   * @override\n   * @protected\n   */\n  orderLayers() {\n    const layers = [];\n    const zIndices = {};\n    const queue = [this.mapLayerGroup];\n\n    while (queue.length > 0) {\n      const olLayer = queue.splice(0, 1)[0];\n      layers.push(olLayer);\n      zIndices[getUid(olLayer)] = olLayer.getZIndex();\n\n      if (olLayer instanceof olLayerGroup) {\n        const sublayers = olLayer.getLayers();\n        if (sublayers) {\n          // Prepend queue with sublayers in order\n          queue.unshift(...sublayers.getArray());\n        }\n      }\n    }\n\n    stableSort(layers, (layer1, layer2) =>\n      zIndices[getUid(layer1)] - zIndices[getUid(layer2)]\n    );\n\n    layers.forEach((olLayer) => {\n      const olLayerId = getUid(olLayer).toString();\n      const cesiumObjects = this.layerMap[olLayerId];\n      if (cesiumObjects) {\n        cesiumObjects.forEach((cesiumObject) => { this.raiseToTop(cesiumObject); });\n      }\n    });\n  }\n\n  /**\n   * @param {Cesium.ImageryLayer} counterpart\n   */\n  raiseToTop(counterpart) {\n    this.cesiumLayers_.raiseToTop(counterpart);\n  }\n}\n\n\nexport default RasterSynchronizer;\n","/**\n * @module ol/source/Cluster\n */\n\nimport {getUid} from '../util.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport {scale as scaleCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {buffer, createEmpty, createOrUpdateFromCoordinate} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from '../source/Vector.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [distance=20] Minimum distance in pixels between clusters.\n * @property {module:ol/extent~Extent} [extent] Extent.\n * @property {function(module:ol/Feature):module:ol/geom/Point} [geometryFunction]\n * Function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Point} as cluster calculation point for the feature. When a\n * feature should not be considered for clustering, the function should return\n * `null`. The default, which works when the underyling source contains point\n * features only, is\n * ```js\n * function(feature) {\n *   return feature.getGeometry();\n * }\n * ```\n * See {@link module:ol/geom/Polygon~Polygon#getInteriorPoint} for a way to get a cluster\n * calculation point for polygons.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {module:ol/source/Vector} source Source.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n * @api\n */\nclass Cluster extends VectorSource {\n  /**\n   * @param {module:ol/source/Cluster~Options=} options Cluster options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      extent: options.extent,\n      projection: options.projection,\n      wrapX: options.wrapX\n    });\n\n    /**\n     * @type {number|undefined}\n     * @protected\n     */\n    this.resolution = undefined;\n\n    /**\n     * @type {number}\n     * @protected\n     */\n    this.distance = options.distance !== undefined ? options.distance : 20;\n\n    /**\n     * @type {Array<module:ol/Feature>}\n     * @protected\n     */\n    this.features = [];\n\n    /**\n     * @param {module:ol/Feature} feature Feature.\n     * @return {module:ol/geom/Point} Cluster calculation point.\n     * @protected\n     */\n    this.geometryFunction = options.geometryFunction || function(feature) {\n      const geometry = /** @type {module:ol/geom/Point} */ (feature.getGeometry());\n      assert(geometry instanceof Point,\n        10); // The default `geometryFunction` can only handle `module:ol/geom/Point~Point` geometries\n      return geometry;\n    };\n\n    /**\n     * @type {module:ol/source/Vector}\n     * @protected\n     */\n    this.source = options.source;\n\n    listen(this.source, EventType.CHANGE, this.refresh, this);\n  }\n\n  /**\n   * Get the distance in pixels between clusters.\n   * @return {number} Distance.\n   * @api\n   */\n  getDistance() {\n    return this.distance;\n  }\n\n  /**\n   * Get a reference to the wrapped source.\n   * @return {module:ol/source/Vector} Source.\n   * @api\n   */\n  getSource() {\n    return this.source;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  loadFeatures(extent, resolution, projection) {\n    this.source.loadFeatures(extent, resolution, projection);\n    if (resolution !== this.resolution) {\n      this.clear();\n      this.resolution = resolution;\n      this.cluster();\n      this.addFeatures(this.features);\n    }\n  }\n\n  /**\n   * Set the distance in pixels between clusters.\n   * @param {number} distance The distance in pixels.\n   * @api\n   */\n  setDistance(distance) {\n    this.distance = distance;\n    this.refresh();\n  }\n\n  /**\n   * handle the source changing\n   * @override\n   */\n  refresh() {\n    this.clear();\n    this.cluster();\n    this.addFeatures(this.features);\n    super.refresh();\n  }\n\n  /**\n   * @protected\n   */\n  cluster() {\n    if (this.resolution === undefined) {\n      return;\n    }\n    this.features.length = 0;\n    const extent = createEmpty();\n    const mapDistance = this.distance * this.resolution;\n    const features = this.source.getFeatures();\n\n    /**\n     * @type {!Object<string, boolean>}\n     */\n    const clustered = {};\n\n    for (let i = 0, ii = features.length; i < ii; i++) {\n      const feature = features[i];\n      if (!(getUid(feature).toString() in clustered)) {\n        const geometry = this.geometryFunction(feature);\n        if (geometry) {\n          const coordinates = geometry.getCoordinates();\n          createOrUpdateFromCoordinate(coordinates, extent);\n          buffer(extent, mapDistance, extent);\n\n          let neighbors = this.source.getFeaturesInExtent(extent);\n          neighbors = neighbors.filter(function(neighbor) {\n            const uid = getUid(neighbor).toString();\n            if (!(uid in clustered)) {\n              clustered[uid] = true;\n              return true;\n            } else {\n              return false;\n            }\n          });\n          this.features.push(this.createCluster(neighbors));\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Array<module:ol/Feature>} features Features\n   * @return {module:ol/Feature} The cluster feature.\n   * @protected\n   */\n  createCluster(features) {\n    const centroid = [0, 0];\n    for (let i = features.length - 1; i >= 0; --i) {\n      const geometry = this.geometryFunction(features[i]);\n      if (geometry) {\n        addCoordinate(centroid, geometry.getCoordinates());\n      } else {\n        features.splice(i, 1);\n      }\n    }\n    scaleCoordinate(centroid, 1 / features.length);\n\n    const cluster = new Feature(new Point(centroid));\n    cluster.set('features', features);\n    return cluster;\n  }\n}\n\n\nexport default Cluster;\n","/**\n * @module olcs.core.VectorLayerCounterpart\n */\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\n\nclass VectorLayerCounterpart {\n  /**\n  * Result of the conversion of an OpenLayers layer to Cesium.\n  * @param {!(ol.proj.Projection|string)} layerProjection\n  * @param {!Cesium.Scene} scene\n  */\n  constructor(layerProjection, scene) {\n    const billboards = new Cesium.BillboardCollection({scene});\n    const primitives = new Cesium.PrimitiveCollection();\n\n    /**\n    * @type {!Array.<ol.EventsKey>}\n    */\n    this.olListenKeys = [];\n\n    this.rootCollection_ = new Cesium.PrimitiveCollection();\n    /**\n    * @type {!olcsx.core.OlFeatureToCesiumContext}\n    */\n    this.context = {\n      projection: layerProjection,\n      billboards,\n      featureToCesiumMap: {},\n      primitives\n    };\n\n    this.rootCollection_.add(billboards);\n    this.rootCollection_.add(primitives);\n  }\n\n  /**\n  * Unlisten.\n  */\n  destroy() {\n    this.olListenKeys.forEach(olObservableUnByKey);\n    this.olListenKeys.length = 0;\n  }\n\n  /**\n  * @return {!Cesium.Primitive}\n  */\n  getRootPrimitive() {\n    return this.rootCollection_;\n  }\n}\n\n\nexport default VectorLayerCounterpart;\n","/**\n * @module olcs.FeatureConverter\n */\nimport olGeomGeometry from 'ol/geom/Geometry.js';\nimport olStyleIcon from 'ol/style/Icon.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olSourceCluster from 'ol/source/Cluster.js';\nimport {circular as olCreateCircularPolygon} from 'ol/geom/Polygon.js';\nimport {boundingExtent, getCenter} from 'ol/extent.js';\nimport olGeomSimpleGeometry from 'ol/geom/SimpleGeometry.js';\nimport olcsCore from './core.js';\nimport olcsCoreVectorLayerCounterpart from './core/VectorLayerCounterpart.js';\nimport olcsUtil, {getUid} from './util.js';\n\nclass FeatureConverter {\n  /**\n   * Concrete base class for converting from OpenLayers3 vectors to Cesium\n   * primitives.\n   * Extending this class is possible provided that the extending class and\n   * the library are compiled together by the closure compiler.\n   * @param {!Cesium.Scene} scene Cesium scene.\n   * @constructor\n   * @api\n   */\n  constructor(scene) {\n\n    /**\n     * @protected\n     */\n    this.scene = scene;\n\n    /**\n     * Bind once to have a unique function for using as a listener\n     * @type {function(ol.source.Vector.Event)}\n     * @private\n     */\n    this.boundOnRemoveOrClearFeatureListener_ =\n        this.onRemoveOrClearFeature_.bind(this);\n  }\n\n  /**\n   * @param {ol.source.Vector.Event} evt\n   * @private\n   */\n  onRemoveOrClearFeature_(evt) {\n    const source = evt.target;\n    console.assert(source instanceof olSourceVector);\n\n    const cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n    if (cancellers) {\n      const feature = evt.feature;\n      if (feature) {\n        // remove\n        const id = getUid(feature);\n        const canceller = cancellers[id];\n        if (canceller) {\n          canceller();\n          delete cancellers[id];\n        }\n      } else {\n        // clear\n        for (const key in cancellers) {\n          if (cancellers.hasOwnProperty(key)) {\n            cancellers[key]();\n          }\n        }\n        olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n    }\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!Cesium.Primitive|Cesium.Label|Cesium.Billboard} primitive\n   * @protected\n   */\n  setReferenceForPicking(layer, feature, primitive) {\n    primitive.olLayer = layer;\n    primitive.olFeature = feature;\n  }\n\n  /**\n   * Basics primitive creation using a color attribute.\n   * Note that Cesium has 'interior' and outline geometries.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n   * @param {!Cesium.Geometry} geometry\n   * @param {!Cesium.Color} color\n   * @param {number=} opt_lineWidth\n   * @return {Cesium.Primitive}\n   * @protected\n   */\n  createColoredPrimitive(layer, feature, olGeometry, geometry, color, opt_lineWidth) {\n    const createInstance = function(geometry, color) {\n      const instance = new Cesium.GeometryInstance({\n        // always update Cesium externs before adding a property\n        geometry\n      });\n      if (color && !(color instanceof Cesium.ImageMaterialProperty)) {\n        instance.attributes = {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n        };\n      }\n      return instance;\n    };\n\n    const options = {\n      // always update Cesium externs before adding a property\n      flat: true, // work with all geometries\n      renderState: {\n        depthTest: {\n          enabled: true\n        }\n      }\n    };\n\n    if (opt_lineWidth !== undefined) {\n      if (!options.renderState) {\n        options.renderState = {};\n      }\n      options.renderState.lineWidth = opt_lineWidth;\n    }\n\n    const instances = createInstance(geometry, color);\n\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    let primitive;\n\n    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n      const ctor = instances.geometry.constructor;\n      if (ctor && !ctor['createShadowVolume']) {\n        return null;\n      }\n      primitive = new Cesium.GroundPrimitive({\n        geometryInstances: instances\n      });\n    } else {\n      primitive = new Cesium.Primitive({\n        geometryInstances: instances\n      });\n    }\n\n    if (color instanceof Cesium.ImageMaterialProperty) {\n      const dataUri = color.image.getValue().toDataURL();\n\n      primitive.appearance = new Cesium.MaterialAppearance({\n        flat: true,\n        renderState: {\n          depthTest: {\n            enabled: true\n          }\n        },\n        material: new Cesium.Material({\n          fabric: {\n            type: 'Image',\n            uniforms: {\n              image: dataUri\n            }\n          }\n        })\n      });\n    } else {\n      primitive.appearance = new Cesium.PerInstanceColorAppearance(options);\n    }\n\n    this.setReferenceForPicking(layer, feature, primitive);\n    return primitive;\n  }\n\n  /**\n   * Return the fill or stroke color from a plain ol style.\n   * @param {!ol.style.Style|ol.style.Text} style\n   * @param {boolean} outline\n   * @return {!Cesium.Color}\n   * @protected\n   */\n  extractColorFromOlStyle(style, outline) {\n    const fillColor = style.getFill() ? style.getFill().getColor() : null;\n    const strokeColor = style.getStroke() ? style.getStroke().getColor() : null;\n\n    let olColor = 'black';\n    if (strokeColor && outline) {\n      olColor = strokeColor;\n    } else if (fillColor) {\n      olColor = fillColor;\n    }\n\n    return olcsCore.convertColorToCesium(olColor);\n  }\n\n  /**\n   * Return the width of stroke from a plain ol style.\n   * @param {!ol.style.Style|ol.style.Text} style\n   * @return {number}\n   * @protected\n   */\n  extractLineWidthFromOlStyle(style) {\n    // Handling of line width WebGL limitations is handled by Cesium.\n    const width = style.getStroke() ? style.getStroke().getWidth() : undefined;\n    return width !== undefined ? width : 1;\n  }\n\n  /**\n   * Create a primitive collection out of two Cesium geometries.\n   * Only the OpenLayers style colors will be used.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n   * @param {!Cesium.Geometry} fillGeometry\n   * @param {!Cesium.Geometry} outlineGeometry\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection}\n   * @protected\n   */\n  wrapFillAndOutlineGeometries(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle) {\n    const fillColor = this.extractColorFromOlStyle(olStyle, false);\n    const outlineColor = this.extractColorFromOlStyle(olStyle, true);\n\n    const primitives = new Cesium.PrimitiveCollection();\n    if (olStyle.getFill()) {\n      const p1 = this.createColoredPrimitive(layer, feature, olGeometry,\n          fillGeometry, fillColor);\n      console.assert(!!p1);\n      primitives.add(p1);\n    }\n\n    if (olStyle.getStroke() && outlineGeometry) {\n      const width = this.extractLineWidthFromOlStyle(olStyle);\n      const p2 = this.createColoredPrimitive(layer, feature, olGeometry,\n          outlineGeometry, outlineColor, width);\n      if (p2) {\n        // Some outline geometries are not supported by Cesium in clamp to ground\n        // mode. These primitives are skipped.\n        primitives.add(p2);\n      }\n    }\n\n    return primitives;\n  }\n\n  // Geometry converters\n  /**\n   * Create a Cesium primitive if style has a text component.\n   * Eventually return a PrimitiveCollection including current primitive.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Style} style\n   * @param {!Cesium.Primitive} primitive current primitive\n   * @return {!Cesium.PrimitiveCollection}\n   * @protected\n   */\n  addTextStyle(layer, feature, geometry, style, primitive) {\n    let primitives;\n    if (!(primitive instanceof Cesium.PrimitiveCollection)) {\n      primitives = new Cesium.PrimitiveCollection();\n      primitives.add(primitive);\n    } else {\n      primitives = primitive;\n    }\n\n    if (!style.getText()) {\n      return primitives;\n    }\n\n    const text = /** @type {!ol.style.Text} */ (style.getText());\n    const label = this.olGeometry4326TextPartToCesium(layer, feature, geometry,\n        text);\n    if (label) {\n      primitives.add(label);\n    }\n    return primitives;\n  }\n\n  /**\n   * Add a billboard to a Cesium.BillboardCollection.\n   * Overriding this wrapper allows manipulating the billboard options.\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {!Cesium.optionsBillboardCollectionAdd} bbOptions\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Style} style\n   * @return {!Cesium.Billboard} newly created billboard\n   * @api\n   */\n  csAddBillboard(billboards, bbOptions, layer, feature, geometry, style) {\n    const bb = billboards.add(bbOptions);\n    this.setReferenceForPicking(layer, feature, bb);\n    return bb;\n  }\n\n  /**\n   * Convert an OpenLayers circle geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Circle} olGeometry OpenLayers circle geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olCircleGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'Circle');\n\n    // ol.Coordinate\n    let center = olGeometry.getCenter();\n    const height = center.length == 3 ? center[2] : 0.0;\n    let point = center.slice();\n    point[0] += olGeometry.getRadius();\n\n    // Cesium\n    center = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n    point = olcsCore.ol4326CoordinateToCesiumCartesian(point);\n\n    // Accurate computation of straight distance\n    const radius = Cesium.Cartesian3.distance(center, point);\n\n    const fillGeometry = new Cesium.CircleGeometry({\n      // always update Cesium externs before adding a property\n      center,\n      radius,\n      height\n    });\n\n    let outlinePrimitive, outlineGeometry;\n    if (this.getHeightReference(layer, feature, olGeometry) === Cesium.HeightReference.CLAMP_TO_GROUND) {\n      const width = this.extractLineWidthFromOlStyle(olStyle);\n      if (width) {\n        const circlePolygon = olCreateCircularPolygon(olGeometry.getCenter(), radius);\n        const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(circlePolygon.getLinearRing(0).getCoordinates());\n        if (!Cesium.GroundPolylinePrimitive.isSupported(this.scene)) {\n          const color = this.extractColorFromOlStyle(olStyle, true);\n          outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n        } else {\n          outlinePrimitive = new Cesium.GroundPolylinePrimitive({\n            geometryInstances: new Cesium.GeometryInstance({\n              geometry: new Cesium.GroundPolylineGeometry({positions, width}),\n            }),\n            appearance: new Cesium.PolylineMaterialAppearance({\n              material: this.olStyleToCesium(feature, olStyle, true),\n            }),\n            classificationType: Cesium.ClassificationType.TERRAIN,\n          });\n          outlinePrimitive.readyPromise.then(() => {\n            this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n          });\n        }\n      }\n    } else {\n      outlineGeometry = new Cesium.CircleOutlineGeometry({\n        // always update Cesium externs before adding a property\n        center,\n        radius,\n        extrudedHeight: height,\n        height\n      });\n    }\n\n    const primitives = this.wrapFillAndOutlineGeometries(\n        layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n    if (outlinePrimitive) {\n      primitives.add(outlinePrimitive);\n    }\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!number} width The width of the line.\n   * @param {!Cesium.Color} color The color of the line.\n   * @param {!Array<Cesium.Cartesian3>|Array<Array<Cesium.Cartesian3>>} positions The vertices of the line(s).\n   * @return {!Cesium.GroundPrimitive} primitive\n   */\n  createStackedGroundCorridors(layer, feature, width, color, positions) {\n    // Convert positions to an Array if it isn't\n    if (!Array.isArray(positions[0])) {\n      positions = [positions];\n    }\n    width = Math.max(3, width); // A <3px width is too small for ground primitives\n    const geometryInstances = [];\n    let previousDistance = 0;\n    // A stack of ground lines with increasing width (in meters) are created.\n    // Only one of these lines is displayed at any time giving a feeling of continuity.\n    // The values for the distance and width factor are more or less arbitrary.\n    // Applications can override this logics by subclassing the FeatureConverter class.\n    for (const distance of [1000, 4000, 16000, 64000, 254000, 1000000, 10000000]) {\n      width *= 2.14;\n      const geometryOptions = {\n        // always update Cesium externs before adding a property\n        width,\n        vertexFormat: Cesium.VertexFormat.POSITION_ONLY\n      };\n      for (const linePositions of positions) {\n        geometryOptions.positions = linePositions;\n        geometryInstances.push(new Cesium.GeometryInstance({\n          geometry: new Cesium.CorridorGeometry(geometryOptions),\n          attributes: {\n            color: Cesium.ColorGeometryInstanceAttribute.fromColor(color),\n            distanceDisplayCondition: new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(previousDistance, distance - 1)\n          }\n        }));\n      }\n      previousDistance = distance;\n    }\n    return new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances\n    });\n  }\n\n  /**\n   * Convert an OpenLayers line string geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.LineString} olGeometry OpenLayers line string geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olLineStringGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'LineString');\n\n    const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olGeometry.getCoordinates());\n    const width = this.extractLineWidthFromOlStyle(olStyle);\n\n    let outlinePrimitive;\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND && !Cesium.GroundPolylinePrimitive.isSupported(this.scene)) {\n      const color = this.extractColorFromOlStyle(olStyle, true);\n      outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n    } else {\n      const appearance = new Cesium.PolylineMaterialAppearance({\n        // always update Cesium externs before adding a property\n        material: this.olStyleToCesium(feature, olStyle, true)\n      });\n      const geometryOptions = {\n        // always update Cesium externs before adding a property\n        positions,\n        width,\n      };\n      const primitiveOptions = {\n        // always update Cesium externs before adding a property\n        appearance\n      };\n      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n        const geometry = new Cesium.GroundPolylineGeometry(geometryOptions);\n        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({\n          geometry\n        }),\n        outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);\n        outlinePrimitive.readyPromise.then(() => {\n          this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n        });\n      } else {\n        geometryOptions.vertexFormat = appearance.vertexFormat;\n        const geometry = new Cesium.PolylineGeometry(geometryOptions);\n        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({\n          geometry\n        }),\n        outlinePrimitive = new Cesium.Primitive(primitiveOptions);\n      }\n    }\n\n    this.setReferenceForPicking(layer, feature, outlinePrimitive);\n\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, outlinePrimitive);\n  }\n\n  /**\n   * Convert an OpenLayers polygon geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Polygon} olGeometry OpenLayers polygon geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olPolygonGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'Polygon');\n\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    let fillGeometry, outlineGeometry, outlinePrimitive;\n    if ((olGeometry.getCoordinates()[0].length == 5) &&\n        (feature.getGeometry().get('olcs.polygon_kind') === 'rectangle')) {\n      // Create a rectangle according to the longitude and latitude curves\n      const coordinates = olGeometry.getCoordinates()[0];\n      // Extract the West, South, East, North coordinates\n      const extent = boundingExtent(coordinates);\n      const rectangle = Cesium.Rectangle.fromDegrees(extent[0], extent[1],\n          extent[2], extent[3]);\n\n      // Extract the average height of the vertices\n      let maxHeight = 0.0;\n      if (coordinates[0].length == 3) {\n        for (let c = 0; c < coordinates.length; c++) {\n          maxHeight = Math.max(maxHeight, coordinates[c][2]);\n        }\n      }\n\n      // Render the cartographic rectangle\n      fillGeometry = new Cesium.RectangleGeometry({\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        rectangle,\n        height: maxHeight\n      });\n\n      outlineGeometry = new Cesium.RectangleOutlineGeometry({\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        rectangle,\n        height: maxHeight\n      });\n    } else {\n      const rings = olGeometry.getLinearRings();\n      // always update Cesium externs before adding a property\n      const hierarchy = {};\n      const polygonHierarchy = hierarchy;\n      console.assert(rings.length > 0);\n\n      for (let i = 0; i < rings.length; ++i) {\n        const olPos = rings[i].getCoordinates();\n        const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olPos);\n        console.assert(positions && positions.length > 0);\n        if (i == 0) {\n          hierarchy.positions = positions;\n        } else {\n          if (!hierarchy.holes) {\n            hierarchy.holes = [];\n          }\n          hierarchy.holes.push({\n            positions\n          });\n        }\n      }\n\n      fillGeometry = new Cesium.PolygonGeometry({\n        // always update Cesium externs before adding a property\n        polygonHierarchy,\n        perPositionHeight: true\n      });\n\n      // Since Cesium doesn't yet support Polygon outlines on terrain yet (coming soon...?)\n      // we don't create an outline geometry if clamped, but instead do the polyline method\n      // for each ring. Most of this code should be removeable when Cesium adds\n      // support for Polygon outlines on terrain.\n      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n        const width = this.extractLineWidthFromOlStyle(olStyle);\n        if (width > 0) {\n          const positions = [hierarchy.positions];\n          if (hierarchy.holes) {\n            for (let i = 0; i < hierarchy.holes.length; ++i) {\n              positions.push(hierarchy.holes[i].positions);\n            }\n          }\n          if (!Cesium.GroundPolylinePrimitive.isSupported(this.scene)) {\n            const color = this.extractColorFromOlStyle(olStyle, true);\n            outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n          } else {\n            const appearance = new Cesium.PolylineMaterialAppearance({\n              // always update Cesium externs before adding a property\n              material: this.olStyleToCesium(feature, olStyle, true)\n            });\n            const geometryInstances = [];\n            for (const linePositions of positions) {\n              const polylineGeometry = new Cesium.GroundPolylineGeometry({positions: linePositions, width});\n              geometryInstances.push(new Cesium.GeometryInstance({\n                geometry: polylineGeometry\n              }));\n            }\n            const primitiveOptions = {\n              // always update Cesium externs before adding a property\n              appearance,\n              geometryInstances\n            };\n            outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);\n            outlinePrimitive.readyPromise.then(() => {\n              this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n            });\n          }\n        }\n      } else {\n        // Actually do the normal polygon thing. This should end the removable\n        // section of code described above.\n        outlineGeometry = new Cesium.PolygonOutlineGeometry({\n          // always update Cesium externs before adding a property\n          polygonHierarchy: hierarchy,\n          perPositionHeight: true\n        });\n      }\n    }\n\n    const primitives = this.wrapFillAndOutlineGeometries(\n        layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n    if (outlinePrimitive) {\n      primitives.add(outlinePrimitive);\n    }\n\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @return {!Cesium.HeightReference}\n   * @api\n   */\n  getHeightReference(layer, feature, geometry) {\n\n    // Read from the geometry\n    let altitudeMode = geometry.get('altitudeMode');\n\n    // Or from the feature\n    if (altitudeMode === undefined) {\n      altitudeMode = feature.get('altitudeMode');\n    }\n\n    // Or from the layer\n    if (altitudeMode === undefined) {\n      altitudeMode = layer.get('altitudeMode');\n    }\n\n    let heightReference = Cesium.HeightReference.NONE;\n    if (altitudeMode === 'clampToGround') {\n      heightReference = Cesium.HeightReference.CLAMP_TO_GROUND;\n    } else if (altitudeMode === 'relativeToGround') {\n      heightReference = Cesium.HeightReference.RELATIVE_TO_GROUND;\n    }\n\n    return heightReference;\n  }\n\n  /**\n   * Convert a point geometry to a Cesium BillboardCollection.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} style\n   * @param {!ol.style.Image} imageStyle\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when the new billboard is added.\n   * @api\n   */\n  createBillboardFromImage(\n      layer,\n      feature,\n      olGeometry,\n      projection,\n      style,\n      imageStyle,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n\n    if (imageStyle instanceof olStyleIcon) {\n      // make sure the image is scheduled for load\n      imageStyle.load();\n    }\n\n    const image = imageStyle.getImage(1); // get normal density\n    const isImageLoaded = function(image) {\n      return image.src != '' &&\n          image.naturalHeight != 0 &&\n          image.naturalWidth != 0 &&\n          image.complete;\n    };\n    const reallyCreateBillboard = (function() {\n      if (!image) {\n        return;\n      }\n      if (!(image instanceof HTMLCanvasElement ||\n          image instanceof Image ||\n          image instanceof HTMLImageElement)) {\n        return;\n      }\n      const center = olGeometry.getCoordinates();\n      const position = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n      let color;\n      const opacity = imageStyle.getOpacity();\n      if (opacity !== undefined) {\n        color = new Cesium.Color(1.0, 1.0, 1.0, opacity);\n      }\n\n      const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n      const bbOptions = /** @type {Cesium.optionsBillboardCollectionAdd} */ ({\n        // always update Cesium externs before adding a property\n        image,\n        color,\n        scale: imageStyle.getScale(),\n        heightReference,\n        verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n        position\n      });\n      const bb = this.csAddBillboard(billboards, bbOptions, layer, feature, olGeometry, style);\n      if (opt_newBillboardCallback) {\n        opt_newBillboardCallback(bb);\n      }\n    }).bind(this);\n\n    if (image instanceof Image && !isImageLoaded(image)) {\n      // Cesium requires the image to be loaded\n      let cancelled = false;\n      const source = layer.getSource();\n      const canceller = function() {\n        cancelled = true;\n      };\n      source.on(['removefeature', 'clear'],\n          this.boundOnRemoveOrClearFeatureListener_);\n      let cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n      if (!cancellers) {\n        cancellers = olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n\n      const fuid = getUid(feature);\n      if (cancellers[fuid]) {\n        // When the feature change quickly, a canceller may still be present so\n        // we cancel it here to prevent creation of a billboard.\n        cancellers[fuid]();\n      }\n      cancellers[fuid] = canceller;\n\n      const listener = function() {\n        image.removeEventListener('load', listener);\n        if (!billboards.isDestroyed() && !cancelled) {\n          // Create billboard if the feature is still displayed on the map.\n          reallyCreateBillboard();\n        }\n      };\n\n      image.addEventListener('load', listener);\n    } else {\n      reallyCreateBillboard();\n    }\n  }\n\n  /**\n   * Convert a point geometry to a Cesium BillboardCollection.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} style\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n   * the new billboard is added.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olPointGeometryToCesium(\n      layer,\n      feature,\n      olGeometry,\n      projection,\n      style,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n    console.assert(olGeometry.getType() == 'Point');\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n\n    let modelPrimitive = null;\n    const imageStyle = style.getImage();\n    if (imageStyle) {\n      const olcsModelFunction = /** @type {function():olcsx.ModelStyle} */ (olGeometry.get('olcs_model') || feature.get('olcs_model'));\n      if (olcsModelFunction) {\n        const olcsModel = olcsModelFunction();\n        const options = /** @type {Cesium.ModelFromGltfOptions} */ (Object.assign({}, {scene: this.scene}, olcsModel.cesiumOptions));\n        const model = Cesium.Model.fromGltf(options);\n        modelPrimitive = new Cesium.PrimitiveCollection();\n        modelPrimitive.add(model);\n        if (olcsModel.debugModelMatrix) {\n          modelPrimitive.add(new Cesium.DebugModelMatrixPrimitive({\n            modelMatrix: olcsModel.debugModelMatrix\n          }));\n        }\n      } else {\n        this.createBillboardFromImage(layer, feature, olGeometry, projection, style, imageStyle, billboards, opt_newBillboardCallback);\n      }\n    }\n\n    if (style.getText()) {\n      return this.addTextStyle(layer, feature, olGeometry, style, modelPrimitive || new Cesium.Primitive());\n    } else {\n      return modelPrimitive;\n    }\n  }\n\n  /**\n   * Convert an OpenLayers multi-something geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry OpenLayers geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n   * the new billboard is added.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olMultiGeometryToCesium(\n      layer,\n      feature,\n      geometry,\n      projection,\n      olStyle,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n    // Do not reproject to 4326 now because it will be done later.\n\n    // FIXME: would be better to combine all child geometries in one primitive\n    // instead we create n primitives for simplicity.\n    const accumulate = function(geometries, functor) {\n      const primitives = new Cesium.PrimitiveCollection();\n      geometries.forEach((geometry) => {\n        primitives.add(functor(layer, feature, geometry, projection, olStyle));\n      });\n      return primitives;\n    };\n\n    let subgeos;\n    switch (geometry.getType()) {\n      case 'MultiPoint':\n        geometry = /** @type {!ol.geom.MultiPoint} */ (geometry);\n        subgeos = geometry.getPoints();\n        if (olStyle.getText()) {\n          const primitives = new Cesium.PrimitiveCollection();\n          subgeos.forEach((geometry) => {\n            console.assert(geometry);\n            const result = this.olPointGeometryToCesium(layer, feature, geometry,\n                projection, olStyle, billboards, opt_newBillboardCallback);\n            if (result) {\n              primitives.add(result);\n            }\n          });\n          return primitives;\n        } else {\n          subgeos.forEach((geometry) => {\n            console.assert(geometry);\n            this.olPointGeometryToCesium(layer, feature, geometry, projection,\n                olStyle, billboards, opt_newBillboardCallback);\n          });\n          return null;\n        }\n      case 'MultiLineString':\n        geometry = /** @type {!ol.geom.MultiLineString} */ (geometry);\n        subgeos = geometry.getLineStrings();\n        return accumulate(subgeos, this.olLineStringGeometryToCesium.bind(this));\n      case 'MultiPolygon':\n        geometry = /** @type {!ol.geom.MultiPolygon} */ (geometry);\n        subgeos = geometry.getPolygons();\n        return accumulate(subgeos, this.olPolygonGeometryToCesium.bind(this));\n      default:\n        console.assert(false, `Unhandled multi geometry type${geometry.getType()}`);\n    }\n  }\n\n  /**\n   * Convert an OpenLayers text style to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Text} style\n   * @return {Cesium.LabelCollection} Cesium primitive\n   * @api\n   */\n  olGeometry4326TextPartToCesium(layer, feature, geometry, style) {\n    const text = style.getText();\n    if (!text) {\n      return null;\n    }\n\n    const labels = new Cesium.LabelCollection({scene: this.scene});\n    // TODO: export and use the text draw position from OpenLayers .\n    // See src/ol/render/vector.js\n    const extentCenter = getCenter(geometry.getExtent());\n    if (geometry instanceof olGeomSimpleGeometry) {\n      const first = geometry.getFirstCoordinate();\n      extentCenter[2] = first.length == 3 ? first[2] : 0.0;\n    }\n    const options = /** @type {Cesium.optionsLabelCollection} */ ({});\n\n    options.position = olcsCore.ol4326CoordinateToCesiumCartesian(extentCenter);\n\n    options.text = text;\n\n    options.heightReference = this.getHeightReference(layer, feature, geometry);\n\n    const offsetX = style.getOffsetX();\n    const offsetY = style.getOffsetY();\n    if (offsetX != 0 && offsetY != 0) {\n      const offset = new Cesium.Cartesian2(offsetX, offsetY);\n      options.pixelOffset = offset;\n    }\n\n    options.font = style.getFont() || '10px sans-serif'; // OpenLayers default\n\n    let labelStyle = undefined;\n    if (style.getFill()) {\n      options.fillColor = this.extractColorFromOlStyle(style, false);\n      labelStyle = Cesium.LabelStyle.FILL;\n    }\n    if (style.getStroke()) {\n      options.outlineWidth = this.extractLineWidthFromOlStyle(style);\n      options.outlineColor = this.extractColorFromOlStyle(style, true);\n      labelStyle = Cesium.LabelStyle.OUTLINE;\n    }\n    if (style.getFill() && style.getStroke()) {\n      labelStyle = Cesium.LabelStyle.FILL_AND_OUTLINE;\n    }\n    options.style = labelStyle;\n\n    let horizontalOrigin;\n    switch (style.getTextAlign()) {\n      case 'left':\n        horizontalOrigin = Cesium.HorizontalOrigin.LEFT;\n        break;\n      case 'right':\n        horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n        break;\n      case 'center':\n      default:\n        horizontalOrigin = Cesium.HorizontalOrigin.CENTER;\n    }\n    options.horizontalOrigin = horizontalOrigin;\n\n    if (style.getTextBaseline()) {\n      let verticalOrigin;\n      switch (style.getTextBaseline()) {\n        case 'top':\n          verticalOrigin = Cesium.VerticalOrigin.TOP;\n          break;\n        case 'middle':\n          verticalOrigin = Cesium.VerticalOrigin.CENTER;\n          break;\n        case 'bottom':\n          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n          break;\n        case 'alphabetic':\n          verticalOrigin = Cesium.VerticalOrigin.TOP;\n          break;\n        case 'hanging':\n          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n          break;\n        default:\n          console.assert(false, `unhandled baseline ${style.getTextBaseline()}`);\n      }\n      options.verticalOrigin = verticalOrigin;\n    }\n\n\n    const l = labels.add(options);\n    this.setReferenceForPicking(layer, feature, l);\n    return labels;\n  }\n\n  /**\n   * Convert an OpenLayers style to a Cesium Material.\n   * @param {ol.Feature} feature OpenLayers feature..\n   * @param {!ol.style.Style} style\n   * @param {boolean} outline\n   * @return {Cesium.Material}\n   * @api\n   */\n  olStyleToCesium(feature, style, outline) {\n    const fill = style.getFill();\n    const stroke = style.getStroke();\n    if ((outline && !stroke) || (!outline && !fill)) {\n      return null; // FIXME use a default style? Developer error?\n    }\n\n    let color = outline ? stroke.getColor() : fill.getColor();\n    color = olcsCore.convertColorToCesium(color);\n\n    if (outline && stroke.getLineDash()) {\n      return Cesium.Material.fromType('Stripe', {\n        // always update Cesium externs before adding a property\n        horizontal: false,\n        repeat: 500, // TODO how to calculate this?\n        evenColor: color,\n        oddColor: new Cesium.Color(0, 0, 0, 0) // transparent\n      });\n    } else {\n      return Cesium.Material.fromType('Color', {\n        // always update Cesium externs before adding a property\n        color\n      });\n    }\n\n  }\n\n  /**\n   * Compute OpenLayers plain style.\n   * Evaluates style function, blend arrays, get default style.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature\n   * @param {ol.StyleFunction|undefined} fallbackStyleFunction\n   * @param {number} resolution\n   * @return {Array.<!ol.style.Style>} null if no style is available\n   * @api\n   */\n  computePlainStyle(layer, feature, fallbackStyleFunction, resolution) {\n    /**\n     * @type {ol.FeatureStyleFunction|undefined}\n     */\n    const featureStyleFunction = feature.getStyleFunction();\n\n    /**\n     * @type {ol.style.Style|Array.<ol.style.Style>}\n     */\n    let style = null;\n\n    if (featureStyleFunction) {\n      style = featureStyleFunction(feature, resolution);\n    }\n\n    if (!style && fallbackStyleFunction) {\n      style = fallbackStyleFunction(feature, resolution);\n    }\n\n    if (!style) {\n      // The feature must not be displayed\n      return null;\n    }\n\n    // FIXME combine materials as in cesium-materials-pack?\n    // then this function must return a custom material\n    // More simply, could blend the colors like described in\n    // http://en.wikipedia.org/wiki/Alpha_compositing\n    return Array.isArray(style) ? style : [style];\n  }\n\n  /**\n   * @protected\n   * @param {!ol.Feature} feature\n   * @param {!ol.style.Style} style\n   * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n   * @return {ol.geom.Geometry|undefined}\n   */\n  getGeometryFromFeature(feature, style, opt_geom) {\n    if (opt_geom) {\n      return opt_geom;\n    }\n\n    const geom3d = /** @type {!ol.geom.Geometry} */(feature.get('olcs.3d_geometry'));\n    if (geom3d && geom3d instanceof olGeomGeometry) {\n      return geom3d;\n    }\n\n    if (style) {\n      const geomFuncRes = style.getGeometryFunction()(feature);\n      if (geomFuncRes instanceof olGeomGeometry) {\n        return geomFuncRes;\n      }\n    }\n\n    return feature.getGeometry();\n  }\n\n  /**\n   * Convert one OpenLayers feature up to a collection of Cesium primitives.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.style.Style} style\n   * @param {!olcsx.core.OlFeatureToCesiumContext} context\n   * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olFeatureToCesium(layer, feature, style, context, opt_geom) {\n    let geom = this.getGeometryFromFeature(feature, style, opt_geom);\n\n    if (!geom) {\n      // OpenLayers features may not have a geometry\n      // See http://geojson.org/geojson-spec.html#feature-objects\n      return null;\n    }\n\n    const proj = context.projection;\n    const newBillboardAddedCallback = function(bb) {\n      const featureBb = context.featureToCesiumMap[getUid(feature)];\n      if (featureBb instanceof Array) {\n        featureBb.push(bb);\n      }\n      else {\n        context.featureToCesiumMap[getUid(feature)] = [bb];\n      }\n    };\n\n    switch (geom.getType()) {\n      case 'GeometryCollection':\n        const primitives = new Cesium.PrimitiveCollection();\n        const collection = /** @type {!ol.geom.GeometryCollection} */ (geom);\n        // TODO: use getGeometriesArray() instead\n        collection.getGeometries().forEach((geom) => {\n          if (geom) {\n            const prims = this.olFeatureToCesium(layer, feature, style, context,\n                geom);\n            if (prims) {\n              primitives.add(prims);\n            }\n          }\n        });\n        return primitives;\n      case 'Point':\n        geom = /** @type {!ol.geom.Point} */ (geom);\n        const bbs = context.billboards;\n        const result = this.olPointGeometryToCesium(layer, feature, geom, proj,\n            style, bbs, newBillboardAddedCallback);\n        if (!result) {\n          // no wrapping primitive\n          return null;\n        } else {\n          return result;\n        }\n      case 'Circle':\n        geom = /** @type {!ol.geom.Circle} */ (geom);\n        return this.olCircleGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'LineString':\n        geom = /** @type {!ol.geom.LineString} */ (geom);\n        return this.olLineStringGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'Polygon':\n        geom = /** @type {!ol.geom.Polygon} */ (geom);\n        return this.olPolygonGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'MultiPoint':\n      case 'MultiLineString':\n      case 'MultiPolygon':\n        const result2 = this.olMultiGeometryToCesium(layer, feature, geom, proj,\n            style, context.billboards, newBillboardAddedCallback);\n        if (!result2) {\n          // no wrapping primitive\n          return null;\n        } else {\n          return result2;\n        }\n      case 'LinearRing':\n        throw new Error('LinearRing should only be part of polygon.');\n      default:\n        throw new Error(`Ol geom type not handled : ${geom.getType()}`);\n    }\n  }\n\n  /**\n   * Convert an OpenLayers vector layer to Cesium primitive collection.\n   * For each feature, the associated primitive will be stored in\n   * `featurePrimitiveMap`.\n   * @param {!(ol.layer.Vector|ol.layer.Image)} olLayer\n   * @param {!ol.View} olView\n   * @param {!Object.<number, !Cesium.Primitive>} featurePrimitiveMap\n   * @return {!olcs.core.VectorLayerCounterpart}\n   * @api\n   */\n  olVectorLayerToCesium(olLayer, olView, featurePrimitiveMap) {\n    const proj = olView.getProjection();\n    const resolution = olView.getResolution();\n\n    if (resolution === undefined || !proj) {\n      console.assert(false, 'View not ready');\n      // an assertion is not enough for closure to assume resolution and proj\n      // are defined\n      throw new Error('View not ready');\n    }\n\n    let source = olLayer.getSource();\n    if (source instanceof olSourceCluster) {\n      source = source.getSource();\n    }\n\n    console.assert(source instanceof olSourceVector);\n    const features = source.getFeatures();\n    const counterpart = new olcsCoreVectorLayerCounterpart(proj, this.scene);\n    const context = counterpart.context;\n    for (let i = 0; i < features.length; ++i) {\n      const feature = features[i];\n      if (!feature) {\n        continue;\n      }\n      /**\n       * @type {ol.StyleFunction|undefined}\n       */\n      const layerStyle = olLayer.getStyleFunction();\n      const styles = this.computePlainStyle(olLayer, feature, layerStyle,\n          resolution);\n      if (!styles || !styles.length) {\n        // only 'render' features with a style\n        continue;\n      }\n\n      /**\n       * @type {Cesium.Primitive|null}\n       */\n      let primitives = null;\n      for (let i = 0; i < styles.length; i++) {\n        const prims = this.olFeatureToCesium(olLayer, feature, styles[i], context);\n        if (prims) {\n          if (!primitives) {\n            primitives = prims;\n          } else if (prims) {\n            let i = 0, prim;\n            while ((prim = prims.get(i))) {\n              primitives.add(prim);\n              i++;\n            }\n          }\n        }\n      }\n      if (!primitives) {\n        continue;\n      }\n      featurePrimitiveMap[getUid(feature)] = primitives;\n      counterpart.getRootPrimitive().add(primitives);\n    }\n\n    return counterpart;\n  }\n\n  /**\n   * Convert an OpenLayers feature to Cesium primitive collection.\n   * @param {!(ol.layer.Vector|ol.layer.Image)} layer\n   * @param {!ol.View} view\n   * @param {!ol.Feature} feature\n   * @param {!olcsx.core.OlFeatureToCesiumContext} context\n   * @return {Cesium.Primitive}\n   * @api\n   */\n  convert(layer, view, feature, context) {\n    const proj = view.getProjection();\n    const resolution = view.getResolution();\n\n    if (resolution == undefined || !proj) {\n      return null;\n    }\n\n    /**\n     * @type {ol.StyleFunction|undefined}\n     */\n    const layerStyle = layer.getStyleFunction();\n\n    const styles = this.computePlainStyle(layer, feature, layerStyle, resolution);\n\n    if (!styles.length) {\n      // only 'render' features with a style\n      return null;\n    }\n\n    context.projection = proj;\n\n    /**\n     * @type {Cesium.Primitive|null}\n     */\n    let primitives = null;\n    for (let i = 0; i < styles.length; i++) {\n      const prims = this.olFeatureToCesium(layer, feature, styles[i], context);\n      if (!primitives) {\n        primitives = prims;\n      } else if (prims) {\n        let i = 0, prim;\n        while ((prim = prims.get(i))) {\n          primitives.add(prim);\n          i++;\n        }\n      }\n    }\n    return primitives;\n  }\n}\n\n\nexport default FeatureConverter;\n","/**\n * @module olcs.VectorSynchronizer\n */\nimport olSourceVector from 'ol/source/Vector.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceCluster from 'ol/source/Cluster.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport {olcsListen, getUid} from './util.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsFeatureConverter from './FeatureConverter.js';\n\nclass VectorSynchronizer extends olcsAbstractSynchronizer {\n  /**\n   * Unidirectionally synchronize OpenLayers vector layers to Cesium.\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @param {olcs.FeatureConverter=} opt_converter\n   * @extends {olcs.AbstractSynchronizer.<olcs.core.VectorLayerCounterpart>}\n   * @api\n   */\n  constructor(map, scene, opt_converter) {\n    super(map, scene);\n\n    /**\n     * @protected\n     */\n    this.converter = opt_converter || new olcsFeatureConverter(scene);\n\n    /**\n     * @private\n     */\n    this.csAllPrimitives_ = new Cesium.PrimitiveCollection();\n    scene.primitives.add(this.csAllPrimitives_);\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addCesiumObject(counterpart) {\n    console.assert(counterpart);\n    counterpart.getRootPrimitive()['counterpart'] = counterpart;\n    this.csAllPrimitives_.add(counterpart.getRootPrimitive());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  destroyCesiumObject(object) {\n    object.getRootPrimitive().destroy();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeSingleCesiumObject(object, destroy) {\n    object.destroy();\n    this.csAllPrimitives_.destroyPrimitives = destroy;\n    this.csAllPrimitives_.remove(object.getRootPrimitive());\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeAllCesiumObjects(destroy) {\n    this.csAllPrimitives_.destroyPrimitives = destroy;\n    if (destroy) {\n      for (let i = 0; i < this.csAllPrimitives_.length; ++i) {\n        this.csAllPrimitives_.get(i)['counterpart'].destroy();\n      }\n    }\n    this.csAllPrimitives_.removeAll();\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * Synchronizes the layer visibility properties\n   * to the given Cesium Primitive.\n   * @param {olcsx.LayerWithParents} olLayerWithParents\n   * @param {!Cesium.Primitive} csPrimitive\n   */\n  updateLayerVisibility(olLayerWithParents, csPrimitive) {\n    let visible = true;\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n      const layerVisible = olLayer.getVisible();\n      if (layerVisible !== undefined) {\n        visible &= layerVisible;\n      } else {\n        visible = false;\n      }\n    });\n    csPrimitive.show = visible;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {\n    const olLayer = olLayerWithParents.layer;\n    if (!(olLayer instanceof olLayerVector)) {\n      return null;\n    }\n    console.assert(olLayer instanceof olLayerLayer);\n\n    let source = olLayer.getSource();\n    if (source instanceof olSourceCluster) {\n      source = source.getSource();\n    }\n\n    if (!source) {\n      return null;\n    }\n\n    console.assert(source instanceof olSourceVector);\n    console.assert(this.view);\n\n    const view = this.view;\n    const featurePrimitiveMap = {};\n    const counterpart = this.converter.olVectorLayerToCesium(olLayer, view,\n        featurePrimitiveMap);\n    const csPrimitives = counterpart.getRootPrimitive();\n    const olListenKeys = counterpart.olListenKeys;\n\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n      olListenKeys.push(olcsListen(olLayerItem, 'change:visible', () => {\n        this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n      }));\n    });\n    this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n\n    const onAddFeature = (function(feature) {\n      console.assert(\n          (olLayer instanceof olLayerVector) ||\n          (olLayer instanceof olLayerImage)\n      );\n      const context = counterpart.context;\n      const prim = this.converter.convert(olLayer, view, feature, context);\n      if (prim) {\n        featurePrimitiveMap[getUid(feature)] = prim;\n        csPrimitives.add(prim);\n      }\n    }).bind(this);\n\n    const onRemoveFeature = (function(feature) {\n      const id = getUid(feature);\n      const context = counterpart.context;\n      const bbs = context.featureToCesiumMap[id];\n      if (bbs) {\n        delete context.featureToCesiumMap[id];\n        bbs.forEach((bb) => {\n          if (bb instanceof Cesium.Billboard) {\n            context.billboards.remove(bb);\n          }\n        });\n      }\n      const csPrimitive = featurePrimitiveMap[id];\n      delete featurePrimitiveMap[id];\n      if (csPrimitive) {\n        csPrimitives.remove(csPrimitive);\n      }\n    }).bind(this);\n\n    olListenKeys.push(olcsListen(source, 'addfeature', (e) => {\n      console.assert(e.feature);\n      onAddFeature(e.feature);\n    }, this));\n\n    olListenKeys.push(olcsListen(source, 'removefeature', (e) => {\n      console.assert(e.feature);\n      onRemoveFeature(e.feature);\n    }, this));\n\n    olListenKeys.push(olcsListen(source, 'changefeature', (e) => {\n      const feature = e.feature;\n      console.assert(feature);\n      onRemoveFeature(feature);\n      onAddFeature(feature);\n    }, this));\n\n    return counterpart ? [counterpart] : null;\n  }\n}\n\nexport default VectorSynchronizer;\n","/**\n * @module olcs.SynchronizedOverlay\n */\nimport olOverlay from 'ol/Overlay.js';\nimport {transform} from 'ol/proj.js';\nimport {removeNode, removeChildren} from './util.js';\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\n\nclass SynchronizedOverlay extends olOverlay {\n  /**\n   * @param {olcsx.SynchronizedOverlayOptions} options SynchronizedOverlay Options.\n   * @api\n   */\n  constructor(options) {\n    const parent = options.parent;\n    super(parent.getOptions());\n\n    /**\n     * @private\n     * @type {?Function}\n     */\n    this.scenePostRenderListenerRemover_ = null;\n\n    /**\n     * @private\n     * @type {!Cesium.Scene}\n     */\n    this.scene_ = options.scene;\n\n    /**\n     * @private\n     * @type {!olcs.OverlaySynchronizer}\n     */\n    this.synchronizer_ = options.synchronizer;\n\n    /**\n     * @private\n     * @type {!ol.Overlay}\n     */\n    this.parent_ = parent;\n\n    /**\n     * @private\n     * @type {ol.Coordinate|undefined}\n     */\n    this.positionWGS84_ = undefined;\n\n    /**\n     * @private\n     * @type {MutationObserver}\n     */\n    this.observer_ = new MutationObserver(this.handleElementChanged.bind(this));\n\n    /**\n     * @private\n     * @type {Array.<MutationObserver>}\n     */\n    this.attributeObserver_ = [];\n\n    /**\n     * @private\n     * @type {Array<ol.EventsKey>}\n     */\n    this.listenerKeys_ = [];\n    // synchronize our Overlay with the parent Overlay\n    const setPropertyFromEvent = event => this.setPropertyFromEvent_(event);\n    this.listenerKeys_.push(this.parent_.on('change:position', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:element', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:offset', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:position', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:positioning', setPropertyFromEvent));\n\n    this.setProperties(this.parent_.getProperties());\n\n    this.handleMapChanged();\n    this.handleElementChanged();\n  }\n\n  /**\n   * @param {Node} target\n   * @private\n   */\n  observeTarget_(target) {\n    if (!this.observer_) {\n      // not ready, skip the event (this occurs on construction)\n      return;\n    }\n    this.observer_.disconnect();\n    this.observer_.observe(target, {\n      attributes: false,\n      childList: true,\n      characterData: true,\n      subtree: true\n    });\n    this.attributeObserver_.forEach((observer) => {\n      observer.disconnect();\n    });\n    this.attributeObserver_.length = 0;\n    for (let i = 0; i < target.childNodes.length; i++) {\n      const node = target.childNodes[i];\n      if (node.nodeType === 1) {\n        const observer = new MutationObserver(this.handleElementChanged.bind(this));\n        observer.observe(node, {\n          attributes: true,\n          subtree: true\n        });\n        this.attributeObserver_.push(observer);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {ol.Object.Event} event\n   * @private\n   */\n  setPropertyFromEvent_(event) {\n    if (event.target && event.key) {\n      this.set(event.key, event.target.get(event.key));\n    }\n  }\n\n  /**\n   * Get the scene associated with this overlay.\n   * @see ol.Overlay.prototype.getMap\n   * @return {!Cesium.Scene} The scene that the overlay is part of.\n   * @api\n   */\n  getScene() {\n    return this.scene_;\n  }\n\n  /**\n   * @override\n   */\n  handleMapChanged() {\n    if (this.scenePostRenderListenerRemover_) {\n      this.scenePostRenderListenerRemover_();\n      removeNode(this.element);\n    }\n    this.scenePostRenderListenerRemover_ = null;\n    const scene = this.getScene();\n    if (scene) {\n      this.scenePostRenderListenerRemover_ = scene.postRender.addEventListener(this.updatePixelPosition.bind(this));\n      this.updatePixelPosition();\n      const container = this.stopEvent ?\n        this.synchronizer_.getOverlayContainerStopEvent() : this.synchronizer_.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  handlePositionChanged() {\n    // transform position to WGS84\n    const position = this.getPosition();\n    if (position) {\n      const sourceProjection = this.parent_.getMap().getView().getProjection();\n      this.positionWGS84_ = transform(position, sourceProjection, 'EPSG:4326');\n    } else {\n      this.positionWGS84_ = undefined;\n    }\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @override\n   */\n  handleElementChanged() {\n    function cloneNode(node, parent) {\n      const clone = node.cloneNode();\n      if (parent) {\n        parent.appendChild(clone);\n      }\n      if (node.nodeType != Node.TEXT_NODE) {\n        clone.addEventListener('click', (event) => {\n          node.dispatchEvent(new MouseEvent('click', event));\n          event.stopPropagation();\n        });\n      }\n      const nodes = node.childNodes;\n      for (let i = 0; i < nodes.length; i++) {\n        if (!nodes[i]) {\n          continue;\n        }\n        cloneNode(nodes[i], clone);\n      }\n      return clone;\n    }\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      if (element.parentNode && element.parentNode.childNodes) {\n        for (const node of element.parentNode.childNodes) {\n          const clonedNode = cloneNode(node, null);\n          this.element.appendChild(clonedNode);\n        }\n      }\n    }\n    if (element.parentNode) {\n      // set new Observer\n      this.observeTarget_(element.parentNode);\n    }\n  }\n\n  /**\n   * @override\n   */\n  updatePixelPosition() {\n    const position = this.positionWGS84_;\n    if (!this.scene_ || !position) {\n      this.setVisible(false);\n      return;\n    }\n    let cartesian;\n    if (position.length === 2) {\n      cartesian = Cesium.Cartesian3.fromDegreesArray(position)[0];\n    } else {\n      cartesian = Cesium.Cartesian3.fromDegreesArrayHeights(position)[0];\n    }\n    const camera = this.scene_.camera;\n    const ellipsoidBoundingSphere = new Cesium.BoundingSphere(new Cesium.Cartesian3(), 6356752);\n    const occluder = new Cesium.Occluder(ellipsoidBoundingSphere, camera.position);\n    // check if overlay position is behind the horizon\n    if (!occluder.isPointVisible(cartesian)) {\n      this.setVisible(false);\n      return;\n    }\n    const cullingVolume = camera.frustum.computeCullingVolume(camera.position, camera.direction, camera.up);\n    // check if overlay position is visible from the camera\n    if (cullingVolume.computeVisibility(new Cesium.BoundingSphere(cartesian)) !== 1) {\n      this.setVisible(false);\n      return;\n    }\n    this.setVisible(true);\n\n    const pixelCartesian = this.scene_.cartesianToCanvasCoordinates(cartesian);\n    const pixel = [pixelCartesian.x, pixelCartesian.y];\n    const mapSize = [this.scene_.canvas.width, this.scene_.canvas.height];\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * Destroys the overlay, removing all its listeners and elements\n   * @api\n   */\n  destroy() {\n    if (this.scenePostRenderListenerRemover_) {\n      this.scenePostRenderListenerRemover_();\n    }\n    if (this.observer_) {\n      this.observer_.disconnect();\n    }\n    olObservableUnByKey(this.listenerKeys_);\n    this.listenerKeys_.splice(0);\n    if (this.element.removeNode) {\n      this.element.removeNode(true);\n    } else {\n      this.element.remove();\n    }\n    this.element = null;\n  }\n}\n\nexport default SynchronizedOverlay;\n","/**\n * @module olcs.OverlaySynchronizer\n */\nimport olcsSynchronizedOverlay from './SynchronizedOverlay.js';\nimport {getUid} from './util.js';\n\nclass OverlaySynchronizer {\n  /**\n  * @param {!ol.Map} map\n  * @param {!Cesium.Scene} scene\n  * @constructor\n  * @template T\n  * @api\n  */\n  constructor(map, scene) {\n    /**\n    * @type {!ol.Map}\n    * @protected\n    */\n    this.map = map;\n\n    /**\n    * @type {ol.Collection.<ol.Overlay>}\n    * @private\n    */\n    this.overlays_ = this.map.getOverlays();\n\n    /**\n    * @type {!Cesium.Scene}\n    * @protected\n    */\n    this.scene = scene;\n\n    /**\n    * @private\n    * @type {!Element}\n    */\n    this.overlayContainerStopEvent_ = document.createElement('DIV');\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    const overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];\n    overlayEvents.forEach((event) => {\n      this.overlayContainerStopEvent_.addEventListener(event, evt => evt.stopPropagation());\n    });\n    this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n    * @private\n    * @type {!Element}\n    */\n    this.overlayContainer_ = document.createElement('DIV');\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.scene.canvas.parentElement.appendChild(this.overlayContainer_);\n\n\n    /**\n    * @type {!Object<?,olcs.SynchronizedOverlay>}\n    * @private\n    */\n    this.overlayMap_ = {};\n  }\n\n  /**\n  * Get the element that serves as a container for overlays that don't allow\n  * event propagation. Elements added to this container won't let mousedown and\n  * touchstart events through to the map, so clicks and gestures on an overlay\n  * don't trigger any {@link ol.MapBrowserEvent}.\n  * @return {!Element} The map's overlay container that stops events.\n  */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n  * Get the element that serves as a container for overlays.\n  * @return {!Element} The map's overlay container.\n  */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n  * Destroy all and perform complete synchronization of the overlays.\n  * @api\n  */\n  synchronize() {\n    this.destroyAll();\n    this.addOverlays();\n    this.overlays_.on('add', this.addOverlayFromEvent_.bind(this));\n    this.overlays_.on('remove', this.removeOverlayFromEvent_.bind(this));\n  }\n\n  /**\n  * @param {ol.Collection.Event} event\n  * @private\n  */\n  addOverlayFromEvent_(event) {\n    const overlay = /** @type {ol.Overlay} */ (event.element);\n    this.addOverlay(overlay);\n  }\n\n  /**\n  * @api\n  */\n  addOverlays() {\n    this.overlays_.forEach((overlay) => { this.addOverlay(); });\n  }\n\n  /**\n  * @param {ol.Overlay} overlay\n  * @api\n  */\n  addOverlay(overlay) {\n    if (!overlay) {\n      return;\n    }\n    const cesiumOverlay = new olcsSynchronizedOverlay({\n      scene: this.scene,\n      synchronizer: this,\n      parent: overlay\n    });\n\n    const overlayId = getUid(overlay).toString();\n    this.overlayMap_[overlayId] = cesiumOverlay;\n  }\n\n  /**\n  * @param {ol.Collection.Event} event\n  * @private\n  */\n  removeOverlayFromEvent_(event) {\n    const removedOverlay = /** @type {ol.Overlay} */ (event.element);\n    this.removeOverlay(removedOverlay);\n  }\n\n  /**\n  * Removes an overlay from the scene\n  * @param {ol.Overlay} overlay\n  * @api\n  */\n  removeOverlay(overlay) {\n    const overlayId = getUid(overlay).toString();\n    const csOverlay = this.overlayMap_[overlayId];\n    if (csOverlay) {\n      csOverlay.destroy();\n      delete this.overlayMap_[overlayId];\n    }\n  }\n\n  /**\n  * Destroys all the created Cesium objects.\n  * @protected\n  */\n  destroyAll() {\n    Object.keys(this.overlayMap_).forEach((key) => {\n      const overlay = this.overlayMap_[key];\n      overlay.destroy();\n      delete this.overlayMap_[key];\n    });\n  }\n}\n\n\nexport default OverlaySynchronizer;\n","/**\n * @module olcs.OLCesium\n */\nimport olGeomPoint from 'ol/geom/Point.js';\nimport {getTransform} from 'ol/proj.js';\nimport olcsUtil from './util.js';\nimport olcsCore from './core.js';\nimport olcsAutoRenderLoop from './AutoRenderLoop.js';\nimport olcsCamera from './Camera.js';\nimport olcsRasterSynchronizer from './RasterSynchronizer.js';\nimport olcsVectorSynchronizer from './VectorSynchronizer.js';\nimport olcsOverlaySynchronizer from './OverlaySynchronizer.js';\n\nclass OLCesium {\n  /**\n   * @param {!olcsx.OLCesiumOptions} options Options.\n   * @constructor\n   * @api\n   */\n  constructor(options) {\n\n    /**\n     * @type {olcs.AutoRenderLoop}\n     * @private\n     */\n    this.autoRenderLoop_ = null;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = options.map;\n\n    /**\n     * @type {!function(): Cesium.JulianDate}\n     * @private\n     */\n    this.time_ = options.time || function() {\n      return Cesium.JulianDate.now();\n    };\n\n    /**\n     * No change of the view projection.\n     * @private\n     */\n    this.to4326Transform_ = getTransform(this.map_.getView().getProjection(), 'EPSG:4326');\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.resolutionScale_ = 1.0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.canvasClientWidth_ = 0.0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.canvasClientHeight_ = 0.0;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.resolutionScaleChanged_ = true; // force resize\n\n    const fillArea = 'position:absolute;top:0;left:0;width:100%;height:100%;';\n\n    /**\n     * @type {!Element}\n     * @private\n     */\n    this.container_ = document.createElement('DIV');\n    const containerAttribute = document.createAttribute('style');\n    containerAttribute.value = `${fillArea}visibility:hidden;`;\n    this.container_.setAttributeNode(containerAttribute);\n\n    let targetElement = options.target || null;\n    if (targetElement) {\n      if (typeof targetElement === 'string') {\n        targetElement = document.getElementById(targetElement);\n      }\n      targetElement.appendChild(this.container_);\n    } else {\n      const oc = this.map_.getViewport().querySelector('.ol-overlaycontainer');\n      if (oc && oc.parentNode) {\n        oc.parentNode.insertBefore(this.container_, oc);\n      }\n    }\n\n    /**\n     * Whether the Cesium container is placed over the ol map.\n     * @type {boolean}\n     * @private\n     */\n    this.isOverMap_ = !targetElement;\n\n\n    if (this.isOverMap_ && options.stopOpenLayersEventsPropagation) {\n      const overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];\n      for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n        this.container_.addEventListener(overlayEvents[i], evt => evt.stopPropagation());\n      }\n    }\n\n\n    /**\n     * @type {!HTMLCanvasElement}\n     * @private\n     */\n    this.canvas_ = /** @type {!HTMLCanvasElement} */ (document.createElement('CANVAS'));\n    const canvasAttribute = document.createAttribute('style');\n    canvasAttribute.value = fillArea;\n    this.canvas_.setAttributeNode(canvasAttribute);\n\n    if (olcsUtil.supportsImageRenderingPixelated()) {\n      // non standard CSS4\n      this.canvas_.style['imageRendering'] = olcsUtil.imageRenderingValue();\n    }\n\n    this.canvas_.oncontextmenu = function() { return false; };\n    this.canvas_.onselectstart = function() { return false; };\n\n    this.container_.appendChild(this.canvas_);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.enabled_ = false;\n\n    /**\n     * @type {!Array.<ol.interaction.Interaction>}\n     * @private\n     */\n    this.pausedInteractions_ = [];\n\n    /**\n     * @type {?ol.layer.Group}\n     * @private\n     */\n    this.hiddenRootGroup_ = null;\n\n    const sceneOptions = options.sceneOptions !== undefined ? options.sceneOptions :\n      /** @type {Cesium.SceneOptions} */ ({});\n    sceneOptions.canvas = this.canvas_;\n    sceneOptions.scene3DOnly = true;\n\n    /**\n     * @type {!Cesium.Scene}\n     * @private\n     */\n    this.scene_ = new Cesium.Scene(sceneOptions);\n\n    const sscc = this.scene_.screenSpaceCameraController;\n\n    sscc.tiltEventTypes.push({\n      'eventType': Cesium.CameraEventType.LEFT_DRAG,\n      'modifier': Cesium.KeyboardEventModifier.SHIFT\n    });\n\n    sscc.tiltEventTypes.push({\n      'eventType': Cesium.CameraEventType.LEFT_DRAG,\n      'modifier': Cesium.KeyboardEventModifier.ALT\n    });\n\n    sscc.enableLook = false;\n\n    this.scene_.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\n\n    /**\n     * @type {!olcs.Camera}\n     * @private\n     */\n    this.camera_ = new olcsCamera(this.scene_, this.map_);\n\n    /**\n     * @type {!Cesium.Globe}\n     * @private\n     */\n    this.globe_ = new Cesium.Globe(Cesium.Ellipsoid.WGS84);\n    this.globe_.baseColor = Cesium.Color.WHITE;\n    this.scene_.globe = this.globe_;\n    this.scene_.skyAtmosphere = new Cesium.SkyAtmosphere();\n\n    // The first layer of Cesium is special; using a 1x1 transparent image to workaround it.\n    // See https://github.com/AnalyticalGraphicsInc/cesium/issues/1323 for details.\n    const firstImageryProvider = new Cesium.SingleTileImageryProvider({\n      url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',\n      rectangle: Cesium.Rectangle.fromDegrees(0, 0, 1, 1) // the Rectangle dimensions are arbitrary\n    });\n    this.globe_.imageryLayers.addImageryProvider(firstImageryProvider, 0);\n\n    this.dataSourceCollection_ = new Cesium.DataSourceCollection();\n    this.dataSourceDisplay_ = new Cesium.DataSourceDisplay({\n      scene: this.scene_,\n      dataSourceCollection: this.dataSourceCollection_\n    });\n\n    const synchronizers = options.createSynchronizers ?\n      options.createSynchronizers(this.map_, this.scene_, this.dataSourceCollection_) : [\n        new olcsRasterSynchronizer(this.map_, this.scene_),\n        new olcsVectorSynchronizer(this.map_, this.scene_),\n        new olcsOverlaySynchronizer(this.map_, this.scene_)\n      ];\n\n    // Assures correct canvas size after initialisation\n    this.handleResize_();\n\n    for (let i = synchronizers.length - 1; i >= 0; --i) {\n      synchronizers[i].synchronize();\n    }\n\n    /**\n     * Time of the last rendered frame, as returned by `performance.now()`.\n     * @type {number}\n     * @private\n     */\n    this.lastFrameTime_ = 0;\n\n    /**\n     * The identifier returned by `requestAnimationFrame`.\n     * @type {number|undefined}\n     * @private\n     */\n    this.renderId_ = undefined;\n\n    /**\n     * Target frame rate for the render loop.\n     * @type {number}\n     * @private\n     */\n    this.targetFrameRate_ = Number.POSITIVE_INFINITY;\n\n    /**\n     * If the Cesium render loop is being blocked.\n     * @type {boolean}\n     * @private\n     */\n    this.blockCesiumRendering_ = false;\n\n    /**\n     * If the warmup routine is active.\n     * @type {boolean}\n     * @private\n     */\n    this.warmingUp_ = false;\n\n    /**\n     * @type {ol.Feature}\n     * @private\n     */\n    this.trackedFeature_ = null;\n\n    /**\n     * @type {Cesium.Entity}\n     * @private\n     */\n    this.trackedEntity_ = null;\n\n    /**\n     * @type {Cesium.EntityView}\n     * @private\n     */\n    this.entityView_ = null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.needTrackedEntityUpdate_ = false;\n\n    /**\n     * @type {!Cesium.BoundingSphere}\n     */\n    this.boundingSphereScratch_ = new Cesium.BoundingSphere();\n\n    const eventHelper = new Cesium.EventHelper();\n    eventHelper.add(this.scene_.postRender, OLCesium.prototype.updateTrackedEntity_, this);\n\n    // Cesium has a mechanism to prevent the camera to go under the terrain.\n    // Unfortunately, it is only active when all the terrain has been loaded, which:\n    // - does not prevent the camera to sink under terrain anymore;\n    // - introduce a jumping effect once all terrain has been loaded and the position of the camera is finally fixed.\n    // The property below enables a workaround found in the Camptocamp Cesium fork.\n    // See also https://github.com/AnalyticalGraphicsInc/cesium/issues/5999.\n    Cesium.Camera.enableSuspendTerrainAdjustment = false;\n  }\n\n  /**\n   * Render the Cesium scene.\n   * @private\n   */\n  render_() {\n    // if a call to `requestAnimationFrame` is pending, cancel it\n    if (this.renderId_ !== undefined) {\n      cancelAnimationFrame(this.renderId_);\n      this.renderId_ = undefined;\n    }\n\n    // only render if Cesium is enabled/warming and rendering hasn't been blocked\n    if ((this.enabled_ || this.warmingUp_) && !this.blockCesiumRendering_) {\n      this.renderId_ = requestAnimationFrame(this.onAnimationFrame_.bind(this));\n    }\n  }\n\n  /**\n   * Callback for `requestAnimationFrame`.\n   * @param {number} frameTime The frame time, from `performance.now()`.\n   * @private\n   */\n  onAnimationFrame_(frameTime) {\n    this.renderId_ = undefined;\n\n    // check if a frame was rendered within the target frame rate\n    const interval = 1000.0 / this.targetFrameRate_;\n    const delta = frameTime - this.lastFrameTime_;\n    if (delta < interval) {\n      // too soon, don't render yet\n      this.render_();\n      return;\n    }\n\n    // time to render a frame, save the time\n    this.lastFrameTime_ = frameTime;\n\n    const julianDate = this.time_();\n    this.scene_.initializeFrame();\n    this.handleResize_();\n    this.dataSourceDisplay_.update(julianDate);\n\n    // Update tracked entity\n    if (this.entityView_) {\n      const trackedEntity = this.trackedEntity_;\n      const trackedState = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n      if (trackedState === Cesium.BoundingSphereState.DONE) {\n        this.boundingSphereScratch_.radius = 1; // a radius of 1 is enough for tracking points\n        this.entityView_.update(julianDate, this.boundingSphereScratch_);\n      }\n    }\n\n    this.scene_.render(julianDate);\n    this.camera_.checkCameraChange();\n\n    // request the next render call after this one completes to ensure the browser doesn't get backed up\n    this.render_();\n  }\n\n  /**\n   * @private\n   */\n  updateTrackedEntity_() {\n    if (!this.needTrackedEntityUpdate_) {\n      return;\n    }\n\n    const trackedEntity = this.trackedEntity_;\n    const scene = this.scene_;\n\n    const state = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n    if (state === Cesium.BoundingSphereState.PENDING) {\n      return;\n    }\n\n    scene.screenSpaceCameraController.enableTilt = false;\n\n    const bs = state !== Cesium.BoundingSphereState.FAILED ? this.boundingSphereScratch_ : undefined;\n    if (bs) {\n      bs.radius = 1;\n    }\n    this.entityView_ = new Cesium.EntityView(trackedEntity, scene, scene.mapProjection.ellipsoid);\n    this.entityView_.update(this.time_(), bs);\n    this.needTrackedEntityUpdate_ = false;\n  }\n\n  /**\n   * @private\n   */\n  handleResize_() {\n    let width = this.canvas_.clientWidth;\n    let height = this.canvas_.clientHeight;\n\n    if (width === 0 | height === 0) {\n      // The canvas DOM element is not ready yet.\n      return;\n    }\n\n    if (width === this.canvasClientWidth_ &&\n        height === this.canvasClientHeight_ &&\n        !this.resolutionScaleChanged_) {\n      return;\n    }\n\n    let resolutionScale = this.resolutionScale_;\n    if (!olcsUtil.supportsImageRenderingPixelated()) {\n      resolutionScale *= window.devicePixelRatio || 1.0;\n    }\n    this.resolutionScaleChanged_ = false;\n\n    this.canvasClientWidth_ = width;\n    this.canvasClientHeight_ = height;\n\n    width *= resolutionScale;\n    height *= resolutionScale;\n\n    this.canvas_.width = width;\n    this.canvas_.height = height;\n    this.scene_.camera.frustum.aspectRatio = width / height;\n  }\n\n  /**\n   * @return {!olcs.Camera}\n   * @api\n   */\n  getCamera() {\n    return this.camera_;\n  }\n\n  /**\n   * @return {!ol.Map}\n   * @api\n   */\n  getOlMap() {\n    return this.map_;\n  }\n\n  /**\n   * @return {!ol.View}\n   * @api\n   */\n  getOlView() {\n    const view = this.map_.getView();\n    console.assert(view);\n    return view;\n  }\n\n  /**\n   * @return {!Cesium.Scene}\n   * @api\n   */\n  getCesiumScene() {\n    return this.scene_;\n  }\n\n  /**\n   * @return {!Cesium.DataSourceCollection}\n   * @api\n   */\n  getDataSources() {\n    return this.dataSourceCollection_;\n  }\n\n  /**\n   * @return {!Cesium.DataSourceDisplay}\n   * @api\n   */\n  getDataSourceDisplay() {\n    return this.dataSourceDisplay_;\n  }\n\n  /**\n   * @return {boolean}\n   * @api\n   */\n  getEnabled() {\n    return this.enabled_;\n  }\n\n  /**\n   * Enables/disables the Cesium.\n   * This modifies the visibility style of the container element.\n   * @param {boolean} enable\n   * @api\n   */\n  setEnabled(enable) {\n    if (this.enabled_ === enable) {\n      return;\n    }\n    this.enabled_ = enable;\n\n    // some Cesium operations are operating with canvas.clientWidth,\n    // so we can't remove it from DOM or even make display:none;\n    this.container_.style.visibility = this.enabled_ ? 'visible' : 'hidden';\n    let interactions;\n    if (this.enabled_) {\n      this.throwOnUnitializedMap_();\n      if (this.isOverMap_) {\n        interactions = this.map_.getInteractions();\n        interactions.forEach((el, i, arr) => {\n          this.pausedInteractions_.push(el);\n        });\n        interactions.clear();\n\n        const rootGroup = this.map_.getLayerGroup();\n        if (rootGroup.getVisible()) {\n          this.hiddenRootGroup_ = rootGroup;\n          this.hiddenRootGroup_.setVisible(false);\n        }\n\n        this.map_.getOverlayContainer().classList.add('olcs-hideoverlay');\n        this.map_.getOverlayContainerStopEvent().classList.add('olcs-hideoverlay');\n      }\n\n      this.camera_.readFromView();\n      this.render_();\n    } else {\n      if (this.isOverMap_) {\n        interactions = this.map_.getInteractions();\n        this.pausedInteractions_.forEach((interaction) => {\n          interactions.push(interaction);\n        });\n        this.pausedInteractions_.length = 0;\n        this.map_.getOverlayContainer().classList.remove('olcs-hideoverlay');\n        this.map_.getOverlayContainerStopEvent().classList.remove('olcs-hideoverlay');\n        if (this.hiddenRootGroup_) {\n          this.hiddenRootGroup_.setVisible(true);\n          this.hiddenRootGroup_ = null;\n        }\n      }\n\n      this.camera_.updateView();\n    }\n  }\n\n  /**\n   * Preload Cesium so that it is ready when transitioning from 2D to 3D.\n   * @param {number} height Target height of the camera\n   * @param {number} timeout Milliseconds after which the warming will stop\n   * @api\n  */\n  warmUp(height, timeout) {\n    if (this.enabled_) {\n      // already enabled\n      return;\n    }\n    this.throwOnUnitializedMap_();\n    this.camera_.readFromView();\n    const ellipsoid = this.globe_.ellipsoid;\n    const csCamera = this.scene_.camera;\n    const position = ellipsoid.cartesianToCartographic(csCamera.position);\n    if (position.height < height) {\n      position.height = height;\n      csCamera.position = ellipsoid.cartographicToCartesian(position);\n    }\n\n    this.warmingUp_ = true;\n    this.render_();\n\n    setTimeout(() => {\n      this.warmingUp_ = false;\n    }, timeout);\n  }\n\n  /**\n   * Block Cesium rendering to save resources.\n   * @param {boolean} block True to block.\n   * @api\n  */\n  setBlockCesiumRendering(block) {\n    if (this.blockCesiumRendering_ !== block) {\n      this.blockCesiumRendering_ = block;\n\n      // reset the render loop\n      this.render_();\n    }\n  }\n\n  /**\n   * Render the globe only when necessary in order to save resources.\n   * Experimental.\n   * @api\n   */\n  enableAutoRenderLoop() {\n    if (!this.autoRenderLoop_) {\n      this.autoRenderLoop_ = new olcsAutoRenderLoop(this);\n    }\n  }\n\n  /**\n   * Get the autorender loop.\n   * @return {?olcs.AutoRenderLoop}\n   * @api\n  */\n  getAutoRenderLoop() {\n    return this.autoRenderLoop_;\n  }\n\n  /**\n   * The 3D Cesium globe is rendered in a canvas with two different dimensions:\n   * clientWidth and clientHeight which are the dimension on the screen and\n   * width and height which are the dimensions of the drawing buffer.\n   *\n   * By using a resolution scale lower than 1.0, it is possible to render the\n   * globe in a buffer smaller than the canvas client dimensions and improve\n   * performance, at the cost of quality.\n   *\n   * Pixel ratio should also be taken into account; by default, a device with\n   * pixel ratio of 2.0 will have a buffer surface 4 times bigger than the client\n   * surface.\n   *\n   * @param {number} value\n   * @this {olcs.OLCesium}\n   * @api\n   */\n  setResolutionScale(value) {\n    value = Math.max(0, value);\n    if (value !== this.resolutionScale_) {\n      this.resolutionScale_ = Math.max(0, value);\n      this.resolutionScaleChanged_ = true;\n      if (this.autoRenderLoop_) {\n        this.autoRenderLoop_.restartRenderLoop();\n      }\n    }\n  }\n\n  /**\n   * Set the target frame rate for the renderer. Set to `Number.POSITIVE_INFINITY`\n   * to render as quickly as possible.\n   * @param {number} value The frame rate, in frames per second.\n   * @api\n   */\n  setTargetFrameRate(value) {\n    if (this.targetFrameRate_ !== value) {\n      this.targetFrameRate_ = value;\n\n      // reset the render loop\n      this.render_();\n    }\n  }\n\n  /**\n   * Check if OpenLayers map is not properly initialized.\n   * @private\n   */\n  throwOnUnitializedMap_() {\n    const map = this.map_;\n    const view = map.getView();\n    const center = view.getCenter();\n    if (!view.isDef() || isNaN(center[0]) || isNaN(center[1])) {\n      throw new Error(`The OpenLayers map is not properly initialized: ${center} / ${view.getResolution()}`);\n    }\n  }\n}\n\n\nObject.defineProperties(OLCesium.prototype, {\n  'trackedFeature': {\n    'get': /** @this {olcs.OLCesium} */ function() {\n      return this.trackedFeature_;\n    },\n    'set': /** @this {olcs.OLCesium} */ function(feature) {\n      if (this.trackedFeature_ !== feature) {\n\n        const scene = this.scene_;\n\n        //Stop tracking\n        if (!feature || !feature.getGeometry()) {\n          this.needTrackedEntityUpdate_ = false;\n          scene.screenSpaceCameraController.enableTilt = true;\n\n          if (this.trackedEntity_) {\n            this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_);\n          }\n          this.trackedEntity_ = null;\n          this.trackedFeature_ = null;\n          this.entityView_ = null;\n          scene.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n          return;\n        }\n\n        this.trackedFeature_ = feature;\n\n        //We can't start tracking immediately, so we set a flag and start tracking\n        //when the bounding sphere is ready (most likely next frame).\n        this.needTrackedEntityUpdate_ = true;\n\n        const to4326Transform = this.to4326Transform_;\n        const toCesiumPosition = function() {\n          const geometry = feature.getGeometry();\n          console.assert(geometry instanceof olGeomPoint);\n          const coo = geometry.getCoordinates();\n          const coo4326 = to4326Transform(coo, undefined, coo.length);\n          return olcsCore.ol4326CoordinateToCesiumCartesian(coo4326);\n        };\n\n        // Create an invisible point entity for tracking.\n        // It is independant from the primitive/geometry created by the vector synchronizer.\n        const options = {\n          'position': new Cesium.CallbackProperty((time, result) => toCesiumPosition(), false),\n          'point': {\n            'pixelSize': 1,\n            'color': Cesium.Color.TRANSPARENT\n          }\n        };\n\n        this.trackedEntity_ = this.dataSourceDisplay_.defaultDataSource.entities.add(options);\n      }\n    }\n  }\n});\n\n\nexport default OLCesium;\n","/**\n * @module ol/style/Stroke\n */\nimport {getUid} from '../util.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/color~Color|module:ol/colorlike~ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {string} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {string} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `undefined` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nclass Stroke {\n  /**\n   * @param {module:ol/style/Stroke~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {module:ol/color~Color|module:ol/colorlike~ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.lineCap_ = options.lineCap;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lineDashOffset_ = options.lineDashOffset;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.lineJoin_ = options.lineJoin;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.miterLimit_ = options.miterLimit;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = options.width;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Clones the style.\n   * @return {module:ol/style/Stroke} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Stroke({\n      color: (color && color.slice) ? color.slice() : color || undefined,\n      lineCap: this.getLineCap(),\n      lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n      lineDashOffset: this.getLineDashOffset(),\n      lineJoin: this.getLineJoin(),\n      miterLimit: this.getMiterLimit(),\n      width: this.getWidth()\n    });\n  }\n\n  /**\n   * Get the stroke color.\n   * @return {module:ol/color~Color|module:ol/colorlike~ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the line cap type for the stroke.\n   * @return {string|undefined} Line cap.\n   * @api\n   */\n  getLineCap() {\n    return this.lineCap_;\n  }\n\n  /**\n   * Get the line dash style for the stroke.\n   * @return {Array<number>} Line dash.\n   * @api\n   */\n  getLineDash() {\n    return this.lineDash_;\n  }\n\n  /**\n   * Get the line dash offset for the stroke.\n   * @return {number|undefined} Line dash offset.\n   * @api\n   */\n  getLineDashOffset() {\n    return this.lineDashOffset_;\n  }\n\n  /**\n   * Get the line join type for the stroke.\n   * @return {string|undefined} Line join.\n   * @api\n   */\n  getLineJoin() {\n    return this.lineJoin_;\n  }\n\n  /**\n   * Get the miter limit for the stroke.\n   * @return {number|undefined} Miter limit.\n   * @api\n   */\n  getMiterLimit() {\n    return this.miterLimit_;\n  }\n\n  /**\n   * Get the stroke width.\n   * @return {number|undefined} Width.\n   * @api\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {module:ol/color~Color|module:ol/colorlike~ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line cap.\n   *\n   * @param {string|undefined} lineCap Line cap.\n   * @api\n   */\n  setLineCap(lineCap) {\n    this.lineCap_ = lineCap;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line dash.\n   *\n   * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n   * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n   * property will have no visual effect in these browsers.\n   *\n   * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n   *\n   * @param {Array<number>} lineDash Line dash.\n   * @api\n   */\n  setLineDash(lineDash) {\n    this.lineDash_ = lineDash;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line dash offset.\n   *\n   * @param {number|undefined} lineDashOffset Line dash offset.\n   * @api\n   */\n  setLineDashOffset(lineDashOffset) {\n    this.lineDashOffset_ = lineDashOffset;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line join.\n   *\n   * @param {string|undefined} lineJoin Line join.\n   * @api\n   */\n  setLineJoin(lineJoin) {\n    this.lineJoin_ = lineJoin;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the miter limit.\n   *\n   * @param {number|undefined} miterLimit Miter limit.\n   * @api\n   */\n  setMiterLimit(miterLimit) {\n    this.miterLimit_ = miterLimit;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the width.\n   *\n   * @param {number|undefined} width Width.\n   * @api\n   */\n  setWidth(width) {\n    this.width_ = width;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    if (this.checksum_ === undefined) {\n      this.checksum_ = 's';\n      if (this.color_) {\n        if (typeof this.color_ === 'string') {\n          this.checksum_ += this.color_;\n        } else {\n          this.checksum_ += getUid(this.color_).toString();\n        }\n      } else {\n        this.checksum_ += '-';\n      }\n      this.checksum_ += ',' +\n          (this.lineCap_ !== undefined ?\n            this.lineCap_.toString() : '-') + ',' +\n          (this.lineDash_ ?\n            this.lineDash_.toString() : '-') + ',' +\n          (this.lineDashOffset_ !== undefined ?\n            this.lineDashOffset_ : '-') + ',' +\n          (this.lineJoin_ !== undefined ?\n            this.lineJoin_ : '-') + ',' +\n          (this.miterLimit_ !== undefined ?\n            this.miterLimit_.toString() : '-') + ',' +\n          (this.width_ !== undefined ?\n            this.width_.toString() : '-');\n    }\n\n    return this.checksum_;\n  }\n}\n\nexport default Stroke;\n","/**\n * @module ol/Object\n */\nimport {getUid} from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport {assign} from './obj.js';\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n  */\nclass ObjectEvent extends Event {\n\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires module:ol/Object~ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n\n  /**\n   * @param {Object<string, *>=} opt_values An object with key-value pairs.\n   */\n  constructor(opt_values) {\n    super();\n\n    // Call {@link module:ol/util~getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {!Object<string, *>}\n     */\n    this.values_ = {};\n\n    if (opt_values !== undefined) {\n      this.setProperties(opt_values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return Object.keys(this.values_);\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return assign({}, this.values_);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = getChangeEventType(key);\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  set(key, value, opt_silent) {\n    if (opt_silent) {\n      this.values_[key] = value;\n    } else {\n      const oldValue = this.values_[key];\n      this.values_[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  setProperties(values, opt_silent) {\n    for (const key in values) {\n      this.set(key, values[key], opt_silent);\n    }\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean=} opt_silent Unset without triggering an event.\n   * @api\n   */\n  unset(key, opt_silent) {\n    if (key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (!opt_silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\n\n/**\n * @type {Object<string, string>}\n */\nconst changeEventTypeCache = {};\n\n\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n  return changeEventTypeCache.hasOwnProperty(key) ?\n    changeEventTypeCache[key] :\n    (changeEventTypeCache[key] = 'change:' + key);\n}\n\n\nexport default BaseObject;\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/style/Fill\n */\nimport {getUid} from '../util.js';\nimport {asString} from '../color.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/color~Color|module:ol/colorlike~ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nclass Fill {\n  /**\n   * @param {module:ol/style/Fill~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {module:ol/color~Color|module:ol/colorlike~ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n   * @return {module:ol/style/Fill} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Fill({\n      color: (color && color.slice) ? color.slice() : color || undefined\n    });\n  }\n\n  /**\n   * Get the fill color.\n   * @return {module:ol/color~Color|module:ol/colorlike~ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {module:ol/color~Color|module:ol/colorlike~ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    if (this.checksum_ === undefined) {\n      if (\n        this.color_ instanceof CanvasPattern ||\n          this.color_ instanceof CanvasGradient\n      ) {\n        this.checksum_ = getUid(this.color_).toString();\n      } else {\n        this.checksum_ = 'f' + (this.color_ ? asString(this.color_) : '-');\n      }\n    }\n\n    return this.checksum_;\n  }\n}\n\nexport default Fill;\n","/**\n * @module ol/Feature\n */\nimport {assert} from './asserts.js';\nimport {listen, unlisten, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport Geometry from './geom/Geometry.js';\nimport Style from './style/Style.js';\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n */\nclass Feature extends BaseObject {\n  /**\n   * @param {module:ol/geom/Geometry|Object<string, *>=} opt_geometryOrProperties\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n  constructor(opt_geometryOrProperties) {\n\n    super();\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {module:ol/style/Style|Array<module:ol/style/Style>|module:ol/style/Style~StyleFunction}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/style/Style~StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?module:ol/events~EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    listen(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n\n    if (opt_geometryOrProperties !== undefined) {\n      if (opt_geometryOrProperties instanceof Geometry ||\n          !opt_geometryOrProperties) {\n        const geometry = opt_geometryOrProperties;\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        const properties = opt_geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {module:ol/Feature} The clone.\n   * @api\n   */\n  clone() {\n    const clone = new Feature(this.getProperties());\n    clone.setGeometryName(this.getGeometryName());\n    const geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(geometry.clone());\n    }\n    const style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  }\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {module:ol/geom/Geometry|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  getGeometry() {\n    return (\n      /** @type {module:ol/geom/Geometry|undefined} */ (this.get(this.geometryName_))\n    );\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  getGeometryName() {\n    return this.geometryName_;\n  }\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {module:ol/style/Style|Array<module:ol/style/Style>|module:ol/style/Style~StyleFunction} The feature style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the feature's style function.\n   * @return {module:ol/style/Style~StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChanged_() {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    const geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(geometry,\n        EventType.CHANGE, this.handleGeometryChange_, this);\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {module:ol/geom/Geometry|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  setGeometry(geometry) {\n    this.set(this.geometryName_, geometry);\n  }\n\n  /**\n   * Set the style for the feature.  This can be a single style object, an array\n   * of styles, or a function that takes a resolution and returns an array of\n   * styles. If it is `null` the feature has no style (a `null` style).\n   * @param {module:ol/style/Style|Array<module:ol/style/Style>|module:ol/style/Style~StyleFunction} style Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  setStyle(style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  }\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  setId(id) {\n    this.id_ = id;\n    this.changed();\n  }\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  setGeometryName(name) {\n    unlisten(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n    this.geometryName_ = name;\n    listen(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n    this.handleGeometryChanged_();\n  }\n}\n\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of module:ol/style/Style or single style objects wrapped\n * in a new feature style function.\n * @param {module:ol/style/Style~StyleFunction|!Array<module:ol/style/Style>|!module:ol/style/Style} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {module:ol/style/Style~StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  } else {\n    /**\n     * @type {Array<module:ol/style/Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(obj instanceof Style,\n        41); // Expected an `module:ol/style/Style~Style` or an array of `module:ol/style/Style~Style`\n      styles = [obj];\n    }\n    return function() {\n      return styles;\n    };\n  }\n}\nexport default Feature;\n","/**\n * @module ol/geom/Point\n */\nimport {createOrUpdateFromCoordinate, containsXY} from '../extent.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {deflateCoordinate} from '../geom/flat/deflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nclass Point extends SimpleGeometry {\n\n  /**\n   * @param {module:ol/coordinate~Coordinate} coordinates Coordinates.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n    super();\n    this.setCoordinates(coordinates, opt_layout);\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/Point} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const point = new Point(this.flatCoordinates.slice(), this.layout);\n    return point;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n    if (squaredDistance < minSquaredDistance) {\n      const stride = this.stride;\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * Return the coordinate of the point.\n   * @return {module:ol/coordinate~Coordinate} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.POINT;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinate(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default Point;\n","/**\n * @module ol/interaction/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ACTIVE: 'active'\n};\n","/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport {easeOut, linear} from '../easing.js';\nimport InteractionProperty from '../interaction/Property.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(module:ol/MapBrowserEvent):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return).\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nclass Interaction extends BaseObject {\n  /**\n   * @param {module:ol/interaction/Interaction~InteractionOptions} options Options.\n   */\n  constructor(options) {\n    super();\n\n    /**\n     * @private\n     * @type {module:ol/PluggableMap}\n     */\n    this.map_ = null;\n\n    this.setActive(true);\n\n    /**\n     * @type {function(module:ol/MapBrowserEvent):boolean}\n     */\n    this.handleEvent = options.handleEvent;\n\n  }\n\n  /**\n   * Return whether the interaction is currently active.\n   * @return {boolean} `true` if the interaction is active, `false` otherwise.\n   * @observable\n   * @api\n   */\n  getActive() {\n    return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n  }\n\n  /**\n   * Get the map associated with this interaction.\n   * @return {module:ol/PluggableMap} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(active) {\n    this.set(InteractionProperty.ACTIVE, active);\n  }\n\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {module:ol/PluggableMap} map Map.\n   */\n  setMap(map) {\n    this.map_ = map;\n  }\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {module:ol/coordinate~Coordinate} delta Delta.\n * @param {number=} opt_duration Duration.\n */\nexport function pan(view, delta, opt_duration) {\n  const currentCenter = view.getCenter();\n  if (currentCenter) {\n    const center = view.constrainCenter(\n      [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]);\n    if (opt_duration) {\n      view.animate({\n        duration: opt_duration,\n        easing: linear,\n        center: center\n      });\n    } else {\n      view.setCenter(center);\n    }\n  }\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotate(view, rotation, opt_anchor, opt_duration) {\n  rotation = view.constrainRotation(rotation, 0);\n  rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration) {\n  if (rotation !== undefined) {\n    const currentRotation = view.getRotation();\n    const currentCenter = view.getCenter();\n    if (currentRotation !== undefined && currentCenter && opt_duration > 0) {\n      view.animate({\n        rotation: rotation,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      view.rotate(rotation, opt_anchor);\n    }\n  }\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n * @param {number=} opt_direction Zooming direction; > 0 indicates\n *     zooming out, in which case the constraints system will select\n *     the largest nearest resolution; < 0 indicates zooming in, in\n *     which case the constraints system will select the smallest\n *     nearest resolution; == 0 indicates that the zooming direction\n *     is unknown/not relevant, in which case the constraints system\n *     will select the nearest resolution. If not defined 0 is\n *     assumed.\n */\nexport function zoom(view, resolution, opt_anchor, opt_duration, opt_direction) {\n  resolution = view.constrainResolution(resolution, 0, opt_direction);\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n  const currentResolution = view.getResolution();\n  let resolution = view.constrainResolution(currentResolution, delta, 0);\n\n  if (resolution !== undefined) {\n    const resolutions = view.getResolutions();\n    resolution = clamp(\n      resolution,\n      view.getMinResolution() || resolutions[resolutions.length - 1],\n      view.getMaxResolution() || resolutions[0]);\n  }\n\n  // If we have a constraint on center, we need to change the anchor so that the\n  // new center is within the extent. We first calculate the new center, apply\n  // the constraint to it, and then calculate back the anchor\n  if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n    const currentCenter = view.getCenter();\n    let center = view.calculateCenterZoom(resolution, opt_anchor);\n    center = view.constrainCenter(center);\n\n    opt_anchor = [\n      (resolution * currentCenter[0] - currentResolution * center[0]) /\n          (resolution - currentResolution),\n      (resolution * currentCenter[1] - currentResolution * center[1]) /\n          (resolution - currentResolution)\n    ];\n  }\n\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration) {\n  if (resolution) {\n    const currentResolution = view.getResolution();\n    const currentCenter = view.getCenter();\n    if (currentResolution !== undefined && currentCenter &&\n        resolution !== currentResolution && opt_duration) {\n      view.animate({\n        resolution: resolution,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      if (opt_anchor) {\n        const center = view.calculateCenterZoom(resolution, opt_anchor);\n        view.setCenter(center);\n      }\n      view.setResolution(resolution);\n    }\n  }\n}\n\nexport default Interaction;\n","/**\n * @module ol/has\n */\n\nconst ua = typeof navigator !== 'undefined' ?\n  navigator.userAgent.toLowerCase() : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.indexOf('firefox') !== -1;\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.indexOf('macintosh') !== -1;\n\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n\n\n/**\n * True if the browser's Canvas implementation implements {get,set}LineDash.\n * @type {boolean}\n */\nexport const CANVAS_LINE_DASH = function() {\n  let has = false;\n  try {\n    has = !!document.createElement('canvas').getContext('2d').setLineDash;\n  } catch (e) {\n    // pass\n  }\n  return has;\n}();\n\n\n/**\n * Is HTML5 geolocation supported in the current browser?\n * @const\n * @type {boolean}\n * @api\n */\nexport const GEOLOCATION = 'geolocation' in navigator;\n\n\n/**\n * True if browser supports touch events.\n * @const\n * @type {boolean}\n * @api\n */\nexport const TOUCH = 'ontouchstart' in window;\n\n\n/**\n * True if browser supports pointer events.\n * @const\n * @type {boolean}\n */\nexport const POINTER = 'PointerEvent' in window;\n\n\n/**\n * True if browser supports ms pointer events (IE 10).\n * @const\n * @type {boolean}\n */\nexport const MSPOINTER = !!(navigator.msPointerEnabled);\n\n\nexport {HAS as WEBGL} from './webgl.js';\n","/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass Event {\n\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Stop event propagation.\n   * @function\n   * @api\n   */\n  preventDefault() {\n    this.propagationStopped = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @function\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n\n}\n\n\n/**\n * @param {Event|module:ol/events/Event} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n\n/**\n * @param {Event|module:ol/events/Event} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default Event;\n","/**\n * @module ol/format/Feature\n */\nimport Geometry from '../geom/Geometry.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, equivalent as equivalentProjection, transformExtent} from '../proj.js';\n\n\n/**\n * @typedef {Object} ReadOptions\n * @property {module:ol/proj~ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {module:ol/extent~Extent} [extent] Tile extent of the tile being read. This is only used and\n * required for {@link module:ol/format/MVT}.\n * @property {module:ol/proj~ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n\n\n/**\n * @typedef {Object} WriteOptions\n * @property {module:ol/proj~ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {module:ol/proj~ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {module:ol/format/Feature~FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @abstract\n * @api\n */\nclass FeatureFormat {\n  constructor() {\n\n    /**\n     * @protected\n     * @type {module:ol/proj/Projection}\n     */\n    this.dataProjection = null;\n\n    /**\n     * @protected\n     * @type {module:ol/proj/Projection}\n     */\n    this.defaultFeatureProjection = null;\n\n  }\n\n  /**\n   * Adds the data projection to the read options.\n   * @param {Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n   * @return {module:ol/format/Feature~ReadOptions|undefined} Options.\n   * @protected\n   */\n  getReadOptions(source, opt_options) {\n    let options;\n    if (opt_options) {\n      options = {\n        dataProjection: opt_options.dataProjection ?\n          opt_options.dataProjection : this.readProjection(source),\n        featureProjection: opt_options.featureProjection\n      };\n    }\n    return this.adaptOptions(options);\n  }\n\n  /**\n   * Sets the `dataProjection` on the options, if no `dataProjection`\n   * is set.\n   * @param {module:ol/format/Feature~WriteOptions|module:ol/format/Feature~ReadOptions|undefined} options\n   *     Options.\n   * @protected\n   * @return {module:ol/format/Feature~WriteOptions|module:ol/format/Feature~ReadOptions|undefined}\n   *     Updated options.\n   */\n  adaptOptions(options) {\n    return assign({\n      dataProjection: this.dataProjection,\n      featureProjection: this.defaultFeatureProjection\n    }, options);\n  }\n\n  /**\n   * Get the extent from the source of the last {@link readFeatures} call.\n   * @return {module:ol/extent~Extent} Tile extent.\n   */\n  getLastExtent() {\n    return null;\n  }\n\n  /**\n   * @abstract\n   * @return {module:ol/format/FormatType} Format.\n   */\n  getType() {}\n\n  /**\n   * Read a single feature from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {module:ol/Feature} Feature.\n   */\n  readFeature(source, opt_options) {}\n\n  /**\n   * Read all features from a source.\n   *\n   * @abstract\n   * @param {Document|Node|ArrayBuffer|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {Array<module:ol/Feature>} Features.\n   */\n  readFeatures(source, opt_options) {}\n\n  /**\n   * Read a single geometry from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {module:ol/geom/Geometry} Geometry.\n   */\n  readGeometry(source, opt_options) {}\n\n  /**\n   * Read the projection from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @return {module:ol/proj/Projection} Projection.\n   */\n  readProjection(source) {}\n\n  /**\n   * Encode a feature in this format.\n   *\n   * @abstract\n   * @param {module:ol/Feature} feature Feature.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeFeature(feature, opt_options) {}\n\n  /**\n   * Encode an array of features in this format.\n   *\n   * @abstract\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeFeatures(features, opt_options) {}\n\n  /**\n   * Write a single geometry in this format.\n   *\n   * @abstract\n   * @param {module:ol/geom/Geometry} geometry Geometry.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeGeometry(geometry, opt_options) {}\n}\n\nexport default FeatureFormat;\n\n/**\n * @param {module:ol/geom/Geometry|module:ol/extent~Extent} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {module:ol/format/Feature~WriteOptions|module:ol/format/Feature~ReadOptions|undefined} opt_options\n *     Options.\n * @return {module:ol/geom/Geometry|module:ol/extent~Extent} Transformed geometry.\n */\nexport function transformWithOptions(geometry, write, opt_options) {\n  const featureProjection = opt_options ?\n    getProjection(opt_options.featureProjection) : null;\n  const dataProjection = opt_options ?\n    getProjection(opt_options.dataProjection) : null;\n  /**\n   * @type {module:ol/geom/Geometry|module:ol/extent~Extent}\n   */\n  let transformed;\n  if (featureProjection && dataProjection &&\n      !equivalentProjection(featureProjection, dataProjection)) {\n    if (geometry instanceof Geometry) {\n      transformed = (write ? geometry.clone() : geometry).transform(\n        write ? featureProjection : dataProjection,\n        write ? dataProjection : featureProjection);\n    } else {\n      // FIXME this is necessary because GML treats extents\n      // as geometries\n      transformed = transformExtent(\n        geometry,\n        dataProjection,\n        featureProjection);\n    }\n  } else {\n    transformed = geometry;\n  }\n  if (write && opt_options && opt_options.decimals !== undefined) {\n    const power = Math.pow(10, opt_options.decimals);\n    // if decimals option on write, round each coordinate appropriately\n    /**\n     * @param {Array<number>} coordinates Coordinates.\n     * @return {Array<number>} Transformed coordinates.\n     */\n    const transform = function(coordinates) {\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power) / power;\n      }\n      return coordinates;\n    };\n    if (transformed === geometry) {\n      transformed = transformed.clone();\n    }\n    transformed.applyTransform(transform);\n  }\n  return transformed;\n}\n","/**\n * @module ol/geom/SimpleGeometry\n */\nimport {FALSE} from '../functions.js';\nimport {createOrUpdateFromFlatCoordinates, getCenter} from '../extent.js';\nimport Geometry from '../geom/Geometry.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport {rotate, scale, translate, transform2D} from '../geom/flat/transform.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nclass SimpleGeometry extends Geometry {\n  constructor() {\n\n    super();\n\n    /**\n     * @protected\n     * @type {module:ol/geom/GeometryLayout}\n     */\n    this.layout = GeometryLayout.XY;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.stride = 2;\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.flatCoordinates = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromFlatCoordinates(this.flatCoordinates,\n      0, this.flatCoordinates.length, this.stride, extent);\n  }\n\n  /**\n   * @abstract\n   * @return {Array} Coordinates.\n   */\n  getCoordinates() {}\n\n  /**\n   * Return the first coordinate of the geometry.\n   * @return {module:ol/coordinate~Coordinate} First coordinate.\n   * @api\n   */\n  getFirstCoordinate() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat coordinates.\n   */\n  getFlatCoordinates() {\n    return this.flatCoordinates;\n  }\n\n  /**\n   * Return the last coordinate of the geometry.\n   * @return {module:ol/coordinate~Coordinate} Last point.\n   * @api\n   */\n  getLastCoordinate() {\n    return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n  }\n\n  /**\n   * Return the {@link module:ol/geom/GeometryLayout~GeometryLayout layout} of the geometry.\n   * @return {module:ol/geom/GeometryLayout} Layout.\n   * @api\n   */\n  getLayout() {\n    return this.layout;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision != this.getRevision()) {\n      clear(this.simplifiedGeometryCache);\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    // If squaredTolerance is negative or if we know that simplification will not\n    // have any effect then just return this.\n    if (squaredTolerance < 0 ||\n        (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n         squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n      return this;\n    }\n    const key = squaredTolerance.toString();\n    if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n      return this.simplifiedGeometryCache[key];\n    } else {\n      const simplifiedGeometry =\n          this.getSimplifiedGeometryInternal(squaredTolerance);\n      const simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n      if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n        this.simplifiedGeometryCache[key] = simplifiedGeometry;\n        return simplifiedGeometry;\n      } else {\n        // Simplification did not actually remove any coordinates.  We now know\n        // that any calls to getSimplifiedGeometry with a squaredTolerance less\n        // than or equal to the current squaredTolerance will also not have any\n        // effect.  This allows us to short circuit simplification (saving CPU\n        // cycles) and prevents the cache of simplified geometries from filling\n        // up with useless identical copies of this geometry (saving memory).\n        this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n        return this;\n      }\n    }\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {module:ol/geom/SimpleGeometry} Simplified geometry.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    return this;\n  }\n\n  /**\n   * @return {number} Stride.\n   */\n  getStride() {\n    return this.stride;\n  }\n\n  /**\n   * @param {module:ol/geom/GeometryLayout} layout Layout.\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n    */\n  setFlatCoordinates(layout, flatCoordinates) {\n    this.stride = getStrideForLayout(layout);\n    this.layout = layout;\n    this.flatCoordinates = flatCoordinates;\n  }\n\n  /**\n   * @abstract\n   * @param {!Array} coordinates Coordinates.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   */\n  setCoordinates(coordinates, opt_layout) {}\n\n  /**\n   * @param {module:ol/geom/GeometryLayout|undefined} layout Layout.\n   * @param {Array} coordinates Coordinates.\n   * @param {number} nesting Nesting.\n   * @protected\n   */\n  setLayout(layout, coordinates, nesting) {\n    /** @type {number} */\n    let stride;\n    if (layout) {\n      stride = getStrideForLayout(layout);\n    } else {\n      for (let i = 0; i < nesting; ++i) {\n        if (coordinates.length === 0) {\n          this.layout = GeometryLayout.XY;\n          this.stride = 2;\n          return;\n        } else {\n          coordinates = /** @type {Array} */ (coordinates[0]);\n        }\n      }\n      stride = coordinates.length;\n      layout = getLayoutForStride(stride);\n    }\n    this.layout = layout;\n    this.stride = stride;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  applyTransform(transformFn) {\n    if (this.flatCoordinates) {\n      transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      rotate(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, angle, anchor, flatCoordinates);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    let sy = opt_sy;\n    if (sy === undefined) {\n      sy = sx;\n    }\n    let anchor = opt_anchor;\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      scale(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, sx, sy, anchor, flatCoordinates);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      translate(\n        flatCoordinates, 0, flatCoordinates.length, stride,\n        deltaX, deltaY, flatCoordinates);\n      this.changed();\n    }\n  }\n}\n\n\n/**\n * @param {number} stride Stride.\n * @return {module:ol/geom/GeometryLayout} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n  let layout;\n  if (stride == 2) {\n    layout = GeometryLayout.XY;\n  } else if (stride == 3) {\n    layout = GeometryLayout.XYZ;\n  } else if (stride == 4) {\n    layout = GeometryLayout.XYZM;\n  }\n  return (\n    /** @type {module:ol/geom/GeometryLayout} */ (layout)\n  );\n}\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n  let stride;\n  if (layout == GeometryLayout.XY) {\n    stride = 2;\n  } else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n    stride = 3;\n  } else if (layout == GeometryLayout.XYZM) {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n}\n\n\n/**\n * @inheritDoc\n */\nSimpleGeometry.prototype.containsXY = FALSE;\n\n\n/**\n * @param {module:ol/geom/SimpleGeometry} simpleGeometry Simple geometry.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n  const flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  } else {\n    const stride = simpleGeometry.getStride();\n    return transform2D(\n      flatCoordinates, 0, flatCoordinates.length, stride,\n      transform, opt_dest);\n  }\n}\n\nexport default SimpleGeometry;\n","/**\n * @module ol/easing\n */\n\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n  return Math.pow(t, 3);\n}\n\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n  return 1 - easeIn(1 - t);\n}\n\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n  return 3 * t * t - 2 * t * t * t;\n}\n\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n  return t;\n}\n\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing~inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n  if (t < 0.5) {\n    return inAndOut(2 * t);\n  } else {\n    return 1 - inAndOut(2 * (t - 0.5));\n  }\n}\n","/**\n * @module ol/layer/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  SOURCE: 'source'\n};\n","/**\n * @module ol/featureloader\n */\nimport {VOID} from './functions.js';\nimport FormatType from './format/FormatType.js';\n\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area to be loaded,\n * a `{number}` representing the resolution (map units per pixel) and an\n * {@link module:ol/proj/Projection} for the projection  as\n * arguments. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:module:ol/source/Vector, module:ol/extent~Extent, number,\n *                    module:ol/proj/Projection)} FeatureLoader\n * @api\n */\n\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(module:ol/extent~Extent, number, module:ol/proj/Projection): string} FeatureUrlFunction\n * @api\n */\n\n\n/**\n * @param {string|module:ol/featureloader~FeatureUrlFunction} url Feature URL service.\n * @param {module:ol/format/Feature} format Feature format.\n * @param {function(this:module:ol/VectorTile, Array<module:ol/Feature>, module:ol/proj/Projection, module:ol/extent~Extent)|function(this:module:ol/source/Vector, Array<module:ol/Feature>)} success\n *     Function called with the loaded features and optionally with the data\n *     projection. Called with the vector tile or source as `this`.\n * @param {function(this:module:ol/VectorTile)|function(this:module:ol/source/Vector)} failure\n *     Function called when loading failed. Called with the vector tile or\n *     source as `this`.\n * @return {module:ol/featureloader~FeatureLoader} The feature loader.\n */\nexport function loadFeaturesXhr(url, format, success, failure) {\n  return (\n    /**\n     * @param {module:ol/extent~Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {module:ol/proj/Projection} projection Projection.\n     * @this {module:ol/source/Vector|module:ol/VectorTile}\n     */\n    function(extent, resolution, projection) {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET',\n        typeof url === 'function' ? url(extent, resolution, projection) : url,\n        true);\n      if (format.getType() == FormatType.ARRAY_BUFFER) {\n        xhr.responseType = 'arraybuffer';\n      }\n      /**\n       * @param {Event} event Event.\n       * @private\n       */\n      xhr.onload = function(event) {\n        // status will be 0 for file:// urls\n        if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n          const type = format.getType();\n          /** @type {Document|Node|Object|string|undefined} */\n          let source;\n          if (type == FormatType.JSON || type == FormatType.TEXT) {\n            source = xhr.responseText;\n          } else if (type == FormatType.XML) {\n            source = xhr.responseXML;\n            if (!source) {\n              source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n            }\n          } else if (type == FormatType.ARRAY_BUFFER) {\n            source = /** @type {ArrayBuffer} */ (xhr.response);\n          }\n          if (source) {\n            success.call(this, format.readFeatures(source,\n              {featureProjection: projection}),\n            format.readProjection(source), format.getLastExtent());\n          } else {\n            failure.call(this);\n          }\n        } else {\n          failure.call(this);\n        }\n      }.bind(this);\n      /**\n       * @private\n       */\n      xhr.onerror = function() {\n        failure.call(this);\n      }.bind(this);\n      xhr.send();\n    }\n  );\n}\n\n\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|module:ol/featureloader~FeatureUrlFunction} url Feature URL service.\n * @param {module:ol/format/Feature} format Feature format.\n * @return {module:ol/featureloader~FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n  return loadFeaturesXhr(url, format,\n    /**\n     * @param {Array<module:ol/Feature>} features The loaded features.\n     * @param {module:ol/proj/Projection} dataProjection Data\n     * projection.\n     * @this {module:ol/source/Vector}\n     */\n    function(features, dataProjection) {\n      this.addFeatures(features);\n    }, /* FIXME handle error */ VOID);\n}\n","/**\n * @module ol/loadingstrategy\n */\n\n\n/**\n * Strategy function for loading all features with a single request.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<module:ol/extent~Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n\n\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<module:ol/extent~Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n\n\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @return {function(module:ol/extent~Extent, number): Array<module:ol/extent~Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {module:ol/extent~Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @return {Array<module:ol/extent~Extent>} Extents.\n     */\n    function(extent, resolution) {\n      const z = tileGrid.getZForResolution(resolution);\n      const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n      /** @type {Array<module:ol/extent~Extent>} */\n      const extents = [];\n      /** @type {module:ol/tilecoord~TileCoord} */\n      const tileCoord = [z, 0, 0];\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n          extents.push(tileGrid.getTileCoordExtent(tileCoord));\n        }\n      }\n      return extents;\n    }\n  );\n}\n","/**\n * @module ol/source/VectorEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event ol/source/Vector~VectorSourceEvent#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event ol/source/Vector~VectorSourceEvent#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event ol/source/Vector~VectorSourceEvent#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n   * @event ol/source/Vector~VectorSourceEvent#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature'\n};\n","/**\n * @module ol/structs/RBush\n */\nimport {getUid} from '../util.js';\nimport rbush from 'rbush';\nimport {createOrUpdate, equals} from '../extent.js';\nimport {isEmpty} from '../obj.js';\n\n/**\n * @typedef {Object} Entry\n * @property {number} minX\n * @property {number} minY\n * @property {number} maxX\n * @property {number} maxY\n * @property {Object} [value]\n */\n\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nclass RBush {\n  /**\n   * @param {number=} opt_maxEntries Max entries.\n   */\n  constructor(opt_maxEntries) {\n\n    /**\n     * @private\n     */\n    this.rbush_ = rbush(opt_maxEntries, undefined);\n\n    /**\n     * A mapping between the objects added to this rbush wrapper\n     * and the objects that are actually added to the internal rbush.\n     * @private\n     * @type {Object<number, module:ol/structs/RBush~Entry>}\n     */\n    this.items_ = {};\n\n  }\n\n  /**\n   * Insert a value into the RBush.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  insert(extent, value) {\n    /** @type {module:ol/structs/RBush~Entry} */\n    const item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value\n    };\n\n    this.rbush_.insert(item);\n    this.items_[getUid(value)] = item;\n  }\n\n\n  /**\n   * Bulk-insert values into the RBush.\n   * @param {Array<module:ol/extent~Extent>} extents Extents.\n   * @param {Array<T>} values Values.\n   */\n  load(extents, values) {\n    const items = new Array(values.length);\n    for (let i = 0, l = values.length; i < l; i++) {\n      const extent = extents[i];\n      const value = values[i];\n\n      /** @type {module:ol/structs/RBush~Entry} */\n      const item = {\n        minX: extent[0],\n        minY: extent[1],\n        maxX: extent[2],\n        maxY: extent[3],\n        value: value\n      };\n      items[i] = item;\n      this.items_[getUid(value)] = item;\n    }\n    this.rbush_.load(items);\n  }\n\n\n  /**\n   * Remove a value from the RBush.\n   * @param {T} value Value.\n   * @return {boolean} Removed.\n   */\n  remove(value) {\n    const uid = getUid(value);\n\n    // get the object in which the value was wrapped when adding to the\n    // internal rbush. then use that object to do the removal.\n    const item = this.items_[uid];\n    delete this.items_[uid];\n    return this.rbush_.remove(item) !== null;\n  }\n\n\n  /**\n   * Update the extent of a value in the RBush.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  update(extent, value) {\n    const item = this.items_[getUid(value)];\n    const bbox = [item.minX, item.minY, item.maxX, item.maxY];\n    if (!equals(bbox, extent)) {\n      this.remove(value);\n      this.insert(extent, value);\n    }\n  }\n\n\n  /**\n   * Return all values in the RBush.\n   * @return {Array<T>} All.\n   */\n  getAll() {\n    const items = this.rbush_.all();\n    return items.map(function(item) {\n      return item.value;\n    });\n  }\n\n\n  /**\n   * Return all values in the given extent.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @return {Array<T>} All in extent.\n   */\n  getInExtent(extent) {\n    /** @type {module:ol/structs/RBush~Entry} */\n    const bbox = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3]\n    };\n    const items = this.rbush_.search(bbox);\n    return items.map(function(item) {\n      return item.value;\n    });\n  }\n\n\n  /**\n   * Calls a callback function with each value in the tree.\n   * If the callback returns a truthy value, this value is returned without\n   * checking the rest of the tree.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEach(callback, opt_this) {\n    return this.forEach_(this.getAll(), callback, opt_this);\n  }\n\n\n  /**\n   * Calls a callback function with each value in the provided extent.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEachInExtent(extent, callback, opt_this) {\n    return this.forEach_(this.getInExtent(extent), callback, opt_this);\n  }\n\n\n  /**\n   * @param {Array<T>} values Values.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @private\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEach_(values, callback, opt_this) {\n    let result;\n    for (let i = 0, l = values.length; i < l; i++) {\n      result = callback.call(opt_this, values[i]);\n      if (result) {\n        return result;\n      }\n    }\n    return result;\n  }\n\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return isEmpty(this.items_);\n  }\n\n\n  /**\n   * Remove all values from the RBush.\n   */\n  clear() {\n    this.rbush_.clear();\n    this.items_ = {};\n  }\n\n\n  /**\n   * @param {module:ol/extent~Extent=} opt_extent Extent.\n   * @return {module:ol/extent~Extent} Extent.\n   */\n  getExtent(opt_extent) {\n    // FIXME add getExtent() to rbush\n    const data = this.rbush_.data;\n    return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n  }\n\n\n  /**\n   * @param {module:ol/structs/RBush} rbush R-Tree.\n   */\n  concat(rbush) {\n    this.rbush_.load(rbush.rbush_.all());\n    for (const i in rbush.items_) {\n      this.items_[i | 0] = rbush.items_[i | 0];\n    }\n  }\n\n}\n\n\nexport default RBush;\n","/**\n * @module ol/source/Vector\n */\n\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {extend} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, equals} from '../extent.js';\nimport {xhr} from '../featureloader.js';\nimport {TRUE, VOID} from '../functions.js';\nimport {all as allStrategy} from '../loadingstrategy.js';\nimport {isEmpty, getValues} from '../obj.js';\nimport Source from '../source/Source.js';\nimport SourceState from '../source/State.js';\nimport VectorEventType from '../source/VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(module:ol/extent~Extent, number): Array<module:ol/extent~Extent>} LoadingStrategy\n * @api\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n */\nexport class VectorSourceEvent extends Event {\n\n  /**\n   * @param {string} type Type.\n   * @param {module:ol/Feature=} opt_feature Feature.\n   */\n  constructor(type, opt_feature) {\n\n    super(type);\n\n    /**\n     * The feature being added or removed.\n     * @type {module:ol/Feature|undefined}\n     * @api\n     */\n    this.feature = opt_feature;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {Array<module:ol/Feature>|module:ol/Collection<module:ol/Feature>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {module:ol/format/Feature} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {module:ol/featureloader~FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          vectorSource.addFeatures(\n *              vectorSource.getFormat().readFeatures(xhr.responseText));\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {module:ol/source/Vector~LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy~all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|module:ol/featureloader~FeatureUrlfunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader~xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy~all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlfunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180 and 180 meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires ol/source/Vector~VectorSourceEvent\n * @api\n */\nclass VectorSource extends Source {\n  /**\n   * @param {module:ol/source/Vector~Options=} opt_options Vector source options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    super({\n      attributions: options.attributions,\n      projection: undefined,\n      state: SourceState.READY,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true\n    });\n\n    /**\n     * @private\n     * @type {module:ol/featureloader~FeatureLoader}\n     */\n    this.loader_ = VOID;\n\n    /**\n     * @private\n     * @type {module:ol/format/Feature|undefined}\n     */\n    this.format_ = options.format;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n\n    /**\n     * @private\n     * @type {string|module:ol/featureloader~FeatureUrlFunction|undefined}\n     */\n    this.url_ = options.url;\n\n    if (options.loader !== undefined) {\n      this.loader_ = options.loader;\n    } else if (this.url_ !== undefined) {\n      assert(this.format_, 7); // `format` must be set when `url` is set\n      // create a XHR feature loader for \"url\" and \"format\"\n      this.loader_ = xhr(this.url_, /** @type {module:ol/format/Feature} */ (this.format_));\n    }\n\n    /**\n     * @private\n     * @type {module:ol/source/Vector~LoadingStrategy}\n     */\n    this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n\n    const useSpatialIndex =\n        options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n\n    /**\n     * @private\n     * @type {module:ol/structs/RBush<module:ol/Feature>}\n     */\n    this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n\n    /**\n     * @private\n     * @type {module:ol/structs/RBush<{extent: module:ol/extent~Extent}>}\n     */\n    this.loadedExtentsRtree_ = new RBush();\n\n    /**\n     * @private\n     * @type {!Object<string, module:ol/Feature>}\n     */\n    this.nullGeometryFeatures_ = {};\n\n    /**\n     * A lookup of features by id (the return from feature.getId()).\n     * @private\n     * @type {!Object<string, module:ol/Feature>}\n     */\n    this.idIndex_ = {};\n\n    /**\n     * A lookup of features without id (keyed by getUid(feature)).\n     * @private\n     * @type {!Object<string, module:ol/Feature>}\n     */\n    this.undefIdIndex_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, Array<module:ol/events~EventsKey>>}\n     */\n    this.featureChangeKeys_ = {};\n\n    /**\n     * @private\n     * @type {module:ol/Collection<module:ol/Feature>}\n     */\n    this.featuresCollection_ = null;\n\n    let collection, features;\n    if (options.features instanceof Collection) {\n      collection = options.features;\n      features = collection.getArray();\n    } else if (Array.isArray(options.features)) {\n      features = options.features;\n    }\n    if (!useSpatialIndex && collection === undefined) {\n      collection = new Collection(features);\n    }\n    if (features !== undefined) {\n      this.addFeaturesInternal(features);\n    }\n    if (collection !== undefined) {\n      this.bindFeaturesCollection_(collection);\n    }\n\n  }\n\n  /**\n   * Add a single feature to the source.  If you want to add a batch of features\n   * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n   * instead. A feature will not be added to the source if feature with\n   * the same id is already there. The reason for this behavior is to avoid\n   * feature duplication when using bbox or tile loading strategies.\n   * @param {module:ol/Feature} feature Feature to add.\n   * @api\n   */\n  addFeature(feature) {\n    this.addFeatureInternal(feature);\n    this.changed();\n  }\n\n\n  /**\n   * Add a feature without firing a `change` event.\n   * @param {module:ol/Feature} feature Feature.\n   * @protected\n   */\n  addFeatureInternal(feature) {\n    const featureKey = getUid(feature).toString();\n\n    if (!this.addToIndex_(featureKey, feature)) {\n      return;\n    }\n\n    this.setupChangeEvents_(featureKey, feature);\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      const extent = geometry.getExtent();\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n\n    this.dispatchEvent(\n      new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n  }\n\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {module:ol/Feature} feature The feature.\n   * @private\n   */\n  setupChangeEvents_(featureKey, feature) {\n    this.featureChangeKeys_[featureKey] = [\n      listen(feature, EventType.CHANGE,\n        this.handleFeatureChange_, this),\n      listen(feature, ObjectEventType.PROPERTYCHANGE,\n        this.handleFeatureChange_, this)\n    ];\n  }\n\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {module:ol/Feature} feature The feature.\n   * @return {boolean} The feature is \"valid\", in the sense that it is also a\n   *     candidate for insertion into the Rtree.\n   * @private\n   */\n  addToIndex_(featureKey, feature) {\n    let valid = true;\n    const id = feature.getId();\n    if (id !== undefined) {\n      if (!(id.toString() in this.idIndex_)) {\n        this.idIndex_[id.toString()] = feature;\n      } else {\n        valid = false;\n      }\n    } else {\n      assert(!(featureKey in this.undefIdIndex_),\n        30); // The passed `feature` was already added to the source\n      this.undefIdIndex_[featureKey] = feature;\n    }\n    return valid;\n  }\n\n\n  /**\n   * Add a batch of features to the source.\n   * @param {Array<module:ol/Feature>} features Features to add.\n   * @api\n   */\n  addFeatures(features) {\n    this.addFeaturesInternal(features);\n    this.changed();\n  }\n\n\n  /**\n   * Add features without firing a `change` event.\n   * @param {Array<module:ol/Feature>} features Features.\n   * @protected\n   */\n  addFeaturesInternal(features) {\n    const extents = [];\n    const newFeatures = [];\n    const geometryFeatures = [];\n\n    for (let i = 0, length = features.length; i < length; i++) {\n      const feature = features[i];\n      const featureKey = getUid(feature).toString();\n      if (this.addToIndex_(featureKey, feature)) {\n        newFeatures.push(feature);\n      }\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      const feature = newFeatures[i];\n      const featureKey = getUid(feature).toString();\n      this.setupChangeEvents_(featureKey, feature);\n\n      const geometry = feature.getGeometry();\n      if (geometry) {\n        const extent = geometry.getExtent();\n        extents.push(extent);\n        geometryFeatures.push(feature);\n      } else {\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    }\n    if (this.featuresRtree_) {\n      this.featuresRtree_.load(extents, geometryFeatures);\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n    }\n  }\n\n\n  /**\n   * @param {!module:ol/Collection<module:ol/Feature>} collection Collection.\n   * @private\n   */\n  bindFeaturesCollection_(collection) {\n    let modifyingCollection = false;\n    listen(this, VectorEventType.ADDFEATURE,\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.push(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n    listen(this, VectorEventType.REMOVEFEATURE,\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.remove(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n    listen(collection, CollectionEventType.ADD,\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.addFeature(/** @type {module:ol/Feature} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }, this);\n    listen(collection, CollectionEventType.REMOVE,\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.removeFeature(/** @type {module:ol/Feature} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }, this);\n    this.featuresCollection_ = collection;\n  }\n\n\n  /**\n   * Remove all features from the source.\n   * @param {boolean=} opt_fast Skip dispatching of {@link module:ol/source/Vector~VectorSourceEvent#removefeature} events.\n   * @api\n   */\n  clear(opt_fast) {\n    if (opt_fast) {\n      for (const featureId in this.featureChangeKeys_) {\n        const keys = this.featureChangeKeys_[featureId];\n        keys.forEach(unlistenByKey);\n      }\n      if (!this.featuresCollection_) {\n        this.featureChangeKeys_ = {};\n        this.idIndex_ = {};\n        this.undefIdIndex_ = {};\n      }\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.forEach(this.removeFeatureInternal, this);\n        for (const id in this.nullGeometryFeatures_) {\n          this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n        }\n      }\n    }\n    if (this.featuresCollection_) {\n      this.featuresCollection_.clear();\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.clear();\n    }\n    this.loadedExtentsRtree_.clear();\n    this.nullGeometryFeatures_ = {};\n\n    const clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n    this.dispatchEvent(clearEvent);\n    this.changed();\n  }\n\n\n  /**\n   * Iterate through all features on the source, calling the provided callback\n   * with each one.  If the callback returns any \"truthy\" value, iteration will\n   * stop and the function will return the same value.\n   * Note: this function only iterate through the feature that have a defined geometry.\n   *\n   * @param {function(module:ol/Feature): T} callback Called with each feature\n   *     on the source.  Return a truthy value to stop iteration.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeature(callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEach(callback);\n    } else if (this.featuresCollection_) {\n      return this.featuresCollection_.forEach(callback);\n    }\n  }\n\n\n  /**\n   * Iterate through all features whose geometries contain the provided\n   * coordinate, calling the callback with each feature.  If the callback returns\n   * a \"truthy\" value, iteration will stop and the function will return the same\n   * value.\n   *\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {function(module:ol/Feature): T} callback Called with each feature\n   *     whose goemetry contains the provided coordinate.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   */\n  forEachFeatureAtCoordinateDirect(coordinate, callback) {\n    const extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n    return this.forEachFeatureInExtent(extent, function(feature) {\n      const geometry = feature.getGeometry();\n      if (geometry.intersectsCoordinate(coordinate)) {\n        return callback(feature);\n      } else {\n        return undefined;\n      }\n    });\n  }\n\n\n  /**\n   * Iterate through all features whose bounding box intersects the provided\n   * extent (note that the feature's geometry may not intersect the extent),\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you are interested in features whose geometry intersects an extent, call\n   * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n   *\n   * When `useSpatialIndex` is set to false, this method will loop through all\n   * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n   *\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {function(module:ol/Feature): T} callback Called with each feature\n   *     whose bounding box intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureInExtent(extent, callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEachInExtent(extent, callback);\n    } else if (this.featuresCollection_) {\n      return this.featuresCollection_.forEach(callback);\n    }\n  }\n\n\n  /**\n   * Iterate through all features whose geometry intersects the provided extent,\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you only want to test for bounding box intersection, call the\n   * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n   *\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {function(module:ol/Feature): T} callback Called with each feature\n   *     whose geometry intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureIntersectingExtent(extent, callback) {\n    return this.forEachFeatureInExtent(extent,\n      /**\n       * @param {module:ol/Feature} feature Feature.\n       * @return {T|undefined} The return value from the last call to the callback.\n       * @template T\n       */\n      function(feature) {\n        const geometry = feature.getGeometry();\n        if (geometry.intersectsExtent(extent)) {\n          const result = callback(feature);\n          if (result) {\n            return result;\n          }\n        }\n      });\n  }\n\n\n  /**\n   * Get the features collection associated with this source. Will be `null`\n   * unless the source was configured with `useSpatialIndex` set to `false`, or\n   * with an {@link module:ol/Collection} as `features`.\n   * @return {module:ol/Collection<module:ol/Feature>} The collection of features.\n   * @api\n   */\n  getFeaturesCollection() {\n    return this.featuresCollection_;\n  }\n\n\n  /**\n   * Get all features on the source in random order.\n   * @return {Array<module:ol/Feature>} Features.\n   * @api\n   */\n  getFeatures() {\n    let features;\n    if (this.featuresCollection_) {\n      features = this.featuresCollection_.getArray();\n    } else if (this.featuresRtree_) {\n      features = this.featuresRtree_.getAll();\n      if (!isEmpty(this.nullGeometryFeatures_)) {\n        extend(features, getValues(this.nullGeometryFeatures_));\n      }\n    }\n    return (\n      /** @type {Array<module:ol/Feature>} */ (features)\n    );\n  }\n\n\n  /**\n   * Get all features whose geometry intersects the provided coordinate.\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @return {Array<module:ol/Feature>} Features.\n   * @api\n   */\n  getFeaturesAtCoordinate(coordinate) {\n    const features = [];\n    this.forEachFeatureAtCoordinateDirect(coordinate, function(feature) {\n      features.push(feature);\n    });\n    return features;\n  }\n\n\n  /**\n   * Get all features in the provided extent.  Note that this returns an array of\n   * all features intersecting the given extent in random order (so it may include\n   * features whose geometries do not intersect the extent).\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @return {Array<module:ol/Feature>} Features.\n   * @api\n   */\n  getFeaturesInExtent(extent) {\n    return this.featuresRtree_.getInExtent(extent);\n  }\n\n\n  /**\n   * Get the closest feature to the provided coordinate.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {function(module:ol/Feature):boolean=} opt_filter Feature filter function.\n   *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n   *     and it should return a boolean value. By default, no filtering is made.\n   * @return {module:ol/Feature} Closest feature.\n   * @api\n   */\n  getClosestFeatureToCoordinate(coordinate, opt_filter) {\n    // Find the closest feature using branch and bound.  We start searching an\n    // infinite extent, and find the distance from the first feature found.  This\n    // becomes the closest feature.  We then compute a smaller extent which any\n    // closer feature must intersect.  We continue searching with this smaller\n    // extent, trying to find a closer feature.  Every time we find a closer\n    // feature, we update the extent being searched so that any even closer\n    // feature must intersect it.  We continue until we run out of features.\n    const x = coordinate[0];\n    const y = coordinate[1];\n    let closestFeature = null;\n    const closestPoint = [NaN, NaN];\n    let minSquaredDistance = Infinity;\n    const extent = [-Infinity, -Infinity, Infinity, Infinity];\n    const filter = opt_filter ? opt_filter : TRUE;\n    this.featuresRtree_.forEachInExtent(extent,\n      /**\n       * @param {module:ol/Feature} feature Feature.\n       */\n      function(feature) {\n        if (filter(feature)) {\n          const geometry = feature.getGeometry();\n          const previousMinSquaredDistance = minSquaredDistance;\n          minSquaredDistance = geometry.closestPointXY(\n            x, y, closestPoint, minSquaredDistance);\n          if (minSquaredDistance < previousMinSquaredDistance) {\n            closestFeature = feature;\n            // This is sneaky.  Reduce the extent that it is currently being\n            // searched while the R-Tree traversal using this same extent object\n            // is still in progress.  This is safe because the new extent is\n            // strictly contained by the old extent.\n            const minDistance = Math.sqrt(minSquaredDistance);\n            extent[0] = x - minDistance;\n            extent[1] = y - minDistance;\n            extent[2] = x + minDistance;\n            extent[3] = y + minDistance;\n          }\n        }\n      });\n    return closestFeature;\n  }\n\n\n  /**\n   * Get the extent of the features currently in the source.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {module:ol/extent~Extent=} opt_extent Destination extent. If provided, no new extent\n   *     will be created. Instead, that extent's coordinates will be overwritten.\n   * @return {module:ol/extent~Extent} Extent.\n   * @api\n   */\n  getExtent(opt_extent) {\n    return this.featuresRtree_.getExtent(opt_extent);\n  }\n\n\n  /**\n   * Get a feature by its identifier (the value returned by feature.getId()).\n   * Note that the index treats string and numeric identifiers as the same.  So\n   * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n   *\n   * @param {string|number} id Feature identifier.\n   * @return {module:ol/Feature} The feature (or `null` if not found).\n   * @api\n   */\n  getFeatureById(id) {\n    const feature = this.idIndex_[id.toString()];\n    return feature !== undefined ? feature : null;\n  }\n\n\n  /**\n   * Get the format associated with this source.\n   *\n   * @return {module:ol/format/Feature|undefined} The feature format.\n   * @api\n   */\n  getFormat() {\n    return this.format_;\n  }\n\n\n  /**\n   * @return {boolean} The source can have overlapping geometries.\n   */\n  getOverlaps() {\n    return this.overlaps_;\n  }\n\n\n  /**\n   * @override\n   */\n  getResolutions() {}\n\n\n  /**\n   * Get the url associated with this source.\n   *\n   * @return {string|module:ol/featureloader~FeatureUrlFunction|undefined} The url.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n\n  /**\n   * @param {module:ol/events/Event} event Event.\n   * @private\n   */\n  handleFeatureChange_(event) {\n    const feature = /** @type {module:ol/Feature} */ (event.target);\n    const featureKey = getUid(feature).toString();\n    const geometry = feature.getGeometry();\n    if (!geometry) {\n      if (!(featureKey in this.nullGeometryFeatures_)) {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.remove(feature);\n        }\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    } else {\n      const extent = geometry.getExtent();\n      if (featureKey in this.nullGeometryFeatures_) {\n        delete this.nullGeometryFeatures_[featureKey];\n        if (this.featuresRtree_) {\n          this.featuresRtree_.insert(extent, feature);\n        }\n      } else {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.update(extent, feature);\n        }\n      }\n    }\n    const id = feature.getId();\n    if (id !== undefined) {\n      const sid = id.toString();\n      if (featureKey in this.undefIdIndex_) {\n        delete this.undefIdIndex_[featureKey];\n        this.idIndex_[sid] = feature;\n      } else {\n        if (this.idIndex_[sid] !== feature) {\n          this.removeFromIdIndex_(feature);\n          this.idIndex_[sid] = feature;\n        }\n      }\n    } else {\n      if (!(featureKey in this.undefIdIndex_)) {\n        this.removeFromIdIndex_(feature);\n        this.undefIdIndex_[featureKey] = feature;\n      }\n    }\n    this.changed();\n    this.dispatchEvent(new VectorSourceEvent(\n      VectorEventType.CHANGEFEATURE, feature));\n  }\n\n  /**\n   * Returns true if the feature is contained within the source.\n   * @param {module:ol/Feature} feature Feature.\n   * @return {boolean} Has feature.\n   * @api\n   */\n  hasFeature(feature) {\n    const id = feature.getId();\n    if (id !== undefined) {\n      return id in this.idIndex_;\n    } else {\n      const featureKey = getUid(feature).toString();\n      return featureKey in this.undefIdIndex_;\n    }\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n  }\n\n\n  /**\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {module:ol/proj/Projection} projection Projection.\n   */\n  loadFeatures(extent, resolution, projection) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    const extentsToLoad = this.strategy_(extent, resolution);\n    this.loading = false;\n    for (let i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n      const extentToLoad = extentsToLoad[i];\n      const alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad,\n        /**\n         * @param {{extent: module:ol/extent~Extent}} object Object.\n         * @return {boolean} Contains.\n         */\n        function(object) {\n          return containsExtent(object.extent, extentToLoad);\n        });\n      if (!alreadyLoaded) {\n        this.loader_.call(this, extentToLoad, resolution, projection);\n        loadedExtentsRtree.insert(extentToLoad, {extent: extentToLoad.slice()});\n        this.loading = true;\n      }\n    }\n  }\n\n\n  /**\n   * Remove an extent from the list of loaded extents.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @api\n   */\n  removeLoadedExtent(extent) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    let obj;\n    loadedExtentsRtree.forEachInExtent(extent, function(object) {\n      if (equals(object.extent, extent)) {\n        obj = object;\n        return true;\n      }\n    });\n    if (obj) {\n      loadedExtentsRtree.remove(obj);\n    }\n  }\n\n\n  /**\n   * Remove a single feature from the source.  If you want to remove all features\n   * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n   * instead.\n   * @param {module:ol/Feature} feature Feature to remove.\n   * @api\n   */\n  removeFeature(feature) {\n    const featureKey = getUid(feature).toString();\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n    }\n    this.removeFeatureInternal(feature);\n    this.changed();\n  }\n\n\n  /**\n   * Remove feature without firing a `change` event.\n   * @param {module:ol/Feature} feature Feature.\n   * @protected\n   */\n  removeFeatureInternal(feature) {\n    const featureKey = getUid(feature).toString();\n    this.featureChangeKeys_[featureKey].forEach(unlistenByKey);\n    delete this.featureChangeKeys_[featureKey];\n    const id = feature.getId();\n    if (id !== undefined) {\n      delete this.idIndex_[id.toString()];\n    } else {\n      delete this.undefIdIndex_[featureKey];\n    }\n    this.dispatchEvent(new VectorSourceEvent(\n      VectorEventType.REMOVEFEATURE, feature));\n  }\n\n\n  /**\n   * Remove a feature from the id index.  Called internally when the feature id\n   * may have changed.\n   * @param {module:ol/Feature} feature The feature.\n   * @return {boolean} Removed the feature from the index.\n   * @private\n   */\n  removeFromIdIndex_(feature) {\n    let removed = false;\n    for (const id in this.idIndex_) {\n      if (this.idIndex_[id] === feature) {\n        delete this.idIndex_[id];\n        removed = true;\n        break;\n      }\n    }\n    return removed;\n  }\n\n\n  /**\n   * Set the new loader of the source. The next loadFeatures call will use the\n   * new loader.\n   * @param {module:ol/featureloader~FeatureLoader} loader The loader to set.\n   * @api\n   */\n  setLoader(loader) {\n    this.loader_ = loader;\n  }\n\n}\n\n\nexport default VectorSource;\n","/**\n * @module ol/geom/LinearRing\n */\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {linearRing as linearRingArea} from '../geom/flat/area.js';\nimport {assignClosestPoint, maxSquaredDelta} from '../geom/flat/closest.js';\nimport {deflateCoordinates} from '../geom/flat/deflate.js';\nimport {inflateCoordinates} from '../geom/flat/inflate.js';\nimport {douglasPeucker} from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nclass LinearRing extends SimpleGeometry {\n\n  /**\n   * @param {Array<module:ol/coordinate~Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, coordinates);\n    } else {\n      this.setCoordinates(coordinates, opt_layout);\n    }\n\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/LinearRing} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new LinearRing(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Return the area of the linear ring on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingArea(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the coordinates of the linear ring.\n   * @return {Array<module:ol/coordinate~Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LinearRing(simplifiedFlatCoordinates, GeometryLayout.XY);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.LINEAR_RING;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  intersectsExtent(extent) {}\n\n  /**\n   * Set the coordinates of the linear ring.\n   * @param {!Array<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default LinearRing;\n","/**\n * @module ol/geom/Polygon\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, getCenter} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LinearRing from '../geom/LinearRing.js';\nimport Point from '../geom/Point.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {offset as sphereOffset} from '../sphere.js';\nimport {linearRings as linearRingsArea} from '../geom/flat/area.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from '../geom/flat/closest.js';\nimport {linearRingsContainsXY} from '../geom/flat/contains.js';\nimport {deflateCoordinatesArray} from '../geom/flat/deflate.js';\nimport {inflateCoordinatesArray} from '../geom/flat/inflate.js';\nimport {getInteriorPointOfArray} from '../geom/flat/interiorpoint.js';\nimport {intersectsLinearRingArray} from '../geom/flat/intersectsextent.js';\nimport {linearRingIsOriented, orientLinearRings} from '../geom/flat/orient.js';\nimport {quantizeArray} from '../geom/flat/simplify.js';\nimport {modulo} from '../math.js';\n\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nclass Polygon extends SimpleGeometry {\n\n  /**\n   * @param {!Array<Array<module:ol/coordinate~Coordinate>>|!Array<number>} coordinates\n   *     Array of linear rings that define the polygon. The first linear ring of the\n   *     array defines the outer-boundary or surface of the polygon. Each subsequent\n   *     linear ring defines a hole in the surface of the polygon. A linear ring is\n   *     an array of vertices' coordinates where the first coordinate and the last are\n   *     equivalent. (For internal use, flat coordinates in combination with\n   *     `opt_layout` and `opt_ends` are also accepted.)\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>=} opt_ends Ends (for internal use with flat coordinates).\n   */\n  constructor(coordinates, opt_layout, opt_ends) {\n\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {module:ol/coordinate~Coordinate}\n     */\n    this.flatInteriorPoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (opt_layout !== undefined && opt_ends) {\n      this.setFlatCoordinates(opt_layout, coordinates);\n      this.ends_ = opt_ends;\n    } else {\n      this.setCoordinates(coordinates, opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed linear ring to this polygon.\n   * @param {module:ol/geom/LinearRing} linearRing Linear ring.\n   * @api\n   */\n  appendLinearRing(linearRing) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/Polygon} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new Polygon(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    return linearRingsContainsXY(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n  }\n\n  /**\n   * Return the area of the polygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingsArea(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for polygons.\n   *\n   * @param {boolean=} opt_right Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<module:ol/coordinate~Coordinate>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates(opt_right) {\n    let flatCoordinates;\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRings(\n        flatCoordinates, 0, this.ends_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateCoordinatesArray(\n      flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * @return {Array<number>} Interior point.\n   */\n  getFlatInteriorPoint() {\n    if (this.flatInteriorPointRevision_ != this.getRevision()) {\n      const flatCenter = getCenter(this.getExtent());\n      this.flatInteriorPoint_ = getInteriorPointOfArray(\n        this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride,\n        flatCenter, 0);\n      this.flatInteriorPointRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoint_;\n  }\n\n  /**\n   * Return an interior point of the polygon.\n   * @return {module:ol/geom/Point} Interior point as XYM coordinate, where M is the\n   * length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoint() {\n    return new Point(this.getFlatInteriorPoint(), GeometryLayout.XYM);\n  }\n\n  /**\n   * Return the number of rings of the polygon,  this includes the exterior\n   * ring and any interior rings.\n   *\n   * @return {number} Number of rings.\n   * @api\n   */\n  getLinearRingCount() {\n    return this.ends_.length;\n  }\n\n  /**\n   * Return the Nth linear ring of the polygon geometry. Return `null` if the\n   * given index is out of range.\n   * The exterior linear ring is available at index `0` and the interior rings\n   * at index `1` and beyond.\n   *\n   * @param {number} index Index.\n   * @return {module:ol/geom/LinearRing} Linear ring.\n   * @api\n   */\n  getLinearRing(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LinearRing(this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  }\n\n  /**\n   * Return the linear rings of the polygon.\n   * @return {Array<module:ol/geom/LinearRing>} Linear rings.\n   * @api\n   */\n  getLinearRings() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const linearRings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const linearRing = new LinearRing(flatCoordinates.slice(offset, end), layout);\n      linearRings.push(linearRing);\n      offset = end;\n    }\n    return linearRings;\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingIsOriented(\n        flatCoordinates, 0, this.ends_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length =\n            orientLinearRings(\n              this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = quantizeArray(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new Polygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.POLYGON;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingArray(\n      this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the polygon.\n   * @param {!Array<Array<module:ol/coordinate~Coordinate>>} coordinates Coordinates.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\n\nexport default Polygon;\n\n\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {module:ol/coordinate~Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices.\n * @param {number=} opt_n Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number=} opt_sphereRadius Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {module:ol/geom/Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, opt_n, opt_sphereRadius) {\n  const n = opt_n ? opt_n : 32;\n  /** @type {Array<number>} */\n  const flatCoordinates = [];\n  for (let i = 0; i < n; ++i) {\n    extend(flatCoordinates, sphereOffset(center, radius, 2 * Math.PI * i / n, opt_sphereRadius));\n  }\n  flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n  return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n\n\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {module:ol/extent~Extent} extent The extent.\n * @return {module:ol/geom/Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const flatCoordinates =\n      [minX, minY, minX, maxY, maxX, maxY, maxX, minY, minX, minY];\n  return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n\n\n/**\n * Create a regular polygon from a circle.\n * @param {module:ol/geom/Circle} circle Circle geometry.\n * @param {number=} opt_sides Number of sides of the polygon. Default is 32.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n * @return {module:ol/geom/Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, opt_sides, opt_angle) {\n  const sides = opt_sides ? opt_sides : 32;\n  const stride = circle.getStride();\n  const layout = circle.getLayout();\n  const center = circle.getCenter();\n  const arrayLength = stride * (sides + 1);\n  const flatCoordinates = new Array(arrayLength);\n  for (let i = 0; i < arrayLength; i += stride) {\n    flatCoordinates[i] = 0;\n    flatCoordinates[i + 1] = 0;\n    for (let j = 2; j < stride; j++) {\n      flatCoordinates[i + j] = center[j];\n    }\n  }\n  const ends = [flatCoordinates.length];\n  const polygon = new Polygon(flatCoordinates, layout, ends);\n  makeRegular(polygon, center, circle.getRadius(), opt_angle);\n  return polygon;\n}\n\n\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {module:ol/geom/Polygon} polygon Polygon geometry.\n * @param {module:ol/coordinate~Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, opt_angle) {\n  const flatCoordinates = polygon.getFlatCoordinates();\n  const stride = polygon.getStride();\n  const sides = flatCoordinates.length / stride - 1;\n  const startAngle = opt_angle ? opt_angle : 0;\n  for (let i = 0; i <= sides; ++i) {\n    const offset = i * stride;\n    const angle = startAngle + (modulo(i, sides) * 2 * Math.PI / sides);\n    flatCoordinates[offset] = center[0] + (radius * Math.cos(angle));\n    flatCoordinates[offset + 1] = center[1] + (radius * Math.sin(angle));\n  }\n  polygon.changed();\n}\n","/**\n * @module ol/tilecoord\n */\n\n\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z`, `x`, and `y`. `z` is the zoom level.\n * @typedef {Array<number>} TileCoord\n * @api\n */\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Tile coordinate.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n  if (opt_tileCoord !== undefined) {\n    opt_tileCoord[0] = z;\n    opt_tileCoord[1] = x;\n    opt_tileCoord[2] = y;\n    return opt_tileCoord;\n  } else {\n    return [z, x, y];\n  }\n}\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n  return z + '/' + x + '/' + y;\n}\n\n\n/**\n * Get the key for a tile coord.\n * @param {module:ol/tilecoord~TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n  return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n\n\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {module:ol/tilecoord~TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n  return key.split('/').map(Number);\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n  return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\nexport function quadKey(tileCoord) {\n  const z = tileCoord[0];\n  const digits = new Array(z);\n  let mask = 1 << (z - 1);\n  let i, charCode;\n  for (i = 0; i < z; ++i) {\n    // 48 is charCode for 0 - '0'.charCodeAt(0)\n    charCode = 48;\n    if (tileCoord[1] & mask) {\n      charCode += 1;\n    }\n    if (tileCoord[2] & mask) {\n      charCode += 2;\n    }\n    digits[i] = String.fromCharCode(charCode);\n    mask >>= 1;\n  }\n  return digits.join('');\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {!module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n  const z = tileCoord[0];\n  const x = tileCoord[1];\n  const y = tileCoord[2];\n\n  if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n    return false;\n  }\n  const extent = tileGrid.getExtent();\n  let tileRange;\n  if (!extent) {\n    tileRange = tileGrid.getFullTileRange(z);\n  } else {\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n  }\n  if (!tileRange) {\n    return true;\n  } else {\n    return tileRange.containsXY(x, y);\n  }\n}\n","/**\n * @module ol/css\n */\n\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {Object<string>} The font families (or null if the input spec is invalid).\n */\nexport const getFontFamilies = (function() {\n  let style;\n  const cache = {};\n  return function(font) {\n    if (!style) {\n      style = document.createElement('div').style;\n    }\n    if (!(font in cache)) {\n      style.font = font;\n      const family = style.fontFamily;\n      style.font = '';\n      if (!family) {\n        return null;\n      }\n      cache[font] = family.split(/,\\s?/);\n    }\n    return cache[font];\n  };\n})();\n","/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport BaseObject from './Object.js';\nimport Event from './events/Event.js';\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nexport class CollectionEvent extends Event {\n\n  /**\n   * @param {module:ol/CollectionEventType} type Type.\n   * @param {*=} opt_element Element.\n   */\n  constructor(type, opt_element) {\n    super(type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {*}\n     * @api\n     */\n    this.element = opt_element;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @template T\n * @api\n */\nclass Collection extends BaseObject {\n\n  /**\n   * @param {Array<T>=} opt_array Array.\n   * @param {module:ol/Collection~Options=} opt_options Collection options.\n   */\n  constructor(opt_array, opt_options) {\n\n    super();\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = opt_array ? opt_array : [];\n\n    if (this.unique_) {\n      for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  clear() {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  }\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {module:ol/Collection<T>} This collection.\n   * @api\n   */\n  extend(arr) {\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  forEach(f) {\n    const array = this.array_;\n    for (let i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  }\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  getArray() {\n    return this.array_;\n  }\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  item(index) {\n    return this.array_[index];\n  }\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  getLength() {\n    return /** @type {number} */ (this.get(Property.LENGTH));\n  }\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  insertAt(index, elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem));\n  }\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  pop() {\n    return this.removeAt(this.getLength() - 1);\n  }\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  push(elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    const n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  }\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  remove(elem) {\n    const arr = this.array_;\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  removeAt(index) {\n    const prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev));\n    return prev;\n  }\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  setAt(index, elem) {\n    const n = this.getLength();\n    if (index < n) {\n      if (this.unique_) {\n        this.assertUnique_(elem, index);\n      }\n      const prev = this.array_[index];\n      this.array_[index] = elem;\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.REMOVE, prev));\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.ADD, elem));\n    } else {\n      for (let j = n; j < index; ++j) {\n        this.insertAt(j, undefined);\n      }\n      this.insertAt(index, elem);\n    }\n  }\n\n  /**\n   * @private\n   */\n  updateLength_() {\n    this.set(Property.LENGTH, this.array_.length);\n  }\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number=} opt_except Optional index to ignore.\n   */\n  assertUnique_(elem, opt_except) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== opt_except) {\n        throw new AssertionError(58);\n      }\n    }\n  }\n}\n\n\nexport default Collection;\n","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/source/State\n */\n\n/**\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n * @enum {string}\n */\nexport default {\n  UNDEFINED: 'undefined',\n  LOADING: 'loading',\n  READY: 'ready',\n  ERROR: 'error'\n};\n","/**\n * @module ol/extent/Relationship\n */\n\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16\n};\n","/**\n * @module ol/size\n */\n\n\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n\n\n/**\n * Returns a buffered size.\n * @param {module:ol/size~Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {module:ol/size~Size=} opt_size Optional reusable size array.\n * @return {module:ol/size~Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = size[0] + 2 * num;\n  opt_size[1] = size[1] + 2 * num;\n  return opt_size;\n}\n\n\n/**\n * Determines if a size has a positive area.\n * @param {module:ol/size~Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n  return size[0] > 0 && size[1] > 0;\n}\n\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {module:ol/size~Size} size Size.\n * @param {number} ratio Ratio.\n * @param {module:ol/size~Size=} opt_size Optional reusable size array.\n * @return {module:ol/size~Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = (size[0] * ratio + 0.5) | 0;\n  opt_size[1] = (size[1] * ratio + 0.5) | 0;\n  return opt_size;\n}\n\n\n/**\n * Returns an `module:ol/size~Size` array for the passed in number (meaning: square) or\n * `module:ol/size~Size` array.\n * (meaning: non-square),\n * @param {number|module:ol/size~Size} size Width and height.\n * @param {module:ol/size~Size=} opt_size Optional reusable size array.\n * @return {module:ol/size~Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n  if (Array.isArray(size)) {\n    return size;\n  } else {\n    if (opt_size === undefined) {\n      opt_size = [size, size];\n    } else {\n      opt_size[0] = opt_size[1] = /** @type {number} */ (size);\n    }\n    return opt_size;\n  }\n}\n","/**\n * @module ol/Observable\n */\nimport {listen, unlistenByKey, unlisten, listenOnce} from './events.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires module:ol/events/Event~Event\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * Listen for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {module:ol/events~EventsKey|Array<module:ol/events~EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  on(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listen(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * Listen once for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {module:ol/events~EventsKey|Array<module:ol/events~EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  once(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listenOnce(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listenOnce(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @api\n   */\n  un(type, listener) {\n    if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        unlisten(this, type[i], listener);\n      }\n      return;\n    } else {\n      unlisten(this, /** @type {string} */ (type), listener);\n    }\n  }\n}\n\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {module:ol/events~EventsKey|Array<module:ol/events~EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {module:ol/events~EventsKey} */ (key));\n  }\n}\n\n\nexport default Observable;\n","/**\n * @module ol/coordinate\n */\nimport {modulo} from './math.js';\nimport {padNumber} from './string.js';\n\n\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n\n\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((module:ol/coordinate~Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n\n\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/coordinate~Coordinate} delta Delta.\n * @return {module:ol/coordinate~Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n  coordinate[0] += delta[0];\n  coordinate[1] += delta[1];\n  return coordinate;\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate The coordinate.\n * @param {module:ol/geom/Circle} circle The circle.\n * @return {module:ol/coordinate~Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n  const r = circle.getRadius();\n  const center = circle.getCenter();\n  const x0 = center[0];\n  const y0 = center[1];\n  const x1 = coordinate[0];\n  const y1 = coordinate[1];\n\n  let dx = x1 - x0;\n  const dy = y1 - y0;\n  if (dx === 0 && dy === 0) {\n    dx = 1;\n  }\n  const d = Math.sqrt(dx * dx + dy * dy);\n\n  const x = x0 + r * dx / d;\n  const y = y0 + r * dy / d;\n\n  return [x, y];\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate The coordinate.\n * @param {Array<module:ol/coordinate~Coordinate>} segment The two coordinates\n * of the segment.\n * @return {module:ol/coordinate~Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n  const x0 = coordinate[0];\n  const y0 = coordinate[1];\n  const start = segment[0];\n  const end = segment[1];\n  const x1 = start[0];\n  const y1 = start[1];\n  const x2 = end[0];\n  const y2 = end[1];\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const along = (dx === 0 && dy === 0) ? 0 :\n    ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0);\n  let x, y;\n  if (along <= 0) {\n    x = x1;\n    y = y1;\n  } else if (along >= 1) {\n    x = x2;\n    y = y2;\n  } else {\n    x = x1 + along * dx;\n    y = y1 + along * dy;\n  }\n  return [x, y];\n}\n\n\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {module:ol/coordinate~Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {module:ol/coordinate~CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(opt_fractionDigits) {\n  return (\n    /**\n     * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function(coordinate) {\n      return toStringXY(coordinate, opt_fractionDigits);\n    }\n  );\n}\n\n\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, opt_fractionDigits) {\n  const normalizedDegrees = modulo(degrees + 180, 360) - 180;\n  const x = Math.abs(3600 * normalizedDegrees);\n  const dflPrecision = opt_fractionDigits || 0;\n  const precision = Math.pow(10, dflPrecision);\n\n  let deg = Math.floor(x / 3600);\n  let min = Math.floor((x - deg * 3600) / 60);\n  let sec = x - (deg * 3600) - (min * 60);\n  sec = Math.ceil(sec * precision) / precision;\n\n  if (sec >= 60) {\n    sec = 0;\n    min += 1;\n  }\n\n  if (min >= 60) {\n    min = 0;\n    deg += 1;\n  }\n\n  return deg + '\\u00b0 ' + padNumber(min, 2) + '\\u2032 ' +\n    padNumber(sec, 2, dflPrecision) + '\\u2033' +\n    (normalizedDegrees == 0 ? '' : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0));\n}\n\n\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, opt_fractionDigits) {\n  if (coordinate) {\n    return template\n      .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n      .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate1 First coordinate.\n * @param {module:ol/coordinate~Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n  let equals = true;\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false;\n      break;\n    }\n  }\n  return equals;\n}\n\n\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n  const cosAngle = Math.cos(angle);\n  const sinAngle = Math.sin(angle);\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  coordinate[0] = x;\n  coordinate[1] = y;\n  return coordinate;\n}\n\n\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n  coordinate[0] *= scale;\n  coordinate[1] *= scale;\n  return coordinate;\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coord1 First coordinate.\n * @param {module:ol/coordinate~Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n  const dx = coord1[0] - coord2[0];\n  const dy = coord1[1] - coord2[1];\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coord1 First coordinate.\n * @param {module:ol/coordinate~Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1, coord2));\n}\n\n\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate of the point.\n * @param {Array<module:ol/coordinate~Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n  return squaredDistance(coordinate,\n    closestOnSegment(coordinate, segment));\n}\n\n\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord);\n *     // out is now '47 58 60 N 7 50 60 E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord, 1);\n *     // out is now '47 58 60.0 N 7 50 60.0 E'\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, opt_fractionDigits) {\n  if (coordinate) {\n    return degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) + ' ' +\n        degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits);\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, opt_fractionDigits) {\n  return format(coordinate, '{x}, {y}', opt_fractionDigits);\n}\n","/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport const ERROR_THRESHOLD = 0.5;\n\n/**\n * Enable automatic reprojection of raster sources. Default is `true`.\n * TODO: decide if we want to expose this as a build flag or remove it\n * @type {boolean}\n */\nexport const ENABLE_RASTER_REPROJECTION = true;\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection~CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection~CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove'\n};\n","/**\n * @module ol/layer/Vector\n */\nimport LayerType from '../LayerType.js';\nimport Layer from '../layer/Layer.js';\nimport VectorRenderType from '../layer/VectorRenderType.js';\nimport {assign} from '../obj.js';\nimport {createDefaultStyle, toFunction as toStyleFunction} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {module:ol/render~OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {module:ol/layer/VectorRenderType|string} [renderMode='vector'] Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but point symbols and\n *    texts are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance.\n * @property {module:ol/source/Vector} [source] Source.\n * @property {module:ol/PluggableMap} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles, and the priority is defined by the z-index of the style. Lower z-index\n * means higher priority.\n * @property {module:ol/style/Style|Array<module:ol/style/Style>|module:ol/style/Style~StyleFunction} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during animations. This means that no\n * vectors will be shown clipped, but the setting will have a performance impact for large\n * amounts of vector data. When set to `false`, batches will be recreated when no animation\n * is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during interactions. See also\n * `updateWhileAnimating`.\n */\n\n\n/**\n * @enum {string}\n * Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance.\n * @api\n */\nexport const RenderType = {\n  IMAGE: 'image',\n  VECTOR: 'vector'\n};\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  RENDER_ORDER: 'renderOrder'\n};\n\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass VectorLayer extends Layer {\n  /**\n   * @param {module:ol/layer/Vector~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ?\n      opt_options : /** @type {module:ol/layer/Vector~Options} */ ({});\n\n    const baseOptions = assign({}, options);\n\n    delete baseOptions.style;\n    delete baseOptions.renderBuffer;\n    delete baseOptions.updateWhileAnimating;\n    delete baseOptions.updateWhileInteracting;\n    super(baseOptions);\n\n    /**\n    * @private\n    * @type {boolean}\n    */\n    this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.renderBuffer_ = options.renderBuffer !== undefined ?\n      options.renderBuffer : 100;\n\n    /**\n    * User provided style.\n    * @type {module:ol/style/Style|Array<module:ol/style/Style>|module:ol/style/Style~StyleFunction}\n    * @private\n    */\n    this.style_ = null;\n\n    /**\n    * Style function for use within the library.\n    * @type {module:ol/style/Style~StyleFunction|undefined}\n    * @private\n    */\n    this.styleFunction_ = undefined;\n\n    this.setStyle(options.style);\n\n    /**\n    * @type {boolean}\n    * @private\n    */\n    this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n      options.updateWhileAnimating : false;\n\n    /**\n    * @type {boolean}\n    * @private\n    */\n    this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n      options.updateWhileInteracting : false;\n\n    /**\n    * @private\n    * @type {module:ol/layer/VectorTileRenderType|string}\n    */\n    this.renderMode_ = options.renderMode || VectorRenderType.VECTOR;\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {module:ol/LayerType}\n    */\n    this.type = LayerType.VECTOR;\n\n  }\n\n  /**\n  * @return {boolean} Declutter.\n  */\n  getDeclutter() {\n    return this.declutter_;\n  }\n\n  /**\n  * @param {boolean} declutter Declutter.\n  */\n  setDeclutter(declutter) {\n    this.declutter_ = declutter;\n  }\n\n  /**\n  * @return {number|undefined} Render buffer.\n  */\n  getRenderBuffer() {\n    return this.renderBuffer_;\n  }\n\n  /**\n  * @return {function(module:ol/Feature, module:ol/Feature): number|null|undefined} Render\n  *     order.\n  */\n  getRenderOrder() {\n    return (\n    /** @type {module:ol/render~OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER))\n    );\n  }\n\n  /**\n  * Get the style for features.  This returns whatever was passed to the `style`\n  * option at construction or to the `setStyle` method.\n  * @return {module:ol/style/Style|Array<module:ol/style/Style>|module:ol/style/Style~StyleFunction}\n  *     Layer style.\n  * @api\n  */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n  * Get the style function.\n  * @return {module:ol/style/Style~StyleFunction|undefined} Layer style function.\n  * @api\n  */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n  * @return {boolean} Whether the rendered layer should be updated while\n  *     animating.\n  */\n  getUpdateWhileAnimating() {\n    return this.updateWhileAnimating_;\n  }\n\n  /**\n  * @return {boolean} Whether the rendered layer should be updated while\n  *     interacting.\n  */\n  getUpdateWhileInteracting() {\n    return this.updateWhileInteracting_;\n  }\n\n  /**\n  * @param {module:ol/render~OrderFunction|null|undefined} renderOrder\n  *     Render order.\n  */\n  setRenderOrder(renderOrder) {\n    this.set(Property.RENDER_ORDER, renderOrder);\n  }\n\n  /**\n  * Set the style for features.  This can be a single style object, an array\n  * of styles, or a function that takes a feature and resolution and returns\n  * an array of styles. If it is `undefined` the default style is used. If\n  * it is `null` the layer has no style (a `null` style), so only features\n  * that have their own styles will be rendered in the layer. See\n  * {@link module:ol/style} for information on the default style.\n  * @param {module:ol/style/Style|Array<module:ol/style/Style>|module:ol/style/Style~StyleFunction|null|undefined} style Layer style.\n  * @api\n  */\n  setStyle(style) {\n    this.style_ = style !== undefined ? style : createDefaultStyle;\n    this.styleFunction_ = style === null ?\n      undefined : toStyleFunction(this.style_);\n    this.changed();\n  }\n\n  /**\n  * @return {module:ol/layer/VectorRenderType|string} The render mode.\n  */\n  getRenderMode() {\n    return this.renderMode_;\n  }\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Vector vectorsource} of the layer.\n * @function\n * @return {module:ol/source/Vector} Source.\n * @api\n */\nVectorLayer.prototype.getSource;\n\n\nexport default VectorLayer;\n","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  FRACTION: 'fraction',\n  PIXELS: 'pixels'\n};\n","/**\n * @module ol/geom/flat/deflate\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n  for (let i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    const coordinate = coordinates[i];\n    for (let j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>=} opt_ends Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n  const ends = opt_ends ? opt_ends : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatess.length; j < jj; ++j) {\n    const end = deflateCoordinates(\n      flatCoordinates, offset, coordinatess[j], stride);\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<module:ol/coordinate~Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>=} opt_endss Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n  const endss = opt_endss ? opt_endss : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    const ends = deflateCoordinatesArray(\n      flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n}\n","/**\n * @module ol/LayerType\n */\n\n/**\n * A layer type used when creating layer renderers.\n * @enum {string}\n */\nexport default {\n  IMAGE: 'IMAGE',\n  TILE: 'TILE',\n  VECTOR_TILE: 'VECTOR_TILE',\n  VECTOR: 'VECTOR'\n};\n","/**\n * @module ol/geom/flat/inflate\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<module:ol/coordinate~Coordinate>=} opt_coordinates Coordinates.\n * @return {Array<module:ol/coordinate~Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(flatCoordinates, offset, end, stride, opt_coordinates) {\n  const coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    coordinates[i++] = flatCoordinates.slice(j, j + stride);\n  }\n  coordinates.length = i;\n  return coordinates;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>=} opt_coordinatess Coordinatess.\n * @return {Array<Array<module:ol/coordinate~Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n  const coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n  let i = 0;\n  for (let j = 0, jj = ends.length; j < jj; ++j) {\n    const end = ends[j];\n    coordinatess[i++] = inflateCoordinates(\n      flatCoordinates, offset, end, stride, coordinatess[i]);\n    offset = end;\n  }\n  coordinatess.length = i;\n  return coordinatess;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<module:ol/coordinate~Coordinate>>>=} opt_coordinatesss\n *     Coordinatesss.\n * @return {Array<Array<Array<module:ol/coordinate~Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n  const coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n  let i = 0;\n  for (let j = 0, jj = endss.length; j < jj; ++j) {\n    const ends = endss[j];\n    coordinatesss[i++] = inflateCoordinatesArray(\n      flatCoordinates, offset, ends, stride, coordinatesss[i]);\n    offset = ends[ends.length - 1];\n  }\n  coordinatesss.length = i;\n  return coordinatesss;\n}\n","/**\n * @module ol/layer/Layer\n */\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getUid} from '../util.js';\nimport {getChangeEventType} from '../Object.js';\nimport BaseLayer from '../layer/Base.js';\nimport LayerProperty from '../layer/Property.js';\nimport {assign} from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {module:ol/source/Source} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {module:ol/layer/Layer} layer\n * @property {number} opacity\n * @property {module:ol/source/Source~State} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {module:ol/extent~Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * @fires module:ol/render/Event~RenderEvent\n */\nclass Layer extends BaseLayer {\n  /**\n   * @param {module:ol/layer/Layer~Options} options Layer options.\n   */\n  constructor(options) {\n\n    const baseOptions = assign({}, options);\n    delete baseOptions.source;\n\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {?module:ol/events~EventsKey}\n     */\n    this.mapPrecomposeKey_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/events~EventsKey}\n     */\n    this.mapRenderKey_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/events~EventsKey}\n     */\n    this.sourceChangeKey_ = null;\n\n    if (options.map) {\n      this.setMap(options.map);\n    }\n\n    listen(this,\n      getChangeEventType(LayerProperty.SOURCE),\n      this.handleSourcePropertyChange_, this);\n\n    const source = options.source ? options.source : null;\n    this.setSource(source);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayersArray(opt_array) {\n    const array = opt_array ? opt_array : [];\n    array.push(this);\n    return array;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayerStatesArray(opt_states) {\n    const states = opt_states ? opt_states : [];\n    states.push(this.getLayerState());\n    return states;\n  }\n\n  /**\n   * Get the layer source.\n   * @return {module:ol/source/Source} The layer source (or `null` if not yet set).\n   * @observable\n   * @api\n   */\n  getSource() {\n    const source = this.get(LayerProperty.SOURCE);\n    return (\n      /** @type {module:ol/source/Source} */ (source) || null\n    );\n  }\n\n  /**\n    * @inheritDoc\n    */\n  getSourceState() {\n    const source = this.getSource();\n    return !source ? SourceState.UNDEFINED : source.getState();\n  }\n\n  /**\n   * @private\n   */\n  handleSourceChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleSourcePropertyChange_() {\n    if (this.sourceChangeKey_) {\n      unlistenByKey(this.sourceChangeKey_);\n      this.sourceChangeKey_ = null;\n    }\n    const source = this.getSource();\n    if (source) {\n      this.sourceChangeKey_ = listen(source,\n        EventType.CHANGE, this.handleSourceChange_, this);\n    }\n    this.changed();\n  }\n\n  /**\n   * Sets the layer to be rendered on top of other layers on a map. The map will\n   * not manage this layer in its layers collection, and the callback in\n   * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n   * is useful for temporary layers. To remove an unmanaged layer from the map,\n   * use `#setMap(null)`.\n   *\n   * To add the layer to a map and have it managed by the map, use\n   * {@link module:ol/Map#addLayer} instead.\n   * @param {module:ol/PluggableMap} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.mapPrecomposeKey_) {\n      unlistenByKey(this.mapPrecomposeKey_);\n      this.mapPrecomposeKey_ = null;\n    }\n    if (!map) {\n      this.changed();\n    }\n    if (this.mapRenderKey_) {\n      unlistenByKey(this.mapRenderKey_);\n      this.mapRenderKey_ = null;\n    }\n    if (map) {\n      this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function(evt) {\n        const layerState = this.getLayerState();\n        layerState.managed = false;\n        if (this.getZIndex() === undefined) {\n          layerState.zIndex = Infinity;\n        }\n        evt.frameState.layerStatesArray.push(layerState);\n        evt.frameState.layerStates[getUid(this)] = layerState;\n      }, this);\n      this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the layer source.\n   * @param {module:ol/source/Source} source The layer source.\n   * @observable\n   * @api\n   */\n  setSource(source) {\n    this.set(LayerProperty.SOURCE, source);\n  }\n}\n\n\n/**\n * Return `true` if the layer is visible, and if the passed resolution is\n * between the layer's minResolution and maxResolution. The comparison is\n * inclusive for `minResolution` and exclusive for `maxResolution`.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n * @param {number} resolution Resolution.\n * @return {boolean} The layer is visible at the given resolution.\n */\nexport function visibleAtResolution(layerState, resolution) {\n  return layerState.visible && resolution >= layerState.minResolution &&\n      resolution < layerState.maxResolution;\n}\n\n\nexport default Layer;\n","/**\n * @module ol/geom/flat/closest\n */\nimport {lerp, squaredDistance as squaredDx} from '../../math.js';\n\n\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n  const x1 = flatCoordinates[offset1];\n  const y1 = flatCoordinates[offset1 + 1];\n  const dx = flatCoordinates[offset2] - x1;\n  const dy = flatCoordinates[offset2 + 1] - y1;\n  let offset;\n  if (dx === 0 && dy === 0) {\n    offset = offset1;\n  } else {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      offset = offset2;\n    } else if (t > 0) {\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = lerp(flatCoordinates[offset1 + i],\n          flatCoordinates[offset2 + i], t);\n      }\n      closestPoint.length = stride;\n      return;\n    } else {\n      offset = offset1;\n    }\n  }\n  for (let i = 0; i < stride; ++i) {\n    closestPoint[i] = flatCoordinates[offset + i];\n  }\n  closestPoint.length = stride;\n}\n\n\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  for (offset += stride; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    const squaredDelta = squaredDx(x1, y1, x2, y2);\n    if (squaredDelta > max) {\n      max = squaredDelta;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    max = maxSquaredDelta(\n      flatCoordinates, offset, end, stride, max);\n    offset = end;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(flatCoordinates, offset, endss, stride, max) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    max = arrayMaxSquaredDelta(\n      flatCoordinates, offset, ends, stride, max);\n    offset = ends[ends.length - 1];\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(flatCoordinates, offset, end,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  if (offset == end) {\n    return minSquaredDistance;\n  }\n  let i, squaredDistance;\n  if (maxDelta === 0) {\n    // All points are identical, so just test the first point.\n    squaredDistance = squaredDx(\n      x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  let index = offset + stride;\n  while (index < end) {\n    assignClosest(\n      flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n      index += stride;\n    } else {\n      // Skip ahead multiple points, because we know that all the skipped\n      // points cannot be any closer than the closest point we have found so\n      // far.  We know this because we know how close the current point is, how\n      // close the closest point we have found so far is, and the maximum\n      // distance between consecutive points.  For example, if we're currently\n      // at distance 10, the best we've found so far is 3, and that the maximum\n      // distance between consecutive points is 2, then we'll need to skip at\n      // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n      // finding a closer point.  We use Math.max(..., 1) to ensure that we\n      // always advance at least one point, to avoid an infinite loop.\n      index += stride * Math.max(\n        ((Math.sqrt(squaredDistance) -\n            Math.sqrt(minSquaredDistance)) / maxDelta) | 0, 1);\n    }\n  }\n  if (isRing) {\n    // Check the closing segment.\n    assignClosest(\n      flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(flatCoordinates, offset, ends,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    minSquaredDistance = assignClosestPoint(\n      flatCoordinates, offset, end, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = end;\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(flatCoordinates, offset,\n  endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    minSquaredDistance = assignClosestArrayPoint(\n      flatCoordinates, offset, ends, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = ends[ends.length - 1];\n  }\n  return minSquaredDistance;\n}\n","/**\n * @module ol/geom/flat/transform\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n","/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport {unlistenAll} from '../events.js';\nimport {VOID} from '../functions.js';\nimport Event from '../events/Event.js';\n\n\n/**\n * @typedef {EventTarget|module:ol/events/Target} EventTargetLike\n */\n\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {!Object<string, number>}\n     */\n    this.pendingRemovals_ = {};\n\n    /**\n     * @private\n     * @type {!Object<string, number>}\n     */\n    this.dispatching_ = {};\n\n    /**\n     * @private\n     * @type {!Object<string, Array<module:ol/events~ListenerFunction>>}\n     */\n    this.listeners_ = {};\n\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {module:ol/events~ListenerFunction} listener Listener.\n   */\n  addEventListener(type, listener) {\n    let listeners = this.listeners_[type];\n    if (!listeners) {\n      listeners = this.listeners_[type] = [];\n    }\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {{type: string,\n   *     target: (module:ol/events/Target~EventTargetLike|undefined)}|\n   *     module:ol/events/Event|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @function\n   * @api\n   */\n  dispatchEvent(event) {\n    const evt = typeof event === 'string' ? new Event(event) : event;\n    const type = evt.type;\n    evt.target = this;\n    const listeners = this.listeners_[type];\n    let propagate;\n    if (listeners) {\n      if (!(type in this.dispatching_)) {\n        this.dispatching_[type] = 0;\n        this.pendingRemovals_[type] = 0;\n      }\n      ++this.dispatching_[type];\n      for (let i = 0, ii = listeners.length; i < ii; ++i) {\n        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n          propagate = false;\n          break;\n        }\n      }\n      --this.dispatching_[type];\n      if (this.dispatching_[type] === 0) {\n        let pendingRemovals = this.pendingRemovals_[type];\n        delete this.pendingRemovals_[type];\n        while (pendingRemovals--) {\n          this.removeEventListener(type, VOID);\n        }\n        delete this.dispatching_[type];\n      }\n      return propagate;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlistenAll(this);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<module:ol/events~ListenerFunction>} Listeners.\n   */\n  getListeners(type) {\n    return this.listeners_[type];\n  }\n\n  /**\n   * @param {string=} opt_type Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(opt_type) {\n    return opt_type ?\n      opt_type in this.listeners_ :\n      Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {module:ol/events~ListenerFunction} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners_[type];\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (type in this.pendingRemovals_) {\n        // make listener a no-op, and remove later in #dispatchEvent()\n        listeners[index] = VOID;\n        ++this.pendingRemovals_[type];\n      } else {\n        listeners.splice(index, 1);\n        if (listeners.length === 0) {\n          delete this.listeners_[type];\n        }\n      }\n    }\n  }\n}\n\n\nexport default Target;\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an rgba string.\n * @param {module:ol/color~Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {string} s String.\n * @return {module:ol/color~Color} Color.\n */\nexport const fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    const MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object<string, module:ol/color~Color>}\n     */\n    const cache = {};\n\n    /**\n     * @type {number}\n     */\n    let cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {module:ol/color~Color} Color.\n       */\n      function(s) {\n        let color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            let i = 0;\n            for (const key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {module:ol/color~Color|string} color Color.\n * @return {module:ol/color~Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(/** @type {string} */ (color));\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {module:ol/color~Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) { // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return (\n    /** @type {module:ol/color~Color} */ (color)\n  );\n}\n\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {module:ol/color~Color} color Color.\n * @return {module:ol/color~Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n\n/**\n * @param {module:ol/color~Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n","/**\n * @module ol/geom/LineString\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {assignClosestPoint, maxSquaredDelta} from '../geom/flat/closest.js';\nimport {deflateCoordinates} from '../geom/flat/deflate.js';\nimport {inflateCoordinates} from '../geom/flat/inflate.js';\nimport {interpolatePoint, lineStringCoordinateAtM} from '../geom/flat/interpolate.js';\nimport {intersectsLineString} from '../geom/flat/intersectsextent.js';\nimport {lineStringLength} from '../geom/flat/length.js';\nimport {forEach as forEachSegment} from '../geom/flat/segments.js';\nimport {douglasPeucker} from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\nclass LineString extends SimpleGeometry {\n\n  /**\n   * @param {Array<module:ol/coordinate~Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n\n    super();\n\n    /**\n     * @private\n     * @type {module:ol/coordinate~Coordinate}\n     */\n    this.flatMidpoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatMidpointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, coordinates);\n    } else {\n      this.setCoordinates(coordinates, opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed coordinate to the coordinates of the linestring.\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @api\n   */\n  appendCoordinate(coordinate) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = coordinate.slice();\n    } else {\n      extend(this.flatCoordinates, coordinate);\n    }\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/LineString} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new LineString(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Iterate over each segment, calling the provided callback.\n   * If the callback returns a truthy value the function returns that\n   * value immediately. Otherwise the function returns `false`.\n   *\n   * @param {function(this: S, module:ol/coordinate~Coordinate, module:ol/coordinate~Coordinate): T} callback Function\n   *     called for each segment.\n   * @return {T|boolean} Value.\n   * @template T,S\n   * @api\n   */\n  forEachSegment(callback) {\n    return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n  }\n\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * @param {number} m M.\n   * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n   * @return {module:ol/coordinate~Coordinate} Coordinate.\n   * @api\n   */\n  getCoordinateAtM(m, opt_extrapolate) {\n    if (this.layout != GeometryLayout.XYM &&\n        this.layout != GeometryLayout.XYZM) {\n      return null;\n    }\n    const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    return lineStringCoordinateAtM(this.flatCoordinates, 0,\n      this.flatCoordinates.length, this.stride, m, extrapolate);\n  }\n\n  /**\n   * Return the coordinates of the linestring.\n   * @return {Array<module:ol/coordinate~Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the coordinate at the provided fraction along the linestring.\n   * The `fraction` is a number between 0 and 1, where 0 is the start of the\n   * linestring and 1 is the end.\n   * @param {number} fraction Fraction.\n   * @param {module:ol/coordinate~Coordinate=} opt_dest Optional coordinate whose values will\n   *     be modified. If not provided, a new coordinate will be returned.\n   * @return {module:ol/coordinate~Coordinate} Coordinate of the interpolated point.\n   * @api\n   */\n  getCoordinateAt(fraction, opt_dest) {\n    return interpolatePoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      fraction, opt_dest);\n  }\n\n  /**\n   * Return the length of the linestring on projected plane.\n   * @return {number} Length (on projected plane).\n   * @api\n   */\n  getLength() {\n    return lineStringLength(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoint.\n   */\n  getFlatMidpoint() {\n    if (this.flatMidpointRevision_ != this.getRevision()) {\n      this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n      this.flatMidpointRevision_ = this.getRevision();\n    }\n    return this.flatMidpoint_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.LINE_STRING;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLineString(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      extent);\n  }\n\n  /**\n   * Set the coordinates of the linestring.\n   * @param {!Array<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default LineString;\n","/**\n * @module ol/tilegrid/TileGrid\n */\nimport {DEFAULT_TILE_SIZE} from './common.js';\nimport {assert} from '../asserts.js';\nimport TileRange, {createOrUpdate as createOrUpdateTileRange} from '../TileRange.js';\nimport {isSorted, linearFindNearest} from '../array.js';\nimport {createOrUpdate, getTopLeft} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {toSize} from '../size.js';\nimport {createOrUpdate as createOrUpdateTileCoord} from '../tilecoord.js';\n\n\n/**\n * @private\n * @type {module:ol/tilecoord~TileCoord}\n */\nconst tmpTileCoord = [0, 0, 0];\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/extent~Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {module:ol/coordinate~Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and upwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<module:ol/coordinate~Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and upwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<module:ol/size~Size>} [sizes] Sizes.\n * @property {number|module:ol/size~Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<module:ol/size~Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n\n\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nclass TileGrid {\n  /**\n   * @param {module:ol/tilegrid/TileGrid~Options} options Tile grid options.\n   */\n  constructor(options) {\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n\n    /**\n     * @private\n     * @type {!Array<number>}\n     */\n    this.resolutions_ = options.resolutions;\n    assert(isSorted(this.resolutions_, function(a, b) {\n      return b - a;\n    }, true), 17); // `resolutions` must be sorted in descending order\n\n\n    // check if we've got a consistent zoom factor and origin\n    let zoomFactor;\n    if (!options.origins) {\n      for (let i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n        if (!zoomFactor) {\n          zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n        } else {\n          if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n            zoomFactor = undefined;\n            break;\n          }\n        }\n      }\n    }\n\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zoomFactor_ = zoomFactor;\n\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxZoom = this.resolutions_.length - 1;\n\n    /**\n     * @private\n     * @type {module:ol/coordinate~Coordinate}\n     */\n    this.origin_ = options.origin !== undefined ? options.origin : null;\n\n    /**\n     * @private\n     * @type {Array<module:ol/coordinate~Coordinate>}\n     */\n    this.origins_ = null;\n    if (options.origins !== undefined) {\n      this.origins_ = options.origins;\n      assert(this.origins_.length == this.resolutions_.length,\n        20); // Number of `origins` and `resolutions` must be equal\n    }\n\n    const extent = options.extent;\n\n    if (extent !== undefined &&\n        !this.origin_ && !this.origins_) {\n      this.origin_ = getTopLeft(extent);\n    }\n\n    assert(\n      (!this.origin_ && this.origins_) || (this.origin_ && !this.origins_),\n      18); // Either `origin` or `origins` must be configured, never both\n\n    /**\n     * @private\n     * @type {Array<number|module:ol/size~Size>}\n     */\n    this.tileSizes_ = null;\n    if (options.tileSizes !== undefined) {\n      this.tileSizes_ = options.tileSizes;\n      assert(this.tileSizes_.length == this.resolutions_.length,\n        19); // Number of `tileSizes` and `resolutions` must be equal\n    }\n\n    /**\n     * @private\n     * @type {number|module:ol/size~Size}\n     */\n    this.tileSize_ = options.tileSize !== undefined ?\n      options.tileSize :\n      !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n    assert(\n      (!this.tileSize_ && this.tileSizes_) ||\n        (this.tileSize_ && !this.tileSizes_),\n      22); // Either `tileSize` or `tileSizes` must be configured, never both\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.extent_ = extent !== undefined ? extent : null;\n\n\n    /**\n     * @private\n     * @type {Array<module:ol/TileRange>}\n     */\n    this.fullTileRanges_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/size~Size}\n     */\n    this.tmpSize_ = [0, 0];\n\n    if (options.sizes !== undefined) {\n      this.fullTileRanges_ = options.sizes.map(function(size, z) {\n        const tileRange = new TileRange(\n          Math.min(0, size[0]), Math.max(size[0] - 1, -1),\n          Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n        return tileRange;\n      }, this);\n    } else if (extent) {\n      this.calculateTileRanges_(extent);\n    }\n\n  }\n\n  /**\n   * Call a function with each tile coordinate for a given extent and zoom level.\n   *\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number} zoom Integer zoom level.\n   * @param {function(module:ol/tilecoord~TileCoord)} callback Function called with each tile coordinate.\n   * @api\n   */\n  forEachTileCoord(extent, zoom, callback) {\n    const tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n    for (let i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n      for (let j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n        callback([zoom, i, j]);\n      }\n    }\n  }\n\n  /**\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @param {function(this: T, number, module:ol/TileRange): boolean} callback Callback.\n   * @param {T=} opt_this The object to use as `this` in `callback`.\n   * @param {module:ol/TileRange=} opt_tileRange Temporary module:ol/TileRange object.\n   * @param {module:ol/extent~Extent=} opt_extent Temporary module:ol/extent~Extent object.\n   * @return {boolean} Callback succeeded.\n   * @template T\n   */\n  forEachTileCoordParentTileRange(tileCoord, callback, opt_this, opt_tileRange, opt_extent) {\n    let tileRange, x, y;\n    let tileCoordExtent = null;\n    let z = tileCoord[0] - 1;\n    if (this.zoomFactor_ === 2) {\n      x = tileCoord[1];\n      y = tileCoord[2];\n    } else {\n      tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n    }\n    while (z >= this.minZoom) {\n      if (this.zoomFactor_ === 2) {\n        x = Math.floor(x / 2);\n        y = Math.floor(y / 2);\n        tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n      } else {\n        tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n      }\n      if (callback.call(opt_this, z, tileRange)) {\n        return true;\n      }\n      --z;\n    }\n    return false;\n  }\n\n  /**\n   * Get the extent for this tile grid, if it was configured.\n   * @return {module:ol/extent~Extent} Extent.\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the maximum zoom level for the grid.\n   * @return {number} Max zoom.\n   * @api\n   */\n  getMaxZoom() {\n    return this.maxZoom;\n  }\n\n  /**\n   * Get the minimum zoom level for the grid.\n   * @return {number} Min zoom.\n   * @api\n   */\n  getMinZoom() {\n    return this.minZoom;\n  }\n\n  /**\n   * Get the origin for the grid at the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {module:ol/coordinate~Coordinate} Origin.\n   * @api\n   */\n  getOrigin(z) {\n    if (this.origin_) {\n      return this.origin_;\n    } else {\n      return this.origins_[z];\n    }\n  }\n\n  /**\n   * Get the resolution for the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {number} Resolution.\n   * @api\n   */\n  getResolution(z) {\n    return this.resolutions_[z];\n  }\n\n  /**\n   * Get the list of resolutions for the tile grid.\n   * @return {Array<number>} Resolutions.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @param {module:ol/TileRange=} opt_tileRange Temporary module:ol/TileRange object.\n   * @param {module:ol/extent~Extent=} opt_extent Temporary module:ol/extent~Extent object.\n   * @return {module:ol/TileRange} Tile range.\n   */\n  getTileCoordChildTileRange(tileCoord, opt_tileRange, opt_extent) {\n    if (tileCoord[0] < this.maxZoom) {\n      if (this.zoomFactor_ === 2) {\n        const minX = tileCoord[1] * 2;\n        const minY = tileCoord[2] * 2;\n        return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n      }\n      const tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n      return this.getTileRangeForExtentAndZ(\n        tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n    }\n    return null;\n  }\n\n  /**\n   * Get the extent for a tile range.\n   * @param {number} z Integer zoom level.\n   * @param {module:ol/TileRange} tileRange Tile range.\n   * @param {module:ol/extent~Extent=} opt_extent Temporary module:ol/extent~Extent object.\n   * @return {module:ol/extent~Extent} Extent.\n   */\n  getTileRangeExtent(z, tileRange, opt_extent) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n    const minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n    const maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n    const minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n    const maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n  }\n\n  /**\n   * Get a tile range for the given extent and integer zoom level.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number} z Integer zoom level.\n   * @param {module:ol/TileRange=} opt_tileRange Temporary tile range object.\n   * @return {module:ol/TileRange} Tile range.\n   */\n  getTileRangeForExtentAndZ(extent, z, opt_tileRange) {\n    const tileCoord = tmpTileCoord;\n    this.getTileCoordForXYAndZ_(extent[0], extent[1], z, false, tileCoord);\n    const minX = tileCoord[1];\n    const minY = tileCoord[2];\n    this.getTileCoordForXYAndZ_(extent[2], extent[3], z, true, tileCoord);\n    return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n  }\n\n  /**\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @return {module:ol/coordinate~Coordinate} Tile center.\n   */\n  getTileCoordCenter(tileCoord) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    return [\n      origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n      origin[1] + (tileCoord[2] + 0.5) * tileSize[1] * resolution\n    ];\n  }\n\n  /**\n   * Get the extent of a tile coordinate.\n   *\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @param {module:ol/extent~Extent=} opt_extent Temporary extent object.\n   * @return {module:ol/extent~Extent} Extent.\n   * @api\n   */\n  getTileCoordExtent(tileCoord, opt_extent) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    const minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n    const minY = origin[1] + tileCoord[2] * tileSize[1] * resolution;\n    const maxX = minX + tileSize[0] * resolution;\n    const maxY = minY + tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n  }\n\n  /**\n   * Get the tile coordinate for the given map coordinate and resolution.  This\n   * method considers that coordinates that intersect tile boundaries should be\n   * assigned the higher tile coordinate.\n   *\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Destination module:ol/tilecoord~TileCoord object.\n   * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndResolution(coordinate, resolution, opt_tileCoord) {\n    return this.getTileCoordForXYAndResolution_(\n      coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n  }\n\n  /**\n   * Note that this method should not be called for resolutions that correspond\n   * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {number} resolution Resolution (for a non-integer zoom level).\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Temporary module:ol/tilecoord~TileCoord object.\n   * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndResolution_(x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n    const z = this.getZForResolution(resolution);\n    const scale = resolution / this.getResolution(z);\n    const origin = this.getOrigin(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n    const adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n    const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n    const yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n    let tileCoordX = scale * xFromOrigin / tileSize[0];\n    let tileCoordY = scale * yFromOrigin / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = Math.ceil(tileCoordX) - 1;\n      tileCoordY = Math.ceil(tileCoordY) - 1;\n    } else {\n      tileCoordX = Math.floor(tileCoordX);\n      tileCoordY = Math.floor(tileCoordY);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n   * they should have separate implementations.  This method is for integer zoom\n   * levels.  The other method should only be called for resolutions corresponding\n   * to non-integer zoom levels.\n   * @param {number} x Map x coordinate.\n   * @param {number} y Map y coordinate.\n   * @param {number} z Integer zoom level.\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Temporary module:ol/tilecoord~TileCoord object.\n   * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndZ_(x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n    const adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n    const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n    const yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n    let tileCoordX = xFromOrigin / tileSize[0];\n    let tileCoordY = yFromOrigin / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = Math.ceil(tileCoordX) - 1;\n      tileCoordY = Math.ceil(tileCoordY) - 1;\n    } else {\n      tileCoordX = Math.floor(tileCoordX);\n      tileCoordY = Math.floor(tileCoordY);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Get a tile coordinate given a map coordinate and zoom level.\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {number} z Zoom level.\n   * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Destination module:ol/tilecoord~TileCoord object.\n   * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndZ(coordinate, z, opt_tileCoord) {\n    return this.getTileCoordForXYAndZ_(\n      coordinate[0], coordinate[1], z, false, opt_tileCoord);\n  }\n\n  /**\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @return {number} Tile resolution.\n   */\n  getTileCoordResolution(tileCoord) {\n    return this.resolutions_[tileCoord[0]];\n  }\n\n  /**\n   * Get the tile size for a zoom level. The type of the return value matches the\n   * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n   * get an `module:ol/size~Size`, run the result through `module:ol/size~Size.toSize()`.\n   * @param {number} z Z.\n   * @return {number|module:ol/size~Size} Tile size.\n   * @api\n   */\n  getTileSize(z) {\n    if (this.tileSize_) {\n      return this.tileSize_;\n    } else {\n      return this.tileSizes_[z];\n    }\n  }\n\n  /**\n   * @param {number} z Zoom level.\n   * @return {module:ol/TileRange} Extent tile range for the specified zoom level.\n   */\n  getFullTileRange(z) {\n    if (!this.fullTileRanges_) {\n      return null;\n    } else {\n      return this.fullTileRanges_[z];\n    }\n  }\n\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number=} opt_direction If 0, the nearest resolution will be used.\n   *     If 1, the nearest lower resolution will be used. If -1, the nearest\n   *     higher resolution will be used. Default is 0.\n   * @return {number} Z.\n   * @api\n   */\n  getZForResolution(resolution, opt_direction) {\n    const z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n    return clamp(z, this.minZoom, this.maxZoom);\n  }\n\n  /**\n   * @param {!module:ol/extent~Extent} extent Extent for this tile grid.\n   * @private\n   */\n  calculateTileRanges_(extent) {\n    const length = this.resolutions_.length;\n    const fullTileRanges = new Array(length);\n    for (let z = this.minZoom; z < length; ++z) {\n      fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n    }\n    this.fullTileRanges_ = fullTileRanges;\n  }\n}\n\n\nexport default TileGrid;\n","/**\n * @module ol/tilegrid\n */\nimport {DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {toSize} from './size.js';\nimport {containsCoordinate, createOrUpdate, getCorner, getHeight, getWidth} from './extent.js';\nimport Corner from './extent/Corner.js';\nimport {assign} from './obj.js';\nimport {get as getProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\nimport TileGrid from './tilegrid/TileGrid.js';\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {!module:ol/tilegrid/TileGrid} Default tile grid for the\n * passed projection.\n */\nexport function getForProjection(projection) {\n  let tileGrid = projection.getDefaultTileGrid();\n  if (!tileGrid) {\n    tileGrid = createForProjection(projection);\n    projection.setDefaultTileGrid(tileGrid);\n  }\n  return tileGrid;\n}\n\n\n/**\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n */\nexport function wrapX(tileGrid, tileCoord, projection) {\n  const z = tileCoord[0];\n  const center = tileGrid.getTileCoordCenter(tileCoord);\n  const projectionExtent = extentFromProjection(projection);\n  if (!containsCoordinate(projectionExtent, center)) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.ceil((projectionExtent[0] - center[0]) / worldWidth);\n    center[0] += worldWidth * worldsAway;\n    return tileGrid.getTileCoordForCoordAndZ(center, z);\n  } else {\n    return tileCoord;\n  }\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|module:ol/size~Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {module:ol/extent/Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!module:ol/tilegrid/TileGrid} TileGrid instance.\n */\nexport function createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner) {\n  const corner = opt_corner !== undefined ? opt_corner : Corner.TOP_LEFT;\n\n  const resolutions = resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize);\n\n  return new TileGrid({\n    extent: extent,\n    origin: getCorner(extent, corner),\n    resolutions: resolutions,\n    tileSize: opt_tileSize\n  });\n}\n\n\n/**\n * @typedef {Object} XYZOptions\n * @property {module:ol/extent~Extent} [extent] Extent for the tile grid. The origin for an XYZ tile grid is the\n * top-left corner of the extent. The zero level of the grid is defined by the resolution at which one tile fits in the\n * provided extent. If not provided, the extent of the EPSG:3857 projection is used.\n * @property {number} [maxZoom] Maximum zoom. The default is `42`. This determines the number of levels\n * in the grid set. For example, a `maxZoom` of 21 means there are 22 levels in the grid set.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {number|module:ol/size~Size} [tileSize=[256, 256]] Tile size in pixels.\n */\n\n\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {module:ol/tilegrid~XYZOptions=} opt_options Tile grid options.\n * @return {!module:ol/tilegrid/TileGrid} Tile grid instance.\n * @api\n */\nexport function createXYZ(opt_options) {\n  const options = /** @type {module:ol/tilegrid/TileGrid~Options} */ ({});\n  assign(options, opt_options !== undefined ?\n    opt_options : /** @type {module:ol/tilegrid~XYZOptions} */ ({}));\n  if (options.extent === undefined) {\n    options.extent = getProjection('EPSG:3857').getExtent();\n  }\n  options.resolutions = resolutionsFromExtent(\n    options.extent, options.maxZoom, options.tileSize);\n  delete options.maxZoom;\n\n  return new TileGrid(options);\n}\n\n\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|module:ol/size~Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @return {!Array<number>} Resolutions array.\n */\nfunction resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize) {\n  const maxZoom = opt_maxZoom !== undefined ?\n    opt_maxZoom : DEFAULT_MAX_ZOOM;\n\n  const height = getHeight(extent);\n  const width = getWidth(extent);\n\n  const tileSize = toSize(opt_tileSize !== undefined ?\n    opt_tileSize : DEFAULT_TILE_SIZE);\n  const maxResolution = Math.max(\n    width / tileSize[0], height / tileSize[1]);\n\n  const length = maxZoom + 1;\n  const resolutions = new Array(length);\n  for (let z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z);\n  }\n  return resolutions;\n}\n\n\n/**\n * @param {module:ol/proj~ProjectionLike} projection Projection.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|module:ol/size~Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {module:ol/extent/Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!module:ol/tilegrid/TileGrid} TileGrid instance.\n */\nexport function createForProjection(projection, opt_maxZoom, opt_tileSize, opt_corner) {\n  const extent = extentFromProjection(projection);\n  return createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner);\n}\n\n\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {module:ol/proj~ProjectionLike} projection Projection.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function extentFromProjection(projection) {\n  projection = getProjection(projection);\n  let extent = projection.getExtent();\n  if (!extent) {\n    const half = 180 * METERS_PER_UNIT[Units.DEGREES] / projection.getMetersPerUnit();\n    extent = createOrUpdate(-half, -half, half, half);\n  }\n  return extent;\n}\n","/**\n * @module ol/colorlike\n */\nimport {toString} from './color.js';\n\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n\n/**\n * @param {module:ol/color~Color|module:ol/colorlike~ColorLike} color Color.\n * @return {module:ol/colorlike~ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (isColorLike(color)) {\n    return /** @type {string|CanvasPattern|CanvasGradient} */ (color);\n  } else {\n    return toString(/** @type {module:ol/color~Color} */ (color));\n  }\n}\n\n\n/**\n * @param {?} color The value that is potentially an {@link ol/colorlike~ColorLike}.\n * @return {boolean} The color is an {@link ol/colorlike~ColorLike}.\n */\nexport function isColorLike(color) {\n  return (\n    typeof color === 'string' ||\n    color instanceof CanvasPattern ||\n    color instanceof CanvasGradient\n  );\n}\n","/**\n * @module ol/render/EventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * @event module:ol/render/Event~RenderEvent#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#render\n   * @api\n   */\n  RENDER: 'render',\n  /**\n   * Triggered when rendering is complete, i.e. all sources and tiles have\n   * finished loading for the current viewport, and all tiles are faded in.\n   * @event module:ol/render/Event~RenderEvent#rendercomplete\n   * @api\n   */\n  RENDERCOMPLETE: 'rendercomplete'\n};\n","/**\n * @module ol/layer/Group\n */\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getIntersection} from '../extent.js';\nimport BaseLayer from '../layer/Base.js';\nimport {assign, clear} from '../obj.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {Array<module:ol/layer/Base>|module:ol/Collection<module:ol/layer/Base>} [layers] Child layers.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LAYERS: 'layers'\n};\n\n\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nclass LayerGroup extends BaseLayer {\n  /**\n   * @param {module:ol/layer/Group~Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n    const baseOptions = /** @type {module:ol/layer/Group~Options} */ (assign({}, options));\n    delete baseOptions.layers;\n\n    let layers = options.layers;\n\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {Array<module:ol/events~EventsKey>}\n     */\n    this.layersListenerKeys_ = [];\n\n    /**\n     * @private\n     * @type {Object<string, Array<module:ol/events~EventsKey>>}\n     */\n    this.listenerKeys_ = {};\n\n    listen(this,\n      getChangeEventType(Property.LAYERS),\n      this.handleLayersChanged_, this);\n\n    if (layers) {\n      if (Array.isArray(layers)) {\n        layers = new Collection(layers.slice(), {unique: true});\n      } else {\n        assert(layers instanceof Collection,\n          43); // Expected `layers` to be an array or a `Collection`\n        layers = layers;\n      }\n    } else {\n      layers = new Collection(undefined, {unique: true});\n    }\n\n    this.setLayers(layers);\n\n  }\n\n  /**\n   * @private\n   */\n  handleLayerChange_() {\n    this.changed();\n  }\n\n  /**\n   * @param {module:ol/events/Event} event Event.\n   * @private\n   */\n  handleLayersChanged_() {\n    this.layersListenerKeys_.forEach(unlistenByKey);\n    this.layersListenerKeys_.length = 0;\n\n    const layers = this.getLayers();\n    this.layersListenerKeys_.push(\n      listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this),\n      listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this)\n    );\n\n    for (const id in this.listenerKeys_) {\n      this.listenerKeys_[id].forEach(unlistenByKey);\n    }\n    clear(this.listenerKeys_);\n\n    const layersArray = layers.getArray();\n    for (let i = 0, ii = layersArray.length; i < ii; i++) {\n      const layer = layersArray[i];\n      this.listenerKeys_[getUid(layer).toString()] = [\n        listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n        listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n      ];\n    }\n\n    this.changed();\n  }\n\n  /**\n   * @param {module:ol/Collection~CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersAdd_(collectionEvent) {\n    const layer = /** @type {module:ol/layer/Base} */ (collectionEvent.element);\n    const key = getUid(layer).toString();\n    this.listenerKeys_[key] = [\n      listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n      listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n    ];\n    this.changed();\n  }\n\n  /**\n   * @param {module:ol/Collection~CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersRemove_(collectionEvent) {\n    const layer = /** @type {module:ol/layer/Base} */ (collectionEvent.element);\n    const key = getUid(layer).toString();\n    this.listenerKeys_[key].forEach(unlistenByKey);\n    delete this.listenerKeys_[key];\n    this.changed();\n  }\n\n  /**\n   * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @return {!module:ol/Collection<module:ol/layer/Base>} Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  getLayers() {\n    return (\n      /** @type {!module:ol/Collection<module:ol/layer/Base>} */ (this.get(Property.LAYERS))\n    );\n  }\n\n  /**\n   * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @param {!module:ol/Collection<module:ol/layer/Base>} layers Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  setLayers(layers) {\n    this.set(Property.LAYERS, layers);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayersArray(opt_array) {\n    const array = opt_array !== undefined ? opt_array : [];\n    this.getLayers().forEach(function(layer) {\n      layer.getLayersArray(array);\n    });\n    return array;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayerStatesArray(opt_states) {\n    const states = opt_states !== undefined ? opt_states : [];\n\n    const pos = states.length;\n\n    this.getLayers().forEach(function(layer) {\n      layer.getLayerStatesArray(states);\n    });\n\n    const ownLayerState = this.getLayerState();\n    for (let i = pos, ii = states.length; i < ii; i++) {\n      const layerState = states[i];\n      layerState.opacity *= ownLayerState.opacity;\n      layerState.visible = layerState.visible && ownLayerState.visible;\n      layerState.maxResolution = Math.min(\n        layerState.maxResolution, ownLayerState.maxResolution);\n      layerState.minResolution = Math.max(\n        layerState.minResolution, ownLayerState.minResolution);\n      if (ownLayerState.extent !== undefined) {\n        if (layerState.extent !== undefined) {\n          layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n        } else {\n          layerState.extent = ownLayerState.extent;\n        }\n      }\n    }\n\n    return states;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSourceState() {\n    return SourceState.READY;\n  }\n}\n\n\nexport default LayerGroup;\n","/**\n * @module ol/string\n */\n\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number=} opt_precision Precision of the output string (i.e. number of decimal places)\n * @returns {string} Formatted string\n */\nexport function padNumber(number, width, opt_precision) {\n  const numberString = opt_precision !== undefined ? number.toFixed(opt_precision) : '' + number;\n  let decimal = numberString.indexOf('.');\n  decimal = decimal === -1 ? numberString.length : decimal;\n  return decimal > width ? numberString : new Array(1 + width - decimal).join('0') + numberString;\n}\n\n\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @returns {number} Value\n */\nexport function compareVersions(v1, v2) {\n  const s1 = ('' + v1).split('.');\n  const s2 = ('' + v2).split('.');\n\n  for (let i = 0; i < Math.max(s1.length, s2.length); i++) {\n    const n1 = parseInt(s1[i] || '0', 10);\n    const n2 = parseInt(s2[i] || '0', 10);\n\n    if (n1 > n2) {\n      return 1;\n    }\n    if (n2 > n1) {\n      return -1;\n    }\n  }\n\n  return 0;\n}\n","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport {squaredSegmentDistance, squaredDistance} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>=} opt_simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(flatCoordinates, offset, end,\n  stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n  const simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined ?\n    opt_simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = radialDistance(flatCoordinates, offset, end,\n      stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0);\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    flatCoordinates, offset, end, stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0);\n  return simplifiedFlatCoordinates;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  const n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array<number>} */\n  const markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array<number>} */\n  const stack = [offset, end - stride];\n  let index = 0;\n  while (stack.length > 0) {\n    const last = stack.pop();\n    const first = stack.pop();\n    let maxSquaredDistance = 0;\n    const x1 = flatCoordinates[first];\n    const y1 = flatCoordinates[first + 1];\n    const x2 = flatCoordinates[last];\n    const y2 = flatCoordinates[last + 1];\n    for (let i = first + stride; i < last; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      const squaredDistance = squaredSegmentDistance(\n        x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (let i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(flatCoordinates, offset,\n  ends, stride, squaredTolerance, simplifiedFlatCoordinates,\n  simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = douglasPeucker(\n      flatCoordinates, offset, end, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(\n  flatCoordinates, offset, endss, stride, squaredTolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = douglasPeuckerArray(\n      flatCoordinates, offset, ends, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  let x2 = x1;\n  let y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n}\n\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(flatCoordinates, offset, end, stride,\n  tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  let x1 = snap(flatCoordinates[offset], tolerance);\n  let y1 = snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  let x2, y2;\n  do {\n    x2 = snap(flatCoordinates[offset], tolerance);\n    y2 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    // snap the next coordinate (P3)\n    const x3 = snap(flatCoordinates[offset], tolerance);\n    const y3 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    const dx2 = x3 - x1;\n    const dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if ((dx1 * dy2 == dy1 * dx2) &&\n        ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n        ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(\n  flatCoordinates, offset, ends, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = quantize(\n      flatCoordinates, offset, end, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(\n  flatCoordinates, offset, endss, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = quantizeArray(\n      flatCoordinates, offset, ends, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n","/**\n * @module ol/format/FormatType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ARRAY_BUFFER: 'arraybuffer',\n  JSON: 'json',\n  TEXT: 'text',\n  XML: 'xml'\n};\n","/**\n * @module ol/geom/flat/contains\n */\nimport {forEachCorner} from '../../extent.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(flatCoordinates, offset, end, stride, extent) {\n  const outside = forEachCorner(extent,\n    /**\n     * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function(coordinate) {\n      return !linearRingContainsXY(flatCoordinates, offset, end, stride, coordinate[0], coordinate[1]);\n    });\n  return !outside;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(flatCoordinates, offset, endss, stride, x, y) {\n  if (endss.length === 0) {\n    return false;\n  }\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n","/**\n * @module ol/proj/Units\n */\n\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nconst Units = {\n  DEGREES: 'degrees',\n  FEET: 'ft',\n  METERS: 'm',\n  PIXELS: 'pixels',\n  TILE_PIXELS: 'tile-pixels',\n  USFEET: 'us-ft'\n};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<module:ol/proj/Units, number>}\n * @api\n */\nexport const METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = 2 * Math.PI * 6370997 / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\n\nexport default Units;\n","/**\n * @module ol/geom/Geometry\n */\nimport BaseObject from '../Object.js';\nimport {createEmpty, getHeight, returnOrUpdate} from '../extent.js';\nimport {FALSE} from '../functions.js';\nimport {transform2D} from '../geom/flat/transform.js';\nimport {get as getProjection, getTransform} from '../proj.js';\nimport Units from '../proj/Units.js';\nimport {create as createTransform, compose as composeTransform} from '../transform.js';\n\n\n/**\n * @type {module:ol/transform~Transform}\n */\nconst tmpTransform = createTransform();\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nclass Geometry extends BaseObject {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.extent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.extentRevision_ = -1;\n\n    /**\n     * @protected\n     * @type {Object<string, module:ol/geom/Geometry>}\n     */\n    this.simplifiedGeometryCache = {};\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryRevision = 0;\n\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @abstract\n   * @return {!module:ol/geom/Geometry} Clone.\n   */\n  clone() {}\n\n  /**\n   * @abstract\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {module:ol/coordinate~Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {}\n\n  /**\n   * Return the closest point of the geometry to the passed point as\n   * {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {module:ol/coordinate~Coordinate} point Point.\n   * @param {module:ol/coordinate~Coordinate=} opt_closestPoint Closest point.\n   * @return {module:ol/coordinate~Coordinate} Closest point.\n   * @api\n   */\n  getClosestPoint(point, opt_closestPoint) {\n    const closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n    this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n    return closestPoint;\n  }\n\n  /**\n   * Returns true if this geometry includes the specified coordinate. If the\n   * coordinate is on the boundary of the geometry, returns false.\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @return {boolean} Contains coordinate.\n   * @api\n   */\n  intersectsCoordinate(coordinate) {\n    return this.containsXY(coordinate[0], coordinate[1]);\n  }\n\n  /**\n   * @abstract\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @protected\n   * @return {module:ol/extent~Extent} extent Extent.\n   */\n  computeExtent(extent) {}\n\n  /**\n   * Get the extent of the geometry.\n   * @param {module:ol/extent~Extent=} opt_extent Extent.\n   * @return {module:ol/extent~Extent} extent Extent.\n   * @api\n   */\n  getExtent(opt_extent) {\n    if (this.extentRevision_ != this.getRevision()) {\n      this.extent_ = this.computeExtent(this.extent_);\n      this.extentRevision_ = this.getRevision();\n    }\n    return returnOrUpdate(this.extent_, opt_extent);\n  }\n\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} angle Rotation angle in radians.\n   * @param {module:ol/coordinate~Coordinate} anchor The rotation center.\n   * @api\n   */\n  rotate(angle, anchor) {}\n\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number=} opt_sy The scaling factor in the y-direction (defaults to\n   *     sx).\n   * @param {module:ol/coordinate~Coordinate=} opt_anchor The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {}\n\n  /**\n   * Create a simplified version of this geometry.  For linestrings, this uses\n   * the the {@link\n   * https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n   * Douglas Peucker} algorithm.  For polygons, a quantization-based\n   * simplification is used to preserve topology.\n   * @function\n   * @param {number} tolerance The tolerance distance for simplification.\n   * @return {module:ol/geom/Geometry} A new, simplified version of the original\n   *     geometry.\n   * @api\n   */\n  simplify(tolerance) {\n    return this.getSimplifiedGeometry(tolerance * tolerance);\n  }\n\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker\n   * algorithm.\n   * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {module:ol/geom/Geometry} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {}\n\n  /**\n   * Get the type of this geometry.\n   * @abstract\n   * @return {module:ol/geom/GeometryType} Geometry type.\n   */\n  getType() {}\n\n  /**\n   * Apply a transform function to each coordinate of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @abstract\n   * @param {module:ol/proj~TransformFunction} transformFn Transform.\n   */\n  applyTransform(transformFn) {}\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @abstract\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   */\n  intersectsExtent(extent) {}\n\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @abstract\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n  translate(deltaX, deltaY) {}\n\n  /**\n   * Transform each coordinate of the geometry from one coordinate reference\n   * system to another. The geometry is modified in place.\n   * For example, a line will be transformed to a line and a circle to a circle.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   *\n   * @param {module:ol/proj~ProjectionLike} source The current projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @param {module:ol/proj~ProjectionLike} destination The desired projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @return {module:ol/geom/Geometry} This geometry.  Note that original geometry is\n   *     modified in place.\n   * @api\n   */\n  transform(source, destination) {\n    source = getProjection(source);\n    const transformFn = source.getUnits() == Units.TILE_PIXELS ?\n      function(inCoordinates, outCoordinates, stride) {\n        const pixelExtent = source.getExtent();\n        const projectedExtent = source.getWorldExtent();\n        const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n        composeTransform(tmpTransform,\n          projectedExtent[0], projectedExtent[3],\n          scale, -scale, 0,\n          0, 0);\n        transform2D(inCoordinates, 0, inCoordinates.length, stride,\n          tmpTransform, outCoordinates);\n        return getTransform(source, destination)(inCoordinates, outCoordinates, stride);\n      } :\n      getTransform(source, destination);\n    this.applyTransform(transformFn);\n    return this;\n  }\n}\n\n\n/**\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nGeometry.prototype.containsXY = FALSE;\n\n\nexport default Geometry;\n","/**\n * @module ol/style/Circle\n */\n\nimport RegularShape from '../style/RegularShape.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/style/Fill} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {module:ol/style/AtlasManager} [atlasManager] The atlas manager to use for this circle.\n * When using WebGL it is recommended to use an atlas manager to avoid texture switching. If an atlas manager is given,\n * the circle is added to an atlas. By default no atlas manager is used.\n */\n\n\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nclass CircleStyle extends RegularShape {\n  /**\n   * @param {module:ol/style/Circle~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    super({\n      points: Infinity,\n      fill: options.fill,\n      radius: options.radius,\n      stroke: options.stroke,\n      atlasManager: options.atlasManager\n    });\n\n  }\n\n  /**\n  * Clones the style.  If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n  * @return {module:ol/style/Circle} The cloned style.\n  * @override\n  * @api\n  */\n  clone() {\n    const style = new CircleStyle({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      radius: this.getRadius(),\n      atlasManager: this.atlasManager_\n    });\n    style.setOpacity(this.getOpacity());\n    style.setScale(this.getScale());\n    return style;\n  }\n\n  /**\n  * Set the circle radius.\n  *\n  * @param {number} radius Circle radius.\n  * @api\n  */\n  setRadius(radius) {\n    this.radius_ = radius;\n    this.render_(this.atlasManager_);\n  }\n}\n\n\nexport default CircleStyle;\n","/**\n * @module ol/style/RegularShape\n */\n\nimport {asColorLike} from '../colorlike.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {CANVAS_LINE_DASH} from '../has.js';\nimport ImageState from '../ImageState.js';\nimport {defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit} from '../render/canvas.js';\nimport ImageStyle from '../style/Image.js';\n\n\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {module:ol/style/Fill} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {module:ol/style/AtlasManager} [atlasManager] The atlas manager to use for this symbol. When\n * using WebGL it is recommended to use an atlas manager to avoid texture switching. If an atlas manager is given, the\n * symbol is added to an atlas. By default no atlas manager is used.\n */\n\n\n/**\n * @typedef {Object} RenderOptions\n * @property {module:ol/colorlike~ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {string} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} miterLimit\n */\n\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nclass RegularShape extends ImageStyle {\n  /**\n   * @param {module:ol/style/RegularShape~Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    super({\n      opacity: 1,\n      rotateWithView: rotateWithView,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      scale: 1\n    });\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.checksums_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.hitDetectionCanvas_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/style/Fill}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.points_ = options.points;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.radius_ = /** @type {number} */ (options.radius !== undefined ?\n      options.radius : options.radius1);\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.radius2_ = options.radius2;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n    /**\n     * @private\n     * @type {module:ol/style/Stroke}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/size~Size}\n     */\n    this.size_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/size~Size}\n     */\n    this.imageSize_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/size~Size}\n     */\n    this.hitDetectionImageSize_ = null;\n\n    /**\n     * @protected\n     * @type {module:ol/style/AtlasManager|undefined}\n     */\n    this.atlasManager_ = options.atlasManager;\n\n    this.render_(this.atlasManager_);\n\n  }\n\n  /**\n   * Clones the style. If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n   * @return {module:ol/style/RegularShape} The cloned style.\n   * @api\n   */\n  clone() {\n    const style = new RegularShape({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      points: this.getPoints(),\n      radius: this.getRadius(),\n      radius2: this.getRadius2(),\n      angle: this.getAngle(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      atlasManager: this.atlasManager_\n    });\n    style.setOpacity(this.getOpacity());\n    style.setScale(this.getScale());\n    return style;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getAnchor() {\n    return this.anchor_;\n  }\n\n  /**\n   * Get the angle used in generating the shape.\n   * @return {number} Shape's rotation in radians.\n   * @api\n   */\n  getAngle() {\n    return this.angle_;\n  }\n\n  /**\n   * Get the fill style for the shape.\n   * @return {module:ol/style/Fill} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getHitDetectionImage(pixelRatio) {\n    return this.hitDetectionCanvas_;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.canvas_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageSize() {\n    return this.imageSize_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getHitDetectionImageSize() {\n    return this.hitDetectionImageSize_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageState() {\n    return ImageState.LOADED;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getOrigin() {\n    return this.origin_;\n  }\n\n  /**\n   * Get the number of points for generating the shape.\n   * @return {number} Number of points for stars and regular polygons.\n   * @api\n   */\n  getPoints() {\n    return this.points_;\n  }\n\n  /**\n   * Get the (primary) radius for the shape.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return this.radius_;\n  }\n\n  /**\n   * Get the secondary radius for the shape.\n   * @return {number|undefined} Radius2.\n   * @api\n   */\n  getRadius2() {\n    return this.radius2_;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * Get the stroke style for the shape.\n   * @return {module:ol/style/Stroke} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  listenImageChange(listener, thisArg) {}\n\n  /**\n   * @inheritDoc\n   */\n  load() {}\n\n  /**\n   * @inheritDoc\n   */\n  unlistenImageChange(listener, thisArg) {}\n\n  /**\n   * @protected\n   * @param {module:ol/style/AtlasManager|undefined} atlasManager An atlas manager.\n   */\n  render_(atlasManager) {\n    let imageSize;\n    let lineCap = '';\n    let lineJoin = '';\n    let miterLimit = 0;\n    let lineDash = null;\n    let lineDashOffset = 0;\n    let strokeStyle;\n    let strokeWidth = 0;\n\n    if (this.stroke_) {\n      strokeStyle = this.stroke_.getColor();\n      if (strokeStyle === null) {\n        strokeStyle = defaultStrokeStyle;\n      }\n      strokeStyle = asColorLike(strokeStyle);\n      strokeWidth = this.stroke_.getWidth();\n      if (strokeWidth === undefined) {\n        strokeWidth = defaultLineWidth;\n      }\n      lineDash = this.stroke_.getLineDash();\n      lineDashOffset = this.stroke_.getLineDashOffset();\n      if (!CANVAS_LINE_DASH) {\n        lineDash = null;\n        lineDashOffset = 0;\n      }\n      lineJoin = this.stroke_.getLineJoin();\n      if (lineJoin === undefined) {\n        lineJoin = defaultLineJoin;\n      }\n      lineCap = this.stroke_.getLineCap();\n      if (lineCap === undefined) {\n        lineCap = defaultLineCap;\n      }\n      miterLimit = this.stroke_.getMiterLimit();\n      if (miterLimit === undefined) {\n        miterLimit = defaultMiterLimit;\n      }\n    }\n\n    let size = 2 * (this.radius_ + strokeWidth) + 1;\n\n    /** @type {module:ol/style/RegularShape~RenderOptions} */\n    const renderOptions = {\n      strokeStyle: strokeStyle,\n      strokeWidth: strokeWidth,\n      size: size,\n      lineCap: lineCap,\n      lineDash: lineDash,\n      lineDashOffset: lineDashOffset,\n      lineJoin: lineJoin,\n      miterLimit: miterLimit\n    };\n\n    if (atlasManager === undefined) {\n      // no atlas manager is used, create a new canvas\n      const context = createCanvasContext2D(size, size);\n      this.canvas_ = context.canvas;\n\n      // canvas.width and height are rounded to the closest integer\n      size = this.canvas_.width;\n      imageSize = size;\n\n      this.draw_(renderOptions, context, 0, 0);\n\n      this.createHitDetectionCanvas_(renderOptions);\n    } else {\n      // an atlas manager is used, add the symbol to an atlas\n      size = Math.round(size);\n\n      const hasCustomHitDetectionImage = !this.fill_;\n      let renderHitDetectionCallback;\n      if (hasCustomHitDetectionImage) {\n        // render the hit-detection image into a separate atlas image\n        renderHitDetectionCallback =\n            this.drawHitDetectionCanvas_.bind(this, renderOptions);\n      }\n\n      const id = this.getChecksum();\n      const info = atlasManager.add(\n        id, size, size, this.draw_.bind(this, renderOptions),\n        renderHitDetectionCallback);\n\n      this.canvas_ = info.image;\n      this.origin_ = [info.offsetX, info.offsetY];\n      imageSize = info.image.width;\n\n      if (hasCustomHitDetectionImage) {\n        this.hitDetectionCanvas_ = info.hitImage;\n        this.hitDetectionImageSize_ =\n            [info.hitImage.width, info.hitImage.height];\n      } else {\n        this.hitDetectionCanvas_ = this.canvas_;\n        this.hitDetectionImageSize_ = [imageSize, imageSize];\n      }\n    }\n\n    this.anchor_ = [size / 2, size / 2];\n    this.size_ = [size, size];\n    this.imageSize_ = [imageSize, imageSize];\n  }\n\n  /**\n   * @private\n   * @param {module:ol/style/RegularShape~RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {number} x The origin for the symbol (x).\n   * @param {number} y The origin for the symbol (y).\n   */\n  draw_(renderOptions, context, x, y) {\n    let i, angle0, radiusC;\n    // reset transform\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // then move to (x, y)\n    context.translate(x, y);\n\n    context.beginPath();\n\n    let points = this.points_;\n    if (points === Infinity) {\n      context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n    } else {\n      const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n        : this.radius_;\n      if (radius2 !== this.radius_) {\n        points = 2 * points;\n      }\n      for (i = 0; i <= points; i++) {\n        angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n        radiusC = i % 2 === 0 ? this.radius_ : radius2;\n        context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n      }\n    }\n\n\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n      if (color === null) {\n        color = defaultFillStyle;\n      }\n      context.fillStyle = asColorLike(color);\n      context.fill();\n    }\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.lineCap = renderOptions.lineCap;\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n    context.closePath();\n  }\n\n  /**\n   * @private\n   * @param {module:ol/style/RegularShape~RenderOptions} renderOptions Render options.\n   */\n  createHitDetectionCanvas_(renderOptions) {\n    this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n    if (this.fill_) {\n      this.hitDetectionCanvas_ = this.canvas_;\n      return;\n    }\n\n    // if no fill style is set, create an extra hit-detection image with a\n    // default fill style\n    const context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n    this.hitDetectionCanvas_ = context.canvas;\n\n    this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n  }\n\n  /**\n   * @private\n   * @param {module:ol/style/RegularShape~RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The context.\n   * @param {number} x The origin for the symbol (x).\n   * @param {number} y The origin for the symbol (y).\n   */\n  drawHitDetectionCanvas_(renderOptions, context, x, y) {\n    // reset transform\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // then move to (x, y)\n    context.translate(x, y);\n\n    context.beginPath();\n\n    let points = this.points_;\n    if (points === Infinity) {\n      context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n    } else {\n      const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n        : this.radius_;\n      if (radius2 !== this.radius_) {\n        points = 2 * points;\n      }\n      let i, radiusC, angle0;\n      for (i = 0; i <= points; i++) {\n        angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n        radiusC = i % 2 === 0 ? this.radius_ : radius2;\n        context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n      }\n    }\n\n    context.fillStyle = defaultFillStyle;\n    context.fill();\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.stroke();\n    }\n    context.closePath();\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    const strokeChecksum = this.stroke_ ?\n      this.stroke_.getChecksum() : '-';\n    const fillChecksum = this.fill_ ?\n      this.fill_.getChecksum() : '-';\n\n    const recalculate = !this.checksums_ ||\n        (strokeChecksum != this.checksums_[1] ||\n        fillChecksum != this.checksums_[2] ||\n        this.radius_ != this.checksums_[3] ||\n        this.radius2_ != this.checksums_[4] ||\n        this.angle_ != this.checksums_[5] ||\n        this.points_ != this.checksums_[6]);\n\n    if (recalculate) {\n      const checksum = 'r' + strokeChecksum + fillChecksum +\n          (this.radius_ !== undefined ? this.radius_.toString() : '-') +\n          (this.radius2_ !== undefined ? this.radius2_.toString() : '-') +\n          (this.angle_ !== undefined ? this.angle_.toString() : '-') +\n          (this.points_ !== undefined ? this.points_.toString() : '-');\n      this.checksums_ = [checksum, strokeChecksum, fillChecksum,\n        this.radius_, this.radius2_, this.angle_, this.points_];\n    }\n\n    return this.checksums_[0];\n  }\n}\n\n\nexport default RegularShape;\n","/**\n * @module ol/style/IconImage\n */\n\nimport {createCanvasContext2D} from '../dom.js';\nimport {listenOnce, unlistenByKey} from '../events.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {shared as iconImageCache} from '../style/IconImageCache.js';\n\nclass IconImage extends EventTarget {\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {module:ol/size~Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {module:ol/ImageState} imageState Image state.\n   * @param {module:ol/color~Color} color Color.\n   */\n  constructor(image, src, size, crossOrigin, imageState, color) {\n\n    super();\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = color ?\n      /** @type {HTMLCanvasElement} */ (document.createElement('canvas')) :\n      null;\n\n    /**\n     * @private\n     * @type {module:ol/color~Color}\n     */\n    this.color_ = color;\n\n    /**\n     * @private\n     * @type {Array<module:ol/events~EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/ImageState}\n     */\n    this.imageState_ = imageState;\n\n    /**\n     * @private\n     * @type {module:ol/size~Size}\n     */\n    this.size_ = size;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.tainting_ = false;\n    if (this.imageState_ == ImageState.LOADED) {\n      this.determineTainting_();\n    }\n\n  }\n\n  /**\n   * @private\n   */\n  determineTainting_() {\n    const context = createCanvasContext2D(1, 1);\n    try {\n      context.drawImage(this.image_, 0, 0);\n      context.getImageData(0, 0, 1, 1);\n    } catch (e) {\n      this.tainting_ = true;\n    }\n  }\n\n  /**\n   * @private\n   */\n  dispatchChangeEvent_() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @private\n   */\n  handleImageError_() {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @private\n   */\n  handleImageLoad_() {\n    this.imageState_ = ImageState.LOADED;\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    }\n    this.size_ = [this.image_.width, this.image_.height];\n    this.unlistenImage_();\n    this.determineTainting_();\n    this.replaceColor_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n  getImage(pixelRatio) {\n    return this.canvas_ ? this.canvas_ : this.image_;\n  }\n\n  /**\n   * @return {module:ol/ImageState} Image state.\n   */\n  getImageState() {\n    return this.imageState_;\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage(pixelRatio) {\n    if (!this.hitDetectionImage_) {\n      if (this.tainting_) {\n        const width = this.size_[0];\n        const height = this.size_[1];\n        const context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n    return this.hitDetectionImage_;\n  }\n\n  /**\n   * @return {module:ol/size~Size} Image size.\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {string|undefined} Image src.\n   */\n  getSrc() {\n    return this.src_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      try {\n        this.image_.src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  replaceColor_() {\n    if (this.tainting_ || this.color_ === null) {\n      return;\n    }\n\n    this.canvas_.width = this.image_.width;\n    this.canvas_.height = this.image_.height;\n\n    const ctx = this.canvas_.getContext('2d');\n    ctx.drawImage(this.image_, 0, 0);\n\n    const imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n    const data = imgData.data;\n    const r = this.color_[0] / 255.0;\n    const g = this.color_[1] / 255.0;\n    const b = this.color_[2] / 255.0;\n\n    for (let i = 0, ii = data.length; i < ii; i += 4) {\n      data[i] *= r;\n      data[i + 1] *= g;\n      data[i + 2] *= b;\n    }\n    ctx.putImageData(imgData, 0, 0);\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {module:ol/size~Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/ImageState} imageState Image state.\n * @param {module:ol/color~Color} color Color.\n * @return {module:ol/style/IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\n\nexport default IconImage;\n","/**\n * @module ol/style/Icon\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport {get as getIconImage} from '../style/IconImage.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport ImageStyle from '../style/Image.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {module:ol/style/IconOrigin} [anchorOrigin] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {module:ol/style/IconAnchorUnits} [anchorXUnits] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels. Default is `'fraction'`.\n * @property {module:ol/style/IconAnchorUnits} [anchorYUnits] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels. Default is `'fraction'`.\n * @property {module:ol/color~Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you are using the WebGL renderer or if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {module:ol/style/IconOrigin} [offsetOrigin] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {module:ol/size~Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {module:ol/size~Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nclass Icon extends ImageStyle {\n  /**\n   * @param {module:ol/style/Icon~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n\n    /**\n     * @type {number}\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number}\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      rotateWithView: rotateWithView\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/style/IconOrigin}\n     */\n    this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n      options.anchorOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {module:ol/style/IconAnchorUnits}\n     */\n    this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n      options.anchorXUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {module:ol/style/IconAnchorUnits}\n     */\n    this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n      options.anchorYUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    const image = options.img !== undefined ? options.img : null;\n\n    /**\n     * @type {module:ol/size~Size}\n     */\n    const imgSize = options.imgSize !== undefined ? options.imgSize : null;\n\n    /**\n     * @type {string|undefined}\n     */\n    let src = options.src;\n\n    assert(!(src !== undefined && image),\n      4); // `image` and `src` cannot be provided at the same time\n    assert(!image || (image && imgSize),\n      5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src = image.src || getUid(image).toString();\n    }\n    assert(src !== undefined && src.length > 0,\n      6); // A defined and non-empty `src` or `image` must be provided\n\n    /**\n     * @type {module:ol/ImageState}\n     */\n    const imageState = options.src !== undefined ?\n      ImageState.IDLE : ImageState.LOADED;\n\n    /**\n     * @private\n     * @type {module:ol/color~Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {module:ol/style/IconImage}\n     */\n    this.iconImage_ = getIconImage(\n      image, /** @type {string} */ (src), imgSize, this.crossOrigin_, imageState, this.color_);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n\n    /**\n     * @private\n     * @type {module:ol/style/IconOrigin}\n     */\n    this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n      options.offsetOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/size~Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n  }\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {module:ol/style/Icon} The cloned style.\n   * @api\n   */\n  clone() {\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      crossOrigin: this.crossOrigin_,\n      color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n      src: this.getSrc(),\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      opacity: this.getOpacity(),\n      scale: this.getScale(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getAnchor() {\n    if (this.normalizedAnchor_) {\n      return this.normalizedAnchor_;\n    }\n    let anchor = this.anchor_;\n    const size = this.getSize();\n    if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n        this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n      if (!size) {\n        return null;\n      }\n      anchor = this.anchor_.slice();\n      if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[0] *= size[0];\n      }\n      if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[1] *= size[1];\n      }\n    }\n\n    if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n      if (!size) {\n        return null;\n      }\n      if (anchor === this.anchor_) {\n        anchor = this.anchor_.slice();\n      }\n      if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[0] = -anchor[0] + size[0];\n      }\n      if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[1] = -anchor[1] + size[1];\n      }\n    }\n    this.normalizedAnchor_ = anchor;\n    return this.normalizedAnchor_;\n  }\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\n   * Get the icon color.\n   * @return {module:ol/color~Color} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @override\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\n   * @override\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\n   * @override\n   */\n  getHitDetectionImageSize() {\n    return this.getImageSize();\n  }\n\n  /**\n   * @override\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\n   * @override\n   */\n  getHitDetectionImage(pixelRatio) {\n    return this.iconImage_.getHitDetectionImage(pixelRatio);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\n   * @override\n   */\n  listenImageChange(listener, thisArg) {\n    return listen(this.iconImage_, EventType.CHANGE,\n      listener, thisArg);\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @override\n   * @api\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\n   * @override\n   */\n  unlistenImageChange(listener, thisArg) {\n    unlisten(this.iconImage_, EventType.CHANGE,\n      listener, thisArg);\n  }\n}\n\n\nexport default Icon;\n","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n\n/**\n * @private\n * @type {!Object<string, Object<string, module:ol/proj~TransformFunction>>}\n */\nlet transforms = {};\n\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {module:ol/proj/Projection} source Source.\n * @param {module:ol/proj/Projection} destination Destination.\n * @param {module:ol/proj~TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {module:ol/proj/Projection} source Source projection.\n * @param {module:ol/proj/Projection} destination Destination projection.\n * @return {module:ol/proj~TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {module:ol/proj~TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n","/**\n * @module ol/Tile\n */\nimport TileState from './TileState.js';\nimport {easeIn} from './easing.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n\n/**\n * A function that takes an {@link module:ol/Tile} for the tile and a\n * `{string}` for the url as arguments. The default is\n * ```js\n * source.setTileLoadFunction(function(tile, src) {\n *   tile.getImage().src = src;\n * });\n * ```\n * For more fine grained control, the load function can use fetch or XMLHttpRequest and involve\n * error handling:\n *\n * ```js\n * import TileState from 'ol/TileState';\n *\n * source.setTileLoadFunction(function(tile, src) {\n *   var xhr = new XMLHttpRequest();\n *   xhr.responseType = 'blob';\n *   xhr.addEventListener('loadend', function (evt) {\n *     var data = this.response;\n *     if (data !== undefined) {\n *       tile.getImage().src = URL.createObjectURL(data);\n *     } else {\n *       tile.setState(TileState.ERROR);\n *     }\n *   });\n *   xhr.addEventListener('error', function () {\n *     tile.setState(TileState.ERROR);\n *   });\n *   xhr.open('GET', src);\n *   xhr.send();\n * });\n * ```\n *\n * @typedef {function(module:ol/Tile, string)} LoadFunction\n * @api\n */\n\n/**\n * {@link module:ol/source/Tile~Tile} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(module:ol/tilecoord~TileCoord, number,\n *           module:ol/proj/Projection): (string|undefined)} UrlFunction\n * @api\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @api\n */\n\n\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @abstract\n */\nclass Tile extends EventTarget {\n\n  /**\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @param {module:ol/TileState} state State.\n   * @param {module:ol/Tile~Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @type {module:ol/tilecoord~TileCoord}\n     */\n    this.tileCoord = tileCoord;\n\n    /**\n     * @protected\n     * @type {module:ol/TileState}\n     */\n    this.state = state;\n\n    /**\n     * An \"interim\" tile for this tile. The interim tile may be used while this\n     * one is loading, for \"smooth\" transitions when changing params/dimensions\n     * on the source.\n     * @type {module:ol/Tile}\n     */\n    this.interimTile = null;\n\n    /**\n     * A key assigned to the tile. This is used by the tile source to determine\n     * if this tile can effectively be used, or if a new tile should be created\n     * and this one be used as an interim tile for this new tile.\n     * @type {string}\n     */\n    this.key = '';\n\n    /**\n     * The duration for the opacity transition.\n     * @type {number}\n     */\n    this.transition_ = options.transition === undefined ? 250 : options.transition;\n\n    /**\n     * Lookup of start times for rendering transitions.  If the start time is\n     * equal to -1, the transition is complete.\n     * @type {Object<number, number>}\n     */\n    this.transitionStarts_ = {};\n\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {string} Key.\n   */\n  getKey() {\n    return this.key + '/' + this.tileCoord;\n  }\n\n  /**\n   * Get the interim tile most suitable for rendering using the chain of interim\n   * tiles. This corresponds to the  most recent tile that has been loaded, if no\n   * such tile exists, the original tile is returned.\n   * @return {!module:ol/Tile} Best tile for rendering.\n   */\n  getInterimTile() {\n    if (!this.interimTile) {\n      //empty chain\n      return this;\n    }\n    let tile = this.interimTile;\n\n    // find the first loaded tile and return it. Since the chain is sorted in\n    // decreasing order of creation time, there is no need to search the remainder\n    // of the list (all those tiles correspond to older requests and will be\n    // cleaned up by refreshInterimChain)\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        return tile;\n      }\n      tile = tile.interimTile;\n    } while (tile);\n\n    // we can not find a better tile\n    return this;\n  }\n\n  /**\n   * Goes through the chain of interim tiles and discards sections of the chain\n   * that are no longer relevant.\n   */\n  refreshInterimChain() {\n    if (!this.interimTile) {\n      return;\n    }\n\n    let tile = this.interimTile;\n    let prev = this;\n\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        //we have a loaded tile, we can discard the rest of the list\n        //we would could abort any LOADING tile request\n        //older than this tile (i.e. any LOADING tile following this entry in the chain)\n        tile.interimTile = null;\n        break;\n      } else if (tile.getState() == TileState.LOADING) {\n        //keep this LOADING tile any loaded tiles later in the chain are\n        //older than this tile, so we're still interested in the request\n        prev = tile;\n      } else if (tile.getState() == TileState.IDLE) {\n        //the head of the list is the most current tile, we don't need\n        //to start any other requests for this chain\n        prev.interimTile = tile.interimTile;\n      } else {\n        prev = tile;\n      }\n      tile = prev.interimTile;\n    } while (tile);\n  }\n\n  /**\n   * Get the tile coordinate for this tile.\n   * @return {module:ol/tilecoord~TileCoord} The tile coordinate.\n   * @api\n   */\n  getTileCoord() {\n    return this.tileCoord;\n  }\n\n  /**\n   * @return {module:ol/TileState} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Sets the state of this tile. If you write your own {@link module:ol/Tile~LoadFunction tileLoadFunction} ,\n   * it is important to set the state correctly to {@link module:ol/TileState~ERROR}\n   * when the tile cannot be loaded. Otherwise the tile cannot be removed from\n   * the tile queue and will block other requests.\n   * @param {module:ol/TileState} state State.\n   * @api\n   */\n  setState(state) {\n    this.state = state;\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @abstract\n   * @api\n   */\n  load() {}\n\n  /**\n   * Get the alpha value for rendering.\n   * @param {number} id An id for the renderer.\n   * @param {number} time The render frame time.\n   * @return {number} A number between 0 and 1.\n   */\n  getAlpha(id, time) {\n    if (!this.transition_) {\n      return 1;\n    }\n\n    let start = this.transitionStarts_[id];\n    if (!start) {\n      start = time;\n      this.transitionStarts_[id] = start;\n    } else if (start === -1) {\n      return 1;\n    }\n\n    const delta = time - start + (1000 / 60); // avoid rendering at 0\n    if (delta >= this.transition_) {\n      return 1;\n    }\n    return easeIn(delta / this.transition_);\n  }\n\n  /**\n   * Determine if a tile is in an alpha transition.  A tile is considered in\n   * transition if tile.getAlpha() has not yet been called or has been called\n   * and returned 1.\n   * @param {number} id An id for the renderer.\n   * @return {boolean} The tile is in transition.\n   */\n  inTransition(id) {\n    if (!this.transition_) {\n      return false;\n    }\n    return this.transitionStarts_[id] !== -1;\n  }\n\n  /**\n   * Mark a transition as complete.\n   * @param {number} id An id for the renderer.\n   */\n  endTransition(id) {\n    if (this.transition_) {\n      this.transitionStarts_[id] = -1;\n    }\n  }\n}\n\n\nexport default Tile;\n","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @typedef {function(new: module:ol/ImageTile, module:ol/tilecoord~TileCoord,\n * module:ol/TileState, string, ?string, module:ol/Tile~LoadFunction)} TileClass\n * @api\n */\n\nclass ImageTile extends Tile {\n\n  /**\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @param {module:ol/TileState} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {module:ol/Tile~LoadFunction} tileLoadFunction Tile load function.\n   * @param {module:ol/Tile~Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n\n    super(tileCoord, state, opt_options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {Array<module:ol/events~EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/Tile~LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == TileState.LOADING) {\n      this.unlistenImage_();\n      this.image_ = getBlankImage();\n    }\n    if (this.interimTile) {\n      this.interimTile.dispose();\n    }\n    this.state = TileState.ABORT;\n    this.changed();\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getKey() {\n    return this.src_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    if (this.image_.naturalWidth && this.image_.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  load() {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      this.tileLoadFunction_(this, this.src_);\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/TileCache\n */\nimport LRUCache from './structs/LRUCache.js';\nimport {fromKey, getKey} from './tilecoord.js';\n\nclass TileCache extends LRUCache {\n\n  /**\n   * @param {number=} opt_highWaterMark High water mark.\n   */\n  constructor(opt_highWaterMark) {\n\n    super(opt_highWaterMark);\n\n  }\n\n  /**\n   * @param {!Object<string, module:ol/TileRange>} usedTiles Used tiles.\n   */\n  expireCache(usedTiles) {\n    while (this.canExpireCache()) {\n      const tile = this.peekLast();\n      const zKey = tile.tileCoord[0].toString();\n      if (zKey in usedTiles && usedTiles[zKey].contains(tile.tileCoord)) {\n        break;\n      } else {\n        this.pop().dispose();\n      }\n    }\n  }\n\n  /**\n   * Prune all tiles from the cache that don't have the same z as the newest tile.\n   */\n  pruneExceptNewestZ() {\n    if (this.getCount() === 0) {\n      return;\n    }\n    const key = this.peekFirstKey();\n    const tileCoord = fromKey(key);\n    const z = tileCoord[0];\n    this.forEach(function(tile) {\n      if (tile.tileCoord[0] !== z) {\n        this.remove(getKey(tile.tileCoord));\n        tile.dispose();\n      }\n    }, this);\n  }\n}\n\n\nexport default TileCache;\n","/**\n * @module ol/reproj/Tile\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport Tile from '../Tile.js';\nimport TileState from '../TileState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getArea, getCenter, getIntersection} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from '../reproj/Triangulation.js';\n\n\n/**\n * @typedef {function(number, number, number, number) : module:ol/Tile} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link module:ol/source/TileImage~TileImage}.\n *\n */\nclass ReprojTile extends Tile {\n  /**\n   * @param {module:ol/proj/Projection} sourceProj Source projection.\n   * @param {module:ol/tilegrid/TileGrid} sourceTileGrid Source tile grid.\n   * @param {module:ol/proj/Projection} targetProj Target projection.\n   * @param {module:ol/tilegrid/TileGrid} targetTileGrid Target tile grid.\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Coordinate of the tile.\n   * @param {module:ol/tilecoord~TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {number} gutter Gutter of the source tiles.\n   * @param {module:ol/reproj/Tile~FunctionType} getTileFunction\n   *     Function returning source tiles (z, x, y, pixelRatio).\n   * @param {number=} opt_errorThreshold Acceptable reprojection error (in px).\n   * @param {boolean=} opt_renderEdges Render reprojection edges.\n   */\n  constructor(\n    sourceProj,\n    sourceTileGrid,\n    targetProj,\n    targetTileGrid,\n    tileCoord,\n    wrappedTileCoord,\n    pixelRatio,\n    gutter,\n    getTileFunction,\n    opt_errorThreshold,\n    opt_renderEdges\n  ) {\n    super(tileCoord, TileState.IDLE);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderEdges_ = opt_renderEdges !== undefined ? opt_renderEdges : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = gutter;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/tilegrid/TileGrid}\n     */\n    this.sourceTileGrid_ = sourceTileGrid;\n\n    /**\n     * @private\n     * @type {module:ol/tilegrid/TileGrid}\n     */\n    this.targetTileGrid_ = targetTileGrid;\n\n    /**\n     * @private\n     * @type {module:ol/tilecoord~TileCoord}\n     */\n    this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n\n    /**\n     * @private\n     * @type {!Array<module:ol/Tile>}\n     */\n    this.sourceTiles_ = [];\n\n    /**\n     * @private\n     * @type {Array<module:ol/events~EventsKey>}\n     */\n    this.sourcesListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourceZ_ = 0;\n\n    const targetExtent = targetTileGrid.getTileCoordExtent(this.wrappedTileCoord_);\n    const maxTargetExtent = this.targetTileGrid_.getExtent();\n    let maxSourceExtent = this.sourceTileGrid_.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    if (getArea(limitedTargetExtent) === 0) {\n      // Tile is completely outside range -> EMPTY\n      // TODO: is it actually correct that the source even creates the tile ?\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const sourceProjExtent = sourceProj.getExtent();\n    if (sourceProjExtent) {\n      if (!maxSourceExtent) {\n        maxSourceExtent = sourceProjExtent;\n      } else {\n        maxSourceExtent = getIntersection(maxSourceExtent, sourceProjExtent);\n      }\n    }\n\n    const targetResolution = targetTileGrid.getResolution(\n      this.wrappedTileCoord_[0]);\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n      // invalid sourceResolution -> EMPTY\n      // probably edges of the projections when no extent is defined\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const errorThresholdInPixels = opt_errorThreshold !== undefined ?\n      opt_errorThreshold : ERROR_THRESHOLD;\n\n    /**\n     * @private\n     * @type {!module:ol/reproj/Triangulation}\n     */\n    this.triangulation_ = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    if (this.triangulation_.getTriangles().length === 0) {\n      // no valid triangles -> EMPTY\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n    let sourceExtent = this.triangulation_.calculateSourceExtent();\n\n    if (maxSourceExtent) {\n      if (sourceProj.canWrapX()) {\n        sourceExtent[1] = clamp(\n          sourceExtent[1], maxSourceExtent[1], maxSourceExtent[3]);\n        sourceExtent[3] = clamp(\n          sourceExtent[3], maxSourceExtent[1], maxSourceExtent[3]);\n      } else {\n        sourceExtent = getIntersection(sourceExtent, maxSourceExtent);\n      }\n    }\n\n    if (!getArea(sourceExtent)) {\n      this.state = TileState.EMPTY;\n    } else {\n      const sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(\n        sourceExtent, this.sourceZ_);\n\n      for (let srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n        for (let srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n          const tile = getTileFunction(this.sourceZ_, srcX, srcY, pixelRatio);\n          if (tile) {\n            this.sourceTiles_.push(tile);\n          }\n        }\n      }\n\n      if (this.sourceTiles_.length === 0) {\n        this.state = TileState.EMPTY;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == TileState.LOADING) {\n      this.unlistenSources_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the HTML Canvas element for this tile.\n   * @return {HTMLCanvasElement} Canvas.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sources = [];\n    this.sourceTiles_.forEach(function(tile, i, arr) {\n      if (tile && tile.getState() == TileState.LOADED) {\n        sources.push({\n          extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n          image: tile.getImage()\n        });\n      }\n    }.bind(this));\n    this.sourceTiles_.length = 0;\n\n    if (sources.length === 0) {\n      this.state = TileState.ERROR;\n    } else {\n      const z = this.wrappedTileCoord_[0];\n      const size = this.targetTileGrid_.getTileSize(z);\n      const width = typeof size === 'number' ? size : size[0];\n      const height = typeof size === 'number' ? size : size[1];\n      const targetResolution = this.targetTileGrid_.getResolution(z);\n      const sourceResolution = this.sourceTileGrid_.getResolution(this.sourceZ_);\n\n      const targetExtent = this.targetTileGrid_.getTileCoordExtent(\n        this.wrappedTileCoord_);\n      this.canvas_ = renderReprojected(width, height, this.pixelRatio_,\n        sourceResolution, this.sourceTileGrid_.getExtent(),\n        targetResolution, targetExtent, this.triangulation_, sources,\n        this.gutter_, this.renderEdges_);\n\n      this.state = TileState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n\n      let leftToLoad = 0;\n\n      this.sourcesListenerKeys_ = [];\n      this.sourceTiles_.forEach(function(tile, i, arr) {\n        const state = tile.getState();\n        if (state == TileState.IDLE || state == TileState.LOADING) {\n          leftToLoad++;\n\n          const sourceListenKey = listen(tile, EventType.CHANGE,\n            function(e) {\n              const state = tile.getState();\n              if (state == TileState.LOADED ||\n                    state == TileState.ERROR ||\n                    state == TileState.EMPTY) {\n                unlistenByKey(sourceListenKey);\n                leftToLoad--;\n                if (leftToLoad === 0) {\n                  this.unlistenSources_();\n                  this.reproject_();\n                }\n              }\n            }, this);\n          this.sourcesListenerKeys_.push(sourceListenKey);\n        }\n      }.bind(this));\n\n      this.sourceTiles_.forEach(function(tile, i, arr) {\n        const state = tile.getState();\n        if (state == TileState.IDLE) {\n          tile.load();\n        }\n      });\n\n      if (leftToLoad === 0) {\n        setTimeout(this.reproject_.bind(this), 0);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSources_() {\n    this.sourcesListenerKeys_.forEach(unlistenByKey);\n    this.sourcesListenerKeys_ = null;\n  }\n}\n\n\nexport default ReprojTile;\n","/**\n * @module ol/source/Tile\n */\n\nimport {VOID} from '../functions.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport Event from '../events/Event.js';\nimport {equivalent} from '../proj.js';\nimport {toSize, scale as scaleSize} from '../size.js';\nimport Source from '../source/Source.js';\nimport {getKeyZXY, withinExtentAndZ} from '../tilecoord.js';\nimport {wrapX, getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions]\n * @property {number} [cacheSize]\n * @property {module:ol/extent~Extent} [extent]\n * @property {boolean} [opaque]\n * @property {number} [tilePixelRatio]\n * @property {module:ol/proj~ProjectionLike} [projection]\n * @property {module:ol/source/State} [state]\n * @property {module:ol/tilegrid/TileGrid} [tileGrid]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n * @api\n */\nclass TileSource extends Source {\n  /**\n   * @param {module:ol/source/Tile~Options=} options SourceTile source options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      extent: options.extent,\n      projection: options.projection,\n      state: options.state,\n      wrapX: options.wrapX\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilePixelRatio_ = options.tilePixelRatio !== undefined ?\n      options.tilePixelRatio : 1;\n\n    /**\n     * @protected\n     * @type {module:ol/tilegrid/TileGrid}\n     */\n    this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n\n    /**\n     * @protected\n     * @type {module:ol/TileCache}\n     */\n    this.tileCache = new TileCache(options.cacheSize);\n\n    /**\n     * @protected\n     * @type {module:ol/size~Size}\n     */\n    this.tmpSize = [0, 0];\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.key_ = '';\n\n    /**\n     * @protected\n     * @type {module:ol/Tile~Options}\n     */\n    this.tileOptions = {transition: options.transition};\n\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.tileCache.canExpireCache();\n  }\n\n  /**\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @param {!Object<string, module:ol/TileRange>} usedTiles Used tiles.\n   */\n  expireCache(projection, usedTiles) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (tileCache) {\n      tileCache.expireCache(usedTiles);\n    }\n  }\n\n  /**\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @param {number} z Zoom level.\n   * @param {module:ol/TileRange} tileRange Tile range.\n   * @param {function(module:ol/Tile):(boolean|undefined)} callback Called with each\n   *     loaded tile.  If the callback returns `false`, the tile will not be\n   *     considered loaded.\n   * @return {boolean} The tile range is fully covered with loaded tiles.\n   */\n  forEachLoadedTile(projection, z, tileRange, callback) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (!tileCache) {\n      return false;\n    }\n\n    let covered = true;\n    let tile, tileCoordKey, loaded;\n    for (let x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (let y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        tileCoordKey = getKeyZXY(z, x, y);\n        loaded = false;\n        if (tileCache.containsKey(tileCoordKey)) {\n          tile = /** @type {!module:ol/Tile} */ (tileCache.get(tileCoordKey));\n          loaded = tile.getState() === TileState.LOADED;\n          if (loaded) {\n            loaded = (callback(tile) !== false);\n          }\n        }\n        if (!loaded) {\n          covered = false;\n        }\n      }\n    }\n    return covered;\n  }\n\n  /**\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {number} Gutter.\n   */\n  getGutterForProjection(projection) {\n    return 0;\n  }\n\n  /**\n   * Return the key to be used for all tiles in the source.\n   * @return {string} The key for all tiles.\n   * @protected\n   */\n  getKey() {\n    return this.key_;\n  }\n\n  /**\n   * Set the value to be used as the key for all tiles in the source.\n   * @param {string} key The key for tiles.\n   * @protected\n   */\n  setKey(key) {\n    if (this.key_ !== key) {\n      this.key_ = key;\n      this.changed();\n    }\n  }\n\n  /**\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {boolean} Opaque.\n   */\n  getOpaque(projection) {\n    return this.opaque_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getResolutions() {\n    return this.tileGrid.getResolutions();\n  }\n\n  /**\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {!module:ol/Tile} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {}\n\n  /**\n   * Return the tile grid of the tile source.\n   * @return {module:ol/tilegrid/TileGrid} Tile grid.\n   * @api\n   */\n  getTileGrid() {\n    return this.tileGrid;\n  }\n\n  /**\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {!module:ol/tilegrid/TileGrid} Tile grid.\n   */\n  getTileGridForProjection(projection) {\n    if (!this.tileGrid) {\n      return getTileGridForProjection(projection);\n    } else {\n      return this.tileGrid;\n    }\n  }\n\n  /**\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {module:ol/TileCache} Tile cache.\n   * @protected\n   */\n  getTileCacheForProjection(projection) {\n    const thisProj = this.getProjection();\n    if (thisProj && !equivalent(thisProj, projection)) {\n      return null;\n    } else {\n      return this.tileCache;\n    }\n  }\n\n  /**\n   * Get the tile pixel ratio for this source. Subclasses may override this\n   * method, which is meant to return a supported pixel ratio that matches the\n   * provided `pixelRatio` as close as possible.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Tile pixel ratio.\n   */\n  getTilePixelRatio(pixelRatio) {\n    return this.tilePixelRatio_;\n  }\n\n  /**\n   * @param {number} z Z.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {module:ol/size~Size} Tile size.\n   */\n  getTilePixelSize(z, pixelRatio, projection) {\n    const tileGrid = this.getTileGridForProjection(projection);\n    const tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n    const tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n    if (tilePixelRatio == 1) {\n      return tileSize;\n    } else {\n      return scaleSize(tileSize, tilePixelRatio, this.tmpSize);\n    }\n  }\n\n  /**\n   * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n   * is outside the resolution and extent range of the tile grid, `null` will be\n   * returned.\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @param {module:ol/proj/Projection=} opt_projection Projection.\n   * @return {module:ol/tilecoord~TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n   *     null if no tile URL should be created for the passed `tileCoord`.\n   */\n  getTileCoordForTileUrlFunction(tileCoord, opt_projection) {\n    const projection = opt_projection !== undefined ?\n      opt_projection : this.getProjection();\n    const tileGrid = this.getTileGridForProjection(projection);\n    if (this.getWrapX() && projection.isGlobal()) {\n      tileCoord = wrapX(tileGrid, tileCoord, projection);\n    }\n    return withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  refresh() {\n    this.tileCache.clear();\n    this.changed();\n  }\n}\n\n\n/**\n * Marks a tile coord as being used, without triggering a load.\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {module:ol/proj/Projection} projection Projection.\n */\nTileSource.prototype.useTile = VOID;\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Tile~TileSource} instances are instances of this\n * type.\n */\nexport class TileSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {module:ol/Tile} tile The tile.\n   */\n  constructor(type, tile) {\n\n    super(type);\n\n    /**\n     * The tile related to the event.\n     * @type {module:ol/Tile}\n     * @api\n     */\n    this.tile = tile;\n\n  }\n\n}\n\nexport default TileSource;\n","/**\n * @module ol/source/TileEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered when a tile starts loading.\n   * @event module:ol/source/Tile~TileSourceEvent#tileloadstart\n   * @api\n   */\n  TILELOADSTART: 'tileloadstart',\n\n  /**\n   * Triggered when a tile finishes loading, either when its data is loaded,\n   * or when loading was aborted because the tile is no longer needed.\n   * @event module:ol/source/Tile~TileSourceEvent#tileloadend\n   * @api\n   */\n  TILELOADEND: 'tileloadend',\n\n  /**\n   * Triggered if tile loading results in an error.\n   * @event module:ol/source/Tile~TileSourceEvent#tileloaderror\n   * @api\n   */\n  TILELOADERROR: 'tileloaderror'\n\n};\n","/**\n * @module ol/source/UrlTile\n */\nimport {getUid} from '../util.js';\nimport TileState from '../TileState.js';\nimport {expandUrl, createFromTemplates, nullTileUrlFunction} from '../tileurlfunction.js';\nimport TileSource, {TileSourceEvent} from '../source/Tile.js';\nimport TileEventType from '../source/TileEventType.js';\nimport {getKeyZXY} from '../tilecoord.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions]\n * @property {number} [cacheSize]\n * @property {module:ol/extent~Extent} [extent]\n * @property {boolean} [opaque]\n * @property {module:ol/proj~ProjectionLike} [projection]\n * @property {module:ol/source/State} [state]\n * @property {module:ol/tilegrid/TileGrid} [tileGrid]\n * @property {module:ol/Tile~LoadFunction} tileLoadFunction\n * @property {number} [tilePixelRatio]\n * @property {module:ol/Tile~UrlFunction} [tileUrlFunction]\n * @property {string} [url]\n * @property {Array<string>} [urls]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @fires module:ol/source/TileEvent\n */\nclass UrlTile extends TileSource {\n  /**\n   * @param {module:ol/source/UrlTile~Options=} options Image tile options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      extent: options.extent,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tilePixelRatio: options.tilePixelRatio,\n      wrapX: options.wrapX,\n      transition: options.transition\n    });\n\n    /**\n     * @protected\n     * @type {module:ol/Tile~LoadFunction}\n     */\n    this.tileLoadFunction = options.tileLoadFunction;\n\n    /**\n     * @protected\n     * @type {module:ol/Tile~UrlFunction}\n     */\n    this.tileUrlFunction = this.fixedTileUrlFunction ?\n      this.fixedTileUrlFunction.bind(this) : nullTileUrlFunction;\n\n    /**\n     * @protected\n     * @type {!Array<string>|null}\n     */\n    this.urls = null;\n\n    if (options.urls) {\n      this.setUrls(options.urls);\n    } else if (options.url) {\n      this.setUrl(options.url);\n    }\n    if (options.tileUrlFunction) {\n      this.setTileUrlFunction(options.tileUrlFunction);\n    }\n\n    /**\n     * @private\n     * @type {!Object<number, boolean>}\n     */\n    this.tileLoadingKeys_ = {};\n\n  }\n\n  /**\n   * Return the tile load function of the source.\n   * @return {module:ol/Tile~LoadFunction} TileLoadFunction\n   * @api\n   */\n  getTileLoadFunction() {\n    return this.tileLoadFunction;\n  }\n\n  /**\n   * Return the tile URL function of the source.\n   * @return {module:ol/Tile~UrlFunction} TileUrlFunction\n   * @api\n   */\n  getTileUrlFunction() {\n    return this.tileUrlFunction;\n  }\n\n  /**\n   * Return the URLs used for this source.\n   * When a tileUrlFunction is used instead of url or urls,\n   * null will be returned.\n   * @return {!Array<string>|null} URLs.\n   * @api\n   */\n  getUrls() {\n    return this.urls;\n  }\n\n  /**\n   * Handle tile change events.\n   * @param {module:ol/events/Event} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {module:ol/Tile} */ (event.target);\n    const uid = getUid(tile);\n    const tileState = tile.getState();\n    let type;\n    if (tileState == TileState.LOADING) {\n      this.tileLoadingKeys_[uid] = true;\n      type = TileEventType.TILELOADSTART;\n    } else if (uid in this.tileLoadingKeys_) {\n      delete this.tileLoadingKeys_[uid];\n      type = tileState == TileState.ERROR ? TileEventType.TILELOADERROR :\n        (tileState == TileState.LOADED || tileState == TileState.ABORT) ?\n          TileEventType.TILELOADEND : undefined;\n    }\n    if (type != undefined) {\n      this.dispatchEvent(new TileSourceEvent(type, tile));\n    }\n  }\n\n  /**\n   * Set the tile load function of the source.\n   * @param {module:ol/Tile~LoadFunction} tileLoadFunction Tile load function.\n   * @api\n   */\n  setTileLoadFunction(tileLoadFunction) {\n    this.tileCache.clear();\n    this.tileLoadFunction = tileLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the tile URL function of the source.\n   * @param {module:ol/Tile~UrlFunction} tileUrlFunction Tile URL function.\n   * @param {string=} opt_key Optional new tile key for the source.\n   * @api\n   */\n  setTileUrlFunction(tileUrlFunction, opt_key) {\n    this.tileUrlFunction = tileUrlFunction;\n    this.tileCache.pruneExceptNewestZ();\n    if (typeof opt_key !== 'undefined') {\n      this.setKey(opt_key);\n    } else {\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string} url URL.\n   * @api\n   */\n  setUrl(url) {\n    const urls = this.urls = expandUrl(url);\n    this.setTileUrlFunction(this.fixedTileUrlFunction ?\n      this.fixedTileUrlFunction.bind(this) :\n      createFromTemplates(urls, this.tileGrid), url);\n  }\n\n  /**\n   * Set the URLs to use for requests.\n   * @param {Array<string>} urls URLs.\n   * @api\n   */\n  setUrls(urls) {\n    this.urls = urls;\n    const key = urls.join('\\n');\n    this.setTileUrlFunction(this.fixedTileUrlFunction ?\n      this.fixedTileUrlFunction.bind(this) :\n      createFromTemplates(urls, this.tileGrid), key);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  useTile(z, x, y) {\n    const tileCoordKey = getKeyZXY(z, x, y);\n    if (this.tileCache.containsKey(tileCoordKey)) {\n      this.tileCache.get(tileCoordKey);\n    }\n  }\n}\n\n\n/**\n * @type {module:ol/Tile~UrlFunction|undefined}\n * @protected\n */\nUrlTile.prototype.fixedTileUrlFunction;\n\nexport default UrlTile;\n","/**\n * @module ol/source/TileImage\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport {getUid} from '../util.js';\nimport ImageTile from '../ImageTile.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {equivalent, get as getProjection} from '../proj.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport UrlTile from '../source/UrlTile.js';\nimport {getKey, getKeyZXY} from '../tilecoord.js';\nimport {getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/source/State} [state] Source state.\n * @property {module:ol/ImageTile~TileClass} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {module:ol/tilegrid/TileGrid} [tileGrid] Tile grid.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service. For example, if the tile\n * service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {module:ol/Tile~UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX] Whether to wrap the world horizontally. The default, is to\n * request out-of-bounds tiles from the server. When set to `false`, only one\n * world will be rendered. When set to `true`, tiles will be requested for one\n * world only, but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @fires module:ol/source/Tile~TileSourceEvent\n * @api\n */\nclass TileImage extends UrlTile {\n  /**\n   * @param {module:ol/source/TileImage~Options=} options Image tile options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      extent: options.extent,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction ?\n        options.tileLoadFunction : defaultTileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX,\n      transition: options.transition\n    });\n\n    /**\n     * @protected\n     * @type {?string}\n     */\n    this.crossOrigin =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @protected\n     * @type {function(new: module:ol/ImageTile, module:ol/tilecoord~TileCoord, module:ol/TileState, string,\n     *        ?string, module:ol/Tile~LoadFunction, module:ol/Tile~Options=)}\n     */\n    this.tileClass = options.tileClass !== undefined ?\n      options.tileClass : ImageTile;\n\n    /**\n     * @protected\n     * @type {!Object<string, module:ol/TileCache>}\n     */\n    this.tileCacheForProjection = {};\n\n    /**\n     * @protected\n     * @type {!Object<string, module:ol/tilegrid/TileGrid>}\n     */\n    this.tileGridForProjection = {};\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderReprojectionEdges_ = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  canExpireCache() {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.canExpireCache();\n    }\n    if (this.tileCache.canExpireCache()) {\n      return true;\n    } else {\n      for (const key in this.tileCacheForProjection) {\n        if (this.tileCacheForProjection[key].canExpireCache()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  expireCache(projection, usedTiles) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      super.expireCache(projection, usedTiles);\n      return;\n    }\n    const usedTileCache = this.getTileCacheForProjection(projection);\n\n    this.tileCache.expireCache(this.tileCache == usedTileCache ? usedTiles : {});\n    for (const id in this.tileCacheForProjection) {\n      const tileCache = this.tileCacheForProjection[id];\n      tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getGutterForProjection(projection) {\n    if (ENABLE_RASTER_REPROJECTION &&\n        this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n      return 0;\n    } else {\n      return this.getGutter();\n    }\n  }\n\n  /**\n   * @return {number} Gutter.\n   */\n  getGutter() {\n    return 0;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getOpaque(projection) {\n    if (ENABLE_RASTER_REPROJECTION &&\n        this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n      return false;\n    } else {\n      return super.getOpaque(projection);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileGridForProjection(projection) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return UrlTile.prototype.getTileGridForProjection.call(this, projection);\n    }\n    const thisProj = this.getProjection();\n    if (this.tileGrid && (!thisProj || equivalent(thisProj, projection))) {\n      return this.tileGrid;\n    } else {\n      const projKey = getUid(projection).toString();\n      if (!(projKey in this.tileGridForProjection)) {\n        this.tileGridForProjection[projKey] = getTileGridForProjection(projection);\n      }\n      return (\n        /** @type {!module:ol/tilegrid/TileGrid} */ (this.tileGridForProjection[projKey])\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileCacheForProjection(projection) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return UrlTile.prototype.getTileCacheForProjection.call(this, projection);\n    }\n    const thisProj = this.getProjection(); if (!thisProj || equivalent(thisProj, projection)) {\n      return this.tileCache;\n    } else {\n      const projKey = getUid(projection).toString();\n      if (!(projKey in this.tileCacheForProjection)) {\n        this.tileCacheForProjection[projKey] = new TileCache(this.tileCache.highWaterMark);\n      }\n      return this.tileCacheForProjection[projKey];\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @param {string} key The key set on the tile.\n   * @return {!module:ol/Tile} Tile.\n   * @private\n   */\n  createTile_(z, x, y, pixelRatio, projection, key) {\n    const tileCoord = [z, x, y];\n    const urlTileCoord = this.getTileCoordForTileUrlFunction(\n      tileCoord, projection);\n    const tileUrl = urlTileCoord ?\n      this.tileUrlFunction(urlTileCoord, pixelRatio, projection) : undefined;\n    const tile = new this.tileClass(\n      tileCoord,\n      tileUrl !== undefined ? TileState.IDLE : TileState.EMPTY,\n      tileUrl !== undefined ? tileUrl : '',\n      this.crossOrigin,\n      this.tileLoadFunction,\n      this.tileOptions);\n    tile.key = key;\n    listen(tile, EventType.CHANGE,\n      this.handleTileChange, this);\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const sourceProjection = /** @type {!module:ol/proj/Projection} */ (this.getProjection());\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection || !projection || equivalent(sourceProjection, projection)) {\n      return this.getTileInternal(z, x, y, pixelRatio, sourceProjection || projection);\n    } else {\n      const cache = this.getTileCacheForProjection(projection);\n      const tileCoord = [z, x, y];\n      let tile;\n      const tileCoordKey = getKey(tileCoord);\n      if (cache.containsKey(tileCoordKey)) {\n        tile = /** @type {!module:ol/Tile} */ (cache.get(tileCoordKey));\n      }\n      const key = this.getKey();\n      if (tile && tile.key == key) {\n        return tile;\n      } else {\n        const sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n        const targetTileGrid = this.getTileGridForProjection(projection);\n        const wrappedTileCoord =\n            this.getTileCoordForTileUrlFunction(tileCoord, projection);\n        const newTile = new ReprojTile(\n          sourceProjection, sourceTileGrid,\n          projection, targetTileGrid,\n          tileCoord, wrappedTileCoord, this.getTilePixelRatio(pixelRatio),\n          this.getGutter(),\n          function(z, x, y, pixelRatio) {\n            return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n          }.bind(this), this.reprojectionErrorThreshold_,\n          this.renderReprojectionEdges_);\n        newTile.key = key;\n\n        if (tile) {\n          newTile.interimTile = tile;\n          newTile.refreshInterimChain();\n          cache.replace(tileCoordKey, newTile);\n        } else {\n          cache.set(tileCoordKey, newTile);\n        }\n        return newTile;\n      }\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {!module:ol/proj/Projection} projection Projection.\n   * @return {!module:ol/Tile} Tile.\n   * @protected\n   */\n  getTileInternal(z, x, y, pixelRatio, projection) {\n    let tile = null;\n    const tileCoordKey = getKeyZXY(z, x, y);\n    const key = this.getKey();\n    if (!this.tileCache.containsKey(tileCoordKey)) {\n      tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n      this.tileCache.set(tileCoordKey, tile);\n    } else {\n      tile = this.tileCache.get(tileCoordKey);\n      if (tile.key != key) {\n        // The source's params changed. If the tile has an interim tile and if we\n        // can use it then we use it. Otherwise we create a new tile.  In both\n        // cases we attempt to assign an interim tile to the new tile.\n        const interimTile = tile;\n        tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n\n        //make the new tile the head of the list,\n        if (interimTile.getState() == TileState.IDLE) {\n          //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n          tile.interimTile = interimTile.interimTile;\n        } else {\n          tile.interimTile = interimTile;\n        }\n        tile.refreshInterimChain();\n        this.tileCache.replace(tileCoordKey, tile);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * Sets whether to render reprojection edges or not (usually for debugging).\n   * @param {boolean} render Render the edges.\n   * @api\n   */\n  setRenderReprojectionEdges(render) {\n    if (!ENABLE_RASTER_REPROJECTION ||\n        this.renderReprojectionEdges_ == render) {\n      return;\n    }\n    this.renderReprojectionEdges_ = render;\n    for (const id in this.tileCacheForProjection) {\n      this.tileCacheForProjection[id].clear();\n    }\n    this.changed();\n  }\n\n  /**\n   * Sets the tile grid to use when reprojecting the tiles to the given\n   * projection instead of the default tile grid for the projection.\n   *\n   * This can be useful when the default tile grid cannot be created\n   * (e.g. projection has no extent defined) or\n   * for optimization reasons (custom tile size, resolutions, ...).\n   *\n   * @param {module:ol/proj~ProjectionLike} projection Projection.\n   * @param {module:ol/tilegrid/TileGrid} tilegrid Tile grid to use for the projection.\n   * @api\n   */\n  setTileGridForProjection(projection, tilegrid) {\n    if (ENABLE_RASTER_REPROJECTION) {\n      const proj = getProjection(projection);\n      if (proj) {\n        const projKey = getUid(proj).toString();\n        if (!(projKey in this.tileGridForProjection)) {\n          this.tileGridForProjection[projKey] = tilegrid;\n        }\n      }\n    }\n  }\n}\n\n\n/**\n * @param {module:ol/ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\nfunction defaultTileLoadFunction(imageTile, src) {\n  imageTile.getImage().src = src;\n}\n\nexport default TileImage;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object~ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange'\n};\n","/**\n * @module ol/reproj\n */\nimport {createCanvasContext2D} from './dom.js';\nimport {containsCoordinate, createEmpty, extend, getHeight, getTopLeft, getWidth} from './extent.js';\nimport {solveLinearSystem} from './math.js';\nimport {getPointResolution, transform} from './proj.js';\n\n\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {module:ol/proj/Projection} sourceProj Source projection.\n * @param {module:ol/proj/Projection} targetProj Target projection.\n * @param {module:ol/coordinate~Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(sourceProj, targetProj,\n  targetCenter, targetResolution) {\n\n  const sourceCenter = transform(targetCenter, targetProj, sourceProj);\n\n  // calculate the ideal resolution of the source data\n  let sourceResolution = getPointResolution(targetProj, targetResolution, targetCenter);\n\n  const targetMetersPerUnit = targetProj.getMetersPerUnit();\n  if (targetMetersPerUnit !== undefined) {\n    sourceResolution *= targetMetersPerUnit;\n  }\n  const sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n  if (sourceMetersPerUnit !== undefined) {\n    sourceResolution /= sourceMetersPerUnit;\n  }\n\n  // Based on the projection properties, the point resolution at the specified\n  // coordinates may be slightly different. We need to reverse-compensate this\n  // in order to achieve optimal results.\n\n  const sourceExtent = sourceProj.getExtent();\n  if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n    const compensationFactor = getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n        sourceResolution;\n    if (isFinite(compensationFactor) && compensationFactor > 0) {\n      sourceResolution /= compensationFactor;\n    }\n  }\n\n  return sourceResolution;\n}\n\n\n/**\n * Enlarge the clipping triangle point by 1 pixel to ensure the edges overlap\n * in order to mask gaps caused by antialiasing.\n *\n * @param {number} centroidX Centroid of the triangle (x coordinate in pixels).\n * @param {number} centroidY Centroid of the triangle (y coordinate in pixels).\n * @param {number} x X coordinate of the point (in pixels).\n * @param {number} y Y coordinate of the point (in pixels).\n * @return {module:ol/coordinate~Coordinate} New point 1 px farther from the centroid.\n */\nfunction enlargeClipPoint(centroidX, centroidY, x, y) {\n  const dX = x - centroidX;\n  const dY = y - centroidY;\n  const distance = Math.sqrt(dX * dX + dY * dY);\n  return [Math.round(x + dX / distance), Math.round(y + dY / distance)];\n}\n\n\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {module:ol/extent~Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {module:ol/extent~Extent} targetExtent Target extent.\n * @param {module:ol/reproj/Triangulation} triangulation\n * Calculated triangulation.\n * @param {Array<{extent: module:ol/extent~Extent,\n *                 image: (HTMLCanvasElement|HTMLImageElement|HTMLVideoElement)}>} sources\n * Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(width, height, pixelRatio,\n  sourceResolution, sourceExtent, targetResolution, targetExtent,\n  triangulation, sources, gutter, opt_renderEdges) {\n\n  const context = createCanvasContext2D(Math.round(pixelRatio * width),\n    Math.round(pixelRatio * height));\n\n  if (sources.length === 0) {\n    return context.canvas;\n  }\n\n  context.scale(pixelRatio, pixelRatio);\n\n  const sourceDataExtent = createEmpty();\n  sources.forEach(function(src, i, arr) {\n    extend(sourceDataExtent, src.extent);\n  });\n\n  const canvasWidthInUnits = getWidth(sourceDataExtent);\n  const canvasHeightInUnits = getHeight(sourceDataExtent);\n  const stitchContext = createCanvasContext2D(\n    Math.round(pixelRatio * canvasWidthInUnits / sourceResolution),\n    Math.round(pixelRatio * canvasHeightInUnits / sourceResolution));\n\n  const stitchScale = pixelRatio / sourceResolution;\n\n  sources.forEach(function(src, i, arr) {\n    const xPos = src.extent[0] - sourceDataExtent[0];\n    const yPos = -(src.extent[3] - sourceDataExtent[3]);\n    const srcWidth = getWidth(src.extent);\n    const srcHeight = getHeight(src.extent);\n\n    stitchContext.drawImage(\n      src.image,\n      gutter, gutter,\n      src.image.width - 2 * gutter, src.image.height - 2 * gutter,\n      xPos * stitchScale, yPos * stitchScale,\n      srcWidth * stitchScale, srcHeight * stitchScale);\n  });\n\n  const targetTopLeft = getTopLeft(targetExtent);\n\n  triangulation.getTriangles().forEach(function(triangle, i, arr) {\n    /* Calculate affine transform (src -> dst)\n     * Resulting matrix can be used to transform coordinate\n     * from `sourceProjection` to destination pixels.\n     *\n     * To optimize number of context calls and increase numerical stability,\n     * we also do the following operations:\n     * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n     * here before solving the linear system so [ui, vi] are pixel coordinates.\n     *\n     * Src points: xi, yi\n     * Dst points: ui, vi\n     * Affine coefficients: aij\n     *\n     * | x0 y0 1  0  0 0 |   |a00|   |u0|\n     * | x1 y1 1  0  0 0 |   |a01|   |u1|\n     * | x2 y2 1  0  0 0 | x |a02| = |u2|\n     * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n     * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n     * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n     */\n    const source = triangle.source;\n    const target = triangle.target;\n    let x0 = source[0][0], y0 = source[0][1];\n    let x1 = source[1][0], y1 = source[1][1];\n    let x2 = source[2][0], y2 = source[2][1];\n    const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n    const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n    const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n    const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n    const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n    const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n    // Shift all the source points to improve numerical stability\n    // of all the subsequent calculations. The [x0, y0] is used here.\n    // This is also used to simplify the linear system.\n    const sourceNumericalShiftX = x0;\n    const sourceNumericalShiftY = y0;\n    x0 = 0;\n    y0 = 0;\n    x1 -= sourceNumericalShiftX;\n    y1 -= sourceNumericalShiftY;\n    x2 -= sourceNumericalShiftX;\n    y2 -= sourceNumericalShiftY;\n\n    const augmentedMatrix = [\n      [x1, y1, 0, 0, u1 - u0],\n      [x2, y2, 0, 0, u2 - u0],\n      [0, 0, x1, y1, v1 - v0],\n      [0, 0, x2, y2, v2 - v0]\n    ];\n    const affineCoefs = solveLinearSystem(augmentedMatrix);\n    if (!affineCoefs) {\n      return;\n    }\n\n    context.save();\n    context.beginPath();\n    const centroidX = (u0 + u1 + u2) / 3;\n    const centroidY = (v0 + v1 + v2) / 3;\n    const p0 = enlargeClipPoint(centroidX, centroidY, u0, v0);\n    const p1 = enlargeClipPoint(centroidX, centroidY, u1, v1);\n    const p2 = enlargeClipPoint(centroidX, centroidY, u2, v2);\n\n    context.moveTo(p1[0], p1[1]);\n    context.lineTo(p0[0], p0[1]);\n    context.lineTo(p2[0], p2[1]);\n    context.clip();\n\n    context.transform(\n      affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n\n    context.translate(sourceDataExtent[0] - sourceNumericalShiftX,\n      sourceDataExtent[3] - sourceNumericalShiftY);\n\n    context.scale(sourceResolution / pixelRatio,\n      -sourceResolution / pixelRatio);\n\n    context.drawImage(stitchContext.canvas, 0, 0);\n    context.restore();\n  });\n\n  if (opt_renderEdges) {\n    context.save();\n\n    context.strokeStyle = 'black';\n    context.lineWidth = 1;\n\n    triangulation.getTriangles().forEach(function(triangle, i, arr) {\n      const target = triangle.target;\n      const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n      const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n      const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n      const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n      const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n      const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n      context.beginPath();\n      context.moveTo(u1, v1);\n      context.lineTo(u0, v0);\n      context.lineTo(u2, v2);\n      context.closePath();\n      context.stroke();\n    });\n\n    context.restore();\n  }\n  return context.canvas;\n}\n","/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number): (number|undefined)} Type\n */\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation, delta) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation, delta) {\n  if (rotation !== undefined) {\n    return rotation + delta;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number} n N.\n * @return {module:ol/rotationconstraint~Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        rotation = Math.floor((rotation + delta) / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    });\n}\n\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {module:ol/rotationconstraint~Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n  const tolerance = opt_tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        if (Math.abs(rotation + delta) <= tolerance) {\n          return 0;\n        } else {\n          return rotation + delta;\n        }\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n","/**\n * @module ol/MapBrowserPointerEvent\n */\nimport MapBrowserEvent from './MapBrowserEvent.js';\n\nclass MapBrowserPointerEvent extends MapBrowserEvent {\n\n  /**\n   * @param {string} type Event type.\n   * @param {module:ol/PluggableMap} map Map.\n   * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer event.\n   * @param {boolean=} opt_dragging Is the map currently being dragged?\n   * @param {?module:ol/PluggableMap~FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, pointerEvent, opt_dragging, opt_frameState) {\n\n    super(type, map, pointerEvent.originalEvent, opt_dragging, opt_frameState);\n\n    /**\n     * @const\n     * @type {module:ol/pointer/PointerEvent}\n     */\n    this.pointerEvent = pointerEvent;\n\n  }\n\n}\n\nexport default MapBrowserPointerEvent;\n","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from '../proj/Units.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {module:ol/proj/Units|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {module:ol/extent~Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {module:ol/extent~Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, module:ol/coordinate~Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `{number}` view resolution and an `{module:ol/coordinate~Coordinate}` as arguments, and returns\n * the `{number}` resolution at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj#getPointResolution} function will be used.\n */\n\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj~get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4~register} function.\n *\n * @api\n */\nclass Projection {\n\n  /**\n   * @param {module:ol/proj/Projection~Options} options Projection options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {string}\n     */\n    this.code_ = options.code;\n\n    /**\n     * Units of projected coordinates. When set to `TILE_PIXELS`, a\n     * `this.extent_` and `this.worldExtent_` must be configured properly for each\n     * tile.\n     * @private\n     * @type {module:ol/proj/Units}\n     */\n    this.units_ = /** @type {module:ol/proj/Units} */ (options.units);\n\n    /**\n     * Validity extent of the projection in projected coordinates. For projections\n     * with `TILE_PIXELS` units, this is the extent of the tile in\n     * tile pixel space.\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.extent_ = options.extent !== undefined ? options.extent : null;\n\n    /**\n     * Extent of the world in EPSG:4326. For projections with\n     * `TILE_PIXELS` units, this is the extent of the tile in\n     * projected coordinate space.\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.worldExtent_ = options.worldExtent !== undefined ?\n      options.worldExtent : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.axisOrientation_ = options.axisOrientation !== undefined ?\n      options.axisOrientation : 'enu';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.global_ = options.global !== undefined ? options.global : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.canWrapX_ = !!(this.global_ && this.extent_);\n\n    /**\n     * @private\n     * @type {function(number, module:ol/coordinate~Coordinate):number|undefined}\n     */\n    this.getPointResolutionFunc_ = options.getPointResolution;\n\n    /**\n     * @private\n     * @type {module:ol/tilegrid/TileGrid}\n     */\n    this.defaultTileGrid_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.metersPerUnit_ = options.metersPerUnit;\n  }\n\n  /**\n   * @return {boolean} The projection is suitable for wrapping the x-axis\n   */\n  canWrapX() {\n    return this.canWrapX_;\n  }\n\n  /**\n   * Get the code for this projection, e.g. 'EPSG:4326'.\n   * @return {string} Code.\n   * @api\n   */\n  getCode() {\n    return this.code_;\n  }\n\n  /**\n   * Get the validity extent for this projection.\n   * @return {module:ol/extent~Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the units of this projection.\n   * @return {module:ol/proj/Units} Units.\n   * @api\n   */\n  getUnits() {\n    return this.units_;\n  }\n\n  /**\n   * Get the amount of meters per unit of this projection.  If the projection is\n   * not configured with `metersPerUnit` or a units identifier, the return is\n   * `undefined`.\n   * @return {number|undefined} Meters.\n   * @api\n   */\n  getMetersPerUnit() {\n    return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n  }\n\n  /**\n   * Get the world extent for this projection.\n   * @return {module:ol/extent~Extent} Extent.\n   * @api\n   */\n  getWorldExtent() {\n    return this.worldExtent_;\n  }\n\n  /**\n   * Get the axis orientation of this projection.\n   * Example values are:\n   * enu - the default easting, northing, elevation.\n   * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n   *     or south orientated transverse mercator.\n   * wnu - westing, northing, up - some planetary coordinate systems have\n   *     \"west positive\" coordinate systems\n   * @return {string} Axis orientation.\n   * @api\n   */\n  getAxisOrientation() {\n    return this.axisOrientation_;\n  }\n\n  /**\n   * Is this projection a global projection which spans the whole world?\n   * @return {boolean} Whether the projection is global.\n   * @api\n   */\n  isGlobal() {\n    return this.global_;\n  }\n\n  /**\n   * Set if the projection is a global projection which spans the whole world\n   * @param {boolean} global Whether the projection is global.\n   * @api\n   */\n  setGlobal(global) {\n    this.global_ = global;\n    this.canWrapX_ = !!(global && this.extent_);\n  }\n\n  /**\n   * @return {module:ol/tilegrid/TileGrid} The default tile grid.\n   */\n  getDefaultTileGrid() {\n    return this.defaultTileGrid_;\n  }\n\n  /**\n   * @param {module:ol/tilegrid/TileGrid} tileGrid The default tile grid.\n   */\n  setDefaultTileGrid(tileGrid) {\n    this.defaultTileGrid_ = tileGrid;\n  }\n\n  /**\n   * Set the validity extent for this projection.\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @api\n   */\n  setExtent(extent) {\n    this.extent_ = extent;\n    this.canWrapX_ = !!(this.global_ && extent);\n  }\n\n  /**\n   * Set the world extent for this projection.\n   * @param {module:ol/extent~Extent} worldExtent World extent\n   *     [minlon, minlat, maxlon, maxlat].\n   * @api\n   */\n  setWorldExtent(worldExtent) {\n    this.worldExtent_ = worldExtent;\n  }\n\n  /**\n   * Set the getPointResolution function (see {@link module:ol/proj~getPointResolution}\n   * for this projection.\n   * @param {function(number, module:ol/coordinate~Coordinate):number} func Function\n   * @api\n   */\n  setGetPointResolution(func) {\n    this.getPointResolutionFunc_ = func;\n  }\n\n  /**\n   * Get the custom point resolution function for this projection (if set).\n   * @return {function(number, module:ol/coordinate~Coordinate):number|undefined} The custom point\n   * resolution function (if set).\n   */\n  getPointResolutionFunc() {\n    return this.getPointResolutionFunc_;\n  }\n}\n\nexport default Projection;\n","/**\n * @module ol/layer/Image\n */\nimport LayerType from '../LayerType.js';\nimport Layer from '../layer/Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {module:ol/PluggableMap} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {module:ol/source/Image} [source] Source for this layer.\n */\n\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires module:ol/render/Event~RenderEvent\n * @api\n */\nclass ImageLayer extends Layer {\n\n  /**\n   * @param {module:ol/layer/Image~Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n    super(options);\n\n    /**\n     * The layer type.\n     * @protected\n     * @type {module:ol/LayerType}\n     */\n    this.type = LayerType.IMAGE;\n\n  }\n\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Image source} of the image layer.\n * @function\n * @return {module:ol/source/Image} Source.\n * @api\n */\nImageLayer.prototype.getSource;\nexport default ImageLayer;\n","/**\n * @module ol/geom/MultiLineString\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from '../geom/flat/closest.js';\nimport {deflateCoordinatesArray} from '../geom/flat/deflate.js';\nimport {inflateCoordinatesArray} from '../geom/flat/inflate.js';\nimport {interpolatePoint, lineStringsCoordinateAtM} from '../geom/flat/interpolate.js';\nimport {intersectsLineStringArray} from '../geom/flat/intersectsextent.js';\nimport {douglasPeuckerArray} from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\nclass MultiLineString extends SimpleGeometry {\n\n  /**\n   * @param {Array<Array<module:ol/coordinate~Coordinate>|module:ol/geom~MultiLineString>|Array<number>} coordinates\n   *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n   *     combination with `opt_layout` and `opt_ends` are also accepted.)\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>} opt_ends Flat coordinate ends for internal use.\n   */\n  constructor(coordinates, opt_layout, opt_ends) {\n\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (Array.isArray(coordinates[0])) {\n      this.setCoordinates(coordinates, opt_layout);\n    } else if (opt_layout !== undefined && opt_ends) {\n      this.setFlatCoordinates(opt_layout, coordinates);\n      this.ends_ = opt_ends;\n    } else {\n      let layout = this.getLayout();\n      const flatCoordinates = [];\n      const ends = [];\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        const lineString = coordinates[i];\n        if (i === 0) {\n          layout = lineString.getLayout();\n        }\n        extend(flatCoordinates, lineString.getFlatCoordinates());\n        ends.push(flatCoordinates.length);\n      }\n      this.setFlatCoordinates(layout, flatCoordinates);\n      this.ends_ = ends;\n    }\n\n  }\n\n  /**\n   * Append the passed linestring to the multilinestring.\n   * @param {module:ol/geom/LineString} lineString LineString.\n   * @api\n   */\n  appendLineString(lineString) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = lineString.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/MultiLineString} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * `opt_interpolate` controls interpolation between consecutive LineStrings\n   * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n   * will be linearly interpolated between the last coordinate of one LineString\n   * and the first coordinate of the next LineString.  If `opt_interpolate` is\n   * `false` then the function will return `null` for Ms falling between\n   * LineStrings.\n   *\n   * @param {number} m M.\n   * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n   * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n   * @return {module:ol/coordinate~Coordinate} Coordinate.\n   * @api\n   */\n  getCoordinateAtM(m, opt_extrapolate, opt_interpolate) {\n    if ((this.layout != GeometryLayout.XYM &&\n         this.layout != GeometryLayout.XYZM) ||\n        this.flatCoordinates.length === 0) {\n      return null;\n    }\n    const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    const interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n    return lineStringsCoordinateAtM(this.flatCoordinates, 0,\n      this.ends_, this.stride, m, extrapolate, interpolate);\n  }\n\n  /**\n   * Return the coordinates of the multilinestring.\n   * @return {Array<Array<module:ol/coordinate~Coordinate>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinatesArray(\n      this.flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * Return the linestring at the specified index.\n   * @param {number} index Index.\n   * @return {module:ol/geom/LineString} LineString.\n   * @api\n   */\n  getLineString(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LineString(this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  }\n\n  /**\n   * Return the linestrings of this multilinestring.\n   * @return {Array<module:ol/geom/LineString>} LineStrings.\n   * @api\n   */\n  getLineStrings() {\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const layout = this.layout;\n    /** @type {Array<module:ol/geom/LineString>} */\n    const lineStrings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n      lineStrings.push(lineString);\n      offset = end;\n    }\n    return lineStrings;\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoints.\n   */\n  getFlatMidpoints() {\n    const midpoints = [];\n    const flatCoordinates = this.flatCoordinates;\n    let offset = 0;\n    const ends = this.ends_;\n    const stride = this.stride;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const midpoint = interpolatePoint(\n        flatCoordinates, offset, end, stride, 0.5);\n      extend(midpoints, midpoint);\n      offset = end;\n    }\n    return midpoints;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = douglasPeuckerArray(\n      this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_LINE_STRING;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLineStringArray(\n      this.flatCoordinates, 0, this.ends_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the multilinestring.\n   * @param {!Array<Array<module:ol/coordinate~Coordinate>>} coordinates Coordinates.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\n\nexport default MultiLineString;\n","/**\n * @module ol/tileurlfunction\n */\nimport {assert} from './asserts.js';\nimport {modulo} from './math.js';\nimport {hash as tileCoordHash} from './tilecoord.js';\n\n\n/**\n * @param {string} template Template.\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @return {module:ol/Tile~UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n  const zRegEx = /\\{z\\}/g;\n  const xRegEx = /\\{x\\}/g;\n  const yRegEx = /\\{y\\}/g;\n  const dashYRegEx = /\\{-y\\}/g;\n  return (\n    /**\n     * @param {module:ol/tilecoord~TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {module:ol/proj/Projection} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        return template.replace(zRegEx, tileCoord[0].toString())\n          .replace(xRegEx, tileCoord[1].toString())\n          .replace(yRegEx, function() {\n            const y = -tileCoord[2] - 1;\n            return y.toString();\n          })\n          .replace(dashYRegEx, function() {\n            const z = tileCoord[0];\n            const range = tileGrid.getFullTileRange(z);\n            assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n            const y = range.getHeight() + tileCoord[2];\n            return y.toString();\n          });\n      }\n    }\n  );\n}\n\n\n/**\n * @param {Array<string>} templates Templates.\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @return {module:ol/Tile~UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n  const len = templates.length;\n  const tileUrlFunctions = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n  }\n  return createFromTileUrlFunctions(tileUrlFunctions);\n}\n\n\n/**\n * @param {Array<module:ol/Tile~UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {module:ol/Tile~UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n  return (\n    /**\n     * @param {module:ol/tilecoord~TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {module:ol/proj/Projection} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        const h = tileCoordHash(tileCoord);\n        const index = modulo(h, tileUrlFunctions.length);\n        return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n      }\n    }\n  );\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n  return undefined;\n}\n\n\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n  const urls = [];\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    const stop = parseInt(match[2], 10);\n    for (let i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n}\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend'\n\n};\n","/**\n * @module ol/style/Text\n */\nimport Fill from '../style/Fill.js';\nimport TextPlacement from '../style/TextPlacement.js';\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'\n * @property {number} [maxAngle] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45 (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {module:ol/style/TextPlacement|string} [placement] Text placement.\n * @property {number} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {module:ol/style/Fill} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {module:ol/style/Fill} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {module:ol/style/Stroke} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n\n\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nclass Text {\n  /**\n   * @param {module:ol/style/Text~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.font_ = options.font;\n\n    /**\n    * @private\n    * @type {number|undefined}\n    */\n    this.rotation_ = options.rotation;\n\n    /**\n    * @private\n    * @type {boolean|undefined}\n    */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n    * @private\n    * @type {number|undefined}\n    */\n    this.scale_ = options.scale;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.text_ = options.text;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.textAlign_ = options.textAlign;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.textBaseline_ = options.textBaseline;\n\n    /**\n    * @private\n    * @type {module:ol/style/Fill}\n    */\n    this.fill_ = options.fill !== undefined ? options.fill :\n      new Fill({color: DEFAULT_FILL_COLOR});\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n    /**\n    * @private\n    * @type {module:ol/style/TextPlacement|string}\n    */\n    this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n    /**\n    * @private\n    * @type {boolean}\n    */\n    this.overflow_ = !!options.overflow;\n\n    /**\n    * @private\n    * @type {module:ol/style/Stroke}\n    */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n    /**\n    * @private\n    * @type {module:ol/style/Fill}\n    */\n    this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n    /**\n    * @private\n    * @type {module:ol/style/Stroke}\n    */\n    this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n    /**\n    * @private\n    * @type {Array<number>}\n    */\n    this.padding_ = options.padding === undefined ? null : options.padding;\n  }\n\n  /**\n  * Clones the style.\n  * @return {module:ol/style/Text} The cloned style.\n  * @api\n  */\n  clone() {\n    return new Text({\n      font: this.getFont(),\n      placement: this.getPlacement(),\n      maxAngle: this.getMaxAngle(),\n      overflow: this.getOverflow(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: this.getScale(),\n      text: this.getText(),\n      textAlign: this.getTextAlign(),\n      textBaseline: this.getTextBaseline(),\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      offsetX: this.getOffsetX(),\n      offsetY: this.getOffsetY(),\n      backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n      backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined\n    });\n  }\n\n  /**\n  * Get the `overflow` configuration.\n  * @return {boolean} Let text overflow the length of the path they follow.\n  * @api\n  */\n  getOverflow() {\n    return this.overflow_;\n  }\n\n  /**\n  * Get the font name.\n  * @return {string|undefined} Font.\n  * @api\n  */\n  getFont() {\n    return this.font_;\n  }\n\n  /**\n  * Get the maximum angle between adjacent characters.\n  * @return {number} Angle in radians.\n  * @api\n  */\n  getMaxAngle() {\n    return this.maxAngle_;\n  }\n\n  /**\n  * Get the label placement.\n  * @return {module:ol/style/TextPlacement|string} Text placement.\n  * @api\n  */\n  getPlacement() {\n    return this.placement_;\n  }\n\n  /**\n  * Get the x-offset for the text.\n  * @return {number} Horizontal text offset.\n  * @api\n  */\n  getOffsetX() {\n    return this.offsetX_;\n  }\n\n  /**\n  * Get the y-offset for the text.\n  * @return {number} Vertical text offset.\n  * @api\n  */\n  getOffsetY() {\n    return this.offsetY_;\n  }\n\n  /**\n  * Get the fill style for the text.\n  * @return {module:ol/style/Fill} Fill style.\n  * @api\n  */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n  * Determine whether the text rotates with the map.\n  * @return {boolean|undefined} Rotate with map.\n  * @api\n  */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n  * Get the text rotation.\n  * @return {number|undefined} Rotation.\n  * @api\n  */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n  * Get the text scale.\n  * @return {number|undefined} Scale.\n  * @api\n  */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n  * Get the stroke style for the text.\n  * @return {module:ol/style/Stroke} Stroke style.\n  * @api\n  */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n  * Get the text to be rendered.\n  * @return {string|undefined} Text.\n  * @api\n  */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n  * Get the text alignment.\n  * @return {string|undefined} Text align.\n  * @api\n  */\n  getTextAlign() {\n    return this.textAlign_;\n  }\n\n  /**\n  * Get the text baseline.\n  * @return {string|undefined} Text baseline.\n  * @api\n  */\n  getTextBaseline() {\n    return this.textBaseline_;\n  }\n\n  /**\n  * Get the background fill style for the text.\n  * @return {module:ol/style/Fill} Fill style.\n  * @api\n  */\n  getBackgroundFill() {\n    return this.backgroundFill_;\n  }\n\n  /**\n  * Get the background stroke style for the text.\n  * @return {module:ol/style/Stroke} Stroke style.\n  * @api\n  */\n  getBackgroundStroke() {\n    return this.backgroundStroke_;\n  }\n\n  /**\n  * Get the padding for the text.\n  * @return {Array<number>} Padding.\n  * @api\n  */\n  getPadding() {\n    return this.padding_;\n  }\n\n  /**\n  * Set the `overflow` property.\n  *\n  * @param {boolean} overflow Let text overflow the path that it follows.\n  * @api\n  */\n  setOverflow(overflow) {\n    this.overflow_ = overflow;\n  }\n\n  /**\n  * Set the font.\n  *\n  * @param {string|undefined} font Font.\n  * @api\n  */\n  setFont(font) {\n    this.font_ = font;\n  }\n\n  /**\n  * Set the maximum angle between adjacent characters.\n  *\n  * @param {number} maxAngle Angle in radians.\n  * @api\n  */\n  setMaxAngle(maxAngle) {\n    this.maxAngle_ = maxAngle;\n  }\n\n  /**\n  * Set the x offset.\n  *\n  * @param {number} offsetX Horizontal text offset.\n  * @api\n  */\n  setOffsetX(offsetX) {\n    this.offsetX_ = offsetX;\n  }\n\n  /**\n  * Set the y offset.\n  *\n  * @param {number} offsetY Vertical text offset.\n  * @api\n  */\n  setOffsetY(offsetY) {\n    this.offsetY_ = offsetY;\n  }\n\n  /**\n  * Set the text placement.\n  *\n  * @param {module:ol/style/TextPlacement|string} placement Placement.\n  * @api\n  */\n  setPlacement(placement) {\n    this.placement_ = placement;\n  }\n\n  /**\n  * Set the fill.\n  *\n  * @param {module:ol/style/Fill} fill Fill style.\n  * @api\n  */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n  * Set the rotation.\n  *\n  * @param {number|undefined} rotation Rotation.\n  * @api\n  */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n\n  /**\n  * Set the scale.\n  *\n  * @param {number|undefined} scale Scale.\n  * @api\n  */\n  setScale(scale) {\n    this.scale_ = scale;\n  }\n\n  /**\n  * Set the stroke.\n  *\n  * @param {module:ol/style/Stroke} stroke Stroke style.\n  * @api\n  */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n  * Set the text.\n  *\n  * @param {string|undefined} text Text.\n  * @api\n  */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n  * Set the text alignment.\n  *\n  * @param {string|undefined} textAlign Text align.\n  * @api\n  */\n  setTextAlign(textAlign) {\n    this.textAlign_ = textAlign;\n  }\n\n  /**\n  * Set the text baseline.\n  *\n  * @param {string|undefined} textBaseline Text baseline.\n  * @api\n  */\n  setTextBaseline(textBaseline) {\n    this.textBaseline_ = textBaseline;\n  }\n\n  /**\n  * Set the background fill.\n  *\n  * @param {module:ol/style/Fill} fill Fill style.\n  * @api\n  */\n  setBackgroundFill(fill) {\n    this.backgroundFill_ = fill;\n  }\n\n  /**\n  * Set the background stroke.\n  *\n  * @param {module:ol/style/Stroke} stroke Stroke style.\n  * @api\n  */\n  setBackgroundStroke(stroke) {\n    this.backgroundStroke_ = stroke;\n  }\n\n  /**\n  * Set the padding (`[top, right, bottom, left]`).\n  *\n  * @param {!Array<number>} padding Padding.\n  * @api\n  */\n  setPadding(padding) {\n    this.padding_ = padding;\n  }\n}\n\nexport default Text;\n","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport {containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment} from '../../extent.js';\nimport {linearRingContainsXY, linearRingContainsExtent} from '../flat/contains.js';\nimport {forEach as forEachSegment} from '../flat/segments.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\n  const coordinatesExtent = extendFlatCoordinates(\n    createEmpty(), flatCoordinates, offset, end, stride);\n  if (!intersects(extent, coordinatesExtent)) {\n    return false;\n  }\n  if (containsExtent(extent, coordinatesExtent)) {\n    return true;\n  }\n  if (coordinatesExtent[0] >= extent[0] &&\n      coordinatesExtent[2] <= extent[2]) {\n    return true;\n  }\n  if (coordinatesExtent[1] >= extent[1] &&\n      coordinatesExtent[3] <= extent[3]) {\n    return true;\n  }\n  return forEachSegment(flatCoordinates, offset, end, stride,\n    /**\n     * @param {module:ol/coordinate~Coordinate} point1 Start point.\n     * @param {module:ol/coordinate~Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function(point1, point2) {\n      return intersectsSegment(extent, point1, point2);\n    });\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    if (intersectsLineString(\n      flatCoordinates, offset, ends[i], stride, extent)) {\n      return true;\n    }\n    offset = ends[i];\n  }\n  return false;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\n  if (intersectsLineString(\n    flatCoordinates, offset, end, stride, extent)) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\n  if (!intersectsLinearRing(\n    flatCoordinates, offset, ends[0], stride, extent)) {\n    return false;\n  }\n  if (ends.length === 1) {\n    return true;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (intersectsLinearRingArray(\n      flatCoordinates, offset, ends, stride, extent)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/geom/MultiPoint\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, containsXY} from '../extent.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Point from '../geom/Point.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {deflateCoordinates} from '../geom/flat/deflate.js';\nimport {inflateCoordinates} from '../geom/flat/inflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\nclass MultiPoint extends SimpleGeometry {\n\n  /**\n   * @param {Array<module:ol/coordinate~Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n    super();\n    if (opt_layout && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, coordinates);\n    } else {\n      this.setCoordinates(coordinates, opt_layout);\n    }\n  }\n\n  /**\n   * Append the passed point to this multipoint.\n   * @param {module:ol/geom/Point} point Point.\n   * @api\n   */\n  appendPoint(point) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = point.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, point.getFlatCoordinates());\n    }\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/MultiPoint} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n    return multiPoint;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    const flatCoordinates = this.flatCoordinates;\n    const stride = this.stride;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const squaredDistance = squaredDx(\n        x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n      if (squaredDistance < minSquaredDistance) {\n        minSquaredDistance = squaredDistance;\n        for (let j = 0; j < stride; ++j) {\n          closestPoint[j] = flatCoordinates[i + j];\n        }\n        closestPoint.length = stride;\n      }\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * Return the coordinates of the multipoint.\n   * @return {Array<module:ol/coordinate~Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the point at the specified index.\n   * @param {number} index Index.\n   * @return {module:ol/geom/Point} Point.\n   * @api\n   */\n  getPoint(index) {\n    const n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n    if (index < 0 || n <= index) {\n      return null;\n    }\n    return new Point(this.flatCoordinates.slice(\n      index * this.stride, (index + 1) * this.stride), this.layout);\n  }\n\n  /**\n   * Return the points of this multipoint.\n   * @return {Array<module:ol/geom/Point>} Points.\n   * @api\n   */\n  getPoints() {\n    const flatCoordinates = this.flatCoordinates;\n    const layout = this.layout;\n    const stride = this.stride;\n    /** @type {Array<module:ol/geom/Point>} */\n    const points = [];\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const point = new Point(flatCoordinates.slice(i, i + stride), layout);\n      points.push(point);\n    }\n    return points;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_POINT;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const flatCoordinates = this.flatCoordinates;\n    const stride = this.stride;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      if (containsXY(extent, x, y)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the multipoint.\n   * @param {!Array<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default MultiPoint;\n","/**\n * @module ol/geom/MultiPolygon\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport Polygon from '../geom/Polygon.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {linearRingss as linearRingssArea} from '../geom/flat/area.js';\nimport {linearRingss as linearRingssCenter} from '../geom/flat/center.js';\nimport {assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta} from '../geom/flat/closest.js';\nimport {linearRingssContainsXY} from '../geom/flat/contains.js';\nimport {deflateMultiCoordinatesArray} from '../geom/flat/deflate.js';\nimport {inflateMultiCoordinatesArray} from '../geom/flat/inflate.js';\nimport {getInteriorPointsOfMultiArray} from '../geom/flat/interiorpoint.js';\nimport {intersectsLinearRingMultiArray} from '../geom/flat/intersectsextent.js';\nimport {linearRingsAreOriented, orientLinearRingsArray} from '../geom/flat/orient.js';\nimport {quantizeMultiArray} from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\nclass MultiPolygon extends SimpleGeometry {\n\n  /**\n   * @param {Array<Array<Array<module:ol/coordinate~Coordinate>>>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinats in combination with `opt_layout` and `opt_endss` are also accepted.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>} opt_endss Array of ends for internal use with flat coordinates.\n   */\n  constructor(coordinates, opt_layout, opt_endss) {\n\n    super();\n\n    /**\n     * @type {Array<Array<number>>}\n     * @private\n     */\n    this.endss_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointsRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatInteriorPoints_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (!opt_endss && !Array.isArray(coordinates[0])) {\n      let layout = this.getLayout();\n      const flatCoordinates = [];\n      const endss = [];\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        const polygon = coordinates[i];\n        if (i === 0) {\n          layout = polygon.getLayout();\n        }\n        const offset = flatCoordinates.length;\n        const ends = polygon.getEnds();\n        for (let j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] += offset;\n        }\n        extend(flatCoordinates, polygon.getFlatCoordinates());\n        endss.push(ends);\n      }\n      opt_layout = layout;\n      coordinates = flatCoordinates;\n      opt_endss = endss;\n    }\n    if (opt_layout !== undefined && opt_endss) {\n      this.setFlatCoordinates(opt_layout, coordinates);\n      this.endss_ = opt_endss;\n    } else {\n      this.setCoordinates(coordinates, opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed polygon to this multipolygon.\n   * @param {module:ol/geom/Polygon} polygon Polygon.\n   * @api\n   */\n  appendPolygon(polygon) {\n    /** @type {Array<number>} */\n    let ends;\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = polygon.getFlatCoordinates().slice();\n      ends = polygon.getEnds().slice();\n      this.endss_.push();\n    } else {\n      const offset = this.flatCoordinates.length;\n      extend(this.flatCoordinates, polygon.getFlatCoordinates());\n      ends = polygon.getEnds().slice();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] += offset;\n      }\n    }\n    this.endss_.push(ends);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/MultiPolygon} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const len = this.endss_.length;\n    const newEndss = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      newEndss[i] = this.endss_[i].slice();\n    }\n\n    return new MultiPolygon(\n      this.flatCoordinates.slice(), this.layout, newEndss);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.endss_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestMultiArrayPoint(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n  }\n\n  /**\n   * Return the area of the multipolygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for multi-polygons.\n   *\n   * @param {boolean=} opt_right Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<Array<module:ol/coordinate~Coordinate>>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates(opt_right) {\n    let flatCoordinates;\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRingsArray(\n        flatCoordinates, 0, this.endss_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateMultiCoordinatesArray(\n      flatCoordinates, 0, this.endss_, this.stride);\n  }\n\n  /**\n   * @return {Array<Array<number>>} Endss.\n   */\n  getEndss() {\n    return this.endss_;\n  }\n\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n  getFlatInteriorPoints() {\n    if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n      const flatCenters = linearRingssCenter(\n        this.flatCoordinates, 0, this.endss_, this.stride);\n      this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(\n        this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n        flatCenters);\n      this.flatInteriorPointsRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoints_;\n  }\n\n  /**\n   * Return the interior points as {@link module:ol/geom/MultiPoint multipoint}.\n   * @return {module:ol/geom/MultiPoint} Interior points as XYM coordinates, where M is\n   * the length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoints() {\n    return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingsAreOriented(\n        flatCoordinates, 0, this.endss_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length =\n            orientLinearRingsArray(\n              this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEndss = [];\n    simplifiedFlatCoordinates.length = quantizeMultiArray(\n      this.flatCoordinates, 0, this.endss_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEndss);\n    return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n  }\n\n  /**\n   * Return the polygon at the specified index.\n   * @param {number} index Index.\n   * @return {module:ol/geom/Polygon} Polygon.\n   * @api\n   */\n  getPolygon(index) {\n    if (index < 0 || this.endss_.length <= index) {\n      return null;\n    }\n    let offset;\n    if (index === 0) {\n      offset = 0;\n    } else {\n      const prevEnds = this.endss_[index - 1];\n      offset = prevEnds[prevEnds.length - 1];\n    }\n    const ends = this.endss_[index].slice();\n    const end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] -= offset;\n      }\n    }\n    return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n  }\n\n  /**\n   * Return the polygons of this multipolygon.\n   * @return {Array<module:ol/geom/Polygon>} Polygons.\n   * @api\n   */\n  getPolygons() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const endss = this.endss_;\n    const polygons = [];\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      const ends = endss[i].slice();\n      const end = ends[ends.length - 1];\n      if (offset !== 0) {\n        for (let j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] -= offset;\n        }\n      }\n      const polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n      polygons.push(polygon);\n      offset = end;\n    }\n    return polygons;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_POLYGON;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingMultiArray(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the multipolygon.\n   * @param {!Array<Array<Array<module:ol/coordinate~Coordinate>>>} coordinates Coordinates.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const endss = deflateMultiCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      const lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n}\n\n\nexport default MultiPolygon;\n","/**\n * @module ol/geom/flat/center\n */\nimport {createEmpty, createOrUpdateFromFlatCoordinates} from '../../extent.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  const flatCenters = [];\n  let extent = createEmpty();\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n  return flatCenters;\n}\n","/**\n * @module ol/reproj/Image\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport ImageBase from '../ImageBase.js';\nimport ImageState from '../ImageState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getCenter, getIntersection, getHeight, getWidth} from '../extent.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from '../reproj/Triangulation.js';\n\n\n/**\n * @typedef {function(module:ol/extent~Extent, number, number) : module:ol/ImageBase} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected image.\n * See {@link module:ol/source/Image~ImageSource}.\n */\nclass ReprojImage extends ImageBase {\n  /**\n   * @param {module:ol/proj/Projection} sourceProj Source projection (of the data).\n   * @param {module:ol/proj/Projection} targetProj Target projection.\n   * @param {module:ol/extent~Extent} targetExtent Target extent.\n   * @param {number} targetResolution Target resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/reproj/Image~FunctionType} getImageFunction\n   *     Function returning source images (extent, resolution, pixelRatio).\n   */\n  constructor(sourceProj, targetProj, targetExtent, targetResolution, pixelRatio, getImageFunction) {\n    const maxSourceExtent = sourceProj.getExtent();\n    const maxTargetExtent = targetProj.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    const errorThresholdInPixels = ERROR_THRESHOLD;\n\n    const triangulation = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    const sourceExtent = triangulation.calculateSourceExtent();\n    const sourceImage = getImageFunction(sourceExtent, sourceResolution, pixelRatio);\n    let state = ImageState.LOADED;\n    if (sourceImage) {\n      state = ImageState.IDLE;\n    }\n    const sourcePixelRatio = sourceImage ? sourceImage.getPixelRatio() : 1;\n\n    super(targetExtent, targetResolution, sourcePixelRatio, state);\n\n    /**\n     * @private\n     * @type {module:ol/proj/Projection}\n     */\n    this.targetProj_ = targetProj;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @private\n     * @type {!module:ol/reproj/Triangulation}\n     */\n    this.triangulation_ = triangulation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.targetResolution_ = targetResolution;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.targetExtent_ = targetExtent;\n\n    /**\n     * @private\n     * @type {module:ol/ImageBase}\n     */\n    this.sourceImage_ = sourceImage;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourcePixelRatio_ = sourcePixelRatio;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/events~EventsKey}\n     */\n    this.sourceListenerKey_ = null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == ImageState.LOADING) {\n      this.unlistenSource_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @return {module:ol/proj/Projection} Projection.\n   */\n  getProjection() {\n    return this.targetProj_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sourceState = this.sourceImage_.getState();\n    if (sourceState == ImageState.LOADED) {\n      const width = getWidth(this.targetExtent_) / this.targetResolution_;\n      const height = getHeight(this.targetExtent_) / this.targetResolution_;\n\n      this.canvas_ = renderReprojected(width, height, this.sourcePixelRatio_,\n        this.sourceImage_.getResolution(), this.maxSourceExtent_,\n        this.targetResolution_, this.targetExtent_, this.triangulation_, [{\n          extent: this.sourceImage_.getExtent(),\n          image: this.sourceImage_.getImage()\n        }], 0);\n    }\n    this.state = sourceState;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n\n      const sourceState = this.sourceImage_.getState();\n      if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n        this.reproject_();\n      } else {\n        this.sourceListenerKey_ = listen(this.sourceImage_,\n          EventType.CHANGE, function(e) {\n            const sourceState = this.sourceImage_.getState();\n            if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n              this.unlistenSource_();\n              this.reproject_();\n            }\n          }, this);\n        this.sourceImage_.load();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSource_() {\n    unlistenByKey(/** @type {!module:ol/events~EventsKey} */ (this.sourceListenerKey_));\n    this.sourceListenerKey_ = null;\n  }\n}\n\n\nexport default ReprojImage;\n","/**\n * @module ol/source/Image\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\n\nimport ImageState from '../ImageState.js';\nimport {linearFindNearest} from '../array.js';\nimport Event from '../events/Event.js';\nimport {equals} from '../extent.js';\nimport {equivalent} from '../proj.js';\nimport ReprojImage from '../reproj/Image.js';\nimport Source from '../source/Source.js';\n\n\n/**\n * @enum {string}\n */\nconst ImageSourceEventType = {\n\n  /**\n   * Triggered when an image starts loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadstart\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n\n  /**\n   * Triggered when an image finishes loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadend\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n\n  /**\n   * Triggered if image loading results in an error.\n   * @event ol/source/Image~ImageSourceEvent#imageloaderror\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Image~ImageSource} instances are instances of this\n * type.\n */\nclass ImageSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {module:ol/Image} image The image.\n   */\n  constructor(type, image) {\n\n    super(type);\n\n    /**\n     * The image related to the event.\n     * @type {module:ol/Image}\n     * @api\n     */\n    this.image = image;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions]\n * @property {module:ol/extent~Extent} [extent]\n * @property {module:ol/proj~ProjectionLike} projection\n * @property {Array<number>} [resolutions]\n * @property {module:ol/source/State} [state]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing a single image.\n * @api\n */\nclass ImageSource extends Source {\n  /**\n   * @param {module:ol/source/Image~Options} options Single image source options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      extent: options.extent,\n      projection: options.projection,\n      state: options.state\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.resolutions_ = options.resolutions !== undefined ?\n      options.resolutions : null;\n\n\n    /**\n     * @private\n     * @type {module:ol/reproj/Image}\n     */\n    this.reprojectedImage_ = null;\n\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.reprojectedRevision_ = 0;\n  }\n\n  /**\n   * @return {Array<number>} Resolutions.\n   * @override\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @protected\n   * @param {number} resolution Resolution.\n   * @return {number} Resolution.\n   */\n  findNearestResolution(resolution) {\n    if (this.resolutions_) {\n      const idx = linearFindNearest(this.resolutions_, resolution, 0);\n      resolution = this.resolutions_[idx];\n    }\n    return resolution;\n  }\n\n  /**\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {module:ol/ImageBase} Single image.\n   */\n  getImage(extent, resolution, pixelRatio, projection) {\n    const sourceProjection = this.getProjection();\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection ||\n        !projection ||\n        equivalent(sourceProjection, projection)) {\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n      return this.getImageInternal(extent, resolution, pixelRatio, projection);\n    } else {\n      if (this.reprojectedImage_) {\n        if (this.reprojectedRevision_ == this.getRevision() &&\n            equivalent(\n              this.reprojectedImage_.getProjection(), projection) &&\n            this.reprojectedImage_.getResolution() == resolution &&\n            equals(this.reprojectedImage_.getExtent(), extent)) {\n          return this.reprojectedImage_;\n        }\n        this.reprojectedImage_.dispose();\n        this.reprojectedImage_ = null;\n      }\n\n      this.reprojectedImage_ = new ReprojImage(\n        sourceProjection, projection, extent, resolution, pixelRatio,\n        function(extent, resolution, pixelRatio) {\n          return this.getImageInternal(extent, resolution,\n            pixelRatio, sourceProjection);\n        }.bind(this));\n      this.reprojectedRevision_ = this.getRevision();\n\n      return this.reprojectedImage_;\n    }\n  }\n\n  /**\n   * @abstract\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @return {module:ol/ImageBase} Single image.\n   * @protected\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {}\n\n  /**\n   * Handle image change events.\n   * @param {module:ol/events/Event} event Event.\n   * @protected\n   */\n  handleImageChange(event) {\n    const image = /** @type {module:ol/Image} */ (event.target);\n    switch (image.getState()) {\n      case ImageState.LOADING:\n        this.loading = true;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADSTART,\n            image));\n        break;\n      case ImageState.LOADED:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADEND,\n            image));\n        break;\n      case ImageState.ERROR:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADERROR,\n            image));\n        break;\n      default:\n        // pass\n    }\n  }\n}\n\n\n/**\n * Default image load function for image sources that use module:ol/Image~Image image\n * instances.\n * @param {module:ol/Image} image Image.\n * @param {string} src Source.\n */\nexport function defaultImageLoadFunction(image, src) {\n  image.getImage().src = src;\n}\n\n\nexport default ImageSource;\n","/**\n * Default WMS version.\n * @type {string}\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n","/**\n * @module ol/geom/flat/reverse\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    for (let i = 0; i < stride; ++i) {\n      const tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n}\n","/**\n * @module ol/geom/flat/orient\n */\nimport {coordinates as reverseCoordinates} from '../flat/reverse.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge > 0;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingIsOriented(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    if (!linearRingIsOriented(\n      flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    const reverse = i === 0 ?\n      (right && isClockwise) || (!right && !isClockwise) :\n      (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right);\n  }\n  return offset;\n}\n","/**\n * @module ol/tilegrid/common\n */\n\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport const DEFAULT_MAX_ZOOM = 42;\n\n/**\n * Default tile size.\n * @type {number}\n */\nexport const DEFAULT_TILE_SIZE = 256;\n","/**\n * @module ol/format/GeoJSON\n */\n// TODO: serialize dataProjection as crs member when writing\n// see https://github.com/openlayers/openlayers/issues/2078\n\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport JSONFeature from '../format/JSONFeature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {assign, isEmpty} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/proj~ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {module:ol/proj~ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n  * @api\n */\nclass GeoJSON extends JSONFeature {\n\n  /**\n   * @param {module:ol/format/GeoJSON~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super();\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ?\n        options.dataProjection : 'EPSG:4326');\n\n    if (options.featureProjection) {\n      this.defaultFeatureProjection = getProjection(options.featureProjection);\n    }\n\n    /**\n     * Name of the geometry attribute for features.\n     * @type {string|undefined}\n     * @private\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * Look for the geometry name in the feature GeoJSON\n     * @type {boolean|undefined}\n     * @private\n     */\n    this.extractGeometryName_ = options.extractGeometryName;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromObject(object, opt_options) {\n    /**\n     * @type {GeoJSONFeature}\n     */\n    let geoJSONFeature = null;\n    if (object.type === 'Feature') {\n      geoJSONFeature = /** @type {GeoJSONFeature} */ (object);\n    } else {\n      geoJSONFeature = /** @type {GeoJSONFeature} */ ({\n        type: 'Feature',\n        geometry: /** @type {GeoJSONGeometry|GeoJSONGeometryCollection} */ (object)\n      });\n    }\n\n    const geometry = readGeometry(geoJSONFeature.geometry, opt_options);\n    const feature = new Feature();\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    } else if (this.extractGeometryName_ && geoJSONFeature.geometry_name !== undefined) {\n      feature.setGeometryName(geoJSONFeature.geometry_name);\n    }\n    feature.setGeometry(geometry);\n    if (geoJSONFeature.id !== undefined) {\n      feature.setId(geoJSONFeature.id);\n    }\n    if (geoJSONFeature.properties) {\n      feature.setProperties(geoJSONFeature.properties);\n    }\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    const geoJSONObject = /** @type {GeoJSONObject} */ (object);\n    /** @type {Array<module:ol/Feature>} */\n    let features = null;\n    if (geoJSONObject.type === 'FeatureCollection') {\n      const geoJSONFeatureCollection = /** @type {GeoJSONFeatureCollection} */ (object);\n      features = [];\n      const geoJSONFeatures = geoJSONFeatureCollection.features;\n      for (let i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n        features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));\n      }\n    } else {\n      features = [this.readFeatureFromObject(object, opt_options)];\n    }\n    return features;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometryFromObject(object, opt_options) {\n    return readGeometry(/** @type {GeoJSONGeometry} */ (object), opt_options);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    const geoJSONObject = /** @type {GeoJSONObject} */ (object);\n    const crs = geoJSONObject.crs;\n    let projection;\n    if (crs) {\n      if (crs.type == 'name') {\n        projection = getProjection(crs.properties.name);\n      } else {\n        assert(false, 36); // Unknown SRS type\n      }\n    } else {\n      projection = this.dataProjection;\n    }\n    return (\n      /** @type {module:ol/proj/Projection} */ (projection)\n    );\n  }\n\n  /**\n   * Encode a feature as a GeoJSON Feature object.\n   *\n   * @param {module:ol/Feature} feature Feature.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {GeoJSONFeature} Object.\n   * @override\n   * @api\n   */\n  writeFeatureObject(feature, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n\n    const object = /** @type {GeoJSONFeature} */ ({\n      'type': 'Feature'\n    });\n    const id = feature.getId();\n    if (id !== undefined) {\n      object.id = id;\n    }\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      object.geometry = writeGeometry(geometry, opt_options);\n    } else {\n      object.geometry = null;\n    }\n    const properties = feature.getProperties();\n    delete properties[feature.getGeometryName()];\n    if (!isEmpty(properties)) {\n      object.properties = properties;\n    } else {\n      object.properties = null;\n    }\n    return object;\n  }\n\n  /**\n   * Encode an array of features as a GeoJSON object.\n   *\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {GeoJSONFeatureCollection} GeoJSON Object.\n   * @override\n   * @api\n   */\n  writeFeaturesObject(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const objects = [];\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      objects.push(this.writeFeatureObject(features[i], opt_options));\n    }\n    return /** @type {GeoJSONFeatureCollection} */ ({\n      type: 'FeatureCollection',\n      features: objects\n    });\n  }\n\n  /**\n   * Encode a geometry as a GeoJSON object.\n   *\n   * @param {module:ol/geom/Geometry} geometry Geometry.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n   * @override\n   * @api\n   */\n  writeGeometryObject(geometry, opt_options) {\n    return writeGeometry(geometry, this.adaptOptions(opt_options));\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, function(GeoJSONObject): module:ol/geom/Geometry>}\n */\nconst GEOMETRY_READERS = {\n  'Point': readPointGeometry,\n  'LineString': readLineStringGeometry,\n  'Polygon': readPolygonGeometry,\n  'MultiPoint': readMultiPointGeometry,\n  'MultiLineString': readMultiLineStringGeometry,\n  'MultiPolygon': readMultiPolygonGeometry,\n  'GeometryCollection': readGeometryCollectionGeometry\n};\n\n\n/**\n * @const\n * @type {Object<string, function(module:ol/geom/Geometry, module:ol/format/Feature~WriteOptions=): (GeoJSONGeometry|GeoJSONGeometryCollection)>}\n */\nconst GEOMETRY_WRITERS = {\n  'Point': writePointGeometry,\n  'LineString': writeLineStringGeometry,\n  'Polygon': writePolygonGeometry,\n  'MultiPoint': writeMultiPointGeometry,\n  'MultiLineString': writeMultiLineStringGeometry,\n  'MultiPolygon': writeMultiPolygonGeometry,\n  'GeometryCollection': writeGeometryCollectionGeometry,\n  'Circle': writeEmptyGeometryCollectionGeometry\n};\n\n\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/Geometry} Geometry.\n */\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n  const geometryReader = GEOMETRY_READERS[object.type];\n  return (\n    /** @type {module:ol/geom/Geometry} */ (transformWithOptions(geometryReader(object), false, opt_options))\n  );\n}\n\n\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/GeometryCollection} Geometry collection.\n */\nfunction readGeometryCollectionGeometry(object, opt_options) {\n  const geometries = object.geometries.map(\n    /**\n     * @param {GeoJSONGeometry} geometry Geometry.\n     * @return {module:ol/geom/Geometry} geometry Geometry.\n     */\n    function(geometry) {\n      return readGeometry(geometry, opt_options);\n    });\n  return new GeometryCollection(geometries);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/Point} Point.\n */\nfunction readPointGeometry(object) {\n  return new Point(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/LineString} LineString.\n */\nfunction readLineStringGeometry(object) {\n  return new LineString(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/MultiLineString} MultiLineString.\n */\nfunction readMultiLineStringGeometry(object) {\n  return new MultiLineString(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/MultiPoint} MultiPoint.\n */\nfunction readMultiPointGeometry(object) {\n  return new MultiPoint(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/MultiPolygon} MultiPolygon.\n */\nfunction readMultiPolygonGeometry(object) {\n  return new MultiPolygon(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/Polygon} Polygon.\n */\nfunction readPolygonGeometry(object) {\n  return new Polygon(object.coordinates);\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry|GeoJSONGeometryCollection} GeoJSON geometry.\n */\nfunction writeGeometry(geometry, opt_options) {\n  const geometryWriter = GEOMETRY_WRITERS[geometry.getType()];\n  return geometryWriter(/** @type {module:ol/geom/Geometry} */ (\n    transformWithOptions(geometry, true, opt_options)), opt_options);\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @return {GeoJSONGeometryCollection} Empty GeoJSON geometry collection.\n */\nfunction writeEmptyGeometryCollectionGeometry(geometry) {\n  return /** @type {GeoJSONGeometryCollection} */ ({\n    type: 'GeometryCollection',\n    geometries: []\n  });\n}\n\n\n/**\n * @param {module:ol/geom/GeometryCollection} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\nfunction writeGeometryCollectionGeometry(geometry, opt_options) {\n  const geometries = geometry.getGeometriesArray().map(function(geometry) {\n    const options = assign({}, opt_options);\n    delete options.featureProjection;\n    return writeGeometry(geometry, options);\n  });\n  return /** @type {GeoJSONGeometryCollection} */ ({\n    type: 'GeometryCollection',\n    geometries: geometries\n  });\n}\n\n\n/**\n * @param {module:ol/geom/LineString} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeLineStringGeometry(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'LineString',\n    coordinates: geometry.getCoordinates()\n  });\n}\n\n\n/**\n * @param {module:ol/geom/MultiLineString} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates()\n  });\n}\n\n\n/**\n * @param {module:ol/geom/MultiPoint} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPointGeometry(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates()\n  });\n}\n\n\n/**\n * @param {module:ol/geom/MultiPolygon} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right)\n  });\n}\n\n\n/**\n * @param {module:ol/geom/Point} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePointGeometry(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'Point',\n    coordinates: geometry.getCoordinates()\n  });\n}\n\n\n/**\n * @param {module:ol/geom/Polygon} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right)\n  });\n}\n\n\nexport default GeoJSON;\n","/**\n * @module ol/extent/Corner\n */\n\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/TileRange\n */\n\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nclass TileRange {\n\n  /**\n   * @param {number} minX Minimum X.\n   * @param {number} maxX Maximum X.\n   * @param {number} minY Minimum Y.\n   * @param {number} maxY Maximum Y.\n   */\n  constructor(minX, maxX, minY, maxY) {\n\n    /**\n     * @type {number}\n     */\n    this.minX = minX;\n\n    /**\n     * @type {number}\n     */\n    this.maxX = maxX;\n\n    /**\n     * @type {number}\n     */\n    this.minY = minY;\n\n    /**\n     * @type {number}\n     */\n    this.maxY = maxY;\n\n  }\n\n  /**\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @return {boolean} Contains tile coordinate.\n   */\n  contains(tileCoord) {\n    return this.containsXY(tileCoord[1], tileCoord[2]);\n  }\n\n  /**\n   * @param {module:ol/TileRange} tileRange Tile range.\n   * @return {boolean} Contains.\n   */\n  containsTileRange(tileRange) {\n    return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n       this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n  }\n\n  /**\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @return {boolean} Contains coordinate.\n   */\n  containsXY(x, y) {\n    return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n  }\n\n  /**\n   * @param {module:ol/TileRange} tileRange Tile range.\n   * @return {boolean} Equals.\n   */\n  equals(tileRange) {\n    return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n       this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n  }\n\n  /**\n   * @param {module:ol/TileRange} tileRange Tile range.\n   */\n  extend(tileRange) {\n    if (tileRange.minX < this.minX) {\n      this.minX = tileRange.minX;\n    }\n    if (tileRange.maxX > this.maxX) {\n      this.maxX = tileRange.maxX;\n    }\n    if (tileRange.minY < this.minY) {\n      this.minY = tileRange.minY;\n    }\n    if (tileRange.maxY > this.maxY) {\n      this.maxY = tileRange.maxY;\n    }\n  }\n\n  /**\n  * @return {number} Height.\n  */\n  getHeight() {\n    return this.maxY - this.minY + 1;\n  }\n\n  /**\n  * @return {module:ol/size~Size} Size.\n  */\n  getSize() {\n    return [this.getWidth(), this.getHeight()];\n  }\n\n  /**\n  * @return {number} Width.\n  */\n  getWidth() {\n    return this.maxX - this.minX + 1;\n  }\n\n  /**\n  * @param {module:ol/TileRange} tileRange Tile range.\n  * @return {boolean} Intersects.\n  */\n  intersects(tileRange) {\n    return this.minX <= tileRange.maxX &&\n       this.maxX >= tileRange.minX &&\n       this.minY <= tileRange.maxY &&\n       this.maxY >= tileRange.minY;\n  }\n}\n\n\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {module:ol/TileRange=} tileRange TileRange.\n * @return {module:ol/TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n  if (tileRange !== undefined) {\n    tileRange.minX = minX;\n    tileRange.maxX = maxX;\n    tileRange.minY = minY;\n    tileRange.maxY = maxY;\n    return tileRange;\n  } else {\n    return new TileRange(minX, maxX, minY, maxY);\n  }\n}\n\n\nexport default TileRange;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @private\n     */\n    this.disposed_ = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed_) {\n      this.disposed_ = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\n\nimport ImageWrapper from '../Image.js';\nimport {assert} from '../asserts.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport ImageSource, {defaultImageLoadFunction} from '../source/Image.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n\n/**\n * @const\n * @type {module:ol/size~Size}\n */\nconst GETFEATUREINFO_IMAGE_SIZE = [101, 101];\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {module:ol/source/WMSServerType|string} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver` or `qgis`. Only needed if `hidpi` is `true`.\n * @property {module:ol/Image~LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {number} [ratio=1.5] Ratio. `1` means image requests are the size of the map viewport, `2` means\n * twice the width and height of the map viewport, and so on. Must be `1` or\n * higher.\n * @property {Array<number>} [resolutions] Resolutions.\n * If specified, requests will be made for these resolutions only.\n * @property {string} url WMS service URL.\n */\n\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @fires ol/source/Image~ImageSourceEvent\n * @api\n */\nclass ImageWMS extends ImageSource {\n  /**\n   * @param {module:ol/source/ImageWMS~Options=} [opt_options] ImageWMS options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    super({\n      attributions: options.attributions,\n      projection: options.projection,\n      resolutions: options.resolutions\n    });\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {module:ol/Image~LoadFunction}\n     */\n    this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n      options.imageLoadFunction : defaultImageLoadFunction;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = options.params || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n    this.updateV13_();\n\n    /**\n     * @private\n     * @type {module:ol/source/WMSServerType|undefined}\n     */\n    this.serverType_ = /** @type {module:ol/source/WMSServerType|undefined} */ (options.serverType);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {module:ol/Image}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/size~Size}\n     */\n    this.imageSize_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {module:ol/proj~ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getGetFeatureInfoUrl(coordinate, resolution, projection, params) {\n    if (this.url_ === undefined) {\n      return undefined;\n    }\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      resolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const extent = getForViewAndSize(coordinate, resolution, 0,\n      GETFEATUREINFO_IMAGE_SIZE);\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS']\n    };\n    assign(baseParams, this.params_, params);\n\n    const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n    const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(\n      extent, GETFEATUREINFO_IMAGE_SIZE,\n      1, sourceProjectionObj || projectionObj, baseParams);\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n\n    if (this.url_ === undefined) {\n      return null;\n    }\n\n    resolution = this.findNearestResolution(resolution);\n\n    if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n      pixelRatio = 1;\n    }\n\n    const imageResolution = resolution / pixelRatio;\n\n    const center = getCenter(extent);\n    const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n    const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n    const viewExtent = getForViewAndSize(center, imageResolution, 0,\n      [viewWidth, viewHeight]);\n    const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n    const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n    const requestExtent = getForViewAndSize(center, imageResolution, 0,\n      [requestWidth, requestHeight]);\n\n    const image = this.image_;\n    if (image &&\n        this.renderedRevision_ == this.getRevision() &&\n        image.getResolution() == resolution &&\n        image.getPixelRatio() == pixelRatio &&\n        containsExtent(image.getExtent(), viewExtent)) {\n      return image;\n    }\n\n    const params = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetMap',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true\n    };\n    assign(params, this.params_);\n\n    this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n    this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n    const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n      projection, params);\n\n    this.image_ = new ImageWrapper(requestExtent, resolution, pixelRatio,\n      url, this.crossOrigin_, this.imageLoadFunction_);\n\n    this.renderedRevision_ = this.getRevision();\n\n    listen(this.image_, EventType.CHANGE,\n      this.handleImageChange, this);\n\n    return this.image_;\n\n  }\n\n  /**\n   * Return the image load function of the source.\n   * @return {module:ol/Image~LoadFunction} The image load function.\n   * @api\n   */\n  getImageLoadFunction() {\n    return this.imageLoadFunction_;\n  }\n\n  /**\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {module:ol/size~Size} size Size.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @param {Object} params Params.\n   * @return {string} Request URL.\n   * @private\n   */\n  getRequestUrl_(extent, size, pixelRatio, projection, params) {\n\n    assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case WMSServerType.GEOSERVER:\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case WMSServerType.MAPSERVER:\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case WMSServerType.CARMENTA_SERVER:\n        case WMSServerType.QGIS:\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default:\n          assert(false, 8); // Unknown `serverType` configured\n          break;\n      }\n    }\n\n    params['WIDTH'] = size[0];\n    params['HEIGHT'] = size[1];\n\n    const axisOrientation = projection.getAxisOrientation();\n    let bbox;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      bbox = [extent[1], extent[0], extent[3], extent[2]];\n    } else {\n      bbox = extent;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    return appendParams(/** @type {string} */ (this.url_), params);\n  }\n\n  /**\n   * Return the URL used for this WMS source.\n   * @return {string|undefined} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * Set the image load function of the source.\n   * @param {module:ol/Image~LoadFunction} imageLoadFunction Image load function.\n   * @api\n   */\n  setImageLoadFunction(imageLoadFunction) {\n    this.image_ = null;\n    this.imageLoadFunction_ = imageLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string|undefined} url URL.\n   * @api\n   */\n  setUrl(url) {\n    if (url != this.url_) {\n      this.url_ = url;\n      this.image_ = null;\n      this.changed();\n    }\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    assign(this.params_, params);\n    this.updateV13_();\n    this.image_ = null;\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\n\nexport default ImageWMS;\n","/**\n * @module ol/ImageBase\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @abstract\n */\nclass ImageBase extends EventTarget {\n\n  /**\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/ImageState} state State.\n   */\n  constructor(extent, resolution, pixelRatio, state) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {module:ol/extent~Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {module:ol/ImageState}\n     */\n    this.state = state;\n\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {module:ol/extent~Extent} Extent.\n   */\n  getExtent() {\n    return this.extent;\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   */\n  getImage() {}\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  getPixelRatio() {\n    return this.pixelRatio_;\n  }\n\n  /**\n   * @return {number} Resolution.\n   */\n  getResolution() {\n    return /** @type {number} */ (this.resolution);\n  }\n\n  /**\n   * @return {module:ol/ImageState} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {}\n}\n\n\nexport default ImageBase;\n","/**\n * @module ol/source/Source\n */\n\nimport {VOID} from '../functions.js';\nimport BaseObject from '../Object.js';\nimport {get as getProjection} from '../proj.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * A function that returns a string or an array of strings representing source\n * attributions.\n *\n * @typedef {function(module:ol/PluggableMap~FrameState): (string|Array<string>)} Attribution\n */\n\n\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `' Acme Inc.'`)\n * * an array of simple strings (e.g. `[' Acme Inc.', ' Bacme Inc.']`)\n * * a function that returns a string or array of strings (`{@link module:ol/source/Source~Attribution}`)\n *\n * @typedef {string|Array<string>|module:ol/source/Source~Attribution} AttributionLike\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions]\n * @property {module:ol/proj~ProjectionLike} projection\n * @property {module:ol/source/State} [state]\n * @property {boolean} [wrapX]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n * @api\n */\nclass Source extends BaseObject {\n  /**\n   * @param {module:ol/source/Source~Options} options Source options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n    * @private\n    * @type {module:ol/proj/Projection}\n    */\n    this.projection_ = getProjection(options.projection);\n\n    /**\n    * @private\n    * @type {?module:ol/source/Source~Attribution}\n    */\n    this.attributions_ = this.adaptAttributions_(options.attributions);\n\n    /**\n     * This source is currently loading data. Sources that defer loading to the\n     * map's tile queue never set this to `true`.\n     * @type {boolean}\n     */\n    this.loading = false;\n\n    /**\n    * @private\n    * @type {module:ol/source/State}\n    */\n    this.state_ = options.state !== undefined ?\n      options.state : SourceState.READY;\n\n    /**\n    * @private\n    * @type {boolean}\n    */\n    this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n\n  }\n\n  /**\n  * Turns the attributions option into an attributions function.\n  * @param {module:ol/source/Source~AttributionLike|undefined} attributionLike The attribution option.\n  * @return {?module:ol/source/Source~Attribution} An attribution function (or null).\n  */\n  adaptAttributions_(attributionLike) {\n    if (!attributionLike) {\n      return null;\n    }\n    if (Array.isArray(attributionLike)) {\n      return function(frameState) {\n        return attributionLike;\n      };\n    }\n\n    if (typeof attributionLike === 'function') {\n      return attributionLike;\n    }\n\n    return function(frameState) {\n      return [attributionLike];\n    };\n  }\n\n  /**\n  * Get the attribution function for the source.\n  * @return {?module:ol/source/Source~Attribution} Attribution function.\n  */\n  getAttributions() {\n    return this.attributions_;\n  }\n\n  /**\n  * Get the projection of the source.\n  * @return {module:ol/proj/Projection} Projection.\n  * @api\n  */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n  * @abstract\n  * @return {Array<number>|undefined} Resolutions.\n  */\n  getResolutions() {}\n\n  /**\n  * Get the state of the source, see {@link module:ol/source/State~State} for possible states.\n  * @return {module:ol/source/State} State.\n  * @api\n  */\n  getState() {\n    return this.state_;\n  }\n\n  /**\n  * @return {boolean|undefined} Wrap X.\n  */\n  getWrapX() {\n    return this.wrapX_;\n  }\n\n  /**\n  * Refreshes the source and finally dispatches a 'change' event.\n  * @api\n  */\n  refresh() {\n    this.changed();\n  }\n\n  /**\n  * Set the attributions of the source.\n  * @param {module:ol/source/Source~AttributionLike|undefined} attributions Attributions.\n  *     Can be passed as `string`, `Array<string>`, `{@link module:ol/source/Source~Attribution}`,\n  *     or `undefined`.\n  * @api\n  */\n  setAttributions(attributions) {\n    this.attributions_ = this.adaptAttributions_(attributions);\n    this.changed();\n  }\n\n  /**\n  * Set the state of the source.\n  * @param {module:ol/source/State} state State.\n  * @protected\n  */\n  setState(state) {\n    this.state_ = state;\n    this.changed();\n  }\n}\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {Object<string, boolean>} skippedFeatureUids Skipped feature uids.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T} callback Feature callback.\n * @return {T|void} Callback result.\n * @template T\n */\nSource.prototype.forEachFeatureAtCoordinate = VOID;\n\n\nexport default Source;\n","'use strict';\n\nmodule.exports = rbush;\nmodule.exports.default = rbush;\n\nvar quickselect = require('quickselect');\n\nfunction rbush(maxEntries, format) {\n    if (!(this instanceof rbush)) return new rbush(maxEntries, format);\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries || 9);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n\n    if (format) {\n        this._initFormat(format);\n    }\n\n    this.clear();\n}\n\nrbush.prototype = {\n\n    all: function () {\n        return this._all(this.data, []);\n    },\n\n    search: function (bbox) {\n\n        var node = this.data,\n            result = [],\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return result;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    },\n\n    collides: function (bbox) {\n\n        var node = this.data,\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return false;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    },\n\n    load: function (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (var i = 0, len = data.length; i < len; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                var tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    },\n\n    insert: function (item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    },\n\n    clear: function () {\n        this.data = createNode([]);\n        return this;\n    },\n\n    remove: function (item, equalsFn) {\n        if (!item) return this;\n\n        var node = this.data,\n            bbox = this.toBBox(item),\n            path = [],\n            indexes = [],\n            i, parent, index, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    },\n\n    toBBox: function (item) { return item; },\n\n    compareMinX: compareNodeMinX,\n    compareMinY: compareNodeMinY,\n\n    toJSON: function () { return this.data; },\n\n    fromJSON: function (data) {\n        this.data = data;\n        return this;\n    },\n\n    _all: function (node, result) {\n        var nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push.apply(result, node.children);\n            else nodesToSearch.push.apply(nodesToSearch, node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    },\n\n    _build: function (items, left, right, height) {\n\n        var N = right - left + 1,\n            M = this._maxEntries,\n            node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        var N2 = Math.ceil(N / M),\n            N1 = N2 * Math.ceil(Math.sqrt(M)),\n            i, j, right2, right3;\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (i = left; i <= right; i += N1) {\n\n            right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (j = i; j <= right2; j += N2) {\n\n                right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    },\n\n    _chooseSubtree: function (bbox, node, level, path) {\n\n        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;\n\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            minArea = minEnlargement = Infinity;\n\n            for (i = 0, len = node.children.length; i < len; i++) {\n                child = node.children[i];\n                area = bboxArea(child);\n                enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    },\n\n    _insert: function (item, level, isNode) {\n\n        var toBBox = this.toBBox,\n            bbox = isNode ? item : toBBox(item),\n            insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    },\n\n    // split overflowed node into two\n    _split: function (insertPath, level) {\n\n        var node = insertPath[level],\n            M = node.children.length,\n            m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        var splitIndex = this._chooseSplitIndex(node, m, M);\n\n        var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    },\n\n    _splitRoot: function (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    },\n\n    _chooseSplitIndex: function (node, m, M) {\n\n        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;\n\n        minOverlap = minArea = Infinity;\n\n        for (i = m; i <= M - m; i++) {\n            bbox1 = distBBox(node, 0, i, this.toBBox);\n            bbox2 = distBBox(node, i, M, this.toBBox);\n\n            overlap = intersectionArea(bbox1, bbox2);\n            area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index;\n    },\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis: function (node, m, M) {\n\n        var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX,\n            compareMinY = node.leaf ? this.compareMinY : compareNodeMinY,\n            xMargin = this._allDistMargin(node, m, M, compareMinX),\n            yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    },\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin: function (node, m, M, compare) {\n\n        node.children.sort(compare);\n\n        var toBBox = this.toBBox,\n            leftBBox = distBBox(node, 0, m, toBBox),\n            rightBBox = distBBox(node, M - m, M, toBBox),\n            margin = bboxMargin(leftBBox) + bboxMargin(rightBBox),\n            i, child;\n\n        for (i = m; i < M - m; i++) {\n            child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (i = M - m - 1; i >= m; i--) {\n            child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    },\n\n    _adjustParentBBoxes: function (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (var i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    },\n\n    _condense: function (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (var i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    },\n\n    _initFormat: function (format) {\n        // data format (minX, minY, maxX, maxY accessors)\n\n        // uses eval-type function compilation instead of just accepting a toBBox function\n        // because the algorithms are very sensitive to sorting functions performance,\n        // so they should be dead simple and without inner calls\n\n        var compareArr = ['return a', ' - b', ';'];\n\n        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));\n        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));\n\n        this.toBBox = new Function('a',\n            'return {minX: a' + format[0] +\n            ', minY: a' + format[1] +\n            ', maxX: a' + format[2] +\n            ', maxY: a' + format[3] + '};');\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k, child; i < p; i++) {\n        child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX),\n        minY = Math.max(a.minY, b.minY),\n        maxX = Math.min(a.maxX, b.maxX),\n        maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right],\n        mid;\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","/**\n * @module ol/geom/flat/area\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n  let twiceArea = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    twiceArea += y1 * x2 - x1 * y2;\n    x1 = x2;\n    y1 = y2;\n  }\n  return twiceArea / 2;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n  let area = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    area += linearRing(flatCoordinates, offset, end, stride);\n    offset = end;\n  }\n  return area;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  let area = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    area += linearRings(flatCoordinates, offset, ends, stride);\n    offset = ends[ends.length - 1];\n  }\n  return area;\n}\n","/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nclass Kinetic {\n\n  /**\n   * @param {number} decay Rate of decay (must be negative).\n   * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n   * @param {number} delay Delay to consider to calculate the kinetic\n   *     initial values (milliseconds).\n   */\n  constructor(decay, minVelocity, delay) {\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.decay_ = decay;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minVelocity_ = minVelocity;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delay_ = delay;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.points_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  begin() {\n    this.points_.length = 0;\n    this.angle_ = 0;\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update(x, y) {\n    this.points_.push(x, y, Date.now());\n  }\n\n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end() {\n    if (this.points_.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false;\n    }\n    const delay = Date.now() - this.delay_;\n    const lastIndex = this.points_.length - 3;\n    if (this.points_[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false;\n    }\n\n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3;\n    while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n      firstIndex -= 3;\n    }\n\n    const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n    // we don't want a duration of 0 (divide by zero)\n    // we also make sure the user panned for a duration of at least one frame\n    // (1/60s) to compute sane displacement values\n    if (duration < 1000 / 60) {\n      return false;\n    }\n\n    const dx = this.points_[lastIndex] - this.points_[firstIndex];\n    const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n    this.angle_ = Math.atan2(dy, dx);\n    this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n    return this.initialVelocity_ > this.minVelocity_;\n  }\n\n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance() {\n    return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n  }\n\n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  getAngle() {\n    return this.angle_;\n  }\n}\n\nexport default Kinetic;\n","/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction, {zoomByDelta} from '../interaction/Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nclass DoubleClickZoom extends Interaction {\n\n  /**\n   * @param {module:ol/interaction/DoubleClickZoom~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * doubleclick) and eventually zooms the map.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/DoubleClickZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  const browserEvent = mapBrowserEvent.originalEvent;\n  if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n    const map = mapBrowserEvent.map;\n    const anchor = mapBrowserEvent.coordinate;\n    const delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n    const view = map.getView();\n    zoomByDelta(view, delta, anchor, this.duration_);\n    mapBrowserEvent.preventDefault();\n    stopEvent = true;\n  }\n  return !stopEvent;\n}\n\nexport default DoubleClickZoom;\n","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {assert} from '../asserts.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport {WEBKIT, MAC} from '../has.js';\n\n\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, module:ol/MapBrowserEvent): boolean} Condition\n */\n\n\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport const altKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport const altShiftKeysOnly = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {module:ol/MapBrowserEvent} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport const focus = function(event) {\n  return event.target.getTargetElement() === document.activeElement;\n};\n\n\n/**\n * Return always true.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @function\n * @api\n */\nexport const always = TRUE;\n\n\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport const click = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n\n\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport const mouseActionButton = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return originalEvent.button == 0 &&\n      !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n\n\n/**\n * Return always false.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @function\n * @api\n */\nexport const never = FALSE;\n\n\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport const pointerMove = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == 'pointermove';\n};\n\n\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport const singleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n\n\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport const doubleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n\n\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport const noModifierKeys = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport const platformModifierKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return !originalEvent.altKey &&\n    (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey;\n};\n\n\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport const shiftKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the target element is not editable, i.e. not a `<input>`-,\n * `<select>`- or `<textarea>`-element, `false` otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport const targetNotEditable = function(mapBrowserEvent) {\n  const target = mapBrowserEvent.originalEvent.target;\n  const tagName = target.tagName;\n  return (\n    tagName !== 'INPUT' &&\n      tagName !== 'SELECT' &&\n      tagName !== 'TEXTAREA');\n};\n\n\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport const mouseOnly = function(mapBrowserEvent) {\n  assert(mapBrowserEvent.pointerEvent, 56); // mapBrowserEvent must originate from a pointer event\n  // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return (\n    /** @type {module:ol/MapBrowserEvent} */ (mapBrowserEvent).pointerEvent.pointerType == 'mouse'\n  );\n};\n\n\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See http://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport const primaryAction = function(mapBrowserEvent) {\n  const pointerEvent = mapBrowserEvent.pointerEvent;\n  return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n","/**\n * @module ol/interaction/Pointer\n */\nimport {FALSE, VOID} from '../functions.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport Interaction from '../interaction/Interaction.js';\nimport {getValues} from '../obj.js';\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/Pointer}\n */\nconst handleDragEvent = VOID;\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Capture dragging.\n * @this {module:ol/interaction/Pointer}\n */\nconst handleUpEvent = FALSE;\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Capture dragging.\n * @this {module:ol/interaction/Pointer}\n */\nconst handleDownEvent = FALSE;\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/Pointer}\n */\nconst handleMoveEvent = VOID;\n\n\n/**\n * @typedef {Object} Options\n * @property {function(module:ol/MapBrowserPointerEvent):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(module:ol/MapBrowserPointerEvent)} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(module:ol/MapBrowserEvent):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(module:ol/MapBrowserPointerEvent)} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events,\n * also during a drag sequence (so during a drag sequence both the\n * `handleDragEvent` function and this function are called).\n * @property {function(module:ol/MapBrowserPointerEvent):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} stopDown\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n\n\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nclass PointerInteraction extends Interaction {\n  /**\n   * @param {module:ol/interaction/Pointer~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      handleEvent: options.handleEvent || handleEvent\n    });\n\n    /**\n     * @type {function(module:ol/MapBrowserPointerEvent):boolean}\n     * @private\n     */\n    this.handleDownEvent_ = options.handleDownEvent ?\n      options.handleDownEvent : handleDownEvent;\n\n    /**\n     * @type {function(module:ol/MapBrowserPointerEvent)}\n     * @private\n     */\n    this.handleDragEvent_ = options.handleDragEvent ?\n      options.handleDragEvent : handleDragEvent;\n\n    /**\n     * @type {function(module:ol/MapBrowserPointerEvent)}\n     * @private\n     */\n    this.handleMoveEvent_ = options.handleMoveEvent ?\n      options.handleMoveEvent : handleMoveEvent;\n\n    /**\n     * @type {function(module:ol/MapBrowserPointerEvent):boolean}\n     * @private\n     */\n    this.handleUpEvent_ = options.handleUpEvent ?\n      options.handleUpEvent : handleUpEvent;\n\n    /**\n     * @type {boolean}\n     * @protected\n     */\n    this.handlingDownUpSequence = false;\n\n    /**\n     * This function is used to determine if \"down\" events should be propagated\n     * to other interactions or should be stopped.\n     * @type {function(boolean):boolean}\n     * @protected\n     */\n    this.stopDown = options.stopDown ? options.stopDown : stopDown;\n\n    /**\n     * @type {!Object<string, module:ol/pointer/PointerEvent>}\n     * @private\n     */\n    this.trackedPointers_ = {};\n\n    /**\n     * @type {Array<module:ol/pointer/PointerEvent>}\n     * @protected\n     */\n    this.targetPointers = [];\n\n  }\n\n  /**\n   * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n   * @private\n   */\n  updateTrackedPointers_(mapBrowserEvent) {\n    if (isPointerDraggingEvent(mapBrowserEvent)) {\n      const event = mapBrowserEvent.pointerEvent;\n\n      const id = event.pointerId.toString();\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        delete this.trackedPointers_[id];\n      } else if (mapBrowserEvent.type ==\n          MapBrowserEventType.POINTERDOWN) {\n        this.trackedPointers_[id] = event;\n      } else if (id in this.trackedPointers_) {\n        // update only when there was a pointerdown event for this pointer\n        this.trackedPointers_[id] = event;\n      }\n      this.targetPointers = getValues(this.trackedPointers_);\n    }\n  }\n\n}\n\n\n/**\n * @param {Array<module:ol/pointer/PointerEvent>} pointerEvents List of events.\n * @return {module:ol/pixel~Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n  const length = pointerEvents.length;\n  let clientX = 0;\n  let clientY = 0;\n  for (let i = 0; i < length; i++) {\n    clientX += pointerEvents[i].clientX;\n    clientY += pointerEvents[i].clientY;\n  }\n  return [clientX / length, clientY / length];\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n  const type = mapBrowserEvent.type;\n  return type === MapBrowserEventType.POINTERDOWN ||\n    type === MapBrowserEventType.POINTERDRAG ||\n    type === MapBrowserEventType.POINTERUP;\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n * detected.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/Pointer}\n * @api\n */\nexport function handleEvent(mapBrowserEvent) {\n  if (!(mapBrowserEvent instanceof MapBrowserPointerEvent)) {\n    return true;\n  }\n\n  let stopEvent = false;\n  this.updateTrackedPointers_(mapBrowserEvent);\n  if (this.handlingDownUpSequence) {\n    if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n      this.handleDragEvent_(mapBrowserEvent);\n    } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n      const handledUp = this.handleUpEvent_(mapBrowserEvent);\n      this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n    }\n  } else {\n    if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n      const handled = this.handleDownEvent_(mapBrowserEvent);\n      if (handled) {\n        mapBrowserEvent.preventDefault();\n      }\n      this.handlingDownUpSequence = handled;\n      stopEvent = this.stopDown(handled);\n    } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n      this.handleMoveEvent_(mapBrowserEvent);\n    }\n  }\n  return !stopEvent;\n}\n\n\nexport default PointerInteraction;\n\n/**\n * @param {boolean} handled Was the event handled by the interaction?\n * @return {boolean} Should the `down` event be stopped?\n */\nfunction stopDown(handled) {\n  return handled;\n}\n","/**\n * @module ol/interaction/DragPan\n */\nimport ViewHint from '../ViewHint.js';\nimport {scale as scaleCoordinate, rotate as rotateCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {easeOut} from '../easing.js';\nimport {noModifierKeys} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from '../interaction/Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~noModifierKeys}.\n * @property {module:ol/Kinetic} [kinetic] Kinetic inertia to apply to the pan.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nclass DragPan extends PointerInteraction {\n  /**\n   * @param {module:ol/interaction/DragPan~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleDownEvent: handleDownEvent,\n      handleDragEvent: handleDragEvent,\n      handleUpEvent: handleUpEvent,\n      stopDown: FALSE\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {module:ol/Kinetic|undefined}\n     */\n    this.kinetic_ = options.kinetic;\n\n    /**\n     * @type {module:ol/pixel~Pixel}\n     */\n    this.lastCentroid = null;\n\n    /**\n     * @type {number}\n     */\n    this.lastPointersCount_;\n\n    /**\n     * @type {boolean}\n     */\n    this.panning_ = false;\n\n    /**\n     * @private\n     * @type {module:ol/events/condition~Condition}\n     */\n    this.condition_ = options.condition ? options.condition : noModifierKeys;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.noKinetic_ = false;\n\n  }\n\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/DragPan}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  if (!this.panning_) {\n    this.panning_ = true;\n    this.getMap().getView().setHint(ViewHint.INTERACTING, 1);\n  }\n  const targetPointers = this.targetPointers;\n  const centroid = centroidFromPointers(targetPointers);\n  if (targetPointers.length == this.lastPointersCount_) {\n    if (this.kinetic_) {\n      this.kinetic_.update(centroid[0], centroid[1]);\n    }\n    if (this.lastCentroid) {\n      const deltaX = this.lastCentroid[0] - centroid[0];\n      const deltaY = centroid[1] - this.lastCentroid[1];\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      let center = [deltaX, deltaY];\n      scaleCoordinate(center, view.getResolution());\n      rotateCoordinate(center, view.getRotation());\n      addCoordinate(center, view.getCenter());\n      center = view.constrainCenter(center);\n      view.setCenter(center);\n    }\n  } else if (this.kinetic_) {\n    // reset so we don't overestimate the kinetic energy after\n    // after one finger down, tiny drag, second finger down\n    this.kinetic_.begin();\n  }\n  this.lastCentroid = centroid;\n  this.lastPointersCount_ = targetPointers.length;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/DragPan}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  if (this.targetPointers.length === 0) {\n    if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n      const distance = this.kinetic_.getDistance();\n      const angle = this.kinetic_.getAngle();\n      const center = /** @type {!module:ol/coordinate~Coordinate} */ (view.getCenter());\n      const centerpx = map.getPixelFromCoordinate(center);\n      const dest = map.getCoordinateFromPixel([\n        centerpx[0] - distance * Math.cos(angle),\n        centerpx[1] - distance * Math.sin(angle)\n      ]);\n      view.animate({\n        center: view.constrainCenter(dest),\n        duration: 500,\n        easing: easeOut\n      });\n    }\n    if (this.panning_) {\n      this.panning_ = false;\n      view.setHint(ViewHint.INTERACTING, -1);\n    }\n    return false;\n  } else {\n    if (this.kinetic_) {\n      // reset so we don't overestimate the kinetic energy after\n      // after one finger up, tiny drag, second finger up\n      this.kinetic_.begin();\n    }\n    this.lastCentroid = null;\n    return true;\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/DragPan}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    this.lastCentroid = null;\n    // stop any current animation\n    if (view.getAnimating()) {\n      view.setCenter(mapBrowserEvent.frameState.viewState.center);\n    }\n    if (this.kinetic_) {\n      this.kinetic_.begin();\n    }\n    // No kinetic as soon as more than one pointer on the screen is\n    // detected. This is to prevent nasty pans after pinch.\n    this.noKinetic_ = this.targetPointers.length > 1;\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\nexport default DragPan;\n","/**\n * @module ol/interaction/DragRotate\n */\nimport {disable} from '../rotationconstraint.js';\nimport ViewHint from '../ViewHint.js';\nimport {altShiftKeysOnly, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from '../interaction/Interaction.js';\nimport PointerInteraction from '../interaction/Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nclass DragRotate extends PointerInteraction {\n\n  /**\n   * @param {module:ol/interaction/DragRotate~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      handleDownEvent: handleDownEvent,\n      handleDragEvent: handleDragEvent,\n      handleUpEvent: handleUpEvent,\n      stopDown: FALSE\n    });\n\n    /**\n     * @private\n     * @type {module:ol/events/condition~Condition}\n     */\n    this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/DragRotate}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return;\n  }\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  if (view.getConstraints().rotation === disable) {\n    return;\n  }\n  const size = map.getSize();\n  const offset = mapBrowserEvent.pixel;\n  const theta =\n      Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n  if (this.lastAngle_ !== undefined) {\n    const delta = theta - this.lastAngle_;\n    const rotation = view.getRotation();\n    rotateWithoutConstraints(view, rotation - delta);\n  }\n  this.lastAngle_ = theta;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/DragRotate}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return true;\n  }\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  view.setHint(ViewHint.INTERACTING, -1);\n  const rotation = view.getRotation();\n  rotate(view, rotation, undefined, this.duration_);\n  return false;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/DragRotate}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return false;\n  }\n\n  if (mouseActionButton(mapBrowserEvent) && this.condition_(mapBrowserEvent)) {\n    const map = mapBrowserEvent.map;\n    map.getView().setHint(ViewHint.INTERACTING, 1);\n    this.lastAngle_ = undefined;\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport default DragRotate;\n","/**\n * @module ol/render/Box\n */\n\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\n\nclass RenderBox extends Disposable {\n  /**\n   * @param {string} className CSS class name.\n   */\n  constructor(className) {\n    super();\n\n    /**\n     * @type {module:ol/geom/Polygon}\n     * @private\n     */\n    this.geometry_ = null;\n\n    /**\n     * @type {HTMLDivElement}\n     * @private\n     */\n    this.element_ = /** @type {HTMLDivElement} */ (document.createElement('div'));\n    this.element_.style.position = 'absolute';\n    this.element_.className = 'ol-box ' + className;\n\n    /**\n     * @private\n     * @type {module:ol/PluggableMap}\n     */\n    this.map_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/pixel~Pixel}\n     */\n    this.startPixel_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/pixel~Pixel}\n     */\n    this.endPixel_ = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.setMap(null);\n  }\n\n  /**\n   * @private\n   */\n  render_() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const px = 'px';\n    const style = this.element_.style;\n    style.left = Math.min(startPixel[0], endPixel[0]) + px;\n    style.top = Math.min(startPixel[1], endPixel[1]) + px;\n    style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n    style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n  }\n\n  /**\n   * @param {module:ol/PluggableMap} map Map.\n   */\n  setMap(map) {\n    if (this.map_) {\n      this.map_.getOverlayContainer().removeChild(this.element_);\n      const style = this.element_.style;\n      style.left = style.top = style.width = style.height = 'inherit';\n    }\n    this.map_ = map;\n    if (this.map_) {\n      this.map_.getOverlayContainer().appendChild(this.element_);\n    }\n  }\n\n  /**\n   * @param {module:ol/pixel~Pixel} startPixel Start pixel.\n   * @param {module:ol/pixel~Pixel} endPixel End pixel.\n   */\n  setPixels(startPixel, endPixel) {\n    this.startPixel_ = startPixel;\n    this.endPixel_ = endPixel;\n    this.createOrUpdateGeometry();\n    this.render_();\n  }\n\n  /**\n   * Creates or updates the cached geometry.\n   */\n  createOrUpdateGeometry() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const pixels = [\n      startPixel,\n      [startPixel[0], endPixel[1]],\n      endPixel,\n      [endPixel[0], startPixel[1]]\n    ];\n    const coordinates = pixels.map(this.map_.getCoordinateFromPixel, this.map_);\n    // close the polygon\n    coordinates[4] = coordinates[0].slice();\n    if (!this.geometry_) {\n      this.geometry_ = new Polygon([coordinates]);\n    } else {\n      this.geometry_.setCoordinates([coordinates]);\n    }\n  }\n\n  /**\n   * @return {module:ol/geom/Polygon} Geometry.\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n}\n\n\nexport default RenderBox;\n","/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport {always, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {VOID} from '../functions.js';\nimport PointerInteraction from '../interaction/Pointer.js';\nimport RenderBox from '../render/Box.js';\n\n\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, module:ol/MapBrowserEvent, module:ol/pixel~Pixel, module:ol/pixel~Pixel):boolean} EndCondition\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {module:ol/events/condition~Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~always}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {module:ol/interaction/DragBox~EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:module:ol/interaction/DragBox, module:ol/MapBrowserEvent)} onBoxEnd Code to execute just\n * before `boxend` is fired.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragBoxEventType = {\n  /**\n   * Triggered upon drag box start.\n   * @event module:ol/interaction/DragBox~DragBoxEvent#boxstart\n   * @api\n   */\n  BOXSTART: 'boxstart',\n\n  /**\n   * Triggered on drag when box is active.\n   * @event module:ol/interaction/DragBox~DragBoxEvent#boxdrag\n   * @api\n   */\n  BOXDRAG: 'boxdrag',\n\n  /**\n   * Triggered upon drag box end.\n   * @event module:ol/interaction/DragBox~DragBoxEvent#boxend\n   * @api\n   */\n  BOXEND: 'boxend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nclass DragBoxEvent extends Event {\n\n  /**\n   * @param {string} type The event type.\n   * @param {module:ol/coordinate~Coordinate} coordinate The event coordinate.\n   * @param {module:ol/MapBrowserEvent} mapBrowserEvent Originating event.\n   */\n  constructor(type, coordinate, mapBrowserEvent) {\n    super(type);\n\n    /**\n     * The coordinate of the drag event.\n     * @const\n     * @type {module:ol/coordinate~Coordinate}\n     * @api\n     */\n    this.coordinate = coordinate;\n\n    /**\n     * @const\n     * @type {module:ol/MapBrowserEvent}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * This interaction is only supported for mouse devices.\n *\n * @fires module:ol/interaction/DragBox~DragBoxEvent\n * @api\n */\nclass DragBox extends PointerInteraction {\n  /**\n   * @param {module:ol/interaction/DragBox~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleDownEvent: handleDownEvent,\n      handleDragEvent: handleDragEvent,\n      handleUpEvent: handleUpEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n    * @type {module:ol/render/Box}\n    * @private\n    */\n    this.box_ = new RenderBox(options.className || 'ol-dragbox');\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @type {function(this:module:ol/interaction/DragBox, module:ol/MapBrowserEvent)}\n     * @private\n     */\n    this.onBoxEnd_ = options.onBoxEnd ? options.onBoxEnd : VOID;\n\n    /**\n    * @type {module:ol/pixel~Pixel}\n    * @private\n    */\n    this.startPixel_ = null;\n\n    /**\n    * @private\n    * @type {module:ol/events/condition~Condition}\n    */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n    * @private\n    * @type {module:ol/interaction/DragBox~EndCondition}\n    */\n    this.boxEndCondition_ = options.boxEndCondition ?\n      options.boxEndCondition : defaultBoxEndCondition;\n  }\n\n  /**\n  * Returns geometry of last drawn box.\n  * @return {module:ol/geom/Polygon} Geometry.\n  * @api\n  */\n  getGeometry() {\n    return this.box_.getGeometry();\n  }\n}\n\n\n/**\n * The default condition for determining whether the boxend event\n * should fire.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent The originating MapBrowserEvent\n *     leading to the box end.\n * @param {module:ol/pixel~Pixel} startPixel The starting pixel of the box.\n * @param {module:ol/pixel~Pixel} endPixel The end pixel of the box.\n * @return {boolean} Whether or not the boxend condition should be fired.\n * @this {module:ol/interaction/DragBox}\n */\nfunction defaultBoxEndCondition(mapBrowserEvent, startPixel, endPixel) {\n  const width = endPixel[0] - startPixel[0];\n  const height = endPixel[1] - startPixel[1];\n  return width * width + height * height >= this.minArea_;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/DragBox}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return;\n  }\n\n  this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n\n  this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,\n    mapBrowserEvent.coordinate, mapBrowserEvent));\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/DragBox}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return true;\n  }\n\n  this.box_.setMap(null);\n\n  if (this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel)) {\n    this.onBoxEnd_(mapBrowserEvent);\n    this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXEND,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n  }\n  return false;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/DragBox}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return false;\n  }\n\n  if (mouseActionButton(mapBrowserEvent) &&\n      this.condition_(mapBrowserEvent)) {\n    this.startPixel_ = mapBrowserEvent.pixel;\n    this.box_.setMap(mapBrowserEvent.map);\n    this.box_.setPixels(this.startPixel_, this.startPixel_);\n    this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\nexport default DragBox;\n","/**\n * @module ol/interaction/DragZoom\n */\nimport {easeOut} from '../easing.js';\nimport {shiftKeyOnly} from '../events/condition.js';\nimport {createOrUpdateFromCoordinates, getBottomLeft, getCenter, getTopRight, scaleFromCenter} from '../extent.js';\nimport DragBox from '../interaction/DragBox.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nclass DragZoom extends DragBox {\n  /**\n   * @param {module:ol/interaction/DragZoom~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const condition = options.condition ? options.condition : shiftKeyOnly;\n\n    super({\n      condition: condition,\n      className: options.className || 'ol-dragzoom',\n      onBoxEnd: onBoxEnd\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.out_ = options.out !== undefined ? options.out : false;\n  }\n}\n\n\n/**\n * @this {module:ol/interaction/DragZoom}\n */\nfunction onBoxEnd() {\n  const map = this.getMap();\n  const view = /** @type {!module:ol/View} */ (map.getView());\n  const size = /** @type {!module:ol/size~Size} */ (map.getSize());\n  let extent = this.getGeometry().getExtent();\n\n  if (this.out_) {\n    const mapExtent = view.calculateExtent(size);\n    const boxPixelExtent = createOrUpdateFromCoordinates([\n      map.getPixelFromCoordinate(getBottomLeft(extent)),\n      map.getPixelFromCoordinate(getTopRight(extent))]);\n    const factor = view.getResolutionForExtent(boxPixelExtent, size);\n\n    scaleFromCenter(mapExtent, 1 / factor);\n    extent = mapExtent;\n  }\n\n  const resolution = view.constrainResolution(\n    view.getResolutionForExtent(extent, size));\n\n  let center = getCenter(extent);\n  center = view.constrainCenter(center);\n\n  view.animate({\n    resolution: resolution,\n    center: center,\n    duration: this.duration_,\n    easing: easeOut\n  });\n}\n\n\nexport default DragZoom;\n","/**\n * @module ol/events/KeyCode\n */\n\n/**\n * @enum {number}\n * @const\n */\nexport default {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\n","/**\n * @module ol/interaction/KeyboardPan\n */\nimport {rotate as rotateCoordinate} from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport KeyCode from '../events/KeyCode.js';\nimport {noModifierKeys, targetNotEditable} from '../events/condition.js';\nimport Interaction, {pan} from '../interaction/Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~noModifierKeys} and\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nclass KeyboardPan extends Interaction {\n  /**\n   * @param {module:ol/interaction/KeyboardPan~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @param {module:ol/MapBrowserEvent} mapBrowserEvent Browser event.\n     * @return {boolean} Combined condition result.\n     */\n    this.defaultCondition_ = function(mapBrowserEvent) {\n      return noModifierKeys(mapBrowserEvent) &&\n        targetNotEditable(mapBrowserEvent);\n    };\n\n    /**\n     * @private\n     * @type {module:ol/events/condition~Condition}\n     */\n    this.condition_ = options.condition !== undefined ?\n      options.condition : this.defaultCondition_;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelDelta_ = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n * pressed).\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/KeyboardPan}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN) {\n    const keyEvent = mapBrowserEvent.originalEvent;\n    const keyCode = keyEvent.keyCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (keyCode == KeyCode.DOWN ||\n        keyCode == KeyCode.LEFT ||\n        keyCode == KeyCode.RIGHT ||\n        keyCode == KeyCode.UP)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      const mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n      let deltaX = 0, deltaY = 0;\n      if (keyCode == KeyCode.DOWN) {\n        deltaY = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.LEFT) {\n        deltaX = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.RIGHT) {\n        deltaX = mapUnitsDelta;\n      } else {\n        deltaY = mapUnitsDelta;\n      }\n      const delta = [deltaX, deltaY];\n      rotateCoordinate(delta, view.getRotation());\n      pan(view, delta, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardPan;\n","/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport {targetNotEditable} from '../events/condition.js';\nimport Interaction, {zoomByDelta} from '../interaction/Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link moudle:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nclass KeyboardZoom extends Interaction {\n  /**\n   * @param {module:ol/interaction/KeyboardZoom~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {module:ol/events/condition~Condition}\n     */\n    this.condition_ = options.condition ? options.condition : targetNotEditable;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n * key pressed was '+' or '-').\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/KeyboardZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN ||\n      mapBrowserEvent.type == EventType.KEYPRESS) {\n    const keyEvent = mapBrowserEvent.originalEvent;\n    const charCode = keyEvent.charCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n      const map = mapBrowserEvent.map;\n      const delta = (charCode == '+'.charCodeAt(0)) ? this.delta_ : -this.delta_;\n      const view = map.getView();\n      zoomByDelta(view, delta, undefined, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardZoom;\n","/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport ViewHint from '../ViewHint.js';\nimport {always} from '../events/condition.js';\nimport {easeOut} from '../easing.js';\nimport EventType from '../events/EventType.js';\nimport {DEVICE_PIXEL_RATIO, FIREFOX, SAFARI} from '../has.js';\nimport Interaction, {zoomByDelta} from '../interaction/Interaction.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Maximum mouse wheel delta.\n * @type {number}\n */\nconst MAX_DELTA = 1;\n\n\n/**\n * @enum {string}\n */\nexport const Mode = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [constrainResolution=false] When using a trackpad or\n * magic mouse, zoom to the closest integer zoom level after the scroll gesture\n * ends.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nclass MouseWheelZoom extends Interaction {\n  /**\n   * @param {module:ol/interaction/MouseWheelZoom~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ = options.constrainResolution || false;\n\n    /**\n     * @private\n     * @type {module:ol/events/condition~Condition}\n     */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n     * @private\n     * @type {?module:ol/coordinate~Coordinate}\n     */\n    this.lastAnchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.startTime_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.timeoutId_ = undefined;\n\n    /**\n     * @private\n     * @type {module:ol/interaction/MouseWheelZoom~Mode|undefined}\n     */\n    this.mode_ = undefined;\n\n    /**\n     * Trackpad events separated by this delay will be considered separate\n     * interactions.\n     * @type {number}\n     */\n    this.trackpadEventGap_ = 400;\n\n    /**\n     * @type {number|undefined}\n     */\n    this.trackpadTimeoutId_ = undefined;\n\n    /**\n     * The number of delta values per zoom level\n     * @private\n     * @type {number}\n     */\n    this.trackpadDeltaPerZoom_ = 300;\n\n    /**\n     * The zoom factor by which scroll zooming is allowed to exceed the limits.\n     * @private\n     * @type {number}\n     */\n    this.trackpadZoomBuffer_ = 1.5;\n\n  }\n\n  /**\n   * @private\n   */\n  decrementInteractingHint_() {\n    this.trackpadTimeoutId_ = undefined;\n    const view = this.getMap().getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n  }\n\n  /**\n   * @private\n   * @param {module:ol/PluggableMap} map Map.\n   */\n  handleWheelZoom_(map) {\n    const view = map.getView();\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    const maxDelta = MAX_DELTA;\n    const delta = clamp(this.delta_, -maxDelta, maxDelta);\n    zoomByDelta(view, -delta, this.lastAnchor_, this.duration_);\n    this.mode_ = undefined;\n    this.delta_ = 0;\n    this.lastAnchor_ = null;\n    this.startTime_ = undefined;\n    this.timeoutId_ = undefined;\n  }\n\n  /**\n   * Enable or disable using the mouse's location as an anchor when zooming\n   * @param {boolean} useAnchor true to zoom to the mouse's location, false\n   * to zoom to the center of the map\n   * @api\n   */\n  setMouseAnchor(useAnchor) {\n    this.useAnchor_ = useAnchor;\n    if (!useAnchor) {\n      this.lastAnchor_ = null;\n    }\n  }\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * mousewheel-event) and eventually zooms the map.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} Allow event propagation.\n * @this {module:ol/interaction/MouseWheelZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  if (!this.condition_(mapBrowserEvent)) {\n    return true;\n  }\n  const type = mapBrowserEvent.type;\n  if (type !== EventType.WHEEL && type !== EventType.MOUSEWHEEL) {\n    return true;\n  }\n\n  mapBrowserEvent.preventDefault();\n\n  const map = mapBrowserEvent.map;\n  const wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n\n  if (this.useAnchor_) {\n    this.lastAnchor_ = mapBrowserEvent.coordinate;\n  }\n\n  // Delta normalisation inspired by\n  // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n  let delta;\n  if (mapBrowserEvent.type == EventType.WHEEL) {\n    delta = wheelEvent.deltaY;\n    if (FIREFOX &&\n        wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n      delta /= DEVICE_PIXEL_RATIO;\n    }\n    if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      delta *= 40;\n    }\n  } else if (mapBrowserEvent.type == EventType.MOUSEWHEEL) {\n    delta = -wheelEvent.wheelDeltaY;\n    if (SAFARI) {\n      delta /= 3;\n    }\n  }\n\n  if (delta === 0) {\n    return false;\n  }\n\n  const now = Date.now();\n\n  if (this.startTime_ === undefined) {\n    this.startTime_ = now;\n  }\n\n  if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n    this.mode_ = Math.abs(delta) < 4 ?\n      Mode.TRACKPAD :\n      Mode.WHEEL;\n  }\n\n  if (this.mode_ === Mode.TRACKPAD) {\n    const view = map.getView();\n    if (this.trackpadTimeoutId_) {\n      clearTimeout(this.trackpadTimeoutId_);\n    } else {\n      view.setHint(ViewHint.INTERACTING, 1);\n    }\n    this.trackpadTimeoutId_ = setTimeout(this.decrementInteractingHint_.bind(this), this.trackpadEventGap_);\n    let resolution = view.getResolution() * Math.pow(2, delta / this.trackpadDeltaPerZoom_);\n    const minResolution = view.getMinResolution();\n    const maxResolution = view.getMaxResolution();\n    let rebound = 0;\n    if (resolution < minResolution) {\n      resolution = Math.max(resolution, minResolution / this.trackpadZoomBuffer_);\n      rebound = 1;\n    } else if (resolution > maxResolution) {\n      resolution = Math.min(resolution, maxResolution * this.trackpadZoomBuffer_);\n      rebound = -1;\n    }\n    if (this.lastAnchor_) {\n      const center = view.calculateCenterZoom(resolution, this.lastAnchor_);\n      view.setCenter(view.constrainCenter(center));\n    }\n    view.setResolution(resolution);\n\n    if (rebound === 0 && this.constrainResolution_) {\n      view.animate({\n        resolution: view.constrainResolution(resolution, delta > 0 ? -1 : 1),\n        easing: easeOut,\n        anchor: this.lastAnchor_,\n        duration: this.duration_\n      });\n    }\n\n    if (rebound > 0) {\n      view.animate({\n        resolution: minResolution,\n        easing: easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    } else if (rebound < 0) {\n      view.animate({\n        resolution: maxResolution,\n        easing: easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    }\n    this.startTime_ = now;\n    return false;\n  }\n\n  this.delta_ += delta;\n\n  const timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n  clearTimeout(this.timeoutId_);\n  this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n\n  return false;\n}\n\n\nexport default MouseWheelZoom;\n","/**\n * @module ol/interaction/PinchRotate\n */\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from '../interaction/Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from '../interaction/Pointer.js';\nimport {disable} from '../rotationconstraint.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchRotate extends PointerInteraction {\n  /**\n   * @param {module:ol/interaction/PinchRotate~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleDownEvent: handleDownEvent,\n      handleDragEvent: handleDragEvent,\n      handleUpEvent: handleUpEvent,\n      stopDown: FALSE\n    });\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {module:ol/coordinate~Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotating_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotationDelta_ = 0.0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/PinchRotate}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  let rotationDelta = 0.0;\n\n  const touch0 = this.targetPointers[0];\n  const touch1 = this.targetPointers[1];\n\n  // angle between touches\n  const angle = Math.atan2(\n    touch1.clientY - touch0.clientY,\n    touch1.clientX - touch0.clientX);\n\n  if (this.lastAngle_ !== undefined) {\n    const delta = angle - this.lastAngle_;\n    this.rotationDelta_ += delta;\n    if (!this.rotating_ &&\n        Math.abs(this.rotationDelta_) > this.threshold_) {\n      this.rotating_ = true;\n    }\n    rotationDelta = delta;\n  }\n  this.lastAngle_ = angle;\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  if (view.getConstraints().rotation === disable) {\n    return;\n  }\n\n  // rotate anchor point.\n  // FIXME: should be the intersection point between the lines:\n  //     touch0,touch1 and previousTouch0,previousTouch1\n  const viewportPosition = map.getViewport().getBoundingClientRect();\n  const centroid = centroidFromPointers(this.targetPointers);\n  centroid[0] -= viewportPosition.left;\n  centroid[1] -= viewportPosition.top;\n  this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n  // rotate\n  if (this.rotating_) {\n    const rotation = view.getRotation();\n    map.render();\n    rotateWithoutConstraints(view, rotation + rotationDelta, this.anchor_);\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/PinchRotate}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (this.targetPointers.length < 2) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n    if (this.rotating_) {\n      const rotation = view.getRotation();\n      rotate(view, rotation, this.anchor_, this.duration_);\n    }\n    return false;\n  } else {\n    return true;\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/PinchRotate}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (this.targetPointers.length >= 2) {\n    const map = mapBrowserEvent.map;\n    this.anchor_ = null;\n    this.lastAngle_ = undefined;\n    this.rotating_ = false;\n    this.rotationDelta_ = 0.0;\n    if (!this.handlingDownUpSequence) {\n      map.getView().setHint(ViewHint.INTERACTING, 1);\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport default PinchRotate;\n","/**\n * @module ol/interaction/PinchZoom\n */\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {zoom, zoomWithoutConstraints} from '../interaction/Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from '../interaction/Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the pinch gesture ends.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchZoom extends PointerInteraction {\n  /**\n   * @param {module:ol/interaction/PinchZoom~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleDownEvent: handleDownEvent,\n      handleDragEvent: handleDragEvent,\n      handleUpEvent: handleUpEvent,\n      stopDown: FALSE\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ = options.constrainResolution || false;\n\n    /**\n     * @private\n     * @type {module:ol/coordinate~Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastDistance_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastScaleDelta_ = 1;\n\n  }\n\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/PinchZoom}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  let scaleDelta = 1.0;\n\n  const touch0 = this.targetPointers[0];\n  const touch1 = this.targetPointers[1];\n  const dx = touch0.clientX - touch1.clientX;\n  const dy = touch0.clientY - touch1.clientY;\n\n  // distance between touches\n  const distance = Math.sqrt(dx * dx + dy * dy);\n\n  if (this.lastDistance_ !== undefined) {\n    scaleDelta = this.lastDistance_ / distance;\n  }\n  this.lastDistance_ = distance;\n\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  const resolution = view.getResolution();\n  const maxResolution = view.getMaxResolution();\n  const minResolution = view.getMinResolution();\n  let newResolution = resolution * scaleDelta;\n  if (newResolution > maxResolution) {\n    scaleDelta = maxResolution / resolution;\n    newResolution = maxResolution;\n  } else if (newResolution < minResolution) {\n    scaleDelta = minResolution / resolution;\n    newResolution = minResolution;\n  }\n\n  if (scaleDelta != 1.0) {\n    this.lastScaleDelta_ = scaleDelta;\n  }\n\n  // scale anchor point.\n  const viewportPosition = map.getViewport().getBoundingClientRect();\n  const centroid = centroidFromPointers(this.targetPointers);\n  centroid[0] -= viewportPosition.left;\n  centroid[1] -= viewportPosition.top;\n  this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n  // scale, bypass the resolution constraint\n  map.render();\n  zoomWithoutConstraints(view, newResolution, this.anchor_);\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/PinchZoom}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (this.targetPointers.length < 2) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n    const resolution = view.getResolution();\n    if (this.constrainResolution_ ||\n        resolution < view.getMinResolution() ||\n        resolution > view.getMaxResolution()) {\n      // Zoom to final resolution, with an animation, and provide a\n      // direction not to zoom out/in if user was pinching in/out.\n      // Direction is > 0 if pinching out, and < 0 if pinching in.\n      const direction = this.lastScaleDelta_ - 1;\n      zoom(view, resolution, this.anchor_, this.duration_, direction);\n    }\n    return false;\n  } else {\n    return true;\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/PinchZoom}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (this.targetPointers.length >= 2) {\n    const map = mapBrowserEvent.map;\n    this.anchor_ = null;\n    this.lastDistance_ = undefined;\n    this.lastScaleDelta_ = 1;\n    if (!this.handlingDownUpSequence) {\n      map.getView().setHint(ViewHint.INTERACTING, 1);\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport default PinchZoom;\n","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport Kinetic from './Kinetic.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nimport {focus} from './events/condition.js';\n\nexport {default as DoubleClickZoom} from './interaction/DoubleClickZoom.js';\nexport {default as DragAndDrop} from './interaction/DragAndDrop.js';\nexport {default as DragBox} from './interaction/DragBox.js';\nexport {default as DragPan} from './interaction/DragPan.js';\nexport {default as DragRotate} from './interaction/DragRotate.js';\nexport {default as DragRotateAndZoom} from './interaction/DragRotateAndZoom.js';\nexport {default as DragZoom} from './interaction/DragZoom.js';\nexport {default as Draw} from './interaction/Draw.js';\nexport {default as Extent} from './interaction/Extent.js';\nexport {default as Interaction} from './interaction/Interaction.js';\nexport {default as KeyboardPan} from './interaction/KeyboardPan.js';\nexport {default as KeyboardZoom} from './interaction/KeyboardZoom.js';\nexport {default as Modify} from './interaction/Modify.js';\nexport {default as MouseWheelZoom} from './interaction/MouseWheelZoom.js';\nexport {default as PinchRotate} from './interaction/PinchRotate.js';\nexport {default as PinchZoom} from './interaction/PinchZoom.js';\nexport {default as Pointer} from './interaction/Pointer.js';\nexport {default as Select} from './interaction/Select.js';\nexport {default as Snap} from './interaction/Snap.js';\nexport {default as Translate} from './interaction/Translate.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the wheel/trackpad or pinch gesture ends.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or\n * mousewheel zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n\n\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. The default set of\n * interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {module:ol/interaction/Interaction~DefaultsOptions=} opt_options\n * Defaults options.\n * @return {module:ol/Collection<module:ol/interaction/Interaction>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const interactions = new Collection();\n\n  const kinetic = new Kinetic(-0.005, 0.05, 100);\n\n  const altShiftDragRotate = options.altShiftDragRotate !== undefined ?\n    options.altShiftDragRotate : true;\n  if (altShiftDragRotate) {\n    interactions.push(new DragRotate());\n  }\n\n  const doubleClickZoom = options.doubleClickZoom !== undefined ?\n    options.doubleClickZoom : true;\n  if (doubleClickZoom) {\n    interactions.push(new DoubleClickZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const dragPan = options.dragPan !== undefined ? options.dragPan : true;\n  if (dragPan) {\n    interactions.push(new DragPan({\n      condition: options.onFocusOnly ? focus : undefined,\n      kinetic: kinetic\n    }));\n  }\n\n  const pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate :\n    true;\n  if (pinchRotate) {\n    interactions.push(new PinchRotate());\n  }\n\n  const pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n  if (pinchZoom) {\n    interactions.push(new PinchZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const keyboard = options.keyboard !== undefined ? options.keyboard : true;\n  if (keyboard) {\n    interactions.push(new KeyboardPan());\n    interactions.push(new KeyboardZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true;\n  if (mouseWheelZoom) {\n    interactions.push(new MouseWheelZoom({\n      condition: options.onFocusOnly ? focus : undefined,\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const shiftDragZoom = options.shiftDragZoom !== undefined ?\n    options.shiftDragZoom : true;\n  if (shiftDragZoom) {\n    interactions.push(new DragZoom({\n      duration: options.zoomDuration\n    }));\n  }\n\n  return interactions;\n\n}\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nclass MapEvent extends Event {\n\n  /**\n   * @param {string} type Event type.\n   * @param {module:ol/PluggableMap} map Map.\n   * @param {?module:ol/PluggableMap~FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, opt_frameState) {\n\n    super(type);\n\n    /**\n     * The map where the event occurred.\n     * @type {module:ol/PluggableMap}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?module:ol/PluggableMap~FrameState}\n     * @api\n     */\n    this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n\n  }\n\n}\n\nexport default MapEvent;\n","/**\n * @module ol/geom/GeometryCollection\n */\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {createOrUpdateEmpty, closestSquaredDistanceXY, extend, getCenter} from '../extent.js';\nimport Geometry from '../geom/Geometry.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry} objects.\n *\n * @api\n */\nclass GeometryCollection extends Geometry {\n\n  /**\n   * @param {Array<module:ol/geom/Geometry>=} opt_geometries Geometries.\n   */\n  constructor(opt_geometries) {\n\n    super();\n\n    /**\n     * @private\n     * @type {Array<module:ol/geom/Geometry>}\n     */\n    this.geometries_ = opt_geometries ? opt_geometries : null;\n\n    this.listenGeometriesChange_();\n  }\n\n  /**\n   * @private\n   */\n  unlistenGeometriesChange_() {\n    if (!this.geometries_) {\n      return;\n    }\n    for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      unlisten(\n        this.geometries_[i], EventType.CHANGE,\n        this.changed, this);\n    }\n  }\n\n  /**\n   * @private\n   */\n  listenGeometriesChange_() {\n    if (!this.geometries_) {\n      return;\n    }\n    for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      listen(\n        this.geometries_[i], EventType.CHANGE,\n        this.changed, this);\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/GeometryCollection} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const geometryCollection = new GeometryCollection(null);\n    geometryCollection.setGeometries(this.geometries_);\n    return geometryCollection;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      minSquaredDistance = geometries[i].closestPointXY(\n        x, y, closestPoint, minSquaredDistance);\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].containsXY(x, y)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    createOrUpdateEmpty(extent);\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      extend(extent, geometries[i].getExtent());\n    }\n    return extent;\n  }\n\n  /**\n   * Return the geometries that make up this geometry collection.\n   * @return {Array<module:ol/geom/Geometry>} Geometries.\n   * @api\n   */\n  getGeometries() {\n    return cloneGeometries(this.geometries_);\n  }\n\n  /**\n   * @return {Array<module:ol/geom/Geometry>} Geometries.\n   */\n  getGeometriesArray() {\n    return this.geometries_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision != this.getRevision()) {\n      clear(this.simplifiedGeometryCache);\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    if (squaredTolerance < 0 ||\n        (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n         squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n      return this;\n    }\n    const key = squaredTolerance.toString();\n    if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n      return this.simplifiedGeometryCache[key];\n    } else {\n      const simplifiedGeometries = [];\n      const geometries = this.geometries_;\n      let simplified = false;\n      for (let i = 0, ii = geometries.length; i < ii; ++i) {\n        const geometry = geometries[i];\n        const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n        simplifiedGeometries.push(simplifiedGeometry);\n        if (simplifiedGeometry !== geometry) {\n          simplified = true;\n        }\n      }\n      if (simplified) {\n        const simplifiedGeometryCollection = new GeometryCollection(null);\n        simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n        this.simplifiedGeometryCache[key] = simplifiedGeometryCollection;\n        return simplifiedGeometryCollection;\n      } else {\n        this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n        return this;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.GEOMETRY_COLLECTION;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].intersectsExtent(extent)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.geometries_.length === 0;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].rotate(angle, anchor);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    let anchor = opt_anchor;\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].scale(sx, opt_sy, anchor);\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the geometries that make up this geometry collection.\n   * @param {Array<module:ol/geom/Geometry>} geometries Geometries.\n   * @api\n   */\n  setGeometries(geometries) {\n    this.setGeometriesArray(cloneGeometries(geometries));\n  }\n\n  /**\n   * @param {Array<module:ol/geom/Geometry>} geometries Geometries.\n   */\n  setGeometriesArray(geometries) {\n    this.unlistenGeometriesChange_();\n    this.geometries_ = geometries;\n    this.listenGeometriesChange_();\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  applyTransform(transformFn) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].applyTransform(transformFn);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].translate(deltaX, deltaY);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.unlistenGeometriesChange_();\n    super.disposeInternal();\n  }\n}\n\n\n/**\n * @param {Array<module:ol/geom/Geometry>} geometries Geometries.\n * @return {Array<module:ol/geom/Geometry>} Cloned geometries.\n */\nfunction cloneGeometries(geometries) {\n  const clonedGeometries = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n  return clonedGeometries;\n}\n\n\nexport default GeometryCollection;\n","/**\n * @module ol/geom/flat/interpolate\n */\nimport {binarySearch} from '../../array.js';\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN;\n  let pointY = NaN;\n  const n = (end - offset) / stride;\n  if (n === 1) {\n    pointX = flatCoordinates[offset];\n    pointY = flatCoordinates[offset + 1];\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n        fraction * flatCoordinates[offset + stride];\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n        fraction * flatCoordinates[offset + stride + 1];\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset];\n    let y1 = flatCoordinates[offset + 1];\n    let length = 0;\n    const cumulativeLengths = [0];\n    for (let i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i];\n      const y2 = flatCoordinates[i + 1];\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length);\n      x1 = x2;\n      y1 = y2;\n    }\n    const target = fraction * length;\n    const index = binarySearch(cumulativeLengths, target);\n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n          (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      const o = offset + (-index - 2) * stride;\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t);\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n    } else {\n      pointX = flatCoordinates[offset + index * stride];\n      pointY = flatCoordinates[offset + index * stride + 1];\n    }\n  }\n  if (opt_dest) {\n    opt_dest[0] = pointX;\n    opt_dest[1] = pointY;\n    return opt_dest;\n  } else {\n    return [pointX, pointY];\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n  if (end == offset) {\n    return null;\n  }\n  let coordinate;\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } else if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  // FIXME use O(1) search\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n  let lo = offset / stride;\n  let hi = end / stride;\n  while (lo < hi) {\n    const mid = (lo + hi) >> 1;\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  const m0 = flatCoordinates[lo * stride - 1];\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n  const m1 = flatCoordinates[(lo + 1) * stride - 1];\n  const t = (m - m0) / (m1 - m0);\n  coordinate = [];\n  for (let i = 0; i < stride - 1; ++i) {\n    coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i],\n      flatCoordinates[lo * stride + i], t));\n  }\n  coordinate.push(m);\n  return coordinate;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n */\nexport function lineStringsCoordinateAtM(\n  flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n  if (interpolate) {\n    return lineStringCoordinateAtM(\n      flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n  }\n  let coordinate;\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    if (offset == end) {\n      continue;\n    }\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    } else if (m <= flatCoordinates[end - 1]) {\n      return lineStringCoordinateAtM(\n        flatCoordinates, offset, end, stride, m, false);\n    }\n    offset = end;\n  }\n  return null;\n}\n","/**\n * @module ol/source/TileJSON\n */\n// FIXME check order of async callbacks\n\n/**\n * See http://mapbox.com/developers/api/.\n */\n\n\nimport {createFromTemplates} from '../tileurlfunction.js';\nimport {assert} from '../asserts.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from '../source/State.js';\nimport TileImage from '../source/TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [jsonp=false] Use JSONP with callback to load the TileJSON.\n * Useful when the server does not support CORS..\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {tileJSON} [tileJSON] TileJSON configuration for this source.\n * If not provided, `url` must be configured.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] URL to the TileJSON file. If not provided, `tileJSON` must be configured.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data in TileJSON format.\n * @api\n */\nclass TileJSON extends TileImage {\n  /**\n   * @param {module:ol/source/TileJSON~Options=} options TileJSON options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: SourceState.LOADING,\n      tileLoadFunction: options.tileLoadFunction,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @type {TileJSON}\n     * @private\n     */\n    this.tileJSON_ = null;\n\n\n    if (options.url) {\n      if (options.jsonp) {\n        requestJSONP(options.url, this.handleTileJSONResponse.bind(this),\n          this.handleTileJSONError.bind(this));\n      } else {\n        const client = new XMLHttpRequest();\n        client.addEventListener('load', this.onXHRLoad_.bind(this));\n        client.addEventListener('error', this.onXHRError_.bind(this));\n        client.open('GET', options.url);\n        client.send();\n      }\n    } else if (options.tileJSON) {\n      this.handleTileJSONResponse(options.tileJSON);\n    } else {\n      assert(false, 51); // Either `url` or `tileJSON` options must be provided\n    }\n\n  }\n\n  /**\n   * @private\n   * @param {Event} event The load event.\n   */\n  onXHRLoad_(event) {\n    const client = /** @type {XMLHttpRequest} */ (event.target);\n    // status will be 0 for file:// urls\n    if (!client.status || client.status >= 200 && client.status < 300) {\n      let response;\n      try {\n        response = /** @type {TileJSON} */(JSON.parse(client.responseText));\n      } catch (err) {\n        this.handleTileJSONError();\n        return;\n      }\n      this.handleTileJSONResponse(response);\n    } else {\n      this.handleTileJSONError();\n    }\n  }\n\n  /**\n   * @private\n   * @param {Event} event The error event.\n   */\n  onXHRError_(event) {\n    this.handleTileJSONError();\n  }\n\n  /**\n   * @return {TileJSON} The tilejson object.\n   * @api\n   */\n  getTileJSON() {\n    return this.tileJSON_;\n  }\n\n  /**\n   * @protected\n   * @param {TileJSON} tileJSON Tile JSON.\n   */\n  handleTileJSONResponse(tileJSON) {\n\n    const epsg4326Projection = getProjection('EPSG:4326');\n\n    const sourceProjection = this.getProjection();\n    let extent;\n    if (tileJSON.bounds !== undefined) {\n      const transform = getTransformFromProjections(\n        epsg4326Projection, sourceProjection);\n      extent = applyTransform(tileJSON.bounds, transform);\n    }\n\n    const minZoom = tileJSON.minzoom || 0;\n    const maxZoom = tileJSON.maxzoom || 22;\n    const tileGrid = createXYZ({\n      extent: extentFromProjection(sourceProjection),\n      maxZoom: maxZoom,\n      minZoom: minZoom\n    });\n    this.tileGrid = tileGrid;\n\n    this.tileUrlFunction = createFromTemplates(tileJSON.tiles, tileGrid);\n\n    if (tileJSON.attribution !== undefined && !this.getAttributions()) {\n      const attributionExtent = extent !== undefined ?\n        extent : epsg4326Projection.getExtent();\n\n      this.setAttributions(function(frameState) {\n        if (intersects(attributionExtent, frameState.extent)) {\n          return [tileJSON.attribution];\n        }\n        return null;\n      });\n\n    }\n    this.tileJSON_ = tileJSON;\n    this.setState(SourceState.READY);\n\n  }\n\n  /**\n   * @protected\n   */\n  handleTileJSONError() {\n    this.setState(SourceState.ERROR);\n  }\n}\n\n\nexport default TileJSON;\n","/**\n * @module ol/OverlayPositioning\n */\n\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/Overlay\n */\nimport MapEventType from './MapEventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport {CLASS_SELECTABLE} from './css.js';\nimport {removeNode, removeChildren, outerWidth, outerHeight} from './dom.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {containsExtent} from './extent.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {module:ol/coordinate~Coordinate} [position] The overlay position\n * in map projection.\n * @property {module:ol/OverlayPositioning} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {boolean} [autoPan=false] If set to `true` the map is panned when\n * calling `setPosition`, so that the overlay is entirely visible in the current\n * viewport.\n * @property {module:ol/Overlay~PanOptions} [autoPanAnimation] The\n * animation options used to pan the overlay into view. This animation is only\n * used when `autoPan` is enabled. A `duration` and `easing` may be provided to\n * customize the animation.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n\n\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing~inAndOut}.\n */\n\n\n/**\n * @enum {string}\n * @protected\n */\nconst Property = {\n  ELEMENT: 'element',\n  MAP: 'map',\n  OFFSET: 'offset',\n  POSITION: 'position',\n  POSITIONING: 'positioning'\n};\n\n\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nclass Overlay extends BaseObject {\n\n  /**\n   * @param {module:ol/Overlay~Options} options Overlay options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {module:ol/Overlay~Options}\n     */\n    this.options = options;\n\n    /**\n     * @protected\n     * @type {number|string|undefined}\n     */\n    this.id = options.id;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.insertFirst = options.insertFirst !== undefined ?\n      options.insertFirst : true;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = document.createElement('div');\n    this.element.className = options.className !== undefined ?\n      options.className : 'ol-overlay-container ' + CLASS_SELECTABLE;\n    this.element.style.position = 'absolute';\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n\n    /**\n     * @protected\n     * @type {module:ol/Overlay~PanOptions}\n     */\n    this.autoPanAnimation = options.autoPanAnimation || /** @type {module:ol/Overlay~PanOptions} */ ({});\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.autoPanMargin = options.autoPanMargin !== undefined ?\n      options.autoPanMargin : 20;\n\n    /**\n     * @protected\n     * @type {{bottom_: string,\n     *         left_: string,\n     *         right_: string,\n     *         top_: string,\n     *         visible: boolean}}\n     */\n    this.rendered = {\n      bottom_: '',\n      left_: '',\n      right_: '',\n      top_: '',\n      visible: true\n    };\n\n    /**\n     * @protected\n     * @type {?module:ol/events~EventsKey}\n     */\n    this.mapPostrenderListenerKey = null;\n\n    listen(\n      this, getChangeEventType(Property.ELEMENT),\n      this.handleElementChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.MAP),\n      this.handleMapChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.OFFSET),\n      this.handleOffsetChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.POSITION),\n      this.handlePositionChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.POSITIONING),\n      this.handlePositioningChanged, this);\n\n    if (options.element !== undefined) {\n      this.setElement(options.element);\n    }\n\n    this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n\n    this.setPositioning(options.positioning !== undefined ?\n      /** @type {module:ol/OverlayPositioning} */ (options.positioning) :\n      OverlayPositioning.TOP_LEFT);\n\n    if (options.position !== undefined) {\n      this.setPosition(options.position);\n    }\n\n  }\n\n  /**\n   * Get the DOM element of this overlay.\n   * @return {HTMLElement|undefined} The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  getElement() {\n    return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n  }\n\n  /**\n   * Get the overlay identifier which is set on constructor.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id;\n  }\n\n  /**\n   * Get the map associated with this overlay.\n   * @return {module:ol/PluggableMap|undefined} The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  getMap() {\n    return (\n      /** @type {module:ol/PluggableMap|undefined} */ (this.get(Property.MAP))\n    );\n  }\n\n  /**\n   * Get the offset of this overlay.\n   * @return {Array<number>} The offset.\n   * @observable\n   * @api\n   */\n  getOffset() {\n    return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n  }\n\n  /**\n   * Get the current position of this overlay.\n   * @return {module:ol/coordinate~Coordinate|undefined} The spatial point that the overlay is\n   *     anchored at.\n   * @observable\n   * @api\n   */\n  getPosition() {\n    return (\n      /** @type {module:ol/coordinate~Coordinate|undefined} */ (this.get(Property.POSITION))\n    );\n  }\n\n  /**\n   * Get the current positioning of this overlay.\n   * @return {module:ol/OverlayPositioning} How the overlay is positioned\n   *     relative to its point on the map.\n   * @observable\n   * @api\n   */\n  getPositioning() {\n    return (\n      /** @type {module:ol/OverlayPositioning} */ (this.get(Property.POSITIONING))\n    );\n  }\n\n  /**\n   * @protected\n   */\n  handleElementChanged() {\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      this.element.appendChild(element);\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handleMapChanged() {\n    if (this.mapPostrenderListenerKey) {\n      removeNode(this.element);\n      unlistenByKey(this.mapPostrenderListenerKey);\n      this.mapPostrenderListenerKey = null;\n    }\n    const map = this.getMap();\n    if (map) {\n      this.mapPostrenderListenerKey = listen(map,\n        MapEventType.POSTRENDER, this.render, this);\n      this.updatePixelPosition();\n      const container = this.stopEvent ?\n        map.getOverlayContainerStopEvent() : map.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  render() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handleOffsetChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handlePositionChanged() {\n    this.updatePixelPosition();\n    if (this.get(Property.POSITION) && this.autoPan) {\n      this.panIntoView();\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePositioningChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * Set the DOM element to be associated with this overlay.\n   * @param {HTMLElement|undefined} element The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  setElement(element) {\n    this.set(Property.ELEMENT, element);\n  }\n\n  /**\n   * Set the map to be associated with this overlay.\n   * @param {module:ol/PluggableMap|undefined} map The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  setMap(map) {\n    this.set(Property.MAP, map);\n  }\n\n  /**\n   * Set the offset for this overlay.\n   * @param {Array<number>} offset Offset.\n   * @observable\n   * @api\n   */\n  setOffset(offset) {\n    this.set(Property.OFFSET, offset);\n  }\n\n  /**\n   * Set the position for this overlay. If the position is `undefined` the\n   * overlay is hidden.\n   * @param {module:ol/coordinate~Coordinate|undefined} position The spatial point that the overlay\n   *     is anchored at.\n   * @observable\n   * @api\n   */\n  setPosition(position) {\n    this.set(Property.POSITION, position);\n  }\n\n  /**\n   * Pan the map so that the overlay is entirely visible in the current viewport\n   * (if necessary).\n   * @protected\n   */\n  panIntoView() {\n    const map = this.getMap();\n\n    if (!map || !map.getTargetElement()) {\n      return;\n    }\n\n    const mapRect = this.getRect(map.getTargetElement(), map.getSize());\n    const element = this.getElement();\n    const overlayRect = this.getRect(element, [outerWidth(element), outerHeight(element)]);\n\n    const margin = this.autoPanMargin;\n    if (!containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0];\n      const offsetRight = mapRect[2] - overlayRect[2];\n      const offsetTop = overlayRect[1] - mapRect[1];\n      const offsetBottom = mapRect[3] - overlayRect[3];\n\n      const delta = [0, 0];\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - margin;\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + margin;\n      }\n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - margin;\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + margin;\n      }\n\n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = /** @type {module:ol/coordinate~Coordinate} */ (map.getView().getCenter());\n        const centerPx = map.getPixelFromCoordinate(center);\n        const newCenterPx = [\n          centerPx[0] + delta[0],\n          centerPx[1] + delta[1]\n        ];\n\n        map.getView().animate({\n          center: map.getCoordinateFromPixel(newCenterPx),\n          duration: this.autoPanAnimation.duration,\n          easing: this.autoPanAnimation.easing\n        });\n      }\n    }\n  }\n\n  /**\n   * Get the extent of an element relative to the document\n   * @param {HTMLElement|undefined} element The element.\n   * @param {module:ol/size~Size|undefined} size The size of the element.\n   * @return {module:ol/extent~Extent} The extent.\n   * @protected\n   */\n  getRect(element, size) {\n    const box = element.getBoundingClientRect();\n    const offsetX = box.left + window.pageXOffset;\n    const offsetY = box.top + window.pageYOffset;\n    return [\n      offsetX,\n      offsetY,\n      offsetX + size[0],\n      offsetY + size[1]\n    ];\n  }\n\n  /**\n   * Set the positioning for this overlay.\n   * @param {module:ol/OverlayPositioning} positioning how the overlay is\n   *     positioned relative to its point on the map.\n   * @observable\n   * @api\n   */\n  setPositioning(positioning) {\n    this.set(Property.POSITIONING, positioning);\n  }\n\n  /**\n   * Modify the visibility of the element.\n   * @param {boolean} visible Element visibility.\n   * @protected\n   */\n  setVisible(visible) {\n    if (this.rendered.visible !== visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.rendered.visible = visible;\n    }\n  }\n\n  /**\n   * Update pixel position.\n   * @protected\n   */\n  updatePixelPosition() {\n    const map = this.getMap();\n    const position = this.getPosition();\n    if (!map || !map.isRendered() || !position) {\n      this.setVisible(false);\n      return;\n    }\n\n    const pixel = map.getPixelFromCoordinate(position);\n    const mapSize = map.getSize();\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * @param {module:ol/pixel~Pixel} pixel The pixel location.\n   * @param {module:ol/size~Size|undefined} mapSize The map size.\n   * @protected\n   */\n  updateRenderedPosition(pixel, mapSize) {\n    const style = this.element.style;\n    const offset = this.getOffset();\n\n    const positioning = this.getPositioning();\n\n    this.setVisible(true);\n\n    let offsetX = offset[0];\n    let offsetY = offset[1];\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n        positioning == OverlayPositioning.CENTER_RIGHT ||\n        positioning == OverlayPositioning.TOP_RIGHT) {\n      if (this.rendered.left_ !== '') {\n        this.rendered.left_ = style.left = '';\n      }\n      const right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n      if (this.rendered.right_ != right) {\n        this.rendered.right_ = style.right = right;\n      }\n    } else {\n      if (this.rendered.right_ !== '') {\n        this.rendered.right_ = style.right = '';\n      }\n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n          positioning == OverlayPositioning.CENTER_CENTER ||\n          positioning == OverlayPositioning.TOP_CENTER) {\n        offsetX -= this.element.offsetWidth / 2;\n      }\n      const left = Math.round(pixel[0] + offsetX) + 'px';\n      if (this.rendered.left_ != left) {\n        this.rendered.left_ = style.left = left;\n      }\n    }\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n        positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.BOTTOM_RIGHT) {\n      if (this.rendered.top_ !== '') {\n        this.rendered.top_ = style.top = '';\n      }\n      const bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n      if (this.rendered.bottom_ != bottom) {\n        this.rendered.bottom_ = style.bottom = bottom;\n      }\n    } else {\n      if (this.rendered.bottom_ !== '') {\n        this.rendered.bottom_ = style.bottom = '';\n      }\n      if (positioning == OverlayPositioning.CENTER_LEFT ||\n          positioning == OverlayPositioning.CENTER_CENTER ||\n          positioning == OverlayPositioning.CENTER_RIGHT) {\n        offsetY -= this.element.offsetHeight / 2;\n      }\n      const top = Math.round(pixel[1] + offsetY) + 'px';\n      if (this.rendered.top_ != top) {\n        this.rendered.top_ = style.top = top;\n      }\n    }\n  }\n\n  /**\n   * returns the options this Overlay has been created with\n   * @return {module:ol/Overlay~Options} overlay options\n   */\n  getOptions() {\n    return this.options;\n  }\n}\n\n\nexport default Overlay;\n","/**\n * @license\n * Latitude/longitude spherical geodesy formulae taken from\n * http://www.movable-type.co.uk/scripts/latlong.html\n * Licensed under CC-BY-3.0.\n */\n\n/**\n * @module ol/sphere\n */\nimport {toRadians, toDegrees} from './math.js';\nimport GeometryType from './geom/GeometryType.js';\n\n\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {module:ol/proj~ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the radius of the\n * earth is used (Clarke 1866 Authalic Sphere).\n */\n\n\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport const DEFAULT_RADIUS = 6371008.8;\n\n\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lat2 = toRadians(c2[1]);\n  const deltaLatBy2 = (lat2 - lat1) / 2;\n  const deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n  const a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n      Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n      Math.cos(lat1) * Math.cos(lat2);\n  return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n\n\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n  let length = 0;\n  for (let i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n    length += getDistance(coordinates[i], coordinates[i + 1], radius);\n  }\n  return length;\n}\n\n\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {module:ol/geom/Geometry} geometry A geometry.\n * @param {module:ol/sphere~SphereMetricOptions=} opt_options Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let length = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT: {\n      break;\n    }\n    case GeometryType.LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      coordinates = /** @type {module:ol/geom/SimpleGeometry} */ (geometry).getCoordinates();\n      length = getLengthInternal(coordinates, radius);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {module:ol/geom/SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        length += getLengthInternal(coordinates[i], radius);\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {module:ol/geom/SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        for (j = 0, jj = coords.length; j < jj; ++j) {\n          length += getLengthInternal(coords[j], radius);\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {module:ol/geom/GeometryCollection} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        length += getLength(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return length;\n}\n\n\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array<module:ol/coordinate~Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n  let area = 0;\n  const len = coordinates.length;\n  let x1 = coordinates[len - 1][0];\n  let y1 = coordinates[len - 1][1];\n  for (let i = 0; i < len; i++) {\n    const x2 = coordinates[i][0];\n    const y2 = coordinates[i][1];\n    area += toRadians(x2 - x1) *\n        (2 + Math.sin(toRadians(y1)) +\n        Math.sin(toRadians(y2)));\n    x1 = x2;\n    y1 = y2;\n  }\n  return area * radius * radius / 2.0;\n}\n\n\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {module:ol/geom/Geometry} geometry A geometry.\n * @param {module:ol/sphere~SphereMetricOptions=} opt_options Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let area = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT:\n    case GeometryType.LINE_STRING:\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      break;\n    }\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {module:ol/geom/Polygon} */ (geometry).getCoordinates();\n      area = Math.abs(getAreaInternal(coordinates[0], radius));\n      for (i = 1, ii = coordinates.length; i < ii; ++i) {\n        area -= Math.abs(getAreaInternal(coordinates[i], radius));\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {module:ol/geom/SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        area += Math.abs(getAreaInternal(coords[0], radius));\n        for (j = 1, jj = coords.length; j < jj; ++j) {\n          area -= Math.abs(getAreaInternal(coords[j], radius));\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {module:ol/geom/GeometryCollection} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        area += getArea(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return area;\n}\n\n\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {module:ol/coordinate~Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {module:ol/coordinate~Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lon1 = toRadians(c1[0]);\n  const dByR = distance / radius;\n  const lat = Math.asin(\n    Math.sin(lat1) * Math.cos(dByR) +\n      Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n  const lon = lon1 + Math.atan2(\n    Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1),\n    Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n  return [toDegrees(lon), toDegrees(lat)];\n}\n","/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache~shared}.\n */\nclass IconImageCache {\n  constructor() {\n\n    /**\n    * @type {!Object<string, module:ol/style/IconImage>}\n    * @private\n    */\n    this.cache_ = {};\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.cacheSize_ = 0;\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.maxCacheSize_ = 32;\n  }\n\n  /**\n  * FIXME empty description for jsdoc\n  */\n  clear() {\n    this.cache_ = {};\n    this.cacheSize_ = 0;\n  }\n\n  /**\n  * FIXME empty description for jsdoc\n  */\n  expire() {\n    if (this.cacheSize_ > this.maxCacheSize_) {\n      let i = 0;\n      for (const key in this.cache_) {\n        const iconImage = this.cache_[key];\n        if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n          delete this.cache_[key];\n          --this.cacheSize_;\n        }\n      }\n    }\n  }\n\n  /**\n  * @param {string} src Src.\n  * @param {?string} crossOrigin Cross origin.\n  * @param {module:ol/color~Color} color Color.\n  * @return {module:ol/style/IconImage} Icon image.\n  */\n  get(src, crossOrigin, color) {\n    const key = getKey(src, crossOrigin, color);\n    return key in this.cache_ ? this.cache_[key] : null;\n  }\n\n  /**\n  * @param {string} src Src.\n  * @param {?string} crossOrigin Cross origin.\n  * @param {module:ol/color~Color} color Color.\n  * @param {module:ol/style/IconImage} iconImage Icon image.\n  */\n  set(src, crossOrigin, color, iconImage) {\n    const key = getKey(src, crossOrigin, color);\n    this.cache_[key] = iconImage;\n    ++this.cacheSize_;\n  }\n\n  /**\n  * Set the cache size of the icon cache. Default is `32`. Change this value when\n  * your map uses more than 32 different icon images and you are not caching icon\n  * styles on the application level.\n  * @param {number} maxCacheSize Cache max size.\n  * @api\n  */\n  setSize(maxCacheSize) {\n    this.maxCacheSize_ = maxCacheSize;\n    this.expire();\n  }\n}\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/color~Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\n\nexport default IconImageCache;\n\n\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport const shared = new IconImageCache();\n","/**\n * @module ol/geom/Circle\n */\nimport {createOrUpdate, forEachCorner, intersects} from '../extent.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {deflateCoordinate} from '../geom/flat/deflate.js';\n\n/**\n * @classdesc\n * Circle geometry.\n *\n * @api\n */\nclass Circle extends SimpleGeometry {\n\n  /**\n   * @param {!module:ol/coordinate~Coordinate} center Center.\n   *     For internal use, flat coordinates in combination with `opt_layout` and no\n   *     `opt_radius` are also accepted.\n   * @param {number=} opt_radius Radius.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   */\n  constructor(center, opt_radius, opt_layout) {\n    super();\n    if (opt_layout !== undefined && opt_radius === undefined) {\n      this.setFlatCoordinates(opt_layout, center);\n    } else {\n      const radius = opt_radius ? opt_radius : 0;\n      this.setCenterAndRadius(center, radius, opt_layout);\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!module:ol/geom/Circle} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new Circle(this.flatCoordinates.slice(), undefined, this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const dx = x - flatCoordinates[0];\n    const dy = y - flatCoordinates[1];\n    const squaredDistance = dx * dx + dy * dy;\n    if (squaredDistance < minSquaredDistance) {\n      if (squaredDistance === 0) {\n        for (let i = 0; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      } else {\n        const delta = this.getRadius() / Math.sqrt(squaredDistance);\n        closestPoint[0] = flatCoordinates[0] + delta * dx;\n        closestPoint[1] = flatCoordinates[1] + delta * dy;\n        for (let i = 2; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      }\n      closestPoint.length = this.stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    const flatCoordinates = this.flatCoordinates;\n    const dx = x - flatCoordinates[0];\n    const dy = y - flatCoordinates[1];\n    return dx * dx + dy * dy <= this.getRadiusSquared_();\n  }\n\n  /**\n   * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @return {module:ol/coordinate~Coordinate} Center.\n   * @api\n   */\n  getCenter() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    const flatCoordinates = this.flatCoordinates;\n    const radius = flatCoordinates[this.stride] - flatCoordinates[0];\n    return createOrUpdate(\n      flatCoordinates[0] - radius, flatCoordinates[1] - radius,\n      flatCoordinates[0] + radius, flatCoordinates[1] + radius,\n      extent);\n  }\n\n  /**\n   * Return the radius of the circle.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return Math.sqrt(this.getRadiusSquared_());\n  }\n\n  /**\n   * @private\n   * @return {number} Radius squared.\n   */\n  getRadiusSquared_() {\n    const dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n    const dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.CIRCLE;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const circleExtent = this.getExtent();\n    if (intersects(extent, circleExtent)) {\n      const center = this.getCenter();\n\n      if (extent[0] <= center[0] && extent[2] >= center[0]) {\n        return true;\n      }\n      if (extent[1] <= center[1] && extent[3] >= center[1]) {\n        return true;\n      }\n\n      return forEachCorner(extent, this.intersectsCoordinate, this);\n    }\n    return false;\n\n  }\n\n  /**\n   * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {module:ol/coordinate~Coordinate} center Center.\n   * @api\n   */\n  setCenter(center) {\n    const stride = this.stride;\n    const radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n    const flatCoordinates = center.slice();\n    flatCoordinates[stride] = flatCoordinates[0] + radius;\n    for (let i = 1; i < stride; ++i) {\n      flatCoordinates[stride + i] = center[i];\n    }\n    this.setFlatCoordinates(this.layout, flatCoordinates);\n    this.changed();\n  }\n\n  /**\n   * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n   * number) of the circle.\n   * @param {!module:ol/coordinate~Coordinate} center Center.\n   * @param {number} radius Radius.\n   * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n   * @api\n   */\n  setCenterAndRadius(center, radius, opt_layout) {\n    this.setLayout(opt_layout, center, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    /** @type {Array<number>} */\n    const flatCoordinates = this.flatCoordinates;\n    let offset = deflateCoordinate(\n      flatCoordinates, 0, center, this.stride);\n    flatCoordinates[offset++] = flatCoordinates[0] + radius;\n    for (let i = 1, ii = this.stride; i < ii; ++i) {\n      flatCoordinates[offset++] = flatCoordinates[i];\n    }\n    flatCoordinates.length = offset;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getCoordinates() {}\n\n  /**\n   * @inheritDoc\n   */\n  setCoordinates(coordinates, opt_layout) {}\n\n  /**\n   * Set the radius of the circle. The radius is in the units of the projection.\n   * @param {number} radius Radius.\n   * @api\n   */\n  setRadius(radius) {\n    this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n    this.changed();\n  }\n}\n\n\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {module:ol/proj~ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {module:ol/proj~ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {module:ol/geom/Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n","/**\n * @module ol/interaction/DragAndDrop\n */\n// FIXME should handle all geo-referenced data, not just vector data\n\nimport {TRUE} from '../functions.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport Interaction from '../interaction/Interaction.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<function(new: module:ol/format/Feature)>} [formatConstructors] Format constructors.\n * @property {module:ol/source/Vector} [source] Optional vector source where features will be added.  If a source is provided\n * all existing features will be removed and new features will be added when\n * they are dropped on the target.  If you want to add features to a vector\n * source without removing the existing features (append only), instead of\n * providing the source option listen for the \"addfeatures\" event.\n * @property {module:ol/proj~ProjectionLike} [projection] Target projection. By default, the map's view's projection is used.\n * @property {Element} [target] The element that is used as the drop target, default is the viewport element.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragAndDropEventType = {\n  /**\n   * Triggered when features are added\n   * @event module:ol/interaction/DragAndDrop~DragAndDropEvent#addfeatures\n   * @api\n   */\n  ADD_FEATURES: 'addfeatures'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragAndDrop~DragAndDrop} instances are instances\n * of this type.\n */\nclass DragAndDropEvent extends Event {\n\n  /**\n   * @param {module:ol/interaction/DragAndDrop~DragAndDropEventType} type Type.\n   * @param {File} file File.\n   * @param {Array<module:ol/Feature>=} opt_features Features.\n   * @param {module:ol/proj/Projection=} opt_projection Projection.\n   */\n  constructor(type, file, opt_features, opt_projection) {\n\n    super(type);\n\n    /**\n     * The features parsed from dropped data.\n     * @type {Array<module:ol/Feature>|undefined}\n     * @api\n     */\n    this.features = opt_features;\n\n    /**\n     * The dropped file.\n     * @type {File}\n     * @api\n     */\n    this.file = file;\n\n    /**\n     * The feature projection.\n     * @type {module:ol/proj/Projection|undefined}\n     * @api\n     */\n    this.projection = opt_projection;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Handles input of vector data by drag and drop.\n * @api\n *\n * @fires module:ol/interaction/DragAndDrop~DragAndDropEvent\n */\nclass DragAndDrop extends Interaction {\n  /**\n   * @param {module:ol/interaction/DragAndDrop~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      handleEvent: TRUE\n    });\n\n    /**\n     * @private\n     * @type {Array<function(new: module:ol/format/Feature)>}\n     */\n    this.formatConstructors_ = options.formatConstructors ?\n      options.formatConstructors : [];\n\n    /**\n     * @private\n     * @type {module:ol/proj/Projection}\n     */\n    this.projection_ = options.projection ?\n      getProjection(options.projection) : null;\n\n    /**\n     * @private\n     * @type {Array<module:ol/events~EventsKey>}\n     */\n    this.dropListenKeys_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/source/Vector}\n     */\n    this.source_ = options.source || null;\n\n    /**\n     * @private\n     * @type {Element}\n     */\n    this.target = options.target ? options.target : null;\n\n  }\n\n  /**\n   * @param {File} file File.\n   * @param {Event} event Load event.\n   * @private\n   */\n  handleResult_(file, event) {\n    const result = event.target.result;\n    const map = this.getMap();\n    let projection = this.projection_;\n    if (!projection) {\n      const view = map.getView();\n      projection = view.getProjection();\n    }\n\n    const formatConstructors = this.formatConstructors_;\n    let features = [];\n    for (let i = 0, ii = formatConstructors.length; i < ii; ++i) {\n      /**\n       * Avoid \"cannot instantiate abstract class\" error.\n       * @type {Function}\n       */\n      const formatConstructor = formatConstructors[i];\n      /**\n       * @type {module:ol/format/Feature}\n       */\n      const format = new formatConstructor();\n      features = this.tryReadFeatures_(format, result, {\n        featureProjection: projection\n      });\n      if (features && features.length > 0) {\n        break;\n      }\n    }\n    if (this.source_) {\n      this.source_.clear();\n      this.source_.addFeatures(features);\n    }\n    this.dispatchEvent(\n      new DragAndDropEvent(\n        DragAndDropEventType.ADD_FEATURES, file,\n        features, projection));\n  }\n\n  /**\n   * @private\n   */\n  registerListeners_() {\n    const map = this.getMap();\n    if (map) {\n      const dropArea = this.target ? this.target : map.getViewport();\n      this.dropListenKeys_ = [\n        listen(dropArea, EventType.DROP, handleDrop, this),\n        listen(dropArea, EventType.DRAGENTER, handleStop, this),\n        listen(dropArea, EventType.DRAGOVER, handleStop, this),\n        listen(dropArea, EventType.DROP, handleStop, this)\n      ];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setActive(active) {\n    super.setActive(active);\n    if (active) {\n      this.registerListeners_();\n    } else {\n      this.unregisterListeners_();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setMap(map) {\n    this.unregisterListeners_();\n    super.setMap(map);\n    if (this.getActive()) {\n      this.registerListeners_();\n    }\n  }\n\n  /**\n   * @param {module:ol/format/Feature} format Format.\n   * @param {string} text Text.\n   * @param {module:ol/format/Feature~ReadOptions} options Read options.\n   * @private\n   * @return {Array<module:ol/Feature>} Features.\n   */\n  tryReadFeatures_(format, text, options) {\n    try {\n      return format.readFeatures(text, options);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  /**\n   * @private\n   */\n  unregisterListeners_() {\n    if (this.dropListenKeys_) {\n      this.dropListenKeys_.forEach(unlistenByKey);\n      this.dropListenKeys_ = null;\n    }\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n * @this {module:ol/interaction/DragAndDrop}\n */\nfunction handleDrop(event) {\n  const files = event.dataTransfer.files;\n  for (let i = 0, ii = files.length; i < ii; ++i) {\n    const file = files.item(i);\n    const reader = new FileReader();\n    reader.addEventListener(EventType.LOAD, this.handleResult_.bind(this, file));\n    reader.readAsText(file);\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n */\nfunction handleStop(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  event.dataTransfer.dropEffect = 'copy';\n}\n\n\nexport default DragAndDrop;\n","/**\n * @module ol/AssertionError\n */\nimport {VERSION} from './util.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nclass AssertionError extends Error {\n\n  /**\n   * @param {number} code Error code.\n   */\n  constructor(code) {\n    const path = VERSION.split('-')[0];\n    const message = 'Assertion failed. See https://openlayers.org/en/' + path +\n    '/doc/errors/#' + code + ' for details.';\n\n    super(message);\n\n    /**\n     * Error code. The meaning of the code can be found on\n     * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n     * the version found in the OpenLayers script's header comment if a version\n     * other than the latest is used).\n     * @type {number}\n     * @api\n     */\n    this.code = code;\n\n    /**\n     * @type {string}\n     */\n    this.name = 'AssertionError';\n\n    // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n    this.message = message;\n  }\n\n}\n\nexport default AssertionError;\n","/**\n * @module ol/layer/Base\n */\nimport BaseObject from '../Object.js';\nimport LayerProperty from '../layer/Property.js';\nimport {clamp} from '../math.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nclass BaseLayer extends BaseObject {\n  /**\n   * @param {module:ol/layer/Base~Options} options Layer options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n    * @type {Object<string, *>}\n    */\n    const properties = assign({}, options);\n    properties[LayerProperty.OPACITY] =\n       options.opacity !== undefined ? options.opacity : 1;\n    properties[LayerProperty.VISIBLE] =\n       options.visible !== undefined ? options.visible : true;\n    properties[LayerProperty.Z_INDEX] = options.zIndex;\n    properties[LayerProperty.MAX_RESOLUTION] =\n       options.maxResolution !== undefined ? options.maxResolution : Infinity;\n    properties[LayerProperty.MIN_RESOLUTION] =\n       options.minResolution !== undefined ? options.minResolution : 0;\n\n    this.setProperties(properties);\n\n    /**\n    * @type {module:ol/layer/Layer~State}\n    * @private\n    */\n    this.state_ = /** @type {module:ol/layer/Layer~State} */ ({\n      layer: /** @type {module:ol/layer/Layer} */ (this),\n      managed: true\n    });\n\n    /**\n    * The layer type.\n    * @type {module:ol/LayerType}\n    * @protected;\n    */\n    this.type;\n\n  }\n\n  /**\n  * Get the layer type (used when creating a layer renderer).\n  * @return {module:ol/LayerType} The layer type.\n  */\n  getType() {\n    return this.type;\n  }\n\n  /**\n  * @return {module:ol/layer/Layer~State} Layer state.\n  */\n  getLayerState() {\n    this.state_.opacity = clamp(this.getOpacity(), 0, 1);\n    this.state_.sourceState = this.getSourceState();\n    this.state_.visible = this.getVisible();\n    this.state_.extent = this.getExtent();\n    this.state_.zIndex = this.getZIndex() || 0;\n    this.state_.maxResolution = this.getMaxResolution();\n    this.state_.minResolution = Math.max(this.getMinResolution(), 0);\n\n    return this.state_;\n  }\n\n  /**\n  * @abstract\n  * @param {Array<module:ol/layer/Layer>=} opt_array Array of layers (to be\n  *     modified in place).\n  * @return {Array<module:ol/layer/Layer>} Array of layers.\n  */\n  getLayersArray(opt_array) {}\n\n  /**\n  * @abstract\n  * @param {Array<module:ol/layer/Layer~State>=} opt_states Optional list of layer\n  *     states (to be modified in place).\n  * @return {Array<module:ol/layer/Layer~State>} List of layer states.\n  */\n  getLayerStatesArray(opt_states) {}\n\n  /**\n  * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n  * will be visible regardless of extent.\n  * @return {module:ol/extent~Extent|undefined} The layer extent.\n  * @observable\n  * @api\n  */\n  getExtent() {\n    return (\n    /** @type {module:ol/extent~Extent|undefined} */ (this.get(LayerProperty.EXTENT))\n    );\n  }\n\n  /**\n  * Return the maximum resolution of the layer.\n  * @return {number} The maximum resolution of the layer.\n  * @observable\n  * @api\n  */\n  getMaxResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n  }\n\n  /**\n  * Return the minimum resolution of the layer.\n  * @return {number} The minimum resolution of the layer.\n  * @observable\n  * @api\n  */\n  getMinResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n  }\n\n  /**\n  * Return the opacity of the layer (between 0 and 1).\n  * @return {number} The opacity of the layer.\n  * @observable\n  * @api\n  */\n  getOpacity() {\n    return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n  }\n\n  /**\n  * @abstract\n  * @return {module:ol/source/State} Source state.\n  */\n  getSourceState() {}\n\n  /**\n  * Return the visibility of the layer (`true` or `false`).\n  * @return {boolean} The visibility of the layer.\n  * @observable\n  * @api\n  */\n  getVisible() {\n    return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n  }\n\n  /**\n  * Return the Z-index of the layer, which is used to order layers before\n  * rendering. The default Z-index is 0.\n  * @return {number} The Z-index of the layer.\n  * @observable\n  * @api\n  */\n  getZIndex() {\n    return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n  }\n\n  /**\n  * Set the extent at which the layer is visible.  If `undefined`, the layer\n  * will be visible at all extents.\n  * @param {module:ol/extent~Extent|undefined} extent The extent of the layer.\n  * @observable\n  * @api\n  */\n  setExtent(extent) {\n    this.set(LayerProperty.EXTENT, extent);\n  }\n\n  /**\n  * Set the maximum resolution at which the layer is visible.\n  * @param {number} maxResolution The maximum resolution of the layer.\n  * @observable\n  * @api\n  */\n  setMaxResolution(maxResolution) {\n    this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n  }\n\n  /**\n  * Set the minimum resolution at which the layer is visible.\n  * @param {number} minResolution The minimum resolution of the layer.\n  * @observable\n  * @api\n  */\n  setMinResolution(minResolution) {\n    this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n  }\n\n  /**\n  * Set the opacity of the layer, allowed values range from 0 to 1.\n  * @param {number} opacity The opacity of the layer.\n  * @observable\n  * @api\n  */\n  setOpacity(opacity) {\n    this.set(LayerProperty.OPACITY, opacity);\n  }\n\n  /**\n  * Set the visibility of the layer (`true` or `false`).\n  * @param {boolean} visible The visibility of the layer.\n  * @observable\n  * @api\n  */\n  setVisible(visible) {\n    this.set(LayerProperty.VISIBLE, visible);\n  }\n\n  /**\n  * Set Z-index of the layer, which is used to order layers before rendering.\n  * The default Z-index is 0.\n  * @param {number} zindex The z-index of the layer.\n  * @observable\n  * @api\n  */\n  setZIndex(zindex) {\n    this.set(LayerProperty.Z_INDEX, zindex);\n  }\n}\n\n\nexport default BaseLayer;\n","/**\n * @module ol/reproj/Triangulation\n */\nimport {boundingExtent, createEmpty, extendCoordinate, getBottomLeft, getBottomRight,\n  getTopLeft, getTopRight, getWidth, intersects} from '../extent.js';\nimport {modulo} from '../math.js';\nimport {getTransform} from '../proj.js';\n\n\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array<module:ol/coordinate~Coordinate>} source\n * @property {Array<module:ol/coordinate~Coordinate>} target\n */\n\n\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nconst MAX_SUBDIVISION = 10;\n\n\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nconst MAX_TRIANGLE_WIDTH = 0.25;\n\n\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n */\nclass Triangulation {\n\n  /**\n   * @param {module:ol/proj/Projection} sourceProj Source projection.\n   * @param {module:ol/proj/Projection} targetProj Target projection.\n   * @param {module:ol/extent~Extent} targetExtent Target extent to triangulate.\n   * @param {module:ol/extent~Extent} maxSourceExtent Maximal source extent that can be used.\n   * @param {number} errorThreshold Acceptable error (in source units).\n   */\n  constructor(sourceProj, targetProj, targetExtent, maxSourceExtent, errorThreshold) {\n\n    /**\n     * @type {module:ol/proj/Projection}\n     * @private\n     */\n    this.sourceProj_ = sourceProj;\n\n    /**\n     * @type {module:ol/proj/Projection}\n     * @private\n     */\n    this.targetProj_ = targetProj;\n\n    /** @type {!Object<string, module:ol/coordinate~Coordinate>} */\n    let transformInvCache = {};\n    const transformInv = getTransform(this.targetProj_, this.sourceProj_);\n\n    /**\n     * @param {module:ol/coordinate~Coordinate} c A coordinate.\n     * @return {module:ol/coordinate~Coordinate} Transformed coordinate.\n     * @private\n     */\n    this.transformInv_ = function(c) {\n      const key = c[0] + '/' + c[1];\n      if (!transformInvCache[key]) {\n        transformInvCache[key] = transformInv(c);\n      }\n      return transformInvCache[key];\n    };\n\n    /**\n     * @type {module:ol/extent~Extent}\n     * @private\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n\n    /**\n     * @type {Array<module:ol/reproj/Triangulation~Triangle>}\n     * @private\n     */\n    this.triangles_ = [];\n\n    /**\n     * Indicates that the triangulation crosses edge of the source projection.\n     * @type {boolean}\n     * @private\n     */\n    this.wrapsXInSource_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.canWrapXInSource_ = this.sourceProj_.canWrapX() &&\n        !!maxSourceExtent &&\n        !!this.sourceProj_.getExtent() &&\n        (getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent()));\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.sourceWorldWidth_ = this.sourceProj_.getExtent() ?\n      getWidth(this.sourceProj_.getExtent()) : null;\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.targetWorldWidth_ = this.targetProj_.getExtent() ?\n      getWidth(this.targetProj_.getExtent()) : null;\n\n    const destinationTopLeft = getTopLeft(targetExtent);\n    const destinationTopRight = getTopRight(targetExtent);\n    const destinationBottomRight = getBottomRight(targetExtent);\n    const destinationBottomLeft = getBottomLeft(targetExtent);\n    const sourceTopLeft = this.transformInv_(destinationTopLeft);\n    const sourceTopRight = this.transformInv_(destinationTopRight);\n    const sourceBottomRight = this.transformInv_(destinationBottomRight);\n    const sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n\n    this.addQuad_(\n      destinationTopLeft, destinationTopRight,\n      destinationBottomRight, destinationBottomLeft,\n      sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft,\n      MAX_SUBDIVISION);\n\n    if (this.wrapsXInSource_) {\n      let leftBound = Infinity;\n      this.triangles_.forEach(function(triangle, i, arr) {\n        leftBound = Math.min(leftBound,\n          triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n      });\n\n      // Shift triangles to be as close to `leftBound` as possible\n      // (if the distance is more than `worldWidth / 2` it can be closer.\n      this.triangles_.forEach(function(triangle) {\n        if (Math.max(triangle.source[0][0], triangle.source[1][0],\n          triangle.source[2][0]) - leftBound > this.sourceWorldWidth_ / 2) {\n          const newTriangle = [[triangle.source[0][0], triangle.source[0][1]],\n            [triangle.source[1][0], triangle.source[1][1]],\n            [triangle.source[2][0], triangle.source[2][1]]];\n          if ((newTriangle[0][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[0][0] -= this.sourceWorldWidth_;\n          }\n          if ((newTriangle[1][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[1][0] -= this.sourceWorldWidth_;\n          }\n          if ((newTriangle[2][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[2][0] -= this.sourceWorldWidth_;\n          }\n\n          // Rarely (if the extent contains both the dateline and prime meridian)\n          // the shift can in turn break some triangles.\n          // Detect this here and don't shift in such cases.\n          const minX = Math.min(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n          const maxX = Math.max(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n          if ((maxX - minX) < this.sourceWorldWidth_ / 2) {\n            triangle.source = newTriangle;\n          }\n        }\n      }.bind(this));\n    }\n\n    transformInvCache = {};\n  }\n\n  /**\n   * Adds triangle to the triangulation.\n   * @param {module:ol/coordinate~Coordinate} a The target a coordinate.\n   * @param {module:ol/coordinate~Coordinate} b The target b coordinate.\n   * @param {module:ol/coordinate~Coordinate} c The target c coordinate.\n   * @param {module:ol/coordinate~Coordinate} aSrc The source a coordinate.\n   * @param {module:ol/coordinate~Coordinate} bSrc The source b coordinate.\n   * @param {module:ol/coordinate~Coordinate} cSrc The source c coordinate.\n   * @private\n   */\n  addTriangle_(a, b, c, aSrc, bSrc, cSrc) {\n    this.triangles_.push({\n      source: [aSrc, bSrc, cSrc],\n      target: [a, b, c]\n    });\n  }\n\n  /**\n   * Adds quad (points in clock-wise order) to the triangulation\n   * (and reprojects the vertices) if valid.\n   * Performs quad subdivision if needed to increase precision.\n   *\n   * @param {module:ol/coordinate~Coordinate} a The target a coordinate.\n   * @param {module:ol/coordinate~Coordinate} b The target b coordinate.\n   * @param {module:ol/coordinate~Coordinate} c The target c coordinate.\n   * @param {module:ol/coordinate~Coordinate} d The target d coordinate.\n   * @param {module:ol/coordinate~Coordinate} aSrc The source a coordinate.\n   * @param {module:ol/coordinate~Coordinate} bSrc The source b coordinate.\n   * @param {module:ol/coordinate~Coordinate} cSrc The source c coordinate.\n   * @param {module:ol/coordinate~Coordinate} dSrc The source d coordinate.\n   * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n   * @private\n   */\n  addQuad_(a, b, c, d, aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n\n    const sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n    const sourceCoverageX = this.sourceWorldWidth_ ?\n      getWidth(sourceQuadExtent) / this.sourceWorldWidth_ : null;\n    const sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n\n    // when the quad is wrapped in the source projection\n    // it covers most of the projection extent, but not fully\n    const wrapsX = this.sourceProj_.canWrapX() &&\n                 sourceCoverageX > 0.5 && sourceCoverageX < 1;\n\n    let needsSubdivision = false;\n\n    if (maxSubdivision > 0) {\n      if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n        const targetQuadExtent = boundingExtent([a, b, c, d]);\n        const targetCoverageX = getWidth(targetQuadExtent) / this.targetWorldWidth_;\n        needsSubdivision |=\n            targetCoverageX > MAX_TRIANGLE_WIDTH;\n      }\n      if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n        needsSubdivision |=\n            sourceCoverageX > MAX_TRIANGLE_WIDTH;\n      }\n    }\n\n    if (!needsSubdivision && this.maxSourceExtent_) {\n      if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n        // whole quad outside source projection extent -> ignore\n        return;\n      }\n    }\n\n    if (!needsSubdivision) {\n      if (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ||\n          !isFinite(bSrc[0]) || !isFinite(bSrc[1]) ||\n          !isFinite(cSrc[0]) || !isFinite(cSrc[1]) ||\n          !isFinite(dSrc[0]) || !isFinite(dSrc[1])) {\n        if (maxSubdivision > 0) {\n          needsSubdivision = true;\n        } else {\n          return;\n        }\n      }\n    }\n\n    if (maxSubdivision > 0) {\n      if (!needsSubdivision) {\n        const center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n        const centerSrc = this.transformInv_(center);\n\n        let dx;\n        if (wrapsX) {\n          const centerSrcEstimX =\n              (modulo(aSrc[0], sourceWorldWidth) +\n               modulo(cSrc[0], sourceWorldWidth)) / 2;\n          dx = centerSrcEstimX -\n              modulo(centerSrc[0], sourceWorldWidth);\n        } else {\n          dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n        }\n        const dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n        const centerSrcErrorSquared = dx * dx + dy * dy;\n        needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n      }\n      if (needsSubdivision) {\n        if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n          // split horizontally (top & bottom)\n          const bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n          const bcSrc = this.transformInv_(bc);\n          const da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n          const daSrc = this.transformInv_(da);\n\n          this.addQuad_(\n            a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n          this.addQuad_(\n            da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n        } else {\n          // split vertically (left & right)\n          const ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n          const abSrc = this.transformInv_(ab);\n          const cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n          const cdSrc = this.transformInv_(cd);\n\n          this.addQuad_(\n            a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n          this.addQuad_(\n            ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n        }\n        return;\n      }\n    }\n\n    if (wrapsX) {\n      if (!this.canWrapXInSource_) {\n        return;\n      }\n      this.wrapsXInSource_ = true;\n    }\n\n    this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n    this.addTriangle_(a, b, c, aSrc, bSrc, cSrc);\n  }\n\n  /**\n   * Calculates extent of the 'source' coordinates from all the triangles.\n   *\n   * @return {module:ol/extent~Extent} Calculated extent.\n   */\n  calculateSourceExtent() {\n    const extent = createEmpty();\n\n    this.triangles_.forEach(function(triangle, i, arr) {\n      const src = triangle.source;\n      extendCoordinate(extent, src[0]);\n      extendCoordinate(extent, src[1]);\n      extendCoordinate(extent, src[2]);\n    });\n\n    return extent;\n  }\n\n  /**\n   * @return {Array<module:ol/reproj/Triangulation~Triangle>} Array of the calculated triangles.\n   */\n  getTriangles() {\n    return this.triangles_;\n  }\n}\n\nexport default Triangulation;\n","/**\n * @module ol/Image\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(module:ol/Image, string)} LoadFunction\n * @api\n */\n\n\nclass ImageWrapper extends ImageBase {\n\n  /**\n   * @param {module:ol/extent~Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {module:ol/Image~LoadFunction} imageLoadFunction Image load function.\n   */\n  constructor(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n    super(extent, resolution, pixelRatio, ImageState.IDLE);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {Array<module:ol/events~EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @protected\n     * @type {module:ol/ImageState}\n     */\n    this.state = ImageState.IDLE;\n\n    /**\n     * @private\n     * @type {module:ol/Image~LoadFunction}\n     */\n    this.imageLoadFunction_ = imageLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = ImageState.ERROR;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    if (this.resolution === undefined) {\n      this.resolution = getHeight(this.extent) / this.image_.height;\n    }\n    this.state = ImageState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load() {\n    if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      this.imageLoadFunction_(this, this.src_);\n    }\n  }\n\n  /**\n   * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\nexport default ImageWrapper;\n","/**\n * @module ol/uri\n */\n\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach(function(k) {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(k + '=' + encodeURIComponent(params[k]));\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri = uri.indexOf('?') === -1 ? uri + '?' : uri + '&';\n  return uri + qs;\n}\n","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\n\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport {toSize, buffer as bufferSize, scale as scaleSize} from '../size.js';\nimport TileImage from '../source/TileImage.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport {hash as tileCoordHash} from '../tilecoord.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {number} [gutter=0]\n * The size in pixels of the gutter around image tiles to ignore. By setting\n * this property to a non-zero value, images will be requested that are wider\n * and taller than the tile size by a value of `2 x gutter`.\n * Using a non-zero value allows artifacts of rendering at tile edges to be\n * ignored. If you control the WMS service it is recommended to address\n * \"artifacts at tile edges\" issues by properly configuring the WMS service. For\n * example, MapServer has a `tile_map_edge_buffer` configuration parameter for\n * this. See http://mapserver.org/output/tile_mode.html.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/ImageTile~TileClass} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~TileClass}.\n * @property {module:ol/tilegrid/TileGrid} [tileGrid] Tile grid. Base this on the resolutions,\n * tilesize and extent supported by the server.\n * If this is not defined, a default grid will be used: if there is a projection\n * extent, the grid will be based on that; if not, a grid based on a global\n * extent with origin at 0,0 will be used..\n * @property {module:ol/source/WMSServerType|string} [serverType]\n * The type of the remote WMS server. Currently only used when `hidpi` is\n * `true`.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] WMS service URL.\n * @property {Array<string>} [urls] WMS service urls.\n * Use this instead of `url` when the WMS supports multiple urls for GetMap requests.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When `true`, tiles will be requested for one world only,\n * but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n * @api\n */\nclass TileWMS extends TileImage {\n  /**\n   * @param {module:ol/source/TileWMS~Options=} [opt_options] Tile WMS options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    const params = options.params || {};\n\n    const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      opaque: !transparent,\n      projection: options.projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileClass: options.tileClass,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = params;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n\n    /**\n     * @private\n     * @type {module:ol/source/WMSServerType|undefined}\n     */\n    this.serverType_ = /** @type {module:ol/source/WMSServerType|undefined} */ (options.serverType);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.tmpExtent_ = createEmpty();\n\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {module:ol/proj~ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getGetFeatureInfoUrl(coordinate, resolution, projection, params) {\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    let tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n      tileGrid = this.getTileGridForProjection(projectionObj);\n    }\n\n    const tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n      return undefined;\n    }\n\n    let tileResolution = tileGrid.getResolution(tileCoord[0]);\n    let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n    let tileSize = toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n    const gutter = this.gutter_;\n    if (gutter !== 0) {\n      tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n      tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n    }\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      tileResolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n      tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS']\n    };\n    assign(baseParams, this.params_, params);\n\n    const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n    const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n      1, sourceProjectionObj || projectionObj, baseParams);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getGutter() {\n    return this.gutter_;\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n   * @param {module:ol/size~Size} tileSize Tile size.\n   * @param {module:ol/extent~Extent} tileExtent Tile extent.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {module:ol/proj/Projection} projection Projection.\n   * @param {Object} params Params.\n   * @return {string|undefined} Request URL.\n   * @private\n   */\n  getRequestUrl_(tileCoord, tileSize, tileExtent, pixelRatio, projection, params) {\n\n    const urls = this.urls;\n    if (!urls) {\n      return undefined;\n    }\n\n    params['WIDTH'] = tileSize[0];\n    params['HEIGHT'] = tileSize[1];\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case WMSServerType.GEOSERVER:\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case WMSServerType.MAPSERVER:\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case WMSServerType.CARMENTA_SERVER:\n        case WMSServerType.QGIS:\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default:\n          assert(false, 52); // Unknown `serverType` configured\n          break;\n      }\n    }\n\n    const axisOrientation = projection.getAxisOrientation();\n    const bbox = tileExtent;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      let tmp;\n      tmp = tileExtent[0];\n      bbox[0] = tileExtent[1];\n      bbox[1] = tmp;\n      tmp = tileExtent[2];\n      bbox[2] = tileExtent[3];\n      bbox[3] = tmp;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    let url;\n    if (urls.length == 1) {\n      url = urls[0];\n    } else {\n      const index = modulo(tileCoordHash(tileCoord), urls.length);\n      url = urls[index];\n    }\n    return appendParams(url, params);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTilePixelRatio(pixelRatio) {\n    return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n    /** @type {number} */ (pixelRatio);\n  }\n\n  /**\n   * @private\n   * @return {string} The key for the current params.\n   */\n  getKeyForParams_() {\n    let i = 0;\n    const res = [];\n    for (const key in this.params_) {\n      res[i++] = key + '-' + this.params_[key];\n    }\n    return res.join('/');\n  }\n\n  /**\n   * @inheritDoc\n   */\n  fixedTileUrlFunction(tileCoord, pixelRatio, projection) {\n\n    let tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n      tileGrid = this.getTileGridForProjection(projection);\n    }\n\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n      return undefined;\n    }\n\n    if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n      pixelRatio = 1;\n    }\n\n    const tileResolution = tileGrid.getResolution(tileCoord[0]);\n    let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n    let tileSize = toSize(\n      tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n    const gutter = this.gutter_;\n    if (gutter !== 0) {\n      tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n      tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n    }\n\n    if (pixelRatio != 1) {\n      tileSize = scaleSize(tileSize, pixelRatio, this.tmpSize);\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetMap',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true\n    };\n    assign(baseParams, this.params_);\n\n    return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n      pixelRatio, projection, baseParams);\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    assign(this.params_, params);\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\n\nexport default TileWMS;\n","/**\n * @module ol/structs/LRUCache\n */\n\nimport {assert} from '../asserts.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Entry\n * @property {string} key_\n * @property {Object} newer\n * @property {Object} older\n * @property {*} value_\n */\n\n\n/**\n * @classdesc\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n *\n * @fires module:ol/events/Event~Event\n * @template T\n */\nclass LRUCache extends EventTarget {\n\n  /**\n   * @param {number=} opt_highWaterMark High water mark.\n   */\n  constructor(opt_highWaterMark) {\n\n    super();\n\n    /**\n     * @type {number}\n     */\n    this.highWaterMark = opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.count_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string, module:ol/structs/LRUCache~Entry>}\n     */\n    this.entries_ = {};\n\n    /**\n     * @private\n     * @type {?module:ol/structs/LRUCache~Entry}\n     */\n    this.oldest_ = null;\n\n    /**\n     * @private\n     * @type {?module:ol/structs/LRUCache~Entry}\n     */\n    this.newest_ = null;\n\n  }\n\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.getCount() > this.highWaterMark;\n  }\n\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.count_ = 0;\n    this.entries_ = {};\n    this.oldest_ = null;\n    this.newest_ = null;\n    this.dispatchEvent(EventType.CLEAR);\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Contains key.\n   */\n  containsKey(key) {\n    return this.entries_.hasOwnProperty(key);\n  }\n\n\n  /**\n   * @param {function(this: S, T, string, module:ol/structs/LRUCache): ?} f The function\n   *     to call for every entry from the oldest to the newer. This function takes\n   *     3 arguments (the entry value, the entry key and the LRUCache object).\n   *     The return value is ignored.\n   * @param {S=} opt_this The object to use as `this` in `f`.\n   * @template S\n   */\n  forEach(f, opt_this) {\n    let entry = this.oldest_;\n    while (entry) {\n      f.call(opt_this, entry.value_, entry.key_, this);\n      entry = entry.newer;\n    }\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {T} Value.\n   */\n  get(key) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined,\n      15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      return entry.value_;\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {module:ol/structs/LRUCache~Entry} */ (this.oldest_.newer);\n      this.oldest_.older = null;\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    entry.newer = null;\n    entry.older = this.newest_;\n    this.newest_.newer = entry;\n    this.newest_ = entry;\n    return entry.value_;\n  }\n\n\n  /**\n   * Remove an entry from the cache.\n   * @param {string} key The entry key.\n   * @return {T} The removed entry.\n   */\n  remove(key) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      this.newest_ = /** @type {module:ol/structs/LRUCache~Entry} */ (entry.older);\n      if (this.newest_) {\n        this.newest_.newer = null;\n      }\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {module:ol/structs/LRUCache~Entry} */ (entry.newer);\n      if (this.oldest_) {\n        this.oldest_.older = null;\n      }\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    delete this.entries_[key];\n    --this.count_;\n    return entry.value_;\n  }\n\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.count_;\n  }\n\n\n  /**\n   * @return {Array<string>} Keys.\n   */\n  getKeys() {\n    const keys = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      keys[i++] = entry.key_;\n    }\n    return keys;\n  }\n\n\n  /**\n   * @return {Array<T>} Values.\n   */\n  getValues() {\n    const values = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      values[i++] = entry.value_;\n    }\n    return values;\n  }\n\n\n  /**\n   * @return {T} Last value.\n   */\n  peekLast() {\n    return this.oldest_.value_;\n  }\n\n\n  /**\n   * @return {string} Last key.\n   */\n  peekLastKey() {\n    return this.oldest_.key_;\n  }\n\n\n  /**\n   * Get the key of the newest item in the cache.  Throws if the cache is empty.\n   * @return {string} The newest key.\n   */\n  peekFirstKey() {\n    return this.newest_.key_;\n  }\n\n\n  /**\n   * @return {T} value Value.\n   */\n  pop() {\n    const entry = this.oldest_;\n    delete this.entries_[entry.key_];\n    if (entry.newer) {\n      entry.newer.older = null;\n    }\n    this.oldest_ = /** @type {module:ol/structs/LRUCache~Entry} */ (entry.newer);\n    if (!this.oldest_) {\n      this.newest_ = null;\n    }\n    --this.count_;\n    return entry.value_;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  replace(key, value) {\n    this.get(key); // update `newest_`\n    this.entries_[key].value_ = value;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  set(key, value) {\n    assert(!(key in this.entries_),\n      16); // Tried to set a value for a key that is used already\n    const entry = /** @type {module:ol/structs/LRUCache~Entry} */ ({\n      key_: key,\n      newer: null,\n      older: this.newest_,\n      value_: value\n    });\n    if (!this.newest_) {\n      this.oldest_ = entry;\n    } else {\n      this.newest_.newer = entry;\n    }\n    this.newest_ = entry;\n    this.entries_[key] = entry;\n    ++this.count_;\n  }\n\n\n  /**\n   * Set a maximum number of entries for the cache.\n   * @param {number} size Cache size.\n   * @api\n   */\n  setSize(size) {\n    this.highWaterMark = size;\n  }\n\n\n  /**\n   * Prune the cache.\n   */\n  prune() {\n    while (this.canExpireCache()) {\n      this.pop();\n    }\n  }\n\n}\n\nexport default LRUCache;\n","/**\n * @module ol/source/ImageStatic\n */\n\nimport ImageWrapper from '../Image.js';\nimport ImageState from '../ImageState.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {intersects, getHeight, getWidth} from '../extent.js';\nimport {get as getProjection} from '../proj.js';\nimport ImageSource, {defaultImageLoadFunction} from '../source/Image.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {module:ol/extent~Extent} [imageExtent] Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image.\n * @property {module:ol/Image~LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {module:ol/size~Size} [imageSize] Size of the image in pixels. Usually the image size is auto-detected, so this\n * only needs to be set if auto-detection fails for some reason.\n * @property {string} url Image URL.\n */\n\n\n/**\n * @classdesc\n * A layer source for displaying a single, static image.\n * @api\n */\nclass Static extends ImageSource {\n  /**\n   * @param {module:ol/source/ImageStatic~Options=} options ImageStatic options.\n   */\n  constructor(options) {\n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : null;\n\n    const /** @type {module:ol/Image~LoadFunction} */ imageLoadFunction =\n        options.imageLoadFunction !== undefined ?\n          options.imageLoadFunction : defaultImageLoadFunction;\n\n    super({\n      attributions: options.attributions,\n      projection: getProjection(options.projection)\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {module:ol/extent~Extent}\n     */\n    this.imageExtent_ = options.imageExtent;\n\n    /**\n     * @private\n     * @type {module:ol/Image}\n     */\n    this.image_ = new ImageWrapper(this.imageExtent_, undefined, 1, this.url_, crossOrigin, imageLoadFunction);\n\n    /**\n     * @private\n     * @type {module:ol/size~Size}\n     */\n    this.imageSize_ = options.imageSize ? options.imageSize : null;\n\n    listen(this.image_, EventType.CHANGE,\n      this.handleImageChange, this);\n\n  }\n\n  /**\n   * Returns the image extent\n   * @return {module:ol/extent~Extent} image extent.\n   * @api\n   */\n  getImageExtent() {\n    return this.imageExtent_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    if (intersects(extent, this.image_.getExtent())) {\n      return this.image_;\n    }\n    return null;\n  }\n\n  /**\n   * Return the URL used for this image source.\n   * @return {string} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleImageChange(evt) {\n    if (this.image_.getState() == ImageState.LOADED) {\n      const imageExtent = this.image_.getExtent();\n      const image = this.image_.getImage();\n      let imageWidth, imageHeight;\n      if (this.imageSize_) {\n        imageWidth = this.imageSize_[0];\n        imageHeight = this.imageSize_[1];\n      } else {\n        imageWidth = image.width;\n        imageHeight = image.height;\n      }\n      const resolution = getHeight(imageExtent) / imageHeight;\n      const targetWidth = Math.ceil(getWidth(imageExtent) / resolution);\n      if (targetWidth != imageWidth) {\n        const context = createCanvasContext2D(targetWidth, imageHeight);\n        const canvas = context.canvas;\n        context.drawImage(image, 0, 0, imageWidth, imageHeight,\n          0, 0, canvas.width, canvas.height);\n        this.image_.setImage(canvas);\n      }\n    }\n    super.handleImageChange(evt);\n  }\n}\n\n\nexport default Static;\n","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {linearRingsContainsXY} from '../flat/contains.js';\n\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(flatCoordinates, offset,\n  ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2;\n  const y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array<number>} */\n  const intersections = [];\n  // Calculate intersections with the horizontal line\n  for (let r = 0, rr = ends.length; r < rr; ++r) {\n    const end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN;\n  let maxSegmentLength = -Infinity;\n  intersections.sort(numberSafeCompareFunction);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    const segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (opt_dest) {\n    opt_dest.push(pointX, y, maxSegmentLength);\n    return opt_dest;\n  } else {\n    return [pointX, y, maxSegmentLength];\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = [];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    interiorPoints = getInteriorPointOfArray(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n}\n","/**\n * @module ol/geom/flat/segments\n */\n\n\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(this: S, module:ol/coordinate~Coordinate, module:ol/coordinate~Coordinate): T} callback Function\n *     called for each segment.\n * @param {S=} opt_this The object to be used as the value of 'this'\n *     within callback.\n * @return {T|boolean} Value.\n * @template T,S\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback, opt_this) {\n  const point1 = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n  const point2 = [];\n  let ret;\n  for (; (offset + stride) < end; offset += stride) {\n    point2[0] = flatCoordinates[offset + stride];\n    point2[1] = flatCoordinates[offset + stride + 1];\n    ret = callback.call(opt_this, point1, point2);\n    if (ret) {\n      return ret;\n    }\n    point1[0] = point2[0];\n    point1[1] = point2[1];\n  }\n  return false;\n}\n","/**\n * @module ol/style/Image\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n */\n\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @api\n */\nclass ImageStyle {\n  /**\n   * @param {module:ol/style/Image~Options} options Options.\n   */\n  constructor(options) {\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.scale_ = options.scale;\n\n  }\n\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n  getOpacity() {\n    return this.opacity_;\n  }\n\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the symbolizer scale.\n   * @return {number} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * This method is deprecated and always returns false.\n   * @return {boolean} false.\n   * @deprecated\n   * @api\n   */\n  getSnapToPixel() {\n    return false;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n  getAnchor() {}\n\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getImage(pixelRatio) {}\n\n  /**\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getHitDetectionImage(pixelRatio) {}\n\n  /**\n   * @abstract\n   * @return {module:ol/ImageState} Image state.\n   */\n  getImageState() {}\n\n  /**\n   * @abstract\n   * @return {module:ol/size~Size} Image size.\n   */\n  getImageSize() {}\n\n  /**\n   * @abstract\n   * @return {module:ol/size~Size} Size of the hit-detection image.\n   */\n  getHitDetectionImageSize() {}\n\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n  getOrigin() {}\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {module:ol/size~Size} Size.\n   */\n  getSize() {}\n\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n  setOpacity(opacity) {\n    this.opacity_ = opacity;\n  }\n\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n  /**\n   * Set the scale.\n   *\n   * @param {number} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n  }\n\n  /**\n   * This method is deprecated and does nothing.\n   * @param {boolean} snapToPixel Snap to pixel?\n   * @deprecated\n   * @api\n   */\n  setSnapToPixel(snapToPixel) {}\n\n  /**\n   * @abstract\n   * @param {function(this: T, module:ol/events/Event)} listener Listener function.\n   * @param {T} thisArg Value to use as `this` when executing `listener`.\n   * @return {module:ol/events~EventsKey|undefined} Listener key.\n   * @template T\n   */\n  listenImageChange(listener, thisArg) {}\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {}\n\n  /**\n   * @abstract\n   * @param {function(this: T, module:ol/events/Event)} listener Listener function.\n   * @param {T} thisArg Value to use as `this` when executing `listener`.\n   * @template T\n   */\n  unlistenImageChange(listener, thisArg) {}\n}\n\nexport default ImageStyle;\n","/**\n * @module ol/layer/VectorRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  VECTOR: 'vector'\n};\n","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n */\nclass MapBrowserEvent extends MapEvent {\n\n  /**\n   * @param {string} type Event type.\n   * @param {module:ol/PluggableMap} map Map.\n   * @param {Event} browserEvent Browser event.\n   * @param {boolean=} opt_dragging Is the map currently being dragged?\n   * @param {?module:ol/PluggableMap~FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, browserEvent, opt_dragging, opt_frameState) {\n\n    super(type, map, opt_frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {Event}\n     * @api\n     */\n    this.originalEvent = browserEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {module:ol/pixel~Pixel}\n     * @api\n     */\n    this.pixel = map.getEventPixel(browserEvent);\n\n    /**\n     * The coordinate in view projection corresponding to the original browser event.\n     * @type {module:ol/coordinate~Coordinate}\n     * @api\n     */\n    this.coordinate = map.getCoordinateFromPixel(this.pixel);\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n\n  }\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @override\n   * @api\n   */\n  preventDefault() {\n    super.preventDefault();\n    this.originalEvent.preventDefault();\n  }\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @override\n   * @api\n   */\n  stopPropagation() {\n    super.stopPropagation();\n    this.originalEvent.stopPropagation();\n  }\n}\n\n\nexport default MapBrowserEvent;\n","/**\n * @module ol/geom/flat/length\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  let length = 0;\n  for (let i = offset + stride; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n  return length;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n  let perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n  const dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  const dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n}\n","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};\n","/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src = url + (url.indexOf('?') == -1 ? '?' : '&') +\n      (opt_callbackParam || 'callback') + '=' + key;\n  const timer = setTimeout(function() {\n    cleanup();\n    if (opt_errback) {\n      opt_errback();\n    }\n  }, 10000);\n  window[key] = function(data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\n","/**\n * @module ol/source/XYZ\n */\n\nimport TileImage from '../source/TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {module:ol/proj~ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=18] Optional max zoom level.\n * @property {number} [minZoom=0] Optional min zoom level.\n * @property {module:ol/tilegrid/TileGrid} [tileGrid] Tile grid.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|module:ol/size~Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * @property {module:ol/Tile~UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if url or urls are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link module:ol/source/TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n * @api\n */\nclass XYZ extends TileImage {\n  /**\n   * @param {module:ol/source/XYZ~Options=} opt_options XYZ options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n    const projection = options.projection !== undefined ?\n      options.projection : 'EPSG:3857';\n\n    const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n      createXYZ({\n        extent: extentFromProjection(projection),\n        maxZoom: options.maxZoom,\n        minZoom: options.minZoom,\n        tileSize: options.tileSize\n      });\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      opaque: options.opaque,\n      projection: projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileGrid: tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n  }\n\n}\n\nexport default XYZ;\n","/**\n * @module ol/format/JSONFeature\n */\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @abstract\n */\nclass JSONFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.JSON;\n  }\n\n  /**\n   * Read a feature.  Only works for a single feature. Use `readFeatures` to\n   * read a feature collection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {module:ol/Feature} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    return this.readFeatureFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * Read all features.  Works with both a single feature and a feature\n   * collection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {Array<module:ol/Feature>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    return this.readFeaturesFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {module:ol/Feature} Feature.\n   */\n  readFeatureFromObject(object, opt_options) {}\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {Array<module:ol/Feature>} Features.\n   */\n  readFeaturesFromObject(object, opt_options) {}\n\n  /**\n   * Read a geometry.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {module:ol/geom/Geometry} Geometry.\n   * @api\n   */\n  readGeometry(source, opt_options) {\n    return this.readGeometryFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {module:ol/geom/Geometry} Geometry.\n   */\n  readGeometryFromObject(object, opt_options) {}\n\n  /**\n   * Read the projection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @return {module:ol/proj/Projection} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromObject(getObject(source));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @protected\n   * @return {module:ol/proj/Projection} Projection.\n   */\n  readProjectionFromObject(object) {}\n\n  /**\n   * Encode a feature as string.\n   *\n   * @param {module:ol/Feature} feature Feature.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, opt_options) {\n    return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {module:ol/Feature} feature Feature.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeFeatureObject(feature, opt_options) {}\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeFeaturesObject(features, opt_options) {}\n\n  /**\n   * Encode a geometry as string.\n   *\n   * @param {module:ol/geom/Geometry} geometry Geometry.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Encoded geometry.\n   * @api\n   */\n  writeGeometry(geometry, opt_options) {\n    return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {module:ol/geom/Geometry} geometry Geometry.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeGeometryObject(geometry, opt_options) {}\n}\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {Object} Object.\n */\nfunction getObject(source) {\n  if (typeof source === 'string') {\n    const object = JSON.parse(source);\n    return object ? /** @type {Object} */ (object) : null;\n  } else if (source !== null) {\n    return source;\n  } else {\n    return null;\n  }\n}\n\n\nexport default JSONFeature;\n","/**\n * @module ol/format/XMLFeature\n */\nimport {extend} from '../array.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\nimport {isDocument, isNode, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for XML feature formats.\n *\n * @abstract\n */\nclass XMLFeature extends FeatureFormat {\n  constructor() {\n    super();\n\n    /**\n     * @type {XMLSerializer}\n     * @private\n     */\n    this.xmlSerializer_ = new XMLSerializer();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.XML;\n  }\n\n  /**\n   * Read a single feature.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {module:ol/Feature} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    if (isDocument(source)) {\n      return this.readFeatureFromDocument(/** @type {Document} */ (source), opt_options);\n    } else if (isNode(source)) {\n      return this.readFeatureFromNode(/** @type {Node} */ (source), opt_options);\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeatureFromDocument(doc, opt_options);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n   * @return {module:ol/Feature} Feature.\n   */\n  readFeatureFromDocument(doc, opt_options) {\n    const features = this.readFeaturesFromDocument(doc, opt_options);\n    if (features.length > 0) {\n      return features[0];\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n   * @return {module:ol/Feature} Feature.\n   */\n  readFeatureFromNode(node, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Read all features from a feature collection.\n   *\n   * @function\n   * @param {Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n   * @return {Array<module:ol/Feature>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    if (isDocument(source)) {\n      return this.readFeaturesFromDocument(\n        /** @type {Document} */ (source), opt_options);\n    } else if (isNode(source)) {\n      return this.readFeaturesFromNode(/** @type {Node} */ (source), opt_options);\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeaturesFromDocument(doc, opt_options);\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n   * @protected\n   * @return {Array<module:ol/Feature>} Features.\n   */\n  readFeaturesFromDocument(doc, opt_options) {\n    /** @type {Array<module:ol/Feature>} */\n    const features = [];\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(features, this.readFeaturesFromNode(n, opt_options));\n      }\n    }\n    return features;\n  }\n\n  /**\n   * @abstract\n   * @param {Node} node Node.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n   * @protected\n   * @return {Array<module:ol/Feature>} Features.\n   */\n  readFeaturesFromNode(node, opt_options) {}\n\n  /**\n   * @inheritDoc\n   */\n  readGeometry(source, opt_options) {\n    if (isDocument(source)) {\n      return this.readGeometryFromDocument(\n        /** @type {Document} */ (source), opt_options);\n    } else if (isNode(source)) {\n      return this.readGeometryFromNode(/** @type {Node} */ (source), opt_options);\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readGeometryFromDocument(doc, opt_options);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n   * @protected\n   * @return {module:ol/geom/Geometry} Geometry.\n   */\n  readGeometryFromDocument(doc, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n   * @protected\n   * @return {module:ol/geom/Geometry} Geometry.\n   */\n  readGeometryFromNode(node, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Read the projection from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @return {module:ol/proj/Projection} Projection.\n   * @api\n   */\n  readProjection(source) {\n    if (isDocument(source)) {\n      return this.readProjectionFromDocument(/** @type {Document} */ (source));\n    } else if (isNode(source)) {\n      return this.readProjectionFromNode(/** @type {Node} */ (source));\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readProjectionFromDocument(doc);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @protected\n   * @return {module:ol/proj/Projection} Projection.\n   */\n  readProjectionFromDocument(doc) {\n    return this.dataProjection;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @protected\n   * @return {module:ol/proj/Projection} Projection.\n   */\n  readProjectionFromNode(node) {\n    return this.dataProjection;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeFeature(feature, opt_options) {\n    const node = this.writeFeatureNode(feature, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {module:ol/Feature} feature Feature.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n   * @protected\n   * @return {Node} Node.\n   */\n  writeFeatureNode(feature, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    const node = this.writeFeaturesNode(features, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   */\n  writeFeaturesNode(features, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeGeometry(geometry, opt_options) {\n    const node = this.writeGeometryNode(geometry, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {module:ol/geom/Geometry} geometry Geometry.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   */\n  writeGeometryNode(geometry, opt_options) {\n    return null; // not implemented\n  }\n}\n\n\nexport default XMLFeature;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.proj4 = factory());\n}(this, (function () { 'use strict';\n\n\tvar globals = function(defs) {\n\t  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n\t  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n\t  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n\t  defs.WGS84 = defs['EPSG:4326'];\n\t  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n\t  defs.GOOGLE = defs['EPSG:3857'];\n\t  defs['EPSG:900913'] = defs['EPSG:3857'];\n\t  defs['EPSG:102113'] = defs['EPSG:3857'];\n\t};\n\n\tvar PJD_3PARAM = 1;\n\tvar PJD_7PARAM = 2;\n\tvar PJD_WGS84 = 4; // WGS84 or equivalent\n\tvar PJD_NODATUM = 5; // WGS84 or equivalent\n\tvar SEC_TO_RAD = 4.84813681109535993589914102357e-6;\n\tvar HALF_PI = Math.PI/2;\n\t// ellipoid pj_set_ell.c\n\tvar SIXTH = 0.1666666666666666667;\n\t/* 1/6 */\n\tvar RA4 = 0.04722222222222222222;\n\t/* 17/360 */\n\tvar RA6 = 0.02215608465608465608;\n\tvar EPSLN = 1.0e-10;\n\t// you'd think you could use Number.EPSILON above but that makes\n\t// Mollweide get into an infinate loop.\n\n\tvar D2R = 0.01745329251994329577;\n\tvar R2D = 57.29577951308232088;\n\tvar FORTPI = Math.PI/4;\n\tvar TWO_PI = Math.PI * 2;\n\t// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n\t// degree range by a tiny amount don't get wrapped. This prevents points that\n\t// have drifted from their original location along the 180th meridian (due to\n\t// floating point error) from changing their sign.\n\tvar SPI = 3.14159265359;\n\n\tvar exports$1 = {};\n\texports$1.greenwich = 0.0; //\"0dE\",\n\texports$1.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\n\texports$1.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\n\texports$1.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\n\texports$1.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\n\texports$1.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\n\texports$1.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\n\texports$1.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\n\texports$1.ferro = -17.666666666667; //\"17d40'W\",\n\texports$1.brussels = 4.367975; //\"4d22'4.71\\\"E\",\n\texports$1.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\n\texports$1.athens = 23.7163375; //\"23d42'58.815\\\"E\",\n\texports$1.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n\n\tvar units = {\n\t  ft: {to_meter: 0.3048},\n\t  'us-ft': {to_meter: 1200 / 3937}\n\t};\n\n\tvar ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\n\tfunction match(obj, key) {\n\t  if (obj[key]) {\n\t    return obj[key];\n\t  }\n\t  var keys = Object.keys(obj);\n\t  var lkey = key.toLowerCase().replace(ignoredChar, '');\n\t  var i = -1;\n\t  var testkey, processedKey;\n\t  while (++i < keys.length) {\n\t    testkey = keys[i];\n\t    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n\t    if (processedKey === lkey) {\n\t      return obj[testkey];\n\t    }\n\t  }\n\t}\n\n\tvar parseProj = function(defData) {\n\t  var self = {};\n\t  var paramObj = defData.split('+').map(function(v) {\n\t    return v.trim();\n\t  }).filter(function(a) {\n\t    return a;\n\t  }).reduce(function(p, a) {\n\t    var split = a.split('=');\n\t    split.push(true);\n\t    p[split[0].toLowerCase()] = split[1];\n\t    return p;\n\t  }, {});\n\t  var paramName, paramVal, paramOutname;\n\t  var params = {\n\t    proj: 'projName',\n\t    datum: 'datumCode',\n\t    rf: function(v) {\n\t      self.rf = parseFloat(v);\n\t    },\n\t    lat_0: function(v) {\n\t      self.lat0 = v * D2R;\n\t    },\n\t    lat_1: function(v) {\n\t      self.lat1 = v * D2R;\n\t    },\n\t    lat_2: function(v) {\n\t      self.lat2 = v * D2R;\n\t    },\n\t    lat_ts: function(v) {\n\t      self.lat_ts = v * D2R;\n\t    },\n\t    lon_0: function(v) {\n\t      self.long0 = v * D2R;\n\t    },\n\t    lon_1: function(v) {\n\t      self.long1 = v * D2R;\n\t    },\n\t    lon_2: function(v) {\n\t      self.long2 = v * D2R;\n\t    },\n\t    alpha: function(v) {\n\t      self.alpha = parseFloat(v) * D2R;\n\t    },\n\t    lonc: function(v) {\n\t      self.longc = v * D2R;\n\t    },\n\t    x_0: function(v) {\n\t      self.x0 = parseFloat(v);\n\t    },\n\t    y_0: function(v) {\n\t      self.y0 = parseFloat(v);\n\t    },\n\t    k_0: function(v) {\n\t      self.k0 = parseFloat(v);\n\t    },\n\t    k: function(v) {\n\t      self.k0 = parseFloat(v);\n\t    },\n\t    a: function(v) {\n\t      self.a = parseFloat(v);\n\t    },\n\t    b: function(v) {\n\t      self.b = parseFloat(v);\n\t    },\n\t    r_a: function() {\n\t      self.R_A = true;\n\t    },\n\t    zone: function(v) {\n\t      self.zone = parseInt(v, 10);\n\t    },\n\t    south: function() {\n\t      self.utmSouth = true;\n\t    },\n\t    towgs84: function(v) {\n\t      self.datum_params = v.split(\",\").map(function(a) {\n\t        return parseFloat(a);\n\t      });\n\t    },\n\t    to_meter: function(v) {\n\t      self.to_meter = parseFloat(v);\n\t    },\n\t    units: function(v) {\n\t      self.units = v;\n\t      var unit = match(units, v);\n\t      if (unit) {\n\t        self.to_meter = unit.to_meter;\n\t      }\n\t    },\n\t    from_greenwich: function(v) {\n\t      self.from_greenwich = v * D2R;\n\t    },\n\t    pm: function(v) {\n\t      var pm = match(exports$1, v);\n\t      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n\t    },\n\t    nadgrids: function(v) {\n\t      if (v === '@null') {\n\t        self.datumCode = 'none';\n\t      }\n\t      else {\n\t        self.nadgrids = v;\n\t      }\n\t    },\n\t    axis: function(v) {\n\t      var legalAxis = \"ewnsud\";\n\t      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n\t        self.axis = v;\n\t      }\n\t    }\n\t  };\n\t  for (paramName in paramObj) {\n\t    paramVal = paramObj[paramName];\n\t    if (paramName in params) {\n\t      paramOutname = params[paramName];\n\t      if (typeof paramOutname === 'function') {\n\t        paramOutname(paramVal);\n\t      }\n\t      else {\n\t        self[paramOutname] = paramVal;\n\t      }\n\t    }\n\t    else {\n\t      self[paramName] = paramVal;\n\t    }\n\t  }\n\t  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n\t    self.datumCode = self.datumCode.toLowerCase();\n\t  }\n\t  return self;\n\t};\n\n\tvar NEUTRAL = 1;\n\tvar KEYWORD = 2;\n\tvar NUMBER = 3;\n\tvar QUOTED = 4;\n\tvar AFTERQUOTE = 5;\n\tvar ENDED = -1;\n\tvar whitespace = /\\s/;\n\tvar latin = /[A-Za-z]/;\n\tvar keyword = /[A-Za-z84]/;\n\tvar endThings = /[,\\]]/;\n\tvar digets = /[\\d\\.E\\-\\+]/;\n\t// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\n\tfunction Parser(text) {\n\t  if (typeof text !== 'string') {\n\t    throw new Error('not a string');\n\t  }\n\t  this.text = text.trim();\n\t  this.level = 0;\n\t  this.place = 0;\n\t  this.root = null;\n\t  this.stack = [];\n\t  this.currentObject = null;\n\t  this.state = NEUTRAL;\n\t}\n\tParser.prototype.readCharicter = function() {\n\t  var char = this.text[this.place++];\n\t  if (this.state !== QUOTED) {\n\t    while (whitespace.test(char)) {\n\t      if (this.place >= this.text.length) {\n\t        return;\n\t      }\n\t      char = this.text[this.place++];\n\t    }\n\t  }\n\t  switch (this.state) {\n\t    case NEUTRAL:\n\t      return this.neutral(char);\n\t    case KEYWORD:\n\t      return this.keyword(char)\n\t    case QUOTED:\n\t      return this.quoted(char);\n\t    case AFTERQUOTE:\n\t      return this.afterquote(char);\n\t    case NUMBER:\n\t      return this.number(char);\n\t    case ENDED:\n\t      return;\n\t  }\n\t};\n\tParser.prototype.afterquote = function(char) {\n\t  if (char === '\"') {\n\t    this.word += '\"';\n\t    this.state = QUOTED;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.word = this.word.trim();\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n\t};\n\tParser.prototype.afterItem = function(char) {\n\t  if (char === ',') {\n\t    if (this.word !== null) {\n\t      this.currentObject.push(this.word);\n\t    }\n\t    this.word = null;\n\t    this.state = NEUTRAL;\n\t    return;\n\t  }\n\t  if (char === ']') {\n\t    this.level--;\n\t    if (this.word !== null) {\n\t      this.currentObject.push(this.word);\n\t      this.word = null;\n\t    }\n\t    this.state = NEUTRAL;\n\t    this.currentObject = this.stack.pop();\n\t    if (!this.currentObject) {\n\t      this.state = ENDED;\n\t    }\n\n\t    return;\n\t  }\n\t};\n\tParser.prototype.number = function(char) {\n\t  if (digets.test(char)) {\n\t    this.word += char;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.word = parseFloat(this.word);\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n\t};\n\tParser.prototype.quoted = function(char) {\n\t  if (char === '\"') {\n\t    this.state = AFTERQUOTE;\n\t    return;\n\t  }\n\t  this.word += char;\n\t  return;\n\t};\n\tParser.prototype.keyword = function(char) {\n\t  if (keyword.test(char)) {\n\t    this.word += char;\n\t    return;\n\t  }\n\t  if (char === '[') {\n\t    var newObjects = [];\n\t    newObjects.push(this.word);\n\t    this.level++;\n\t    if (this.root === null) {\n\t      this.root = newObjects;\n\t    } else {\n\t      this.currentObject.push(newObjects);\n\t    }\n\t    this.stack.push(this.currentObject);\n\t    this.currentObject = newObjects;\n\t    this.state = NEUTRAL;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n\t};\n\tParser.prototype.neutral = function(char) {\n\t  if (latin.test(char)) {\n\t    this.word = char;\n\t    this.state = KEYWORD;\n\t    return;\n\t  }\n\t  if (char === '\"') {\n\t    this.word = '';\n\t    this.state = QUOTED;\n\t    return;\n\t  }\n\t  if (digets.test(char)) {\n\t    this.word = char;\n\t    this.state = NUMBER;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n\t};\n\tParser.prototype.output = function() {\n\t  while (this.place < this.text.length) {\n\t    this.readCharicter();\n\t  }\n\t  if (this.state === ENDED) {\n\t    return this.root;\n\t  }\n\t  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n\t};\n\n\tfunction parseString(txt) {\n\t  var parser = new Parser(txt);\n\t  return parser.output();\n\t}\n\n\tfunction mapit(obj, key, value) {\n\t  if (Array.isArray(key)) {\n\t    value.unshift(key);\n\t    key = null;\n\t  }\n\t  var thing = key ? {} : obj;\n\n\t  var out = value.reduce(function(newObj, item) {\n\t    sExpr(item, newObj);\n\t    return newObj\n\t  }, thing);\n\t  if (key) {\n\t    obj[key] = out;\n\t  }\n\t}\n\n\tfunction sExpr(v, obj) {\n\t  if (!Array.isArray(v)) {\n\t    obj[v] = true;\n\t    return;\n\t  }\n\t  var key = v.shift();\n\t  if (key === 'PARAMETER') {\n\t    key = v.shift();\n\t  }\n\t  if (v.length === 1) {\n\t    if (Array.isArray(v[0])) {\n\t      obj[key] = {};\n\t      sExpr(v[0], obj[key]);\n\t      return;\n\t    }\n\t    obj[key] = v[0];\n\t    return;\n\t  }\n\t  if (!v.length) {\n\t    obj[key] = true;\n\t    return;\n\t  }\n\t  if (key === 'TOWGS84') {\n\t    obj[key] = v;\n\t    return;\n\t  }\n\t  if (!Array.isArray(key)) {\n\t    obj[key] = {};\n\t  }\n\n\t  var i;\n\t  switch (key) {\n\t    case 'UNIT':\n\t    case 'PRIMEM':\n\t    case 'VERT_DATUM':\n\t      obj[key] = {\n\t        name: v[0].toLowerCase(),\n\t        convert: v[1]\n\t      };\n\t      if (v.length === 3) {\n\t        sExpr(v[2], obj[key]);\n\t      }\n\t      return;\n\t    case 'SPHEROID':\n\t    case 'ELLIPSOID':\n\t      obj[key] = {\n\t        name: v[0],\n\t        a: v[1],\n\t        rf: v[2]\n\t      };\n\t      if (v.length === 4) {\n\t        sExpr(v[3], obj[key]);\n\t      }\n\t      return;\n\t    case 'PROJECTEDCRS':\n\t    case 'PROJCRS':\n\t    case 'GEOGCS':\n\t    case 'GEOCCS':\n\t    case 'PROJCS':\n\t    case 'LOCAL_CS':\n\t    case 'GEODCRS':\n\t    case 'GEODETICCRS':\n\t    case 'GEODETICDATUM':\n\t    case 'EDATUM':\n\t    case 'ENGINEERINGDATUM':\n\t    case 'VERT_CS':\n\t    case 'VERTCRS':\n\t    case 'VERTICALCRS':\n\t    case 'COMPD_CS':\n\t    case 'COMPOUNDCRS':\n\t    case 'ENGINEERINGCRS':\n\t    case 'ENGCRS':\n\t    case 'FITTED_CS':\n\t    case 'LOCAL_DATUM':\n\t    case 'DATUM':\n\t      v[0] = ['name', v[0]];\n\t      mapit(obj, key, v);\n\t      return;\n\t    default:\n\t      i = -1;\n\t      while (++i < v.length) {\n\t        if (!Array.isArray(v[i])) {\n\t          return sExpr(v, obj[key]);\n\t        }\n\t      }\n\t      return mapit(obj, key, v);\n\t  }\n\t}\n\n\tvar D2R$1 = 0.01745329251994329577;\n\tfunction rename(obj, params) {\n\t  var outName = params[0];\n\t  var inName = params[1];\n\t  if (!(outName in obj) && (inName in obj)) {\n\t    obj[outName] = obj[inName];\n\t    if (params.length === 3) {\n\t      obj[outName] = params[2](obj[outName]);\n\t    }\n\t  }\n\t}\n\n\tfunction d2r(input) {\n\t  return input * D2R$1;\n\t}\n\n\tfunction cleanWKT(wkt) {\n\t  if (wkt.type === 'GEOGCS') {\n\t    wkt.projName = 'longlat';\n\t  } else if (wkt.type === 'LOCAL_CS') {\n\t    wkt.projName = 'identity';\n\t    wkt.local = true;\n\t  } else {\n\t    if (typeof wkt.PROJECTION === 'object') {\n\t      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n\t    } else {\n\t      wkt.projName = wkt.PROJECTION;\n\t    }\n\t  }\n\t  if (wkt.UNIT) {\n\t    wkt.units = wkt.UNIT.name.toLowerCase();\n\t    if (wkt.units === 'metre') {\n\t      wkt.units = 'meter';\n\t    }\n\t    if (wkt.UNIT.convert) {\n\t      if (wkt.type === 'GEOGCS') {\n\t        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n\t          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n\t        }\n\t      } else {\n\t        wkt.to_meter = wkt.UNIT.convert, 10;\n\t      }\n\t    }\n\t  }\n\t  var geogcs = wkt.GEOGCS;\n\t  if (wkt.type === 'GEOGCS') {\n\t    geogcs = wkt;\n\t  }\n\t  if (geogcs) {\n\t    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n\t    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n\t    //}\n\t    if (geogcs.DATUM) {\n\t      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n\t    } else {\n\t      wkt.datumCode = geogcs.name.toLowerCase();\n\t    }\n\t    if (wkt.datumCode.slice(0, 2) === 'd_') {\n\t      wkt.datumCode = wkt.datumCode.slice(2);\n\t    }\n\t    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n\t      wkt.datumCode = 'nzgd49';\n\t    }\n\t    if (wkt.datumCode === 'wgs_1984') {\n\t      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n\t        wkt.sphere = true;\n\t      }\n\t      wkt.datumCode = 'wgs84';\n\t    }\n\t    if (wkt.datumCode.slice(-6) === '_ferro') {\n\t      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n\t    }\n\t    if (wkt.datumCode.slice(-8) === '_jakarta') {\n\t      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n\t    }\n\t    if (~wkt.datumCode.indexOf('belge')) {\n\t      wkt.datumCode = 'rnb72';\n\t    }\n\t    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n\t      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n\t      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n\t        wkt.ellps = 'intl';\n\t      }\n\n\t      wkt.a = geogcs.DATUM.SPHEROID.a;\n\t      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n\t    }\n\t    if (~wkt.datumCode.indexOf('osgb_1936')) {\n\t      wkt.datumCode = 'osgb36';\n\t    }\n\t    if (~wkt.datumCode.indexOf('osni_1952')) {\n\t      wkt.datumCode = 'osni52';\n\t    }\n\t    if (~wkt.datumCode.indexOf('tm65')\n\t      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n\t      wkt.datumCode = 'ire65';\n\t    }\n\t  }\n\t  if (wkt.b && !isFinite(wkt.b)) {\n\t    wkt.b = wkt.a;\n\t  }\n\n\t  function toMeter(input) {\n\t    var ratio = wkt.to_meter || 1;\n\t    return input * ratio;\n\t  }\n\t  var renamer = function(a) {\n\t    return rename(wkt, a);\n\t  };\n\t  var list = [\n\t    ['standard_parallel_1', 'Standard_Parallel_1'],\n\t    ['standard_parallel_2', 'Standard_Parallel_2'],\n\t    ['false_easting', 'False_Easting'],\n\t    ['false_northing', 'False_Northing'],\n\t    ['central_meridian', 'Central_Meridian'],\n\t    ['latitude_of_origin', 'Latitude_Of_Origin'],\n\t    ['latitude_of_origin', 'Central_Parallel'],\n\t    ['scale_factor', 'Scale_Factor'],\n\t    ['k0', 'scale_factor'],\n\t    ['latitude_of_center', 'Latitude_of_center'],\n\t    ['lat0', 'latitude_of_center', d2r],\n\t    ['longitude_of_center', 'Longitude_Of_Center'],\n\t    ['longc', 'longitude_of_center', d2r],\n\t    ['x0', 'false_easting', toMeter],\n\t    ['y0', 'false_northing', toMeter],\n\t    ['long0', 'central_meridian', d2r],\n\t    ['lat0', 'latitude_of_origin', d2r],\n\t    ['lat0', 'standard_parallel_1', d2r],\n\t    ['lat1', 'standard_parallel_1', d2r],\n\t    ['lat2', 'standard_parallel_2', d2r],\n\t    ['alpha', 'azimuth', d2r],\n\t    ['srsCode', 'name']\n\t  ];\n\t  list.forEach(renamer);\n\t  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n\t    wkt.long0 = wkt.longc;\n\t  }\n\t  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n\t    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n\t    wkt.lat_ts = wkt.lat1;\n\t  }\n\t}\n\tvar wkt = function(wkt) {\n\t  var lisp = parseString(wkt);\n\t  var type = lisp.shift();\n\t  var name = lisp.shift();\n\t  lisp.unshift(['name', name]);\n\t  lisp.unshift(['type', type]);\n\t  var obj = {};\n\t  sExpr(lisp, obj);\n\t  cleanWKT(obj);\n\t  return obj;\n\t};\n\n\tfunction defs(name) {\n\t  /*global console*/\n\t  var that = this;\n\t  if (arguments.length === 2) {\n\t    var def = arguments[1];\n\t    if (typeof def === 'string') {\n\t      if (def.charAt(0) === '+') {\n\t        defs[name] = parseProj(arguments[1]);\n\t      }\n\t      else {\n\t        defs[name] = wkt(arguments[1]);\n\t      }\n\t    } else {\n\t      defs[name] = def;\n\t    }\n\t  }\n\t  else if (arguments.length === 1) {\n\t    if (Array.isArray(name)) {\n\t      return name.map(function(v) {\n\t        if (Array.isArray(v)) {\n\t          defs.apply(that, v);\n\t        }\n\t        else {\n\t          defs(v);\n\t        }\n\t      });\n\t    }\n\t    else if (typeof name === 'string') {\n\t      if (name in defs) {\n\t        return defs[name];\n\t      }\n\t    }\n\t    else if ('EPSG' in name) {\n\t      defs['EPSG:' + name.EPSG] = name;\n\t    }\n\t    else if ('ESRI' in name) {\n\t      defs['ESRI:' + name.ESRI] = name;\n\t    }\n\t    else if ('IAU2000' in name) {\n\t      defs['IAU2000:' + name.IAU2000] = name;\n\t    }\n\t    else {\n\t      console.log(name);\n\t    }\n\t    return;\n\t  }\n\n\n\t}\n\tglobals(defs);\n\n\tfunction testObj(code){\n\t  return typeof code === 'string';\n\t}\n\tfunction testDef(code){\n\t  return code in defs;\n\t}\n\t var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS']; \n\tfunction testWKT(code){\n\t  return codeWords.some(function (word) {\n\t    return code.indexOf(word) > -1;\n\t  });\n\t}\n\tfunction testProj(code){\n\t  return code[0] === '+';\n\t}\n\tfunction parse(code){\n\t  if (testObj(code)) {\n\t    //check to see if this is a WKT string\n\t    if (testDef(code)) {\n\t      return defs[code];\n\t    }\n\t    if (testWKT(code)) {\n\t      return wkt(code);\n\t    }\n\t    if (testProj(code)) {\n\t      return parseProj(code);\n\t    }\n\t  }else{\n\t    return code;\n\t  }\n\t}\n\n\tvar extend = function(destination, source) {\n\t  destination = destination || {};\n\t  var value, property;\n\t  if (!source) {\n\t    return destination;\n\t  }\n\t  for (property in source) {\n\t    value = source[property];\n\t    if (value !== undefined) {\n\t      destination[property] = value;\n\t    }\n\t  }\n\t  return destination;\n\t};\n\n\tvar msfnz = function(eccent, sinphi, cosphi) {\n\t  var con = eccent * sinphi;\n\t  return cosphi / (Math.sqrt(1 - con * con));\n\t};\n\n\tvar sign = function(x) {\n\t  return x<0 ? -1 : 1;\n\t};\n\n\tvar adjust_lon = function(x) {\n\t  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n\t};\n\n\tvar tsfnz = function(eccent, phi, sinphi) {\n\t  var con = eccent * sinphi;\n\t  var com = 0.5 * eccent;\n\t  con = Math.pow(((1 - con) / (1 + con)), com);\n\t  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n\t};\n\n\tvar phi2z = function(eccent, ts) {\n\t  var eccnth = 0.5 * eccent;\n\t  var con, dphi;\n\t  var phi = HALF_PI - 2 * Math.atan(ts);\n\t  for (var i = 0; i <= 15; i++) {\n\t    con = eccent * Math.sin(phi);\n\t    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\t  //console.log(\"phi2z has NoConvergence\");\n\t  return -9999;\n\t};\n\n\tfunction init() {\n\t  var con = this.b / this.a;\n\t  this.es = 1 - con * con;\n\t  if(!('x0' in this)){\n\t    this.x0 = 0;\n\t  }\n\t  if(!('y0' in this)){\n\t    this.y0 = 0;\n\t  }\n\t  this.e = Math.sqrt(this.es);\n\t  if (this.lat_ts) {\n\t    if (this.sphere) {\n\t      this.k0 = Math.cos(this.lat_ts);\n\t    }\n\t    else {\n\t      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n\t    }\n\t  }\n\t  else {\n\t    if (!this.k0) {\n\t      if (this.k) {\n\t        this.k0 = this.k;\n\t      }\n\t      else {\n\t        this.k0 = 1;\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/* Mercator forward equations--mapping lat,long to x,y\n\t  --------------------------------------------------*/\n\n\tfunction forward(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  // convert to radians\n\t  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n\t    return null;\n\t  }\n\n\t  var x, y;\n\t  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n\t    return null;\n\t  }\n\t  else {\n\t    if (this.sphere) {\n\t      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n\t      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n\t    }\n\t    else {\n\t      var sinphi = Math.sin(lat);\n\t      var ts = tsfnz(this.e, lat, sinphi);\n\t      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n\t      y = this.y0 - this.a * this.k0 * Math.log(ts);\n\t    }\n\t    p.x = x;\n\t    p.y = y;\n\t    return p;\n\t  }\n\t}\n\n\t/* Mercator inverse equations--mapping x,y to lat/long\n\t  --------------------------------------------------*/\n\tfunction inverse(p) {\n\n\t  var x = p.x - this.x0;\n\t  var y = p.y - this.y0;\n\t  var lon, lat;\n\n\t  if (this.sphere) {\n\t    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n\t  }\n\t  else {\n\t    var ts = Math.exp(-y / (this.a * this.k0));\n\t    lat = phi2z(this.e, ts);\n\t    if (lat === -9999) {\n\t      return null;\n\t    }\n\t  }\n\t  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$1 = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\n\tvar merc = {\n\t  init: init,\n\t  forward: forward,\n\t  inverse: inverse,\n\t  names: names$1\n\t};\n\n\tfunction init$1() {\n\t  //no-op for longlat\n\t}\n\n\tfunction identity(pt) {\n\t  return pt;\n\t}\n\tvar names$2 = [\"longlat\", \"identity\"];\n\tvar longlat = {\n\t  init: init$1,\n\t  forward: identity,\n\t  inverse: identity,\n\t  names: names$2\n\t};\n\n\tvar projs = [merc, longlat];\n\tvar names$$1 = {};\n\tvar projStore = [];\n\n\tfunction add(proj, i) {\n\t  var len = projStore.length;\n\t  if (!proj.names) {\n\t    console.log(i);\n\t    return true;\n\t  }\n\t  projStore[len] = proj;\n\t  proj.names.forEach(function(n) {\n\t    names$$1[n.toLowerCase()] = len;\n\t  });\n\t  return this;\n\t}\n\n\tfunction get(name) {\n\t  if (!name) {\n\t    return false;\n\t  }\n\t  var n = name.toLowerCase();\n\t  if (typeof names$$1[n] !== 'undefined' && projStore[names$$1[n]]) {\n\t    return projStore[names$$1[n]];\n\t  }\n\t}\n\n\tfunction start() {\n\t  projs.forEach(add);\n\t}\n\tvar projections = {\n\t  start: start,\n\t  add: add,\n\t  get: get\n\t};\n\n\tvar exports$2 = {};\n\texports$2.MERIT = {\n\t  a: 6378137.0,\n\t  rf: 298.257,\n\t  ellipseName: \"MERIT 1983\"\n\t};\n\n\texports$2.SGS85 = {\n\t  a: 6378136.0,\n\t  rf: 298.257,\n\t  ellipseName: \"Soviet Geodetic System 85\"\n\t};\n\n\texports$2.GRS80 = {\n\t  a: 6378137.0,\n\t  rf: 298.257222101,\n\t  ellipseName: \"GRS 1980(IUGG, 1980)\"\n\t};\n\n\texports$2.IAU76 = {\n\t  a: 6378140.0,\n\t  rf: 298.257,\n\t  ellipseName: \"IAU 1976\"\n\t};\n\n\texports$2.airy = {\n\t  a: 6377563.396,\n\t  b: 6356256.910,\n\t  ellipseName: \"Airy 1830\"\n\t};\n\n\texports$2.APL4 = {\n\t  a: 6378137,\n\t  rf: 298.25,\n\t  ellipseName: \"Appl. Physics. 1965\"\n\t};\n\n\texports$2.NWL9D = {\n\t  a: 6378145.0,\n\t  rf: 298.25,\n\t  ellipseName: \"Naval Weapons Lab., 1965\"\n\t};\n\n\texports$2.mod_airy = {\n\t  a: 6377340.189,\n\t  b: 6356034.446,\n\t  ellipseName: \"Modified Airy\"\n\t};\n\n\texports$2.andrae = {\n\t  a: 6377104.43,\n\t  rf: 300.0,\n\t  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n\t};\n\n\texports$2.aust_SA = {\n\t  a: 6378160.0,\n\t  rf: 298.25,\n\t  ellipseName: \"Australian Natl & S. Amer. 1969\"\n\t};\n\n\texports$2.GRS67 = {\n\t  a: 6378160.0,\n\t  rf: 298.2471674270,\n\t  ellipseName: \"GRS 67(IUGG 1967)\"\n\t};\n\n\texports$2.bessel = {\n\t  a: 6377397.155,\n\t  rf: 299.1528128,\n\t  ellipseName: \"Bessel 1841\"\n\t};\n\n\texports$2.bess_nam = {\n\t  a: 6377483.865,\n\t  rf: 299.1528128,\n\t  ellipseName: \"Bessel 1841 (Namibia)\"\n\t};\n\n\texports$2.clrk66 = {\n\t  a: 6378206.4,\n\t  b: 6356583.8,\n\t  ellipseName: \"Clarke 1866\"\n\t};\n\n\texports$2.clrk80 = {\n\t  a: 6378249.145,\n\t  rf: 293.4663,\n\t  ellipseName: \"Clarke 1880 mod.\"\n\t};\n\n\texports$2.clrk58 = {\n\t  a: 6378293.645208759,\n\t  rf: 294.2606763692654,\n\t  ellipseName: \"Clarke 1858\"\n\t};\n\n\texports$2.CPM = {\n\t  a: 6375738.7,\n\t  rf: 334.29,\n\t  ellipseName: \"Comm. des Poids et Mesures 1799\"\n\t};\n\n\texports$2.delmbr = {\n\t  a: 6376428.0,\n\t  rf: 311.5,\n\t  ellipseName: \"Delambre 1810 (Belgium)\"\n\t};\n\n\texports$2.engelis = {\n\t  a: 6378136.05,\n\t  rf: 298.2566,\n\t  ellipseName: \"Engelis 1985\"\n\t};\n\n\texports$2.evrst30 = {\n\t  a: 6377276.345,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1830\"\n\t};\n\n\texports$2.evrst48 = {\n\t  a: 6377304.063,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1948\"\n\t};\n\n\texports$2.evrst56 = {\n\t  a: 6377301.243,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1956\"\n\t};\n\n\texports$2.evrst69 = {\n\t  a: 6377295.664,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1969\"\n\t};\n\n\texports$2.evrstSS = {\n\t  a: 6377298.556,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest (Sabah & Sarawak)\"\n\t};\n\n\texports$2.fschr60 = {\n\t  a: 6378166.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer (Mercury Datum) 1960\"\n\t};\n\n\texports$2.fschr60m = {\n\t  a: 6378155.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer 1960\"\n\t};\n\n\texports$2.fschr68 = {\n\t  a: 6378150.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer 1968\"\n\t};\n\n\texports$2.helmert = {\n\t  a: 6378200.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Helmert 1906\"\n\t};\n\n\texports$2.hough = {\n\t  a: 6378270.0,\n\t  rf: 297.0,\n\t  ellipseName: \"Hough\"\n\t};\n\n\texports$2.intl = {\n\t  a: 6378388.0,\n\t  rf: 297.0,\n\t  ellipseName: \"International 1909 (Hayford)\"\n\t};\n\n\texports$2.kaula = {\n\t  a: 6378163.0,\n\t  rf: 298.24,\n\t  ellipseName: \"Kaula 1961\"\n\t};\n\n\texports$2.lerch = {\n\t  a: 6378139.0,\n\t  rf: 298.257,\n\t  ellipseName: \"Lerch 1979\"\n\t};\n\n\texports$2.mprts = {\n\t  a: 6397300.0,\n\t  rf: 191.0,\n\t  ellipseName: \"Maupertius 1738\"\n\t};\n\n\texports$2.new_intl = {\n\t  a: 6378157.5,\n\t  b: 6356772.2,\n\t  ellipseName: \"New International 1967\"\n\t};\n\n\texports$2.plessis = {\n\t  a: 6376523.0,\n\t  rf: 6355863.0,\n\t  ellipseName: \"Plessis 1817 (France)\"\n\t};\n\n\texports$2.krass = {\n\t  a: 6378245.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Krassovsky, 1942\"\n\t};\n\n\texports$2.SEasia = {\n\t  a: 6378155.0,\n\t  b: 6356773.3205,\n\t  ellipseName: \"Southeast Asia\"\n\t};\n\n\texports$2.walbeck = {\n\t  a: 6376896.0,\n\t  b: 6355834.8467,\n\t  ellipseName: \"Walbeck\"\n\t};\n\n\texports$2.WGS60 = {\n\t  a: 6378165.0,\n\t  rf: 298.3,\n\t  ellipseName: \"WGS 60\"\n\t};\n\n\texports$2.WGS66 = {\n\t  a: 6378145.0,\n\t  rf: 298.25,\n\t  ellipseName: \"WGS 66\"\n\t};\n\n\texports$2.WGS7 = {\n\t  a: 6378135.0,\n\t  rf: 298.26,\n\t  ellipseName: \"WGS 72\"\n\t};\n\n\tvar WGS84 = exports$2.WGS84 = {\n\t  a: 6378137.0,\n\t  rf: 298.257223563,\n\t  ellipseName: \"WGS 84\"\n\t};\n\n\texports$2.sphere = {\n\t  a: 6370997.0,\n\t  b: 6370997.0,\n\t  ellipseName: \"Normal Sphere (r=6370997)\"\n\t};\n\n\tfunction eccentricity(a, b, rf, R_A) {\n\t  var a2 = a * a; // used in geocentric\n\t  var b2 = b * b; // used in geocentric\n\t  var es = (a2 - b2) / a2; // e ^ 2\n\t  var e = 0;\n\t  if (R_A) {\n\t    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n\t    a2 = a * a;\n\t    es = 0;\n\t  } else {\n\t    e = Math.sqrt(es); // eccentricity\n\t  }\n\t  var ep2 = (a2 - b2) / b2; // used in geocentric\n\t  return {\n\t    es: es,\n\t    e: e,\n\t    ep2: ep2\n\t  };\n\t}\n\tfunction sphere(a, b, rf, ellps, sphere) {\n\t  if (!a) { // do we have an ellipsoid?\n\t    var ellipse = match(exports$2, ellps);\n\t    if (!ellipse) {\n\t      ellipse = WGS84;\n\t    }\n\t    a = ellipse.a;\n\t    b = ellipse.b;\n\t    rf = ellipse.rf;\n\t  }\n\n\t  if (rf && !b) {\n\t    b = (1.0 - 1.0 / rf) * a;\n\t  }\n\t  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n\t    sphere = true;\n\t    b = a;\n\t  }\n\t  return {\n\t    a: a,\n\t    b: b,\n\t    rf: rf,\n\t    sphere: sphere\n\t  };\n\t}\n\n\tvar exports$3 = {};\n\texports$3.wgs84 = {\n\t  towgs84: \"0,0,0\",\n\t  ellipse: \"WGS84\",\n\t  datumName: \"WGS84\"\n\t};\n\n\texports$3.ch1903 = {\n\t  towgs84: \"674.374,15.056,405.346\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"swiss\"\n\t};\n\n\texports$3.ggrs87 = {\n\t  towgs84: \"-199.87,74.79,246.62\",\n\t  ellipse: \"GRS80\",\n\t  datumName: \"Greek_Geodetic_Reference_System_1987\"\n\t};\n\n\texports$3.nad83 = {\n\t  towgs84: \"0,0,0\",\n\t  ellipse: \"GRS80\",\n\t  datumName: \"North_American_Datum_1983\"\n\t};\n\n\texports$3.nad27 = {\n\t  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n\t  ellipse: \"clrk66\",\n\t  datumName: \"North_American_Datum_1927\"\n\t};\n\n\texports$3.potsdam = {\n\t  towgs84: \"606.0,23.0,413.0\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n\t};\n\n\texports$3.carthage = {\n\t  towgs84: \"-263.0,6.0,431.0\",\n\t  ellipse: \"clark80\",\n\t  datumName: \"Carthage 1934 Tunisia\"\n\t};\n\n\texports$3.hermannskogel = {\n\t  towgs84: \"653.0,-212.0,449.0\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"Hermannskogel\"\n\t};\n\n\texports$3.osni52 = {\n\t  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n\t  ellipse: \"airy\",\n\t  datumName: \"Irish National\"\n\t};\n\n\texports$3.ire65 = {\n\t  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n\t  ellipse: \"mod_airy\",\n\t  datumName: \"Ireland 1965\"\n\t};\n\n\texports$3.rassadiran = {\n\t  towgs84: \"-133.63,-157.5,-158.62\",\n\t  ellipse: \"intl\",\n\t  datumName: \"Rassadiran\"\n\t};\n\n\texports$3.nzgd49 = {\n\t  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n\t  ellipse: \"intl\",\n\t  datumName: \"New Zealand Geodetic Datum 1949\"\n\t};\n\n\texports$3.osgb36 = {\n\t  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n\t  ellipse: \"airy\",\n\t  datumName: \"Airy 1830\"\n\t};\n\n\texports$3.s_jtsk = {\n\t  towgs84: \"589,76,480\",\n\t  ellipse: 'bessel',\n\t  datumName: 'S-JTSK (Ferro)'\n\t};\n\n\texports$3.beduaram = {\n\t  towgs84: '-106,-87,188',\n\t  ellipse: 'clrk80',\n\t  datumName: 'Beduaram'\n\t};\n\n\texports$3.gunung_segara = {\n\t  towgs84: '-403,684,41',\n\t  ellipse: 'bessel',\n\t  datumName: 'Gunung Segara Jakarta'\n\t};\n\n\texports$3.rnb72 = {\n\t  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n\t  ellipse: \"intl\",\n\t  datumName: \"Reseau National Belge 1972\"\n\t};\n\n\tfunction datum(datumCode, datum_params, a, b, es, ep2) {\n\t  var out = {};\n\n\t  if (datumCode === undefined || datumCode === 'none') {\n\t    out.datum_type = PJD_NODATUM;\n\t  } else {\n\t    out.datum_type = PJD_WGS84;\n\t  }\n\n\t  if (datum_params) {\n\t    out.datum_params = datum_params.map(parseFloat);\n\t    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n\t      out.datum_type = PJD_3PARAM;\n\t    }\n\t    if (out.datum_params.length > 3) {\n\t      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n\t        out.datum_type = PJD_7PARAM;\n\t        out.datum_params[3] *= SEC_TO_RAD;\n\t        out.datum_params[4] *= SEC_TO_RAD;\n\t        out.datum_params[5] *= SEC_TO_RAD;\n\t        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n\t      }\n\t    }\n\t  }\n\n\t  out.a = a; //datum object also uses these values\n\t  out.b = b;\n\t  out.es = es;\n\t  out.ep2 = ep2;\n\t  return out;\n\t}\n\n\tfunction Projection$1(srsCode,callback) {\n\t  if (!(this instanceof Projection$1)) {\n\t    return new Projection$1(srsCode);\n\t  }\n\t  callback = callback || function(error){\n\t    if(error){\n\t      throw error;\n\t    }\n\t  };\n\t  var json = parse(srsCode);\n\t  if(typeof json !== 'object'){\n\t    callback(srsCode);\n\t    return;\n\t  }\n\t  var ourProj = Projection$1.projections.get(json.projName);\n\t  if(!ourProj){\n\t    callback(srsCode);\n\t    return;\n\t  }\n\t  if (json.datumCode && json.datumCode !== 'none') {\n\t    var datumDef = match(exports$3, json.datumCode);\n\t    if (datumDef) {\n\t      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\n\t      json.ellps = datumDef.ellipse;\n\t      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n\t    }\n\t  }\n\t  json.k0 = json.k0 || 1.0;\n\t  json.axis = json.axis || 'enu';\n\t  json.ellps = json.ellps || 'wgs84';\n\t  var sphere_ = sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n\t  var ecc = eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n\t  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\n\n\t  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n\t  extend(this, ourProj); // transfer all the methods from the projection\n\n\t  // copy the 4 things over we calulated in deriveConstants.sphere\n\t  this.a = sphere_.a;\n\t  this.b = sphere_.b;\n\t  this.rf = sphere_.rf;\n\t  this.sphere = sphere_.sphere;\n\n\t  // copy the 3 things we calculated in deriveConstants.eccentricity\n\t  this.es = ecc.es;\n\t  this.e = ecc.e;\n\t  this.ep2 = ecc.ep2;\n\n\t  // add in the datum object\n\t  this.datum = datumObj;\n\n\t  // init the projection\n\t  this.init();\n\n\t  // legecy callback from back in the day when it went to spatialreference.org\n\t  callback(null, this);\n\n\t}\n\tProjection$1.projections = projections;\n\tProjection$1.projections.start();\n\n\tfunction compareDatums(source, dest) {\n\t  if (source.datum_type !== dest.datum_type) {\n\t    return false; // false, datums are not equal\n\t  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n\t    // the tolerance for es is to ensure that GRS80 and WGS84\n\t    // are considered identical\n\t    return false;\n\t  } else if (source.datum_type === PJD_3PARAM) {\n\t    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n\t  } else if (source.datum_type === PJD_7PARAM) {\n\t    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n\t  } else {\n\t    return true; // datums are equal\n\t  }\n\t} // cs_compare_datums()\n\n\t/*\n\t * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n\t * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n\t * according to the current ellipsoid parameters.\n\t *\n\t *    Latitude  : Geodetic latitude in radians                     (input)\n\t *    Longitude : Geodetic longitude in radians                    (input)\n\t *    Height    : Geodetic height, in meters                       (input)\n\t *    X         : Calculated Geocentric X coordinate, in meters    (output)\n\t *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n\t *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n\t *\n\t */\n\tfunction geodeticToGeocentric(p, es, a) {\n\t  var Longitude = p.x;\n\t  var Latitude = p.y;\n\t  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n\t  var Rn; /*  Earth radius at location  */\n\t  var Sin_Lat; /*  Math.sin(Latitude)  */\n\t  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n\t  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n\t  /*\n\t   ** Don't blow up if Latitude is just a little out of the value\n\t   ** range as it may just be a rounding issue.  Also removed longitude\n\t   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n\t   */\n\t  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n\t    Latitude = -HALF_PI;\n\t  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n\t    Latitude = HALF_PI;\n\t  } else if ((Latitude < -HALF_PI) || (Latitude > HALF_PI)) {\n\t    /* Latitude out of range */\n\t    //..reportError('geocent:lat out of range:' + Latitude);\n\t    return null;\n\t  }\n\n\t  if (Longitude > Math.PI) {\n\t    Longitude -= (2 * Math.PI);\n\t  }\n\t  Sin_Lat = Math.sin(Latitude);\n\t  Cos_Lat = Math.cos(Latitude);\n\t  Sin2_Lat = Sin_Lat * Sin_Lat;\n\t  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n\t  return {\n\t    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n\t    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n\t    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n\t  };\n\t} // cs_geodetic_to_geocentric()\n\n\tfunction geocentricToGeodetic(p, es, a, b) {\n\t  /* local defintions and variables */\n\t  /* end-criterium of loop, accuracy of sin(Latitude) */\n\t  var genau = 1e-12;\n\t  var genau2 = (genau * genau);\n\t  var maxiter = 30;\n\n\t  var P; /* distance between semi-minor axis and location */\n\t  var RR; /* distance between center and location */\n\t  var CT; /* sin of geocentric latitude */\n\t  var ST; /* cos of geocentric latitude */\n\t  var RX;\n\t  var RK;\n\t  var RN; /* Earth radius at location */\n\t  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n\t  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n\t  var CPHI; /* cos of searched geodetic latitude */\n\t  var SPHI; /* sin of searched geodetic latitude */\n\t  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n\t  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n\t  var X = p.x;\n\t  var Y = p.y;\n\t  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n\t  var Longitude;\n\t  var Latitude;\n\t  var Height;\n\n\t  P = Math.sqrt(X * X + Y * Y);\n\t  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n\t  /*      special cases for latitude and longitude */\n\t  if (P / a < genau) {\n\n\t    /*  special case, if P=0. (X=0., Y=0.) */\n\t    Longitude = 0.0;\n\n\t    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n\t     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n\t    if (RR / a < genau) {\n\t      Latitude = HALF_PI;\n\t      Height = -b;\n\t      return {\n\t        x: p.x,\n\t        y: p.y,\n\t        z: p.z\n\t      };\n\t    }\n\t  } else {\n\t    /*  ellipsoidal (geodetic) longitude\n\t     *  interval: -PI < Longitude <= +PI */\n\t    Longitude = Math.atan2(Y, X);\n\t  }\n\n\t  /* --------------------------------------------------------------\n\t   * Following iterative algorithm was developped by\n\t   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n\t   * Internet: www.ife.uni-hannover.de\n\t   * Iterative computation of CPHI,SPHI and Height.\n\t   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n\t   * 2*10**-7 arcsec.\n\t   * --------------------------------------------------------------\n\t   */\n\t  CT = Z / RR;\n\t  ST = P / RR;\n\t  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n\t  CPHI0 = ST * (1.0 - es) * RX;\n\t  SPHI0 = CT * RX;\n\t  iter = 0;\n\n\t  /* loop to find sin(Latitude) resp. Latitude\n\t   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n\t  do {\n\t    iter++;\n\t    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n\t    /*  ellipsoidal (geodetic) height */\n\t    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n\t    RK = es * RN / (RN + Height);\n\t    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n\t    CPHI = ST * (1.0 - RK) * RX;\n\t    SPHI = CT * RX;\n\t    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n\t    CPHI0 = CPHI;\n\t    SPHI0 = SPHI;\n\t  }\n\t  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n\t  /*      ellipsoidal (geodetic) latitude */\n\t  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n\t  return {\n\t    x: Longitude,\n\t    y: Latitude,\n\t    z: Height\n\t  };\n\t} // cs_geocentric_to_geodetic()\n\n\t/****************************************************************/\n\t// pj_geocentic_to_wgs84( p )\n\t//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n\t/** point object, nothing fancy, just allows values to be\n\t    passed back and forth by reference rather than by value.\n\t    Other point classes may be used as long as they have\n\t    x and y properties, which will get modified in the transform method.\n\t*/\n\tfunction geocentricToWgs84(p, datum_type, datum_params) {\n\n\t  if (datum_type === PJD_3PARAM) {\n\t    // if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: p.x + datum_params[0],\n\t      y: p.y + datum_params[1],\n\t      z: p.z + datum_params[2],\n\t    };\n\t  } else if (datum_type === PJD_7PARAM) {\n\t    var Dx_BF = datum_params[0];\n\t    var Dy_BF = datum_params[1];\n\t    var Dz_BF = datum_params[2];\n\t    var Rx_BF = datum_params[3];\n\t    var Ry_BF = datum_params[4];\n\t    var Rz_BF = datum_params[5];\n\t    var M_BF = datum_params[6];\n\t    // if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n\t      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n\t      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n\t    };\n\t  }\n\t} // cs_geocentric_to_wgs84\n\n\t/****************************************************************/\n\t// pj_geocentic_from_wgs84()\n\t//  coordinate system definition,\n\t//  point to transform in geocentric coordinates (x,y,z)\n\tfunction geocentricFromWgs84(p, datum_type, datum_params) {\n\n\t  if (datum_type === PJD_3PARAM) {\n\t    //if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: p.x - datum_params[0],\n\t      y: p.y - datum_params[1],\n\t      z: p.z - datum_params[2],\n\t    };\n\n\t  } else if (datum_type === PJD_7PARAM) {\n\t    var Dx_BF = datum_params[0];\n\t    var Dy_BF = datum_params[1];\n\t    var Dz_BF = datum_params[2];\n\t    var Rx_BF = datum_params[3];\n\t    var Ry_BF = datum_params[4];\n\t    var Rz_BF = datum_params[5];\n\t    var M_BF = datum_params[6];\n\t    var x_tmp = (p.x - Dx_BF) / M_BF;\n\t    var y_tmp = (p.y - Dy_BF) / M_BF;\n\t    var z_tmp = (p.z - Dz_BF) / M_BF;\n\t    //if( x[io] === HUGE_VAL )\n\t    //    continue;\n\n\t    return {\n\t      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n\t      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n\t      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n\t    };\n\t  } //cs_geocentric_from_wgs84()\n\t}\n\n\tfunction checkParams(type) {\n\t  return (type === PJD_3PARAM || type === PJD_7PARAM);\n\t}\n\n\tvar datum_transform = function(source, dest, point) {\n\t  // Short cut if the datums are identical.\n\t  if (compareDatums(source, dest)) {\n\t    return point; // in this case, zero is sucess,\n\t    // whereas cs_compare_datums returns 1 to indicate TRUE\n\t    // confusing, should fix this\n\t  }\n\n\t  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n\t  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n\t    return point;\n\t  }\n\n\t  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n\n\t  // Do we need to go through geocentric coordinates?\n\t  if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n\t    return point;\n\t  }\n\n\t  // Convert to geocentric coordinates.\n\t  point = geodeticToGeocentric(point, source.es, source.a);\n\t  // Convert between datums\n\t  if (checkParams(source.datum_type)) {\n\t    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n\t  }\n\t  if (checkParams(dest.datum_type)) {\n\t    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n\t  }\n\t  return geocentricToGeodetic(point, dest.es, dest.a, dest.b);\n\n\t};\n\n\tvar adjust_axis = function(crs, denorm, point) {\n\t  var xin = point.x,\n\t    yin = point.y,\n\t    zin = point.z || 0.0;\n\t  var v, t, i;\n\t  var out = {};\n\t  for (i = 0; i < 3; i++) {\n\t    if (denorm && i === 2 && point.z === undefined) {\n\t      continue;\n\t    }\n\t    if (i === 0) {\n\t      v = xin;\n\t      t = 'x';\n\t    }\n\t    else if (i === 1) {\n\t      v = yin;\n\t      t = 'y';\n\t    }\n\t    else {\n\t      v = zin;\n\t      t = 'z';\n\t    }\n\t    switch (crs.axis[i]) {\n\t    case 'e':\n\t      out[t] = v;\n\t      break;\n\t    case 'w':\n\t      out[t] = -v;\n\t      break;\n\t    case 'n':\n\t      out[t] = v;\n\t      break;\n\t    case 's':\n\t      out[t] = -v;\n\t      break;\n\t    case 'u':\n\t      if (point[t] !== undefined) {\n\t        out.z = v;\n\t      }\n\t      break;\n\t    case 'd':\n\t      if (point[t] !== undefined) {\n\t        out.z = -v;\n\t      }\n\t      break;\n\t    default:\n\t      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n\t      return null;\n\t    }\n\t  }\n\t  return out;\n\t};\n\n\tvar toPoint = function (array){\n\t  var out = {\n\t    x: array[0],\n\t    y: array[1]\n\t  };\n\t  if (array.length>2) {\n\t    out.z = array[2];\n\t  }\n\t  if (array.length>3) {\n\t    out.m = array[3];\n\t  }\n\t  return out;\n\t};\n\n\tvar checkSanity = function (point) {\n\t  checkCoord(point.x);\n\t  checkCoord(point.y);\n\t};\n\tfunction checkCoord(num) {\n\t  if (typeof Number.isFinite === 'function') {\n\t    if (Number.isFinite(num)) {\n\t      return;\n\t    }\n\t    throw new TypeError('coordinates must be finite numbers');\n\t  }\n\t  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n\t    throw new TypeError('coordinates must be finite numbers');\n\t  }\n\t}\n\n\tfunction checkNotWGS(source, dest) {\n\t  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n\t}\n\n\tfunction transform(source, dest, point) {\n\t  var wgs84;\n\t  if (Array.isArray(point)) {\n\t    point = toPoint(point);\n\t  }\n\t  checkSanity(point);\n\t  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n\t  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n\t    wgs84 = new Projection$1('WGS84');\n\t    point = transform(source, wgs84, point);\n\t    source = wgs84;\n\t  }\n\t  // DGR, 2010/11/12\n\t  if (source.axis !== 'enu') {\n\t    point = adjust_axis(source, false, point);\n\t  }\n\t  // Transform source points to long/lat, if they aren't already.\n\t  if (source.projName === 'longlat') {\n\t    point = {\n\t      x: point.x * D2R,\n\t      y: point.y * D2R\n\t    };\n\t  }\n\t  else {\n\t    if (source.to_meter) {\n\t      point = {\n\t        x: point.x * source.to_meter,\n\t        y: point.y * source.to_meter\n\t      };\n\t    }\n\t    point = source.inverse(point); // Convert Cartesian to longlat\n\t  }\n\t  // Adjust for the prime meridian if necessary\n\t  if (source.from_greenwich) {\n\t    point.x += source.from_greenwich;\n\t  }\n\n\t  // Convert datums if needed, and if possible.\n\t  point = datum_transform(source.datum, dest.datum, point);\n\n\t  // Adjust for the prime meridian if necessary\n\t  if (dest.from_greenwich) {\n\t    point = {\n\t      x: point.x - dest.from_greenwich,\n\t      y: point.y\n\t    };\n\t  }\n\n\t  if (dest.projName === 'longlat') {\n\t    // convert radians to decimal degrees\n\t    point = {\n\t      x: point.x * R2D,\n\t      y: point.y * R2D\n\t    };\n\t  } else { // else project\n\t    point = dest.forward(point);\n\t    if (dest.to_meter) {\n\t      point = {\n\t        x: point.x / dest.to_meter,\n\t        y: point.y / dest.to_meter\n\t      };\n\t    }\n\t  }\n\n\t  // DGR, 2010/11/12\n\t  if (dest.axis !== 'enu') {\n\t    return adjust_axis(dest, true, point);\n\t  }\n\n\t  return point;\n\t}\n\n\tvar wgs84 = Projection$1('WGS84');\n\n\tfunction transformer(from, to, coords) {\n\t  var transformedArray, out, keys;\n\t  if (Array.isArray(coords)) {\n\t    transformedArray = transform(from, to, coords);\n\t    if (coords.length === 3) {\n\t      return [transformedArray.x, transformedArray.y, transformedArray.z];\n\t    }\n\t    else {\n\t      return [transformedArray.x, transformedArray.y];\n\t    }\n\t  }\n\t  else {\n\t    out = transform(from, to, coords);\n\t    keys = Object.keys(coords);\n\t    if (keys.length === 2) {\n\t      return out;\n\t    }\n\t    keys.forEach(function (key) {\n\t      if (key === 'x' || key === 'y') {\n\t        return;\n\t      }\n\t      out[key] = coords[key];\n\t    });\n\t    return out;\n\t  }\n\t}\n\n\tfunction checkProj(item) {\n\t  if (item instanceof Projection$1) {\n\t    return item;\n\t  }\n\t  if (item.oProj) {\n\t    return item.oProj;\n\t  }\n\t  return Projection$1(item);\n\t}\n\tfunction proj4$1(fromProj, toProj, coord) {\n\t  fromProj = checkProj(fromProj);\n\t  var single = false;\n\t  var obj;\n\t  if (typeof toProj === 'undefined') {\n\t    toProj = fromProj;\n\t    fromProj = wgs84;\n\t    single = true;\n\t  }\n\t  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n\t    coord = toProj;\n\t    toProj = fromProj;\n\t    fromProj = wgs84;\n\t    single = true;\n\t  }\n\t  toProj = checkProj(toProj);\n\t  if (coord) {\n\t    return transformer(fromProj, toProj, coord);\n\t  }\n\t  else {\n\t    obj = {\n\t      forward: function(coords) {\n\t        return transformer(fromProj, toProj, coords);\n\t      },\n\t      inverse: function(coords) {\n\t        return transformer(toProj, fromProj, coords);\n\t      }\n\t    };\n\t    if (single) {\n\t      obj.oProj = toProj;\n\t    }\n\t    return obj;\n\t  }\n\t}\n\n\t/**\n\t * UTM zones are grouped, and assigned to one of a group of 6\n\t * sets.\n\t *\n\t * {int} @private\n\t */\n\tvar NUM_100K_SETS = 6;\n\n\t/**\n\t * The column letters (for easting) of the lower left value, per\n\t * set.\n\t *\n\t * {string} @private\n\t */\n\tvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n\t/**\n\t * The row letters (for northing) of the lower left value, per\n\t * set.\n\t *\n\t * {string} @private\n\t */\n\tvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\n\tvar A = 65; // A\n\tvar I = 73; // I\n\tvar O = 79; // O\n\tvar V = 86; // V\n\tvar Z = 90; // Z\n\tvar mgrs = {\n\t  forward: forward$1,\n\t  inverse: inverse$1,\n\t  toPoint: toPoint$1\n\t};\n\t/**\n\t * Conversion of lat/lon to MGRS.\n\t *\n\t * @param {object} ll Object literal with lat and lon properties on a\n\t *     WGS84 ellipsoid.\n\t * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n\t *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n\t * @return {string} the MGRS string for the given location and accuracy.\n\t */\n\tfunction forward$1(ll, accuracy) {\n\t  accuracy = accuracy || 5; // default accuracy 1m\n\t  return encode(LLtoUTM({\n\t    lat: ll[1],\n\t    lon: ll[0]\n\t  }), accuracy);\n\t}\n\n\t/**\n\t * Conversion of MGRS to lat/lon.\n\t *\n\t * @param {string} mgrs MGRS string.\n\t * @return {array} An array with left (longitude), bottom (latitude), right\n\t *     (longitude) and top (latitude) values in WGS84, representing the\n\t *     bounding box for the provided MGRS reference.\n\t */\n\tfunction inverse$1(mgrs) {\n\t  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n\t  if (bbox.lat && bbox.lon) {\n\t    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n\t  }\n\t  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n\t}\n\n\tfunction toPoint$1(mgrs) {\n\t  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n\t  if (bbox.lat && bbox.lon) {\n\t    return [bbox.lon, bbox.lat];\n\t  }\n\t  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n\t}\n\t/**\n\t * Conversion from degrees to radians.\n\t *\n\t * @private\n\t * @param {number} deg the angle in degrees.\n\t * @return {number} the angle in radians.\n\t */\n\tfunction degToRad(deg) {\n\t  return (deg * (Math.PI / 180.0));\n\t}\n\n\t/**\n\t * Conversion from radians to degrees.\n\t *\n\t * @private\n\t * @param {number} rad the angle in radians.\n\t * @return {number} the angle in degrees.\n\t */\n\tfunction radToDeg(rad) {\n\t  return (180.0 * (rad / Math.PI));\n\t}\n\n\t/**\n\t * Converts a set of Longitude and Latitude co-ordinates to UTM\n\t * using the WGS84 ellipsoid.\n\t *\n\t * @private\n\t * @param {object} ll Object literal with lat and lon properties\n\t *     representing the WGS84 coordinate to be converted.\n\t * @return {object} Object literal containing the UTM value with easting,\n\t *     northing, zoneNumber and zoneLetter properties, and an optional\n\t *     accuracy property in digits. Returns null if the conversion failed.\n\t */\n\tfunction LLtoUTM(ll) {\n\t  var Lat = ll.lat;\n\t  var Long = ll.lon;\n\t  var a = 6378137.0; //ellip.radius;\n\t  var eccSquared = 0.00669438; //ellip.eccsq;\n\t  var k0 = 0.9996;\n\t  var LongOrigin;\n\t  var eccPrimeSquared;\n\t  var N, T, C, A, M;\n\t  var LatRad = degToRad(Lat);\n\t  var LongRad = degToRad(Long);\n\t  var LongOriginRad;\n\t  var ZoneNumber;\n\t  // (int)\n\t  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n\t  //Make sure the longitude 180.00 is in Zone 60\n\t  if (Long === 180) {\n\t    ZoneNumber = 60;\n\t  }\n\n\t  // Special zone for Norway\n\t  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n\t    ZoneNumber = 32;\n\t  }\n\n\t  // Special zones for Svalbard\n\t  if (Lat >= 72.0 && Lat < 84.0) {\n\t    if (Long >= 0.0 && Long < 9.0) {\n\t      ZoneNumber = 31;\n\t    }\n\t    else if (Long >= 9.0 && Long < 21.0) {\n\t      ZoneNumber = 33;\n\t    }\n\t    else if (Long >= 21.0 && Long < 33.0) {\n\t      ZoneNumber = 35;\n\t    }\n\t    else if (Long >= 33.0 && Long < 42.0) {\n\t      ZoneNumber = 37;\n\t    }\n\t  }\n\n\t  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n\t  // in middle of\n\t  // zone\n\t  LongOriginRad = degToRad(LongOrigin);\n\n\t  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n\t  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n\t  T = Math.tan(LatRad) * Math.tan(LatRad);\n\t  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n\t  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n\t  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n\t  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n\t  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n\t  if (Lat < 0.0) {\n\t    UTMNorthing += 10000000.0; //10000000 meter offset for\n\t    // southern hemisphere\n\t  }\n\n\t  return {\n\t    northing: Math.round(UTMNorthing),\n\t    easting: Math.round(UTMEasting),\n\t    zoneNumber: ZoneNumber,\n\t    zoneLetter: getLetterDesignator(Lat)\n\t  };\n\t}\n\n\t/**\n\t * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n\t * class where the Zone can be specified as a single string eg.\"60N\" which\n\t * is then broken down into the ZoneNumber and ZoneLetter.\n\t *\n\t * @private\n\t * @param {object} utm An object literal with northing, easting, zoneNumber\n\t *     and zoneLetter properties. If an optional accuracy property is\n\t *     provided (in meters), a bounding box will be returned instead of\n\t *     latitude and longitude.\n\t * @return {object} An object literal containing either lat and lon values\n\t *     (if no accuracy was provided), or top, right, bottom and left values\n\t *     for the bounding box calculated according to the provided accuracy.\n\t *     Returns null if the conversion failed.\n\t */\n\tfunction UTMtoLL(utm) {\n\n\t  var UTMNorthing = utm.northing;\n\t  var UTMEasting = utm.easting;\n\t  var zoneLetter = utm.zoneLetter;\n\t  var zoneNumber = utm.zoneNumber;\n\t  // check the ZoneNummber is valid\n\t  if (zoneNumber < 0 || zoneNumber > 60) {\n\t    return null;\n\t  }\n\n\t  var k0 = 0.9996;\n\t  var a = 6378137.0; //ellip.radius;\n\t  var eccSquared = 0.00669438; //ellip.eccsq;\n\t  var eccPrimeSquared;\n\t  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n\t  var N1, T1, C1, R1, D, M;\n\t  var LongOrigin;\n\t  var mu, phi1Rad;\n\n\t  // remove 500,000 meter offset for longitude\n\t  var x = UTMEasting - 500000.0;\n\t  var y = UTMNorthing;\n\n\t  // We must know somehow if we are in the Northern or Southern\n\t  // hemisphere, this is the only time we use the letter So even\n\t  // if the Zone letter isn't exactly correct it should indicate\n\t  // the hemisphere correctly\n\t  if (zoneLetter < 'N') {\n\t    y -= 10000000.0; // remove 10,000,000 meter offset used\n\t    // for southern hemisphere\n\t  }\n\n\t  // There are 60 zones with zone 1 being at West -180 to -174\n\t  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n\t  // in middle of\n\t  // zone\n\n\t  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n\t  M = y / k0;\n\t  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n\t  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n\t  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n\t  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n\t  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n\t  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n\t  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n\t  D = x / (N1 * k0);\n\n\t  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n\t  lat = radToDeg(lat);\n\n\t  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n\t  lon = LongOrigin + radToDeg(lon);\n\n\t  var result;\n\t  if (utm.accuracy) {\n\t    var topRight = UTMtoLL({\n\t      northing: utm.northing + utm.accuracy,\n\t      easting: utm.easting + utm.accuracy,\n\t      zoneLetter: utm.zoneLetter,\n\t      zoneNumber: utm.zoneNumber\n\t    });\n\t    result = {\n\t      top: topRight.lat,\n\t      right: topRight.lon,\n\t      bottom: lat,\n\t      left: lon\n\t    };\n\t  }\n\t  else {\n\t    result = {\n\t      lat: lat,\n\t      lon: lon\n\t    };\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Calculates the MGRS letter designator for the given latitude.\n\t *\n\t * @private\n\t * @param {number} lat The latitude in WGS84 to get the letter designator\n\t *     for.\n\t * @return {char} The letter designator.\n\t */\n\tfunction getLetterDesignator(lat) {\n\t  //This is here as an error flag to show that the Latitude is\n\t  //outside MGRS limits\n\t  var LetterDesignator = 'Z';\n\n\t  if ((84 >= lat) && (lat >= 72)) {\n\t    LetterDesignator = 'X';\n\t  }\n\t  else if ((72 > lat) && (lat >= 64)) {\n\t    LetterDesignator = 'W';\n\t  }\n\t  else if ((64 > lat) && (lat >= 56)) {\n\t    LetterDesignator = 'V';\n\t  }\n\t  else if ((56 > lat) && (lat >= 48)) {\n\t    LetterDesignator = 'U';\n\t  }\n\t  else if ((48 > lat) && (lat >= 40)) {\n\t    LetterDesignator = 'T';\n\t  }\n\t  else if ((40 > lat) && (lat >= 32)) {\n\t    LetterDesignator = 'S';\n\t  }\n\t  else if ((32 > lat) && (lat >= 24)) {\n\t    LetterDesignator = 'R';\n\t  }\n\t  else if ((24 > lat) && (lat >= 16)) {\n\t    LetterDesignator = 'Q';\n\t  }\n\t  else if ((16 > lat) && (lat >= 8)) {\n\t    LetterDesignator = 'P';\n\t  }\n\t  else if ((8 > lat) && (lat >= 0)) {\n\t    LetterDesignator = 'N';\n\t  }\n\t  else if ((0 > lat) && (lat >= -8)) {\n\t    LetterDesignator = 'M';\n\t  }\n\t  else if ((-8 > lat) && (lat >= -16)) {\n\t    LetterDesignator = 'L';\n\t  }\n\t  else if ((-16 > lat) && (lat >= -24)) {\n\t    LetterDesignator = 'K';\n\t  }\n\t  else if ((-24 > lat) && (lat >= -32)) {\n\t    LetterDesignator = 'J';\n\t  }\n\t  else if ((-32 > lat) && (lat >= -40)) {\n\t    LetterDesignator = 'H';\n\t  }\n\t  else if ((-40 > lat) && (lat >= -48)) {\n\t    LetterDesignator = 'G';\n\t  }\n\t  else if ((-48 > lat) && (lat >= -56)) {\n\t    LetterDesignator = 'F';\n\t  }\n\t  else if ((-56 > lat) && (lat >= -64)) {\n\t    LetterDesignator = 'E';\n\t  }\n\t  else if ((-64 > lat) && (lat >= -72)) {\n\t    LetterDesignator = 'D';\n\t  }\n\t  else if ((-72 > lat) && (lat >= -80)) {\n\t    LetterDesignator = 'C';\n\t  }\n\t  return LetterDesignator;\n\t}\n\n\t/**\n\t * Encodes a UTM location as MGRS string.\n\t *\n\t * @private\n\t * @param {object} utm An object literal with easting, northing,\n\t *     zoneLetter, zoneNumber\n\t * @param {number} accuracy Accuracy in digits (1-5).\n\t * @return {string} MGRS string for the given UTM location.\n\t */\n\tfunction encode(utm, accuracy) {\n\t  // prepend with leading zeroes\n\t  var seasting = \"00000\" + utm.easting,\n\t    snorthing = \"00000\" + utm.northing;\n\n\t  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n\t}\n\n\t/**\n\t * Get the two letter 100k designator for a given UTM easting,\n\t * northing and zone number value.\n\t *\n\t * @private\n\t * @param {number} easting\n\t * @param {number} northing\n\t * @param {number} zoneNumber\n\t * @return the two letter 100k designator for the given UTM location.\n\t */\n\tfunction get100kID(easting, northing, zoneNumber) {\n\t  var setParm = get100kSetForZone(zoneNumber);\n\t  var setColumn = Math.floor(easting / 100000);\n\t  var setRow = Math.floor(northing / 100000) % 20;\n\t  return getLetter100kID(setColumn, setRow, setParm);\n\t}\n\n\t/**\n\t * Given a UTM zone number, figure out the MGRS 100K set it is in.\n\t *\n\t * @private\n\t * @param {number} i An UTM zone number.\n\t * @return {number} the 100k set the UTM zone is in.\n\t */\n\tfunction get100kSetForZone(i) {\n\t  var setParm = i % NUM_100K_SETS;\n\t  if (setParm === 0) {\n\t    setParm = NUM_100K_SETS;\n\t  }\n\n\t  return setParm;\n\t}\n\n\t/**\n\t * Get the two-letter MGRS 100k designator given information\n\t * translated from the UTM northing, easting and zone number.\n\t *\n\t * @private\n\t * @param {number} column the column index as it relates to the MGRS\n\t *        100k set spreadsheet, created from the UTM easting.\n\t *        Values are 1-8.\n\t * @param {number} row the row index as it relates to the MGRS 100k set\n\t *        spreadsheet, created from the UTM northing value. Values\n\t *        are from 0-19.\n\t * @param {number} parm the set block, as it relates to the MGRS 100k set\n\t *        spreadsheet, created from the UTM zone. Values are from\n\t *        1-60.\n\t * @return two letter MGRS 100k code.\n\t */\n\tfunction getLetter100kID(column, row, parm) {\n\t  // colOrigin and rowOrigin are the letters at the origin of the set\n\t  var index = parm - 1;\n\t  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n\t  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n\t  // colInt and rowInt are the letters to build to return\n\t  var colInt = colOrigin + column - 1;\n\t  var rowInt = rowOrigin + row;\n\t  var rollover = false;\n\n\t  if (colInt > Z) {\n\t    colInt = colInt - Z + A - 1;\n\t    rollover = true;\n\t  }\n\n\t  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n\t    colInt++;\n\t  }\n\n\t  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n\t    colInt++;\n\n\t    if (colInt === I) {\n\t      colInt++;\n\t    }\n\t  }\n\n\t  if (colInt > Z) {\n\t    colInt = colInt - Z + A - 1;\n\t  }\n\n\t  if (rowInt > V) {\n\t    rowInt = rowInt - V + A - 1;\n\t    rollover = true;\n\t  }\n\t  else {\n\t    rollover = false;\n\t  }\n\n\t  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n\t    rowInt++;\n\t  }\n\n\t  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n\t    rowInt++;\n\n\t    if (rowInt === I) {\n\t      rowInt++;\n\t    }\n\t  }\n\n\t  if (rowInt > V) {\n\t    rowInt = rowInt - V + A - 1;\n\t  }\n\n\t  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n\t  return twoLetter;\n\t}\n\n\t/**\n\t * Decode the UTM parameters from a MGRS string.\n\t *\n\t * @private\n\t * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n\t * @return {object} An object literal with easting, northing, zoneLetter,\n\t *     zoneNumber and accuracy (in meters) properties.\n\t */\n\tfunction decode(mgrsString) {\n\n\t  if (mgrsString && mgrsString.length === 0) {\n\t    throw (\"MGRSPoint coverting from nothing\");\n\t  }\n\n\t  var length = mgrsString.length;\n\n\t  var hunK = null;\n\t  var sb = \"\";\n\t  var testChar;\n\t  var i = 0;\n\n\t  // get Zone number\n\t  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n\t    if (i >= 2) {\n\t      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n\t    }\n\t    sb += testChar;\n\t    i++;\n\t  }\n\n\t  var zoneNumber = parseInt(sb, 10);\n\n\t  if (i === 0 || i + 3 > length) {\n\t    // A good MGRS string has to be 4-5 digits long,\n\t    // ##AAA/#AAA at least.\n\t    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n\t  }\n\n\t  var zoneLetter = mgrsString.charAt(i++);\n\n\t  // Should we check the zone letter here? Why not.\n\t  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n\t    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n\t  }\n\n\t  hunK = mgrsString.substring(i, i += 2);\n\n\t  var set = get100kSetForZone(zoneNumber);\n\n\t  var east100k = getEastingFromChar(hunK.charAt(0), set);\n\t  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n\t  // We have a bug where the northing may be 2000000 too low.\n\t  // How\n\t  // do we know when to roll over?\n\n\t  while (north100k < getMinNorthing(zoneLetter)) {\n\t    north100k += 2000000;\n\t  }\n\n\t  // calculate the char index for easting/northing separator\n\t  var remainder = length - i;\n\n\t  if (remainder % 2 !== 0) {\n\t    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n\t  }\n\n\t  var sep = remainder / 2;\n\n\t  var sepEasting = 0.0;\n\t  var sepNorthing = 0.0;\n\t  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n\t  if (sep > 0) {\n\t    accuracyBonus = 100000.0 / Math.pow(10, sep);\n\t    sepEastingString = mgrsString.substring(i, i + sep);\n\t    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n\t    sepNorthingString = mgrsString.substring(i + sep);\n\t    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n\t  }\n\n\t  easting = sepEasting + east100k;\n\t  northing = sepNorthing + north100k;\n\n\t  return {\n\t    easting: easting,\n\t    northing: northing,\n\t    zoneLetter: zoneLetter,\n\t    zoneNumber: zoneNumber,\n\t    accuracy: accuracyBonus\n\t  };\n\t}\n\n\t/**\n\t * Given the first letter from a two-letter MGRS 100k zone, and given the\n\t * MGRS table set for the zone number, figure out the easting value that\n\t * should be added to the other, secondary easting value.\n\t *\n\t * @private\n\t * @param {char} e The first letter from a two-letter MGRS 100k zone.\n\t * @param {number} set The MGRS table set for the zone number.\n\t * @return {number} The easting value for the given letter and set.\n\t */\n\tfunction getEastingFromChar(e, set) {\n\t  // colOrigin is the letter at the origin of the set for the\n\t  // column\n\t  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n\t  var eastingValue = 100000.0;\n\t  var rewindMarker = false;\n\n\t  while (curCol !== e.charCodeAt(0)) {\n\t    curCol++;\n\t    if (curCol === I) {\n\t      curCol++;\n\t    }\n\t    if (curCol === O) {\n\t      curCol++;\n\t    }\n\t    if (curCol > Z) {\n\t      if (rewindMarker) {\n\t        throw (\"Bad character: \" + e);\n\t      }\n\t      curCol = A;\n\t      rewindMarker = true;\n\t    }\n\t    eastingValue += 100000.0;\n\t  }\n\n\t  return eastingValue;\n\t}\n\n\t/**\n\t * Given the second letter from a two-letter MGRS 100k zone, and given the\n\t * MGRS table set for the zone number, figure out the northing value that\n\t * should be added to the other, secondary northing value. You have to\n\t * remember that Northings are determined from the equator, and the vertical\n\t * cycle of letters mean a 2000000 additional northing meters. This happens\n\t * approx. every 18 degrees of latitude. This method does *NOT* count any\n\t * additional northings. You have to figure out how many 2000000 meters need\n\t * to be added for the zone letter of the MGRS coordinate.\n\t *\n\t * @private\n\t * @param {char} n Second letter of the MGRS 100k zone\n\t * @param {number} set The MGRS table set number, which is dependent on the\n\t *     UTM zone number.\n\t * @return {number} The northing value for the given letter and set.\n\t */\n\tfunction getNorthingFromChar(n, set) {\n\n\t  if (n > 'V') {\n\t    throw (\"MGRSPoint given invalid Northing \" + n);\n\t  }\n\n\t  // rowOrigin is the letter at the origin of the set for the\n\t  // column\n\t  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n\t  var northingValue = 0.0;\n\t  var rewindMarker = false;\n\n\t  while (curRow !== n.charCodeAt(0)) {\n\t    curRow++;\n\t    if (curRow === I) {\n\t      curRow++;\n\t    }\n\t    if (curRow === O) {\n\t      curRow++;\n\t    }\n\t    // fixing a bug making whole application hang in this loop\n\t    // when 'n' is a wrong character\n\t    if (curRow > V) {\n\t      if (rewindMarker) { // making sure that this loop ends\n\t        throw (\"Bad character: \" + n);\n\t      }\n\t      curRow = A;\n\t      rewindMarker = true;\n\t    }\n\t    northingValue += 100000.0;\n\t  }\n\n\t  return northingValue;\n\t}\n\n\t/**\n\t * The function getMinNorthing returns the minimum northing value of a MGRS\n\t * zone.\n\t *\n\t * Ported from Geotrans' c Lattitude_Band_Value structure table.\n\t *\n\t * @private\n\t * @param {char} zoneLetter The MGRS zone to get the min northing for.\n\t * @return {number}\n\t */\n\tfunction getMinNorthing(zoneLetter) {\n\t  var northing;\n\t  switch (zoneLetter) {\n\t  case 'C':\n\t    northing = 1100000.0;\n\t    break;\n\t  case 'D':\n\t    northing = 2000000.0;\n\t    break;\n\t  case 'E':\n\t    northing = 2800000.0;\n\t    break;\n\t  case 'F':\n\t    northing = 3700000.0;\n\t    break;\n\t  case 'G':\n\t    northing = 4600000.0;\n\t    break;\n\t  case 'H':\n\t    northing = 5500000.0;\n\t    break;\n\t  case 'J':\n\t    northing = 6400000.0;\n\t    break;\n\t  case 'K':\n\t    northing = 7300000.0;\n\t    break;\n\t  case 'L':\n\t    northing = 8200000.0;\n\t    break;\n\t  case 'M':\n\t    northing = 9100000.0;\n\t    break;\n\t  case 'N':\n\t    northing = 0.0;\n\t    break;\n\t  case 'P':\n\t    northing = 800000.0;\n\t    break;\n\t  case 'Q':\n\t    northing = 1700000.0;\n\t    break;\n\t  case 'R':\n\t    northing = 2600000.0;\n\t    break;\n\t  case 'S':\n\t    northing = 3500000.0;\n\t    break;\n\t  case 'T':\n\t    northing = 4400000.0;\n\t    break;\n\t  case 'U':\n\t    northing = 5300000.0;\n\t    break;\n\t  case 'V':\n\t    northing = 6200000.0;\n\t    break;\n\t  case 'W':\n\t    northing = 7000000.0;\n\t    break;\n\t  case 'X':\n\t    northing = 7900000.0;\n\t    break;\n\t  default:\n\t    northing = -1.0;\n\t  }\n\t  if (northing >= 0.0) {\n\t    return northing;\n\t  }\n\t  else {\n\t    throw (\"Invalid zone letter: \" + zoneLetter);\n\t  }\n\n\t}\n\n\tfunction Point(x, y, z) {\n\t  if (!(this instanceof Point)) {\n\t    return new Point(x, y, z);\n\t  }\n\t  if (Array.isArray(x)) {\n\t    this.x = x[0];\n\t    this.y = x[1];\n\t    this.z = x[2] || 0.0;\n\t  } else if(typeof x === 'object') {\n\t    this.x = x.x;\n\t    this.y = x.y;\n\t    this.z = x.z || 0.0;\n\t  } else if (typeof x === 'string' && typeof y === 'undefined') {\n\t    var coords = x.split(',');\n\t    this.x = parseFloat(coords[0], 10);\n\t    this.y = parseFloat(coords[1], 10);\n\t    this.z = parseFloat(coords[2], 10) || 0.0;\n\t  } else {\n\t    this.x = x;\n\t    this.y = y;\n\t    this.z = z || 0.0;\n\t  }\n\t  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n\t}\n\n\tPoint.fromMGRS = function(mgrsStr) {\n\t  return new Point(toPoint$1(mgrsStr));\n\t};\n\tPoint.prototype.toMGRS = function(accuracy) {\n\t  return forward$1([this.x, this.y], accuracy);\n\t};\n\n\tvar version = \"2.4.4\";\n\n\tvar C00 = 1;\n\tvar C02 = 0.25;\n\tvar C04 = 0.046875;\n\tvar C06 = 0.01953125;\n\tvar C08 = 0.01068115234375;\n\tvar C22 = 0.75;\n\tvar C44 = 0.46875;\n\tvar C46 = 0.01302083333333333333;\n\tvar C48 = 0.00712076822916666666;\n\tvar C66 = 0.36458333333333333333;\n\tvar C68 = 0.00569661458333333333;\n\tvar C88 = 0.3076171875;\n\n\tvar pj_enfn = function(es) {\n\t  var en = [];\n\t  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n\t  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n\t  var t = es * es;\n\t  en[2] = t * (C44 - es * (C46 + es * C48));\n\t  t *= es;\n\t  en[3] = t * (C66 - es * C68);\n\t  en[4] = t * es * C88;\n\t  return en;\n\t};\n\n\tvar pj_mlfn = function(phi, sphi, cphi, en) {\n\t  cphi *= sphi;\n\t  sphi *= sphi;\n\t  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n\t};\n\n\tvar MAX_ITER = 20;\n\n\tvar pj_inv_mlfn = function(arg, es, en) {\n\t  var k = 1 / (1 - es);\n\t  var phi = arg;\n\t  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n\t    var s = Math.sin(phi);\n\t    var t = 1 - es * s * s;\n\t    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n\t    //phi -= t * (t * Math.sqrt(t)) * k;\n\t    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n\t    phi -= t;\n\t    if (Math.abs(t) < EPSLN) {\n\t      return phi;\n\t    }\n\t  }\n\t  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n\t  return phi;\n\t};\n\n\t// Heavily based on this tmerc projection implementation\n\t// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\n\tfunction init$2() {\n\t  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n\t  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n\t  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n\t  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n\t  if (this.es) {\n\t    this.en = pj_enfn(this.es);\n\t    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n\t  }\n\t}\n\n\t/**\n\t    Transverse Mercator Forward  - long/lat to x/y\n\t    long/lat in radians\n\t  */\n\tfunction forward$2(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  var con;\n\t  var x, y;\n\t  var sin_phi = Math.sin(lat);\n\t  var cos_phi = Math.cos(lat);\n\n\t  if (!this.es) {\n\t    var b = cos_phi * Math.sin(delta_lon);\n\n\t    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n\t      return (93);\n\t    }\n\t    else {\n\t      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n\t      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n\t      b = Math.abs(y);\n\n\t      if (b >= 1) {\n\t        if ((b - 1) > EPSLN) {\n\t          return (93);\n\t        }\n\t        else {\n\t          y = 0;\n\t        }\n\t      }\n\t      else {\n\t        y = Math.acos(y);\n\t      }\n\n\t      if (lat < 0) {\n\t        y = -y;\n\t      }\n\n\t      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n\t    }\n\t  }\n\t  else {\n\t    var al = cos_phi * delta_lon;\n\t    var als = Math.pow(al, 2);\n\t    var c = this.ep2 * Math.pow(cos_phi, 2);\n\t    var cs = Math.pow(c, 2);\n\t    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n\t    var t = Math.pow(tq, 2);\n\t    var ts = Math.pow(t, 2);\n\t    con = 1 - this.es * Math.pow(sin_phi, 2);\n\t    al = al / Math.sqrt(con);\n\t    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n\t    x = this.a * (this.k0 * al * (1 +\n\t      als / 6 * (1 - t + c +\n\t      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n\t      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n\t      this.x0;\n\n\t    y = this.a * (this.k0 * (ml - this.ml0 +\n\t      sin_phi * delta_lon * al / 2 * (1 +\n\t      als / 12 * (5 - t + 9 * c + 4 * cs +\n\t      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n\t      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n\t      this.y0;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\n\t  return p;\n\t}\n\n\t/**\n\t    Transverse Mercator Inverse  -  x/y to long/lat\n\t  */\n\tfunction inverse$2(p) {\n\t  var con, phi;\n\t  var lat, lon;\n\t  var x = (p.x - this.x0) * (1 / this.a);\n\t  var y = (p.y - this.y0) * (1 / this.a);\n\n\t  if (!this.es) {\n\t    var f = Math.exp(x / this.k0);\n\t    var g = 0.5 * (f - 1 / f);\n\t    var temp = this.lat0 + y / this.k0;\n\t    var h = Math.cos(temp);\n\t    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n\t    lat = Math.asin(con);\n\n\t    if (y < 0) {\n\t      lat = -lat;\n\t    }\n\n\t    if ((g === 0) && (h === 0)) {\n\t      lon = 0;\n\t    }\n\t    else {\n\t      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n\t    }\n\t  }\n\t  else { // ellipsoidal form\n\t    con = this.ml0 + y / this.k0;\n\t    phi = pj_inv_mlfn(con, this.es, this.en);\n\n\t    if (Math.abs(phi) < HALF_PI) {\n\t      var sin_phi = Math.sin(phi);\n\t      var cos_phi = Math.cos(phi);\n\t      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n\t      var c = this.ep2 * Math.pow(cos_phi, 2);\n\t      var cs = Math.pow(c, 2);\n\t      var t = Math.pow(tan_phi, 2);\n\t      var ts = Math.pow(t, 2);\n\t      con = 1 - this.es * Math.pow(sin_phi, 2);\n\t      var d = x * Math.sqrt(con) / this.k0;\n\t      var ds = Math.pow(d, 2);\n\t      con = con * tan_phi;\n\n\t      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n\t        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n\t        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n\t        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n\t      lon = adjust_lon(this.long0 + (d * (1 -\n\t        ds / 6 * (1 + 2 * t + c -\n\t        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n\t        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n\t    }\n\t    else {\n\t      lat = HALF_PI * sign(y);\n\t      lon = 0;\n\t    }\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$3 = [\"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\n\tvar tmerc = {\n\t  init: init$2,\n\t  forward: forward$2,\n\t  inverse: inverse$2,\n\t  names: names$3\n\t};\n\n\tvar sinh = function(x) {\n\t  var r = Math.exp(x);\n\t  r = (r - 1 / r) / 2;\n\t  return r;\n\t};\n\n\tvar hypot = function(x, y) {\n\t  x = Math.abs(x);\n\t  y = Math.abs(y);\n\t  var a = Math.max(x, y);\n\t  var b = Math.min(x, y) / (a ? a : 1);\n\n\t  return a * Math.sqrt(1 + Math.pow(b, 2));\n\t};\n\n\tvar log1py = function(x) {\n\t  var y = 1 + x;\n\t  var z = y - 1;\n\n\t  return z === 0 ? x : x * Math.log(y) / z;\n\t};\n\n\tvar asinhy = function(x) {\n\t  var y = Math.abs(x);\n\t  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n\t  return x < 0 ? -y : y;\n\t};\n\n\tvar gatg = function(pp, B) {\n\t  var cos_2B = 2 * Math.cos(2 * B);\n\t  var i = pp.length - 1;\n\t  var h1 = pp[i];\n\t  var h2 = 0;\n\t  var h;\n\n\t  while (--i >= 0) {\n\t    h = -h2 + cos_2B * h1 + pp[i];\n\t    h2 = h1;\n\t    h1 = h;\n\t  }\n\n\t  return (B + h * Math.sin(2 * B));\n\t};\n\n\tvar clens = function(pp, arg_r) {\n\t  var r = 2 * Math.cos(arg_r);\n\t  var i = pp.length - 1;\n\t  var hr1 = pp[i];\n\t  var hr2 = 0;\n\t  var hr;\n\n\t  while (--i >= 0) {\n\t    hr = -hr2 + r * hr1 + pp[i];\n\t    hr2 = hr1;\n\t    hr1 = hr;\n\t  }\n\n\t  return Math.sin(arg_r) * hr;\n\t};\n\n\tvar cosh = function(x) {\n\t  var r = Math.exp(x);\n\t  r = (r + 1 / r) / 2;\n\t  return r;\n\t};\n\n\tvar clens_cmplx = function(pp, arg_r, arg_i) {\n\t  var sin_arg_r = Math.sin(arg_r);\n\t  var cos_arg_r = Math.cos(arg_r);\n\t  var sinh_arg_i = sinh(arg_i);\n\t  var cosh_arg_i = cosh(arg_i);\n\t  var r = 2 * cos_arg_r * cosh_arg_i;\n\t  var i = -2 * sin_arg_r * sinh_arg_i;\n\t  var j = pp.length - 1;\n\t  var hr = pp[j];\n\t  var hi1 = 0;\n\t  var hr1 = 0;\n\t  var hi = 0;\n\t  var hr2;\n\t  var hi2;\n\n\t  while (--j >= 0) {\n\t    hr2 = hr1;\n\t    hi2 = hi1;\n\t    hr1 = hr;\n\t    hi1 = hi;\n\t    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n\t    hi = -hi2 + i * hr1 + r * hi1;\n\t  }\n\n\t  r = sin_arg_r * cosh_arg_i;\n\t  i = cos_arg_r * sinh_arg_i;\n\n\t  return [r * hr - i * hi, r * hi + i * hr];\n\t};\n\n\t// Heavily based on this etmerc projection implementation\n\t// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\n\tfunction init$3() {\n\t  if (this.es === undefined || this.es <= 0) {\n\t    throw new Error('incorrect elliptical usage');\n\t  }\n\n\t  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n\t  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n\t  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n\t  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n\t  this.cgb = [];\n\t  this.cbg = [];\n\t  this.utg = [];\n\t  this.gtu = [];\n\n\t  var f = this.es / (1 + Math.sqrt(1 - this.es));\n\t  var n = f / (2 - f);\n\t  var np = n;\n\n\t  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n\t  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n\t  np = np * n;\n\t  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n\t  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n\t  np = np * n;\n\t  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n\t  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n\t  np = np * n;\n\t  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n\t  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n\t  np = np * n;\n\t  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n\t  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n\t  np = np * n;\n\t  this.cgb[5] = np * (601676 / 22275);\n\t  this.cbg[5] = np * (444337 / 155925);\n\n\t  np = Math.pow(n, 2);\n\t  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n\t  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n\t  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n\t  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n\t  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n\t  np = np * n;\n\t  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n\t  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n\t  np = np * n;\n\t  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n\t  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n\t  np = np * n;\n\t  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n\t  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n\t  np = np * n;\n\t  this.utg[5] = np * (-20648693 / 638668800);\n\t  this.gtu[5] = np * (212378941 / 319334400);\n\n\t  var Z = gatg(this.cbg, this.lat0);\n\t  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n\t}\n\n\tfunction forward$3(p) {\n\t  var Ce = adjust_lon(p.x - this.long0);\n\t  var Cn = p.y;\n\n\t  Cn = gatg(this.cbg, Cn);\n\t  var sin_Cn = Math.sin(Cn);\n\t  var cos_Cn = Math.cos(Cn);\n\t  var sin_Ce = Math.sin(Ce);\n\t  var cos_Ce = Math.cos(Ce);\n\n\t  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n\t  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n\t  Ce = asinhy(Math.tan(Ce));\n\n\t  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n\t  Cn = Cn + tmp[0];\n\t  Ce = Ce + tmp[1];\n\n\t  var x;\n\t  var y;\n\n\t  if (Math.abs(Ce) <= 2.623395162778) {\n\t    x = this.a * (this.Qn * Ce) + this.x0;\n\t    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n\t  }\n\t  else {\n\t    x = Infinity;\n\t    y = Infinity;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\n\t  return p;\n\t}\n\n\tfunction inverse$3(p) {\n\t  var Ce = (p.x - this.x0) * (1 / this.a);\n\t  var Cn = (p.y - this.y0) * (1 / this.a);\n\n\t  Cn = (Cn - this.Zb) / this.Qn;\n\t  Ce = Ce / this.Qn;\n\n\t  var lon;\n\t  var lat;\n\n\t  if (Math.abs(Ce) <= 2.623395162778) {\n\t    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n\t    Cn = Cn + tmp[0];\n\t    Ce = Ce + tmp[1];\n\t    Ce = Math.atan(sinh(Ce));\n\n\t    var sin_Cn = Math.sin(Cn);\n\t    var cos_Cn = Math.cos(Cn);\n\t    var sin_Ce = Math.sin(Ce);\n\t    var cos_Ce = Math.cos(Ce);\n\n\t    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n\t    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n\t    lon = adjust_lon(Ce + this.long0);\n\t    lat = gatg(this.cgb, Cn);\n\t  }\n\t  else {\n\t    lon = Infinity;\n\t    lat = Infinity;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$4 = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\"];\n\tvar etmerc = {\n\t  init: init$3,\n\t  forward: forward$3,\n\t  inverse: inverse$3,\n\t  names: names$4\n\t};\n\n\tvar adjust_zone = function(zone, lon) {\n\t  if (zone === undefined) {\n\t    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n\t    if (zone < 0) {\n\t      return 0;\n\t    } else if (zone > 60) {\n\t      return 60;\n\t    }\n\t  }\n\t  return zone;\n\t};\n\n\tvar dependsOn = 'etmerc';\n\tfunction init$4() {\n\t  var zone = adjust_zone(this.zone, this.long0);\n\t  if (zone === undefined) {\n\t    throw new Error('unknown utm zone');\n\t  }\n\t  this.lat0 = 0;\n\t  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n\t  this.x0 = 500000;\n\t  this.y0 = this.utmSouth ? 10000000 : 0;\n\t  this.k0 = 0.9996;\n\n\t  etmerc.init.apply(this);\n\t  this.forward = etmerc.forward;\n\t  this.inverse = etmerc.inverse;\n\t}\n\n\tvar names$5 = [\"Universal Transverse Mercator System\", \"utm\"];\n\tvar utm = {\n\t  init: init$4,\n\t  names: names$5,\n\t  dependsOn: dependsOn\n\t};\n\n\tvar srat = function(esinp, exp) {\n\t  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n\t};\n\n\tvar MAX_ITER$1 = 20;\n\tfunction init$6() {\n\t  var sphi = Math.sin(this.lat0);\n\t  var cphi = Math.cos(this.lat0);\n\t  cphi *= cphi;\n\t  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n\t  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n\t  this.phic0 = Math.asin(sphi / this.C);\n\t  this.ratexp = 0.5 * this.C * this.e;\n\t  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n\t}\n\n\tfunction forward$5(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n\t  p.x = this.C * lon;\n\t  return p;\n\t}\n\n\tfunction inverse$5(p) {\n\t  var DEL_TOL = 1e-14;\n\t  var lon = p.x / this.C;\n\t  var lat = p.y;\n\t  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n\t  for (var i = MAX_ITER$1; i > 0; --i) {\n\t    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n\t    if (Math.abs(lat - p.y) < DEL_TOL) {\n\t      break;\n\t    }\n\t    p.y = lat;\n\t  }\n\t  /* convergence failed */\n\t  if (!i) {\n\t    return null;\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$7 = [\"gauss\"];\n\tvar gauss = {\n\t  init: init$6,\n\t  forward: forward$5,\n\t  inverse: inverse$5,\n\t  names: names$7\n\t};\n\n\tfunction init$5() {\n\t  gauss.init.apply(this);\n\t  if (!this.rc) {\n\t    return;\n\t  }\n\t  this.sinc0 = Math.sin(this.phic0);\n\t  this.cosc0 = Math.cos(this.phic0);\n\t  this.R2 = 2 * this.rc;\n\t  if (!this.title) {\n\t    this.title = \"Oblique Stereographic Alternative\";\n\t  }\n\t}\n\n\tfunction forward$4(p) {\n\t  var sinc, cosc, cosl, k;\n\t  p.x = adjust_lon(p.x - this.long0);\n\t  gauss.forward.apply(this, [p]);\n\t  sinc = Math.sin(p.y);\n\t  cosc = Math.cos(p.y);\n\t  cosl = Math.cos(p.x);\n\t  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n\t  p.x = k * cosc * Math.sin(p.x);\n\t  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n\t  p.x = this.a * p.x + this.x0;\n\t  p.y = this.a * p.y + this.y0;\n\t  return p;\n\t}\n\n\tfunction inverse$4(p) {\n\t  var sinc, cosc, lon, lat, rho;\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  p.x /= this.k0;\n\t  p.y /= this.k0;\n\t  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n\t    var c = 2 * Math.atan2(rho, this.R2);\n\t    sinc = Math.sin(c);\n\t    cosc = Math.cos(c);\n\t    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n\t    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n\t  }\n\t  else {\n\t    lat = this.phic0;\n\t    lon = 0;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  gauss.inverse.apply(this, [p]);\n\t  p.x = adjust_lon(p.x + this.long0);\n\t  return p;\n\t}\n\n\tvar names$6 = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\"];\n\tvar sterea = {\n\t  init: init$5,\n\t  forward: forward$4,\n\t  inverse: inverse$4,\n\t  names: names$6\n\t};\n\n\tfunction ssfn_(phit, sinphi, eccen) {\n\t  sinphi *= eccen;\n\t  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n\t}\n\n\tfunction init$7() {\n\t  this.coslat0 = Math.cos(this.lat0);\n\t  this.sinlat0 = Math.sin(this.lat0);\n\t  if (this.sphere) {\n\t    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n\t      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      if (this.lat0 > 0) {\n\t        //North pole\n\t        //trace('stere:north pole');\n\t        this.con = 1;\n\t      }\n\t      else {\n\t        //South pole\n\t        //trace('stere:south pole');\n\t        this.con = -1;\n\t      }\n\t    }\n\t    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n\t    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n\t      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n\t    }\n\t    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n\t    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n\t    this.cosX0 = Math.cos(this.X0);\n\t    this.sinX0 = Math.sin(this.X0);\n\t  }\n\t}\n\n\t// Stereographic forward equations--mapping lat,long to x,y\n\tfunction forward$6(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var sinlat = Math.sin(lat);\n\t  var coslat = Math.cos(lat);\n\t  var A, X, sinX, cosX, ts, rh;\n\t  var dlon = adjust_lon(lon - this.long0);\n\n\t  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n\t    //case of the origine point\n\t    //trace('stere:this is the origin point');\n\t    p.x = NaN;\n\t    p.y = NaN;\n\t    return p;\n\t  }\n\t  if (this.sphere) {\n\t    //trace('stere:sphere case');\n\t    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n\t    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n\t    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n\t    return p;\n\t  }\n\t  else {\n\t    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n\t    cosX = Math.cos(X);\n\t    sinX = Math.sin(X);\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n\t      rh = 2 * this.a * this.k0 * ts / this.cons;\n\t      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n\t      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n\t      //trace(p.toString());\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sinlat0) < EPSLN) {\n\t      //Eq\n\t      //trace('stere:equateur');\n\t      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n\t      p.y = A * sinX;\n\t    }\n\t    else {\n\t      //other case\n\t      //trace('stere:normal case');\n\t      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n\t      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n\t    }\n\t    p.x = A * cosX * Math.sin(dlon) + this.x0;\n\t  }\n\t  //trace(p.toString());\n\t  return p;\n\t}\n\n\t//* Stereographic inverse equations--mapping x,y to lat/long\n\tfunction inverse$6(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var lon, lat, ts, ce, Chi;\n\t  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  if (this.sphere) {\n\t    var c = 2 * Math.atan(rh / (0.5 * this.a * this.k0));\n\t    lon = this.long0;\n\t    lat = this.lat0;\n\t    if (rh <= EPSLN) {\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n\t    if (Math.abs(this.coslat0) < EPSLN) {\n\t      if (this.lat0 > 0) {\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t      }\n\t      else {\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n\t      }\n\t    }\n\t    else {\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n\t    }\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      if (rh <= EPSLN) {\n\t        lat = this.lat0;\n\t        lon = this.long0;\n\t        p.x = lon;\n\t        p.y = lat;\n\t        //trace(p.toString());\n\t        return p;\n\t      }\n\t      p.x *= this.con;\n\t      p.y *= this.con;\n\t      ts = rh * this.cons / (2 * this.a * this.k0);\n\t      lat = this.con * phi2z(this.e, ts);\n\t      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t    }\n\t    else {\n\t      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n\t      lon = this.long0;\n\t      if (rh <= EPSLN) {\n\t        Chi = this.X0;\n\t      }\n\t      else {\n\t        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n\t      }\n\t      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n\t    }\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  //trace(p.toString());\n\t  return p;\n\n\t}\n\n\tvar names$8 = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\n\tvar stere = {\n\t  init: init$7,\n\t  forward: forward$6,\n\t  inverse: inverse$6,\n\t  names: names$8,\n\t  ssfn_: ssfn_\n\t};\n\n\t/*\n\t  references:\n\t    Formules et constantes pour le Calcul pour la\n\t    projection cylindrique conforme  axe oblique et pour la transformation entre\n\t    des systmes de rfrence.\n\t    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n\t  */\n\n\tfunction init$8() {\n\t  var phy0 = this.lat0;\n\t  this.lambda0 = this.long0;\n\t  var sinPhy0 = Math.sin(phy0);\n\t  var semiMajorAxis = this.a;\n\t  var invF = this.rf;\n\t  var flattening = 1 / invF;\n\t  var e2 = 2 * flattening - Math.pow(flattening, 2);\n\t  var e = this.e = Math.sqrt(e2);\n\t  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n\t  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n\t  this.b0 = Math.asin(sinPhy0 / this.alpha);\n\t  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n\t  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n\t  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n\t  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n\t}\n\n\tfunction forward$7(p) {\n\t  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n\t  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n\t  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n\t  // spheric latitude\n\t  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n\t  // spheric longitude\n\t  var I = this.alpha * (p.x - this.lambda0);\n\n\t  // psoeudo equatorial rotation\n\t  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n\t  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n\t  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n\t  p.x = this.R * rotI + this.x0;\n\t  return p;\n\t}\n\n\tfunction inverse$7(p) {\n\t  var Y = p.x - this.x0;\n\t  var X = p.y - this.y0;\n\n\t  var rotI = Y / this.R;\n\t  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n\t  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n\t  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n\t  var lambda = this.lambda0 + I / this.alpha;\n\n\t  var S = 0;\n\t  var phy = b;\n\t  var prevPhy = -1000;\n\t  var iteration = 0;\n\t  while (Math.abs(phy - prevPhy) > 0.0000001) {\n\t    if (++iteration > 20) {\n\t      //...reportError(\"omercFwdInfinity\");\n\t      return;\n\t    }\n\t    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n\t    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n\t    prevPhy = phy;\n\t    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n\t  }\n\n\t  p.x = lambda;\n\t  p.y = phy;\n\t  return p;\n\t}\n\n\tvar names$9 = [\"somerc\"];\n\tvar somerc = {\n\t  init: init$8,\n\t  forward: forward$7,\n\t  inverse: inverse$7,\n\t  names: names$9\n\t};\n\n\t/* Initialize the Oblique Mercator  projection\n\t    ------------------------------------------*/\n\tfunction init$9() {\n\t  this.no_off = this.no_off || false;\n\t  this.no_rot = this.no_rot || false;\n\n\t  if (isNaN(this.k0)) {\n\t    this.k0 = 1;\n\t  }\n\t  var sinlat = Math.sin(this.lat0);\n\t  var coslat = Math.cos(this.lat0);\n\t  var con = this.e * sinlat;\n\n\t  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));\n\t  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);\n\t  var t0 = tsfnz(this.e, this.lat0, sinlat);\n\t  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));\n\t  if (dl * dl < 1) {\n\t    dl = 1;\n\t  }\n\t  var fl;\n\t  var gl;\n\t  if (!isNaN(this.longc)) {\n\t    //Central point and azimuth method\n\n\t    if (this.lat0 >= 0) {\n\t      fl = dl + Math.sqrt(dl * dl - 1);\n\t    }\n\t    else {\n\t      fl = dl - Math.sqrt(dl * dl - 1);\n\t    }\n\t    this.el = fl * Math.pow(t0, this.bl);\n\t    gl = 0.5 * (fl - 1 / fl);\n\t    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);\n\t    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;\n\n\t  }\n\t  else {\n\t    //2 points method\n\t    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));\n\t    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));\n\t    if (this.lat0 >= 0) {\n\t      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n\t    }\n\t    else {\n\t      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n\t    }\n\t    var hl = Math.pow(t1, this.bl);\n\t    var ll = Math.pow(t2, this.bl);\n\t    fl = this.el / hl;\n\t    gl = 0.5 * (fl - 1 / fl);\n\t    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);\n\t    var pl = (ll - hl) / (ll + hl);\n\t    var dlon12 = adjust_lon(this.long1 - this.long2);\n\t    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;\n\t    this.long0 = adjust_lon(this.long0);\n\t    var dlon10 = adjust_lon(this.long1 - this.long0);\n\t    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);\n\t    this.alpha = Math.asin(dl * Math.sin(this.gamma0));\n\t  }\n\n\t  if (this.no_off) {\n\t    this.uc = 0;\n\t  }\n\t  else {\n\t    if (this.lat0 >= 0) {\n\t      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n\t    }\n\t    else {\n\t      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n\t    }\n\t  }\n\n\t}\n\n\t/* Oblique Mercator forward equations--mapping lat,long to x,y\n\t    ----------------------------------------------------------*/\n\tfunction forward$8(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var us, vs;\n\t  var con;\n\t  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n\t    if (lat > 0) {\n\t      con = -1;\n\t    }\n\t    else {\n\t      con = 1;\n\t    }\n\t    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));\n\t    us = -1 * con * HALF_PI * this.al / this.bl;\n\t  }\n\t  else {\n\t    var t = tsfnz(this.e, lat, Math.sin(lat));\n\t    var ql = this.el / Math.pow(t, this.bl);\n\t    var sl = 0.5 * (ql - 1 / ql);\n\t    var tl = 0.5 * (ql + 1 / ql);\n\t    var vl = Math.sin(this.bl * (dlon));\n\t    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;\n\t    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {\n\t      vs = Number.POSITIVE_INFINITY;\n\t    }\n\t    else {\n\t      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;\n\t    }\n\t    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {\n\t      us = this.al * this.bl * (dlon);\n\t    }\n\t    else {\n\t      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;\n\t    }\n\t  }\n\n\t  if (this.no_rot) {\n\t    p.x = this.x0 + us;\n\t    p.y = this.y0 + vs;\n\t  }\n\t  else {\n\n\t    us -= this.uc;\n\t    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);\n\t    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);\n\t  }\n\t  return p;\n\t}\n\n\tfunction inverse$8(p) {\n\t  var us, vs;\n\t  if (this.no_rot) {\n\t    vs = p.y - this.y0;\n\t    us = p.x - this.x0;\n\t  }\n\t  else {\n\t    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);\n\t    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);\n\t    us += this.uc;\n\t  }\n\t  var qp = Math.exp(-1 * this.bl * vs / this.al);\n\t  var sp = 0.5 * (qp - 1 / qp);\n\t  var tp = 0.5 * (qp + 1 / qp);\n\t  var vp = Math.sin(this.bl * us / this.al);\n\t  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;\n\t  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);\n\t  if (Math.abs(up - 1) < EPSLN) {\n\t    p.x = this.long0;\n\t    p.y = HALF_PI;\n\t  }\n\t  else if (Math.abs(up + 1) < EPSLN) {\n\t    p.x = this.long0;\n\t    p.y = -1 * HALF_PI;\n\t  }\n\t  else {\n\t    p.y = phi2z(this.e, ts);\n\t    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);\n\t  }\n\t  return p;\n\t}\n\n\tvar names$10 = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"omerc\"];\n\tvar omerc = {\n\t  init: init$9,\n\t  forward: forward$8,\n\t  inverse: inverse$8,\n\t  names: names$10\n\t};\n\n\tfunction init$10() {\n\n\t  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north\n\t  //double c_lat;                   /* center latitude                      */\n\t  //double c_lon;                   /* center longitude                     */\n\t  //double lat1;                    /* first standard parallel              */\n\t  //double lat2;                    /* second standard parallel             */\n\t  //double r_maj;                   /* major axis                           */\n\t  //double r_min;                   /* minor axis                           */\n\t  //double false_east;              /* x offset in meters                   */\n\t  //double false_north;             /* y offset in meters                   */\n\n\t  if (!this.lat2) {\n\t    this.lat2 = this.lat1;\n\t  } //if lat2 is not defined\n\t  if (!this.k0) {\n\t    this.k0 = 1;\n\t  }\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  // Standard Parallels cannot be equal and on opposite sides of the equator\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\n\t  var temp = this.b / this.a;\n\t  this.e = Math.sqrt(1 - temp * temp);\n\n\t  var sin1 = Math.sin(this.lat1);\n\t  var cos1 = Math.cos(this.lat1);\n\t  var ms1 = msfnz(this.e, sin1, cos1);\n\t  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n\t  var sin2 = Math.sin(this.lat2);\n\t  var cos2 = Math.cos(this.lat2);\n\t  var ms2 = msfnz(this.e, sin2, cos2);\n\t  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n\t  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n\t  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n\t    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n\t  }\n\t  else {\n\t    this.ns = sin1;\n\t  }\n\t  if (isNaN(this.ns)) {\n\t    this.ns = sin1;\n\t  }\n\t  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n\t  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n\t  if (!this.title) {\n\t    this.title = \"Lambert Conformal Conic\";\n\t  }\n\t}\n\n\t// Lambert Conformal conic forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$9(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  // singular cases :\n\t  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n\t    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n\t  }\n\n\t  var con = Math.abs(Math.abs(lat) - HALF_PI);\n\t  var ts, rh1;\n\t  if (con > EPSLN) {\n\t    ts = tsfnz(this.e, lat, Math.sin(lat));\n\t    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n\t  }\n\t  else {\n\t    con = lat * this.ns;\n\t    if (con <= 0) {\n\t      return null;\n\t    }\n\t    rh1 = 0;\n\t  }\n\t  var theta = this.ns * adjust_lon(lon - this.long0);\n\t  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n\t  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n\t  return p;\n\t}\n\n\t// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$9(p) {\n\n\t  var rh1, con, ts;\n\t  var lat, lon;\n\t  var x = (p.x - this.x0) / this.k0;\n\t  var y = (this.rh - (p.y - this.y0) / this.k0);\n\t  if (this.ns > 0) {\n\t    rh1 = Math.sqrt(x * x + y * y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(x * x + y * y);\n\t    con = -1;\n\t  }\n\t  var theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2((con * x), (con * y));\n\t  }\n\t  if ((rh1 !== 0) || (this.ns > 0)) {\n\t    con = 1 / this.ns;\n\t    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n\t    lat = phi2z(this.e, ts);\n\t    if (lat === -9999) {\n\t      return null;\n\t    }\n\t  }\n\t  else {\n\t    lat = -HALF_PI;\n\t  }\n\t  lon = adjust_lon(theta / this.ns + this.long0);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$11 = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\n\tvar lcc = {\n\t  init: init$10,\n\t  forward: forward$9,\n\t  inverse: inverse$9,\n\t  names: names$11\n\t};\n\n\tfunction init$11() {\n\t  this.a = 6377397.155;\n\t  this.es = 0.006674372230614;\n\t  this.e = Math.sqrt(this.es);\n\t  if (!this.lat0) {\n\t    this.lat0 = 0.863937979737193;\n\t  }\n\t  if (!this.long0) {\n\t    this.long0 = 0.7417649320975901 - 0.308341501185665;\n\t  }\n\t  /* if scale not set default to 0.9999 */\n\t  if (!this.k0) {\n\t    this.k0 = 0.9999;\n\t  }\n\t  this.s45 = 0.785398163397448; /* 45 */\n\t  this.s90 = 2 * this.s45;\n\t  this.fi0 = this.lat0;\n\t  this.e2 = this.es;\n\t  this.e = Math.sqrt(this.e2);\n\t  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n\t  this.uq = 1.04216856380474;\n\t  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n\t  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n\t  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n\t  this.k1 = this.k0;\n\t  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n\t  this.s0 = 1.37008346281555;\n\t  this.n = Math.sin(this.s0);\n\t  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n\t  this.ad = this.s90 - this.uq;\n\t}\n\n\t/* ellipsoid */\n\t/* calculate xy from lat/lon */\n\t/* Constants, identical to inverse transform function */\n\tfunction forward$10(p) {\n\t  var gfi, u, deltav, s, d, eps, ro;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  /* Transformation */\n\t  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n\t  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n\t  deltav = -delta_lon * this.alfa;\n\t  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n\t  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n\t  eps = this.n * d;\n\t  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n\t  p.y = ro * Math.cos(eps) / 1;\n\t  p.x = ro * Math.sin(eps) / 1;\n\n\t  if (!this.czech) {\n\t    p.y *= -1;\n\t    p.x *= -1;\n\t  }\n\t  return (p);\n\t}\n\n\t/* calculate lat/lon from xy */\n\tfunction inverse$10(p) {\n\t  var u, deltav, s, d, eps, ro, fi1;\n\t  var ok;\n\n\t  /* Transformation */\n\t  /* revert y, x*/\n\t  var tmp = p.x;\n\t  p.x = p.y;\n\t  p.y = tmp;\n\t  if (!this.czech) {\n\t    p.y *= -1;\n\t    p.x *= -1;\n\t  }\n\t  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  eps = Math.atan2(p.y, p.x);\n\t  d = eps / Math.sin(this.s0);\n\t  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n\t  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n\t  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n\t  p.x = this.long0 - deltav / this.alfa;\n\t  fi1 = u;\n\t  ok = 0;\n\t  var iter = 0;\n\t  do {\n\t    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n\t    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n\t      ok = 1;\n\t    }\n\t    fi1 = p.y;\n\t    iter += 1;\n\t  } while (ok === 0 && iter < 15);\n\t  if (iter >= 15) {\n\t    return null;\n\t  }\n\n\t  return (p);\n\t}\n\n\tvar names$12 = [\"Krovak\", \"krovak\"];\n\tvar krovak = {\n\t  init: init$11,\n\t  forward: forward$10,\n\t  inverse: inverse$10,\n\t  names: names$12\n\t};\n\n\tvar mlfn = function(e0, e1, e2, e3, phi) {\n\t  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n\t};\n\n\tvar e0fn = function(x) {\n\t  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n\t};\n\n\tvar e1fn = function(x) {\n\t  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n\t};\n\n\tvar e2fn = function(x) {\n\t  return (0.05859375 * x * x * (1 + 0.75 * x));\n\t};\n\n\tvar e3fn = function(x) {\n\t  return (x * x * x * (35 / 3072));\n\t};\n\n\tvar gN = function(a, e, sinphi) {\n\t  var temp = e * sinphi;\n\t  return a / Math.sqrt(1 - temp * temp);\n\t};\n\n\tvar adjust_lat = function(x) {\n\t  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n\t};\n\n\tvar imlfn = function(ml, e0, e1, e2, e3) {\n\t  var phi;\n\t  var dphi;\n\n\t  phi = ml / e0;\n\t  for (var i = 0; i < 15; i++) {\n\t    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\n\t  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n\t  return NaN;\n\t};\n\n\tfunction init$12() {\n\t  if (!this.sphere) {\n\t    this.e0 = e0fn(this.es);\n\t    this.e1 = e1fn(this.es);\n\t    this.e2 = e2fn(this.es);\n\t    this.e3 = e3fn(this.es);\n\t    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n\t  }\n\t}\n\n\t/* Cassini forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------------------*/\n\tfunction forward$11(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var x, y;\n\t  var lam = p.x;\n\t  var phi = p.y;\n\t  lam = adjust_lon(lam - this.long0);\n\n\t  if (this.sphere) {\n\t    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n\t    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n\t  }\n\t  else {\n\t    //ellipsoid\n\t    var sinphi = Math.sin(phi);\n\t    var cosphi = Math.cos(phi);\n\t    var nl = gN(this.a, this.e, sinphi);\n\t    var tl = Math.tan(phi) * Math.tan(phi);\n\t    var al = lam * Math.cos(phi);\n\t    var asq = al * al;\n\t    var cl = this.es * cosphi * cosphi / (1 - this.es);\n\t    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n\t    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n\t    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n\t  }\n\n\t  p.x = x + this.x0;\n\t  p.y = y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$11(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var x = p.x / this.a;\n\t  var y = p.y / this.a;\n\t  var phi, lam;\n\n\t  if (this.sphere) {\n\t    var dd = y + this.lat0;\n\t    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n\t    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n\t  }\n\t  else {\n\t    /* ellipsoid */\n\t    var ml1 = this.ml0 / this.a + y;\n\t    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n\t    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n\t      p.x = this.long0;\n\t      p.y = HALF_PI;\n\t      if (y < 0) {\n\t        p.y *= -1;\n\t      }\n\t      return p;\n\t    }\n\t    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n\t    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n\t    var tl1 = Math.pow(Math.tan(phi1), 2);\n\t    var dl = x * this.a / nl1;\n\t    var dsq = dl * dl;\n\t    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n\t    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n\t  }\n\n\t  p.x = adjust_lon(lam + this.long0);\n\t  p.y = adjust_lat(phi);\n\t  return p;\n\n\t}\n\n\tvar names$13 = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\n\tvar cass = {\n\t  init: init$12,\n\t  forward: forward$11,\n\t  inverse: inverse$11,\n\t  names: names$13\n\t};\n\n\tvar qsfnz = function(eccent, sinphi) {\n\t  var con;\n\t  if (eccent > 1.0e-7) {\n\t    con = eccent * sinphi;\n\t    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n\t  }\n\t  else {\n\t    return (2 * sinphi);\n\t  }\n\t};\n\n\t/*\n\t  reference\n\t    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n\t    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n\t  */\n\n\tvar S_POLE = 1;\n\n\tvar N_POLE = 2;\n\tvar EQUIT = 3;\n\tvar OBLIQ = 4;\n\n\t/* Initialize the Lambert Azimuthal Equal Area projection\n\t  ------------------------------------------------------*/\n\tfunction init$13() {\n\t  var t = Math.abs(this.lat0);\n\t  if (Math.abs(t - HALF_PI) < EPSLN) {\n\t    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n\t  }\n\t  else if (Math.abs(t) < EPSLN) {\n\t    this.mode = this.EQUIT;\n\t  }\n\t  else {\n\t    this.mode = this.OBLIQ;\n\t  }\n\t  if (this.es > 0) {\n\t    var sinphi;\n\n\t    this.qp = qsfnz(this.e, 1);\n\t    this.mmf = 0.5 / (1 - this.es);\n\t    this.apa = authset(this.es);\n\t    switch (this.mode) {\n\t    case this.N_POLE:\n\t      this.dd = 1;\n\t      break;\n\t    case this.S_POLE:\n\t      this.dd = 1;\n\t      break;\n\t    case this.EQUIT:\n\t      this.rq = Math.sqrt(0.5 * this.qp);\n\t      this.dd = 1 / this.rq;\n\t      this.xmf = 1;\n\t      this.ymf = 0.5 * this.qp;\n\t      break;\n\t    case this.OBLIQ:\n\t      this.rq = Math.sqrt(0.5 * this.qp);\n\t      sinphi = Math.sin(this.lat0);\n\t      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n\t      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n\t      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n\t      this.ymf = (this.xmf = this.rq) / this.dd;\n\t      this.xmf *= this.dd;\n\t      break;\n\t    }\n\t  }\n\t  else {\n\t    if (this.mode === this.OBLIQ) {\n\t      this.sinph0 = Math.sin(this.lat0);\n\t      this.cosph0 = Math.cos(this.lat0);\n\t    }\n\t  }\n\t}\n\n\t/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------------------*/\n\tfunction forward$12(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n\t  var lam = p.x;\n\t  var phi = p.y;\n\n\t  lam = adjust_lon(lam - this.long0);\n\t  if (this.sphere) {\n\t    sinphi = Math.sin(phi);\n\t    cosphi = Math.cos(phi);\n\t    coslam = Math.cos(lam);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n\t      if (y <= EPSLN) {\n\t        return null;\n\t      }\n\t      y = Math.sqrt(2 / y);\n\t      x = y * cosphi * Math.sin(lam);\n\t      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n\t    }\n\t    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n\t      if (this.mode === this.N_POLE) {\n\t        coslam = -coslam;\n\t      }\n\t      if (Math.abs(phi + this.phi0) < EPSLN) {\n\t        return null;\n\t      }\n\t      y = FORTPI - phi * 0.5;\n\t      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n\t      x = y * Math.sin(lam);\n\t      y *= coslam;\n\t    }\n\t  }\n\t  else {\n\t    sinb = 0;\n\t    cosb = 0;\n\t    b = 0;\n\t    coslam = Math.cos(lam);\n\t    sinlam = Math.sin(lam);\n\t    sinphi = Math.sin(phi);\n\t    q = qsfnz(this.e, sinphi);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      sinb = q / this.qp;\n\t      cosb = Math.sqrt(1 - sinb * sinb);\n\t    }\n\t    switch (this.mode) {\n\t    case this.OBLIQ:\n\t      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n\t      break;\n\t    case this.EQUIT:\n\t      b = 1 + cosb * coslam;\n\t      break;\n\t    case this.N_POLE:\n\t      b = HALF_PI + phi;\n\t      q = this.qp - q;\n\t      break;\n\t    case this.S_POLE:\n\t      b = phi - HALF_PI;\n\t      q = this.qp + q;\n\t      break;\n\t    }\n\t    if (Math.abs(b) < EPSLN) {\n\t      return null;\n\t    }\n\t    switch (this.mode) {\n\t    case this.OBLIQ:\n\t    case this.EQUIT:\n\t      b = Math.sqrt(2 / b);\n\t      if (this.mode === this.OBLIQ) {\n\t        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n\t      }\n\t      else {\n\t        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n\t      }\n\t      x = this.xmf * b * cosb * sinlam;\n\t      break;\n\t    case this.N_POLE:\n\t    case this.S_POLE:\n\t      if (q >= 0) {\n\t        x = (b = Math.sqrt(q)) * sinlam;\n\t        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n\t      }\n\t      else {\n\t        x = y = 0;\n\t      }\n\t      break;\n\t    }\n\t  }\n\n\t  p.x = this.a * x + this.x0;\n\t  p.y = this.a * y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$12(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var x = p.x / this.a;\n\t  var y = p.y / this.a;\n\t  var lam, phi, cCe, sCe, q, rho, ab;\n\t  if (this.sphere) {\n\t    var cosz = 0,\n\t      rh, sinz = 0;\n\n\t    rh = Math.sqrt(x * x + y * y);\n\t    phi = rh * 0.5;\n\t    if (phi > 1) {\n\t      return null;\n\t    }\n\t    phi = 2 * Math.asin(phi);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      sinz = Math.sin(phi);\n\t      cosz = Math.cos(phi);\n\t    }\n\t    switch (this.mode) {\n\t    case this.EQUIT:\n\t      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n\t      x *= sinz;\n\t      y = cosz * rh;\n\t      break;\n\t    case this.OBLIQ:\n\t      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n\t      x *= sinz * this.cosph0;\n\t      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n\t      break;\n\t    case this.N_POLE:\n\t      y = -y;\n\t      phi = HALF_PI - phi;\n\t      break;\n\t    case this.S_POLE:\n\t      phi -= HALF_PI;\n\t      break;\n\t    }\n\t    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n\t  }\n\t  else {\n\t    ab = 0;\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      x /= this.dd;\n\t      y *= this.dd;\n\t      rho = Math.sqrt(x * x + y * y);\n\t      if (rho < EPSLN) {\n\t        p.x = 0;\n\t        p.y = this.phi0;\n\t        return p;\n\t      }\n\t      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n\t      cCe = Math.cos(sCe);\n\t      x *= (sCe = Math.sin(sCe));\n\t      if (this.mode === this.OBLIQ) {\n\t        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n\t        q = this.qp * ab;\n\t        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n\t      }\n\t      else {\n\t        ab = y * sCe / rho;\n\t        q = this.qp * ab;\n\t        y = rho * cCe;\n\t      }\n\t    }\n\t    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n\t      if (this.mode === this.N_POLE) {\n\t        y = -y;\n\t      }\n\t      q = (x * x + y * y);\n\t      if (!q) {\n\t        p.x = 0;\n\t        p.y = this.phi0;\n\t        return p;\n\t      }\n\t      ab = 1 - q / this.qp;\n\t      if (this.mode === this.S_POLE) {\n\t        ab = -ab;\n\t      }\n\t    }\n\t    lam = Math.atan2(x, y);\n\t    phi = authlat(Math.asin(ab), this.apa);\n\t  }\n\n\t  p.x = adjust_lon(this.long0 + lam);\n\t  p.y = phi;\n\t  return p;\n\t}\n\n\t/* determine latitude from authalic latitude */\n\tvar P00 = 0.33333333333333333333;\n\n\tvar P01 = 0.17222222222222222222;\n\tvar P02 = 0.10257936507936507936;\n\tvar P10 = 0.06388888888888888888;\n\tvar P11 = 0.06640211640211640211;\n\tvar P20 = 0.01641501294219154443;\n\n\tfunction authset(es) {\n\t  var t;\n\t  var APA = [];\n\t  APA[0] = es * P00;\n\t  t = es * es;\n\t  APA[0] += t * P01;\n\t  APA[1] = t * P10;\n\t  t *= es;\n\t  APA[0] += t * P02;\n\t  APA[1] += t * P11;\n\t  APA[2] = t * P20;\n\t  return APA;\n\t}\n\n\tfunction authlat(beta, APA) {\n\t  var t = beta + beta;\n\t  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n\t}\n\n\tvar names$14 = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\n\tvar laea = {\n\t  init: init$13,\n\t  forward: forward$12,\n\t  inverse: inverse$12,\n\t  names: names$14,\n\t  S_POLE: S_POLE,\n\t  N_POLE: N_POLE,\n\t  EQUIT: EQUIT,\n\t  OBLIQ: OBLIQ\n\t};\n\n\tvar asinz = function(x) {\n\t  if (Math.abs(x) > 1) {\n\t    x = (x > 1) ? 1 : -1;\n\t  }\n\t  return Math.asin(x);\n\t};\n\n\tfunction init$14() {\n\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2);\n\t  this.e3 = Math.sqrt(this.es);\n\n\t  this.sin_po = Math.sin(this.lat1);\n\t  this.cos_po = Math.cos(this.lat1);\n\t  this.t1 = this.sin_po;\n\t  this.con = this.sin_po;\n\t  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n\t  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  this.sin_po = Math.sin(this.lat2);\n\t  this.cos_po = Math.cos(this.lat2);\n\t  this.t2 = this.sin_po;\n\t  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n\t  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  this.sin_po = Math.sin(this.lat0);\n\t  this.cos_po = Math.cos(this.lat0);\n\t  this.t3 = this.sin_po;\n\t  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n\t    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n\t  }\n\t  else {\n\t    this.ns0 = this.con;\n\t  }\n\t  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n\t  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n\t}\n\n\t/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n\t  -------------------------------------------------------------------*/\n\tfunction forward$13(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  this.sin_phi = Math.sin(lat);\n\t  this.cos_phi = Math.cos(lat);\n\n\t  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n\t  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n\t  var theta = this.ns0 * adjust_lon(lon - this.long0);\n\t  var x = rh1 * Math.sin(theta) + this.x0;\n\t  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$13(p) {\n\t  var rh1, qs, con, theta, lon, lat;\n\n\t  p.x -= this.x0;\n\t  p.y = this.rh - p.y + this.y0;\n\t  if (this.ns0 >= 0) {\n\t    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = -1;\n\t  }\n\t  theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2(con * p.x, con * p.y);\n\t  }\n\t  con = rh1 * this.ns0 / this.a;\n\t  if (this.sphere) {\n\t    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n\t  }\n\t  else {\n\t    qs = (this.c - con * con) / this.ns0;\n\t    lat = this.phi1z(this.e3, qs);\n\t  }\n\n\t  lon = adjust_lon(theta / this.ns0 + this.long0);\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\t/* Function to compute phi1, the latitude for the inverse of the\n\t   Albers Conical Equal-Area projection.\n\t-------------------------------------------*/\n\tfunction phi1z(eccent, qs) {\n\t  var sinphi, cosphi, con, com, dphi;\n\t  var phi = asinz(0.5 * qs);\n\t  if (eccent < EPSLN) {\n\t    return phi;\n\t  }\n\n\t  var eccnts = eccent * eccent;\n\t  for (var i = 1; i <= 25; i++) {\n\t    sinphi = Math.sin(phi);\n\t    cosphi = Math.cos(phi);\n\t    con = eccent * sinphi;\n\t    com = 1 - con * con;\n\t    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n\t    phi = phi + dphi;\n\t    if (Math.abs(dphi) <= 1e-7) {\n\t      return phi;\n\t    }\n\t  }\n\t  return null;\n\t}\n\n\tvar names$15 = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\n\tvar aea = {\n\t  init: init$14,\n\t  forward: forward$13,\n\t  inverse: inverse$13,\n\t  names: names$15,\n\t  phi1z: phi1z\n\t};\n\n\t/*\n\t  reference:\n\t    Wolfram Mathworld \"Gnomonic Projection\"\n\t    http://mathworld.wolfram.com/GnomonicProjection.html\n\t    Accessed: 12th November 2009\n\t  */\n\tfunction init$15() {\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.sin_p14 = Math.sin(this.lat0);\n\t  this.cos_p14 = Math.cos(this.lat0);\n\t  // Approximation for projecting points to the horizon (infinity)\n\t  this.infinity_dist = 1000 * this.a;\n\t  this.rc = 1;\n\t}\n\n\t/* Gnomonic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$14(p) {\n\t  var sinphi, cosphi; /* sin and cos value        */\n\t  var dlon; /* delta longitude value      */\n\t  var coslon; /* cos of longitude        */\n\t  var ksp; /* scale factor          */\n\t  var g;\n\t  var x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  dlon = adjust_lon(lon - this.long0);\n\n\t  sinphi = Math.sin(lat);\n\t  cosphi = Math.cos(lat);\n\n\t  coslon = Math.cos(dlon);\n\t  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n\t  ksp = 1;\n\t  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n\t    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n\t    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n\t  }\n\t  else {\n\n\t    // Point is in the opposing hemisphere and is unprojectable\n\t    // We still need to return a reasonable point, so we project\n\t    // to infinity, on a bearing\n\t    // equivalent to the northern hemisphere equivalent\n\t    // This is a reasonable approximation for short shapes and lines that\n\t    // straddle the horizon.\n\n\t    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n\t    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$14(p) {\n\t  var rh; /* Rho */\n\t  var sinc, cosc;\n\t  var c;\n\t  var lon, lat;\n\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  p.x /= this.k0;\n\t  p.y /= this.k0;\n\n\t  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n\t    c = Math.atan2(rh, this.rc);\n\t    sinc = Math.sin(c);\n\t    cosc = Math.cos(c);\n\n\t    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n\t    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n\t    lon = adjust_lon(this.long0 + lon);\n\t  }\n\t  else {\n\t    lat = this.phic0;\n\t    lon = 0;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$16 = [\"gnom\"];\n\tvar gnom = {\n\t  init: init$15,\n\t  forward: forward$14,\n\t  inverse: inverse$14,\n\t  names: names$16\n\t};\n\n\tvar iqsfnz = function(eccent, q) {\n\t  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n\t  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n\t    if (q < 0) {\n\t      return (-1 * HALF_PI);\n\t    }\n\t    else {\n\t      return HALF_PI;\n\t    }\n\t  }\n\t  //var phi = 0.5* q/(1-eccent*eccent);\n\t  var phi = Math.asin(0.5 * q);\n\t  var dphi;\n\t  var sin_phi;\n\t  var cos_phi;\n\t  var con;\n\t  for (var i = 0; i < 30; i++) {\n\t    sin_phi = Math.sin(phi);\n\t    cos_phi = Math.cos(phi);\n\t    con = eccent * sin_phi;\n\t    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\n\t  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n\t  return NaN;\n\t};\n\n\t/*\n\t  reference:\n\t    \"Cartographic Projection Procedures for the UNIX Environment-\n\t    A User's Manual\" by Gerald I. Evenden,\n\t    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n\t*/\n\tfunction init$16() {\n\t  //no-op\n\t  if (!this.sphere) {\n\t    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n\t  }\n\t}\n\n\t/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n\t    ------------------------------------------------------------*/\n\tfunction forward$15(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var x, y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  if (this.sphere) {\n\t    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n\t    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n\t  }\n\t  else {\n\t    var qs = qsfnz(this.e, Math.sin(lat));\n\t    x = this.x0 + this.a * this.k0 * dlon;\n\t    y = this.y0 + this.a * qs * 0.5 / this.k0;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n\t    ------------------------------------------------------------*/\n\tfunction inverse$15(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var lon, lat;\n\n\t  if (this.sphere) {\n\t    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n\t    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n\t  }\n\t  else {\n\t    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n\t    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$17 = [\"cea\"];\n\tvar cea = {\n\t  init: init$16,\n\t  forward: forward$15,\n\t  inverse: inverse$15,\n\t  names: names$17\n\t};\n\n\tfunction init$17() {\n\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  this.lat0 = this.lat0 || 0;\n\t  this.long0 = this.long0 || 0;\n\t  this.lat_ts = this.lat_ts || 0;\n\t  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n\t  this.rc = Math.cos(this.lat_ts);\n\t}\n\n\t// forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$16(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var dlat = adjust_lat(lat - this.lat0);\n\t  p.x = this.x0 + (this.a * dlon * this.rc);\n\t  p.y = this.y0 + (this.a * dlat);\n\t  return p;\n\t}\n\n\t// inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$16(p) {\n\n\t  var x = p.x;\n\t  var y = p.y;\n\n\t  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n\t  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n\t  return p;\n\t}\n\n\tvar names$18 = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\n\tvar eqc = {\n\t  init: init$17,\n\t  forward: forward$16,\n\t  inverse: inverse$16,\n\t  names: names$18\n\t};\n\n\tvar MAX_ITER$2 = 20;\n\n\tfunction init$18() {\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n\t  this.e = Math.sqrt(this.es);\n\t  this.e0 = e0fn(this.es);\n\t  this.e1 = e1fn(this.es);\n\t  this.e2 = e2fn(this.es);\n\t  this.e3 = e3fn(this.es);\n\t  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n\t}\n\n\t/* Polyconic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$17(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var x, y, el;\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  el = dlon * Math.sin(lat);\n\t  if (this.sphere) {\n\t    if (Math.abs(lat) <= EPSLN) {\n\t      x = this.a * dlon;\n\t      y = -1 * this.a * this.lat0;\n\t    }\n\t    else {\n\t      x = this.a * Math.sin(el) / Math.tan(lat);\n\t      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(lat) <= EPSLN) {\n\t      x = this.a * dlon;\n\t      y = -1 * this.ml0;\n\t    }\n\t    else {\n\t      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n\t      x = nl * Math.sin(el);\n\t      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n\t    }\n\n\t  }\n\t  p.x = x + this.x0;\n\t  p.y = y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$17(p) {\n\t  var lon, lat, x, y, i;\n\t  var al, bl;\n\t  var phi, dphi;\n\t  x = p.x - this.x0;\n\t  y = p.y - this.y0;\n\n\t  if (this.sphere) {\n\t    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n\t      lon = adjust_lon(x / this.a + this.long0);\n\t      lat = 0;\n\t    }\n\t    else {\n\t      al = this.lat0 + y / this.a;\n\t      bl = x * x / this.a / this.a + al * al;\n\t      phi = al;\n\t      var tanphi;\n\t      for (i = MAX_ITER$2; i; --i) {\n\t        tanphi = Math.tan(phi);\n\t        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n\t        phi += dphi;\n\t        if (Math.abs(dphi) <= EPSLN) {\n\t          lat = phi;\n\t          break;\n\t        }\n\t      }\n\t      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(y + this.ml0) <= EPSLN) {\n\t      lat = 0;\n\t      lon = adjust_lon(this.long0 + x / this.a);\n\t    }\n\t    else {\n\n\t      al = (this.ml0 + y) / this.a;\n\t      bl = x * x / this.a / this.a + al * al;\n\t      phi = al;\n\t      var cl, mln, mlnp, ma;\n\t      var con;\n\t      for (i = MAX_ITER$2; i; --i) {\n\t        con = this.e * Math.sin(phi);\n\t        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n\t        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\t        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n\t        ma = mln / this.a;\n\t        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n\t        phi -= dphi;\n\t        if (Math.abs(dphi) <= EPSLN) {\n\t          lat = phi;\n\t          break;\n\t        }\n\t      }\n\n\t      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n\t      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n\t      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n\t    }\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$19 = [\"Polyconic\", \"poly\"];\n\tvar poly = {\n\t  init: init$18,\n\t  forward: forward$17,\n\t  inverse: inverse$17,\n\t  names: names$19\n\t};\n\n\t/*\n\t  reference\n\t    Department of Land and Survey Technical Circular 1973/32\n\t      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n\t    OSG Technical Report 4.1\n\t      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n\t  */\n\n\t/**\n\t * iterations: Number of iterations to refine inverse transform.\n\t *     0 -> km accuracy\n\t *     1 -> m accuracy -- suitable for most mapping applications\n\t *     2 -> mm accuracy\n\t */\n\n\n\tfunction init$19() {\n\t  this.A = [];\n\t  this.A[1] = 0.6399175073;\n\t  this.A[2] = -0.1358797613;\n\t  this.A[3] = 0.063294409;\n\t  this.A[4] = -0.02526853;\n\t  this.A[5] = 0.0117879;\n\t  this.A[6] = -0.0055161;\n\t  this.A[7] = 0.0026906;\n\t  this.A[8] = -0.001333;\n\t  this.A[9] = 0.00067;\n\t  this.A[10] = -0.00034;\n\n\t  this.B_re = [];\n\t  this.B_im = [];\n\t  this.B_re[1] = 0.7557853228;\n\t  this.B_im[1] = 0;\n\t  this.B_re[2] = 0.249204646;\n\t  this.B_im[2] = 0.003371507;\n\t  this.B_re[3] = -0.001541739;\n\t  this.B_im[3] = 0.041058560;\n\t  this.B_re[4] = -0.10162907;\n\t  this.B_im[4] = 0.01727609;\n\t  this.B_re[5] = -0.26623489;\n\t  this.B_im[5] = -0.36249218;\n\t  this.B_re[6] = -0.6870983;\n\t  this.B_im[6] = -1.1651967;\n\n\t  this.C_re = [];\n\t  this.C_im = [];\n\t  this.C_re[1] = 1.3231270439;\n\t  this.C_im[1] = 0;\n\t  this.C_re[2] = -0.577245789;\n\t  this.C_im[2] = -0.007809598;\n\t  this.C_re[3] = 0.508307513;\n\t  this.C_im[3] = -0.112208952;\n\t  this.C_re[4] = -0.15094762;\n\t  this.C_im[4] = 0.18200602;\n\t  this.C_re[5] = 1.01418179;\n\t  this.C_im[5] = 1.64497696;\n\t  this.C_re[6] = 1.9660549;\n\t  this.C_im[6] = 2.5127645;\n\n\t  this.D = [];\n\t  this.D[1] = 1.5627014243;\n\t  this.D[2] = 0.5185406398;\n\t  this.D[3] = -0.03333098;\n\t  this.D[4] = -0.1052906;\n\t  this.D[5] = -0.0368594;\n\t  this.D[6] = 0.007317;\n\t  this.D[7] = 0.01220;\n\t  this.D[8] = 0.00394;\n\t  this.D[9] = -0.0013;\n\t}\n\n\t/**\n\t    New Zealand Map Grid Forward  - long/lat to x/y\n\t    long/lat in radians\n\t  */\n\tfunction forward$18(p) {\n\t  var n;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lat = lat - this.lat0;\n\t  var delta_lon = lon - this.long0;\n\n\t  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n\t  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n\t  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n\t  var d_lambda = delta_lon;\n\t  var d_phi_n = 1; // d_phi^0\n\n\t  var d_psi = 0;\n\t  for (n = 1; n <= 10; n++) {\n\t    d_phi_n = d_phi_n * d_phi;\n\t    d_psi = d_psi + this.A[n] * d_phi_n;\n\t  }\n\n\t  // 2. Calculate theta\n\t  var th_re = d_psi;\n\t  var th_im = d_lambda;\n\n\t  // 3. Calculate z\n\t  var th_n_re = 1;\n\t  var th_n_im = 0; // theta^0\n\t  var th_n_re1;\n\t  var th_n_im1;\n\n\t  var z_re = 0;\n\t  var z_im = 0;\n\t  for (n = 1; n <= 6; n++) {\n\t    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t    th_n_re = th_n_re1;\n\t    th_n_im = th_n_im1;\n\t    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n\t    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n\t  }\n\n\t  // 4. Calculate easting and northing\n\t  p.x = (z_im * this.a) + this.x0;\n\t  p.y = (z_re * this.a) + this.y0;\n\n\t  return p;\n\t}\n\n\t/**\n\t    New Zealand Map Grid Inverse  -  x/y to long/lat\n\t  */\n\tfunction inverse$18(p) {\n\t  var n;\n\t  var x = p.x;\n\t  var y = p.y;\n\n\t  var delta_x = x - this.x0;\n\t  var delta_y = y - this.y0;\n\n\t  // 1. Calculate z\n\t  var z_re = delta_y / this.a;\n\t  var z_im = delta_x / this.a;\n\n\t  // 2a. Calculate theta - first approximation gives km accuracy\n\t  var z_n_re = 1;\n\t  var z_n_im = 0; // z^0\n\t  var z_n_re1;\n\t  var z_n_im1;\n\n\t  var th_re = 0;\n\t  var th_im = 0;\n\t  for (n = 1; n <= 6; n++) {\n\t    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n\t    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n\t    z_n_re = z_n_re1;\n\t    z_n_im = z_n_im1;\n\t    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n\t    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n\t  }\n\n\t  // 2b. Iterate to refine the accuracy of the calculation\n\t  //        0 iterations gives km accuracy\n\t  //        1 iteration gives m accuracy -- good enough for most mapping applications\n\t  //        2 iterations bives mm accuracy\n\t  for (var i = 0; i < this.iterations; i++) {\n\t    var th_n_re = th_re;\n\t    var th_n_im = th_im;\n\t    var th_n_re1;\n\t    var th_n_im1;\n\n\t    var num_re = z_re;\n\t    var num_im = z_im;\n\t    for (n = 2; n <= 6; n++) {\n\t      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t      th_n_re = th_n_re1;\n\t      th_n_im = th_n_im1;\n\t      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n\t      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n\t    }\n\n\t    th_n_re = 1;\n\t    th_n_im = 0;\n\t    var den_re = this.B_re[1];\n\t    var den_im = this.B_im[1];\n\t    for (n = 2; n <= 6; n++) {\n\t      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t      th_n_re = th_n_re1;\n\t      th_n_im = th_n_im1;\n\t      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n\t      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n\t    }\n\n\t    // Complex division\n\t    var den2 = den_re * den_re + den_im * den_im;\n\t    th_re = (num_re * den_re + num_im * den_im) / den2;\n\t    th_im = (num_im * den_re - num_re * den_im) / den2;\n\t  }\n\n\t  // 3. Calculate d_phi              ...                                    // and d_lambda\n\t  var d_psi = th_re;\n\t  var d_lambda = th_im;\n\t  var d_psi_n = 1; // d_psi^0\n\n\t  var d_phi = 0;\n\t  for (n = 1; n <= 9; n++) {\n\t    d_psi_n = d_psi_n * d_psi;\n\t    d_phi = d_phi + this.D[n] * d_psi_n;\n\t  }\n\n\t  // 4. Calculate latitude and longitude\n\t  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n\t  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n\t  var lon = this.long0 + d_lambda;\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$20 = [\"New_Zealand_Map_Grid\", \"nzmg\"];\n\tvar nzmg = {\n\t  init: init$19,\n\t  forward: forward$18,\n\t  inverse: inverse$18,\n\t  names: names$20\n\t};\n\n\t/*\n\t  reference\n\t    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n\t    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n\t  */\n\n\n\t/* Initialize the Miller Cylindrical projection\n\t  -------------------------------------------*/\n\tfunction init$20() {\n\t  //no-op\n\t}\n\n\t/* Miller Cylindrical forward equations--mapping lat,long to x,y\n\t    ------------------------------------------------------------*/\n\tfunction forward$19(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var x = this.x0 + this.a * dlon;\n\t  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n\t    ------------------------------------------------------------*/\n\tfunction inverse$19(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\n\t  var lon = adjust_lon(this.long0 + p.x / this.a);\n\t  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$21 = [\"Miller_Cylindrical\", \"mill\"];\n\tvar mill = {\n\t  init: init$20,\n\t  forward: forward$19,\n\t  inverse: inverse$19,\n\t  names: names$21\n\t};\n\n\tvar MAX_ITER$3 = 20;\n\tfunction init$21() {\n\t  /* Place parameters in static storage for common use\n\t    -------------------------------------------------*/\n\n\n\t  if (!this.sphere) {\n\t    this.en = pj_enfn(this.es);\n\t  }\n\t  else {\n\t    this.n = 1;\n\t    this.m = 0;\n\t    this.es = 0;\n\t    this.C_y = Math.sqrt((this.m + 1) / this.n);\n\t    this.C_x = this.C_y / (this.m + 1);\n\t  }\n\n\t}\n\n\t/* Sinusoidal forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------*/\n\tfunction forward$20(p) {\n\t  var x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t    -----------------*/\n\t  lon = adjust_lon(lon - this.long0);\n\n\t  if (this.sphere) {\n\t    if (!this.m) {\n\t      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n\t    }\n\t    else {\n\t      var k = this.n * Math.sin(lat);\n\t      for (var i = MAX_ITER$3; i; --i) {\n\t        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n\t        lat -= V;\n\t        if (Math.abs(V) < EPSLN) {\n\t          break;\n\t        }\n\t      }\n\t    }\n\t    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n\t    y = this.a * this.C_y * lat;\n\n\t  }\n\t  else {\n\n\t    var s = Math.sin(lat);\n\t    var c = Math.cos(lat);\n\t    y = this.a * pj_mlfn(lat, s, c, this.en);\n\t    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$20(p) {\n\t  var lat, temp, lon, s;\n\n\t  p.x -= this.x0;\n\t  lon = p.x / this.a;\n\t  p.y -= this.y0;\n\t  lat = p.y / this.a;\n\n\t  if (this.sphere) {\n\t    lat /= this.C_y;\n\t    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n\t    if (this.m) {\n\t      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n\t    }\n\t    else if (this.n !== 1) {\n\t      lat = asinz(Math.sin(lat) / this.n);\n\t    }\n\t    lon = adjust_lon(lon + this.long0);\n\t    lat = adjust_lat(lat);\n\t  }\n\t  else {\n\t    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n\t    s = Math.abs(lat);\n\t    if (s < HALF_PI) {\n\t      s = Math.sin(lat);\n\t      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n\t      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n\t      lon = adjust_lon(temp);\n\t    }\n\t    else if ((s - EPSLN) < HALF_PI) {\n\t      lon = this.long0;\n\t    }\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$22 = [\"Sinusoidal\", \"sinu\"];\n\tvar sinu = {\n\t  init: init$21,\n\t  forward: forward$20,\n\t  inverse: inverse$20,\n\t  names: names$22\n\t};\n\n\tfunction init$22() {}\n\t/* Mollweide forward equations--mapping lat,long to x,y\n\t    ----------------------------------------------------*/\n\tfunction forward$21(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  var theta = lat;\n\t  var con = Math.PI * Math.sin(lat);\n\n\t  /* Iterate using the Newton-Raphson method to find theta\n\t      -----------------------------------------------------*/\n\t  while (true) {\n\t    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n\t    theta += delta_theta;\n\t    if (Math.abs(delta_theta) < EPSLN) {\n\t      break;\n\t    }\n\t  }\n\t  theta /= 2;\n\n\t  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n\t       this is done here because of precision problems with \"cos(theta)\"\n\t       --------------------------------------------------------------------------*/\n\t  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n\t    delta_lon = 0;\n\t  }\n\t  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n\t  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$21(p) {\n\t  var theta;\n\t  var arg;\n\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  arg = p.y / (1.4142135623731 * this.a);\n\n\t  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n\t       a number very close to one is used instead.\n\t       -------------------------------------------------------------------*/\n\t  if (Math.abs(arg) > 0.999999999999) {\n\t    arg = 0.999999999999;\n\t  }\n\t  theta = Math.asin(arg);\n\t  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n\t  if (lon < (-Math.PI)) {\n\t    lon = -Math.PI;\n\t  }\n\t  if (lon > Math.PI) {\n\t    lon = Math.PI;\n\t  }\n\t  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n\t  if (Math.abs(arg) > 1) {\n\t    arg = 1;\n\t  }\n\t  var lat = Math.asin(arg);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$23 = [\"Mollweide\", \"moll\"];\n\tvar moll = {\n\t  init: init$22,\n\t  forward: forward$21,\n\t  inverse: inverse$21,\n\t  names: names$23\n\t};\n\n\tfunction init$23() {\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  // Standard Parallels cannot be equal and on opposite sides of the equator\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\t  this.lat2 = this.lat2 || this.lat1;\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2);\n\t  this.e = Math.sqrt(this.es);\n\t  this.e0 = e0fn(this.es);\n\t  this.e1 = e1fn(this.es);\n\t  this.e2 = e2fn(this.es);\n\t  this.e3 = e3fn(this.es);\n\n\t  this.sinphi = Math.sin(this.lat1);\n\t  this.cosphi = Math.cos(this.lat1);\n\n\t  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n\t  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n\t  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n\t    this.ns = this.sinphi;\n\t  }\n\t  else {\n\t    this.sinphi = Math.sin(this.lat2);\n\t    this.cosphi = Math.cos(this.lat2);\n\t    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n\t    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n\t    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n\t  }\n\t  this.g = this.ml1 + this.ms1 / this.ns;\n\t  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n\t  this.rh = this.a * (this.g - this.ml0);\n\t}\n\n\t/* Equidistant Conic forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------*/\n\tfunction forward$22(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var rh1;\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  if (this.sphere) {\n\t    rh1 = this.a * (this.g - lat);\n\t  }\n\t  else {\n\t    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n\t    rh1 = this.a * (this.g - ml);\n\t  }\n\t  var theta = this.ns * adjust_lon(lon - this.long0);\n\t  var x = this.x0 + rh1 * Math.sin(theta);\n\t  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$22(p) {\n\t  p.x -= this.x0;\n\t  p.y = this.rh - p.y + this.y0;\n\t  var con, rh1, lat, lon;\n\t  if (this.ns >= 0) {\n\t    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = -1;\n\t  }\n\t  var theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2(con * p.x, con * p.y);\n\t  }\n\n\t  if (this.sphere) {\n\t    lon = adjust_lon(this.long0 + theta / this.ns);\n\t    lat = adjust_lat(this.g - rh1 / this.a);\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    var ml = this.g - rh1 / this.a;\n\t    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n\t    lon = adjust_lon(this.long0 + theta / this.ns);\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\n\t}\n\n\tvar names$24 = [\"Equidistant_Conic\", \"eqdc\"];\n\tvar eqdc = {\n\t  init: init$23,\n\t  forward: forward$22,\n\t  inverse: inverse$22,\n\t  names: names$24\n\t};\n\n\t/* Initialize the Van Der Grinten projection\n\t  ----------------------------------------*/\n\tfunction init$24() {\n\t  //this.R = 6370997; //Radius of earth\n\t  this.R = this.a;\n\t}\n\n\tfunction forward$23(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  /* Forward equations\n\t    -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var x, y;\n\n\t  if (Math.abs(lat) <= EPSLN) {\n\t    x = this.x0 + this.R * dlon;\n\t    y = this.y0;\n\t  }\n\t  var theta = asinz(2 * Math.abs(lat / Math.PI));\n\t  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n\t    x = this.x0;\n\t    if (lat >= 0) {\n\t      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n\t    }\n\t    else {\n\t      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n\t    }\n\t    //  return(OK);\n\t  }\n\t  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n\t  var asq = al * al;\n\t  var sinth = Math.sin(theta);\n\t  var costh = Math.cos(theta);\n\n\t  var g = costh / (sinth + costh - 1);\n\t  var gsq = g * g;\n\t  var m = g * (2 / sinth - 1);\n\t  var msq = m * m;\n\t  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n\t  if (dlon < 0) {\n\t    con = -con;\n\t  }\n\t  x = this.x0 + con;\n\t  //con = Math.abs(con / (Math.PI * this.R));\n\t  var q = asq + g;\n\t  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n\t  if (lat >= 0) {\n\t    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n\t    y = this.y0 + con;\n\t  }\n\t  else {\n\t    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n\t    y = this.y0 - con;\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Van Der Grinten inverse equations--mapping x,y to lat/long\n\t  ---------------------------------------------------------*/\n\tfunction inverse$23(p) {\n\t  var lon, lat;\n\t  var xx, yy, xys, c1, c2, c3;\n\t  var a1;\n\t  var m1;\n\t  var con;\n\t  var th1;\n\t  var d;\n\n\t  /* inverse equations\n\t    -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  con = Math.PI * this.R;\n\t  xx = p.x / con;\n\t  yy = p.y / con;\n\t  xys = xx * xx + yy * yy;\n\t  c1 = -Math.abs(yy) * (1 + xys);\n\t  c2 = c1 - 2 * yy * yy + xx * xx;\n\t  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n\t  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n\t  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n\t  m1 = 2 * Math.sqrt(-a1 / 3);\n\t  con = ((3 * d) / a1) / m1;\n\t  if (Math.abs(con) > 1) {\n\t    if (con >= 0) {\n\t      con = 1;\n\t    }\n\t    else {\n\t      con = -1;\n\t    }\n\t  }\n\t  th1 = Math.acos(con) / 3;\n\t  if (p.y >= 0) {\n\t    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n\t  }\n\t  else {\n\t    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n\t  }\n\n\t  if (Math.abs(xx) < EPSLN) {\n\t    lon = this.long0;\n\t  }\n\t  else {\n\t    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$25 = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\n\tvar vandg = {\n\t  init: init$24,\n\t  forward: forward$23,\n\t  inverse: inverse$23,\n\t  names: names$25\n\t};\n\n\tfunction init$25() {\n\t  this.sin_p12 = Math.sin(this.lat0);\n\t  this.cos_p12 = Math.cos(this.lat0);\n\t}\n\n\tfunction forward$24(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var sinphi = Math.sin(p.y);\n\t  var cosphi = Math.cos(p.y);\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n\t  if (this.sphere) {\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North Pole case\n\t      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n\t      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South Pole case\n\t      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n\t      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else {\n\t      //default case\n\t      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n\t      c = Math.acos(cos_c);\n\t      kp = c / Math.sin(c);\n\t      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n\t      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n\t      return p;\n\t    }\n\t  }\n\t  else {\n\t    e0 = e0fn(this.es);\n\t    e1 = e1fn(this.es);\n\t    e2 = e2fn(this.es);\n\t    e3 = e3fn(this.es);\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North Pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n\t      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n\t      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South Pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n\t      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n\t      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else {\n\t      //Default case\n\t      tanphi = sinphi / cosphi;\n\t      Nl1 = gN(this.a, this.e, this.sin_p12);\n\t      Nl = gN(this.a, this.e, sinphi);\n\t      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n\t      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n\t      if (Az === 0) {\n\t        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n\t      }\n\t      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n\t        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n\t      }\n\t      else {\n\t        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n\t      }\n\t      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n\t      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n\t      GH = G * H;\n\t      Hs = H * H;\n\t      s2 = s * s;\n\t      s3 = s2 * s;\n\t      s4 = s3 * s;\n\t      s5 = s4 * s;\n\t      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n\t      p.x = this.x0 + c * Math.sin(Az);\n\t      p.y = this.y0 + c * Math.cos(Az);\n\t      return p;\n\t    }\n\t  }\n\n\n\t}\n\n\tfunction inverse$24(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;\n\t  if (this.sphere) {\n\t    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    if (rh > (2 * HALF_PI * this.a)) {\n\t      return;\n\t    }\n\t    z = rh / this.a;\n\n\t    sinz = Math.sin(z);\n\t    cosz = Math.cos(z);\n\n\t    lon = this.long0;\n\t    if (Math.abs(rh) <= EPSLN) {\n\t      lat = this.lat0;\n\t    }\n\t    else {\n\t      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n\t      con = Math.abs(this.lat0) - HALF_PI;\n\t      if (Math.abs(con) <= EPSLN) {\n\t        if (this.lat0 >= 0) {\n\t          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n\t        }\n\t        else {\n\t          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n\t        }\n\t      }\n\t      else {\n\t        /*con = cosz - this.sin_p12 * Math.sin(lat);\n\t        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n\t          //no-op, just keep the lon value as is\n\t        } else {\n\t          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n\t          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n\t        }*/\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n\t      }\n\t    }\n\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    e0 = e0fn(this.es);\n\t    e1 = e1fn(this.es);\n\t    e2 = e2fn(this.es);\n\t    e3 = e3fn(this.es);\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      M = Mlp - rh;\n\t      lat = imlfn(M / this.a, e0, e1, e2, e3);\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      M = rh - Mlp;\n\n\t      lat = imlfn(M / this.a, e0, e1, e2, e3);\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    else {\n\t      //default case\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      Az = Math.atan2(p.x, p.y);\n\t      N1 = gN(this.a, this.e, this.sin_p12);\n\t      cosAz = Math.cos(Az);\n\t      tmp = this.e * this.cos_p12 * cosAz;\n\t      A = -tmp * tmp / (1 - this.es);\n\t      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n\t      D = rh / N1;\n\t      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n\t      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n\t      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n\t      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n\t      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t  }\n\n\t}\n\n\tvar names$26 = [\"Azimuthal_Equidistant\", \"aeqd\"];\n\tvar aeqd = {\n\t  init: init$25,\n\t  forward: forward$24,\n\t  inverse: inverse$24,\n\t  names: names$26\n\t};\n\n\tfunction init$26() {\n\t  //double temp;      /* temporary variable    */\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.sin_p14 = Math.sin(this.lat0);\n\t  this.cos_p14 = Math.cos(this.lat0);\n\t}\n\n\t/* Orthographic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$25(p) {\n\t  var sinphi, cosphi; /* sin and cos value        */\n\t  var dlon; /* delta longitude value      */\n\t  var coslon; /* cos of longitude        */\n\t  var ksp; /* scale factor          */\n\t  var g, x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  dlon = adjust_lon(lon - this.long0);\n\n\t  sinphi = Math.sin(lat);\n\t  cosphi = Math.cos(lat);\n\n\t  coslon = Math.cos(dlon);\n\t  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n\t  ksp = 1;\n\t  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n\t    x = this.a * ksp * cosphi * Math.sin(dlon);\n\t    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$25(p) {\n\t  var rh; /* height above ellipsoid      */\n\t  var z; /* angle          */\n\t  var sinz, cosz; /* sin of z and cos of z      */\n\t  var con;\n\t  var lon, lat;\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  z = asinz(rh / this.a);\n\n\t  sinz = Math.sin(z);\n\t  cosz = Math.cos(z);\n\n\t  lon = this.long0;\n\t  if (Math.abs(rh) <= EPSLN) {\n\t    lat = this.lat0;\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n\t  con = Math.abs(this.lat0) - HALF_PI;\n\t  if (Math.abs(con) <= EPSLN) {\n\t    if (this.lat0 >= 0) {\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n\t    }\n\t    else {\n\t      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n\t    }\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$27 = [\"ortho\"];\n\tvar ortho = {\n\t  init: init$26,\n\t  forward: forward$25,\n\t  inverse: inverse$25,\n\t  names: names$27\n\t};\n\n\t// QSC projection rewritten from the original PROJ4\n\t// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\n\t/* constants */\n\tvar FACE_ENUM = {\n\t    FRONT: 1,\n\t    RIGHT: 2,\n\t    BACK: 3,\n\t    LEFT: 4,\n\t    TOP: 5,\n\t    BOTTOM: 6\n\t};\n\n\tvar AREA_ENUM = {\n\t    AREA_0: 1,\n\t    AREA_1: 2,\n\t    AREA_2: 3,\n\t    AREA_3: 4\n\t};\n\n\tfunction init$27() {\n\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  this.lat0 = this.lat0 || 0;\n\t  this.long0 = this.long0 || 0;\n\t  this.lat_ts = this.lat_ts || 0;\n\t  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n\t  /* Determine the cube face from the center of projection. */\n\t  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n\t    this.face = FACE_ENUM.TOP;\n\t  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n\t    this.face = FACE_ENUM.BOTTOM;\n\t  } else if (Math.abs(this.long0) <= FORTPI) {\n\t    this.face = FACE_ENUM.FRONT;\n\t  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n\t    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n\t  } else {\n\t    this.face = FACE_ENUM.BACK;\n\t  }\n\n\t  /* Fill in useful values for the ellipsoid <-> sphere shift\n\t   * described in [LK12]. */\n\t  if (this.es !== 0) {\n\t    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n\t    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n\t  }\n\t}\n\n\t// QSC forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$26(p) {\n\t  var xy = {x: 0, y: 0};\n\t  var lat, lon;\n\t  var theta, phi;\n\t  var t, mu;\n\t  /* nu; */\n\t  var area = {value: 0};\n\n\t  // move lon according to projection's lon\n\t  p.x -= this.long0;\n\n\t  /* Convert the geodetic latitude to a geocentric latitude.\n\t   * This corresponds to the shift from the ellipsoid to the sphere\n\t   * described in [LK12]. */\n\t  if (this.es !== 0) {//if (P->es != 0) {\n\t    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n\t  } else {\n\t    lat = p.y;\n\t  }\n\n\t  /* Convert the input lat, lon into theta, phi as used by QSC.\n\t   * This depends on the cube face and the area on it.\n\t   * For the top and bottom face, we can compute theta and phi\n\t   * directly from phi, lam. For the other faces, we must use\n\t   * unit sphere cartesian coordinates as an intermediate step. */\n\t  lon = p.x; //lon = lp.lam;\n\t  if (this.face === FACE_ENUM.TOP) {\n\t    phi = HALF_PI - lat;\n\t    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t      theta = lon - HALF_PI;\n\t    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n\t    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = lon + HALF_PI;\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta = lon;\n\t    }\n\t  } else if (this.face === FACE_ENUM.BOTTOM) {\n\t    phi = HALF_PI + lat;\n\t    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t      theta = -lon + HALF_PI;\n\t    } else if (lon < FORTPI && lon >= -FORTPI) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta = -lon;\n\t    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = -lon - HALF_PI;\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n\t    }\n\t  } else {\n\t    var q, r, s;\n\t    var sinlat, coslat;\n\t    var sinlon, coslon;\n\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      lon = qsc_shift_lon_origin(lon, +SPI);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n\t    }\n\t    sinlat = Math.sin(lat);\n\t    coslat = Math.cos(lat);\n\t    sinlon = Math.sin(lon);\n\t    coslon = Math.cos(lon);\n\t    q = coslat * coslon;\n\t    r = coslat * sinlon;\n\t    s = sinlat;\n\n\t    if (this.face === FACE_ENUM.FRONT) {\n\t      phi = Math.acos(q);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n\t    } else if (this.face === FACE_ENUM.RIGHT) {\n\t      phi = Math.acos(r);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      phi = Math.acos(-q);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      phi = Math.acos(-r);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n\t    } else {\n\t      /* Impossible */\n\t      phi = theta = 0;\n\t      area.value = AREA_ENUM.AREA_0;\n\t    }\n\t  }\n\n\t  /* Compute mu and nu for the area of definition.\n\t   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n\t   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n\t  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n\t  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n\t  /* Apply the result to the real area. */\n\t  if (area.value === AREA_ENUM.AREA_1) {\n\t    mu += HALF_PI;\n\t  } else if (area.value === AREA_ENUM.AREA_2) {\n\t    mu += SPI;\n\t  } else if (area.value === AREA_ENUM.AREA_3) {\n\t    mu += 1.5 * SPI;\n\t  }\n\n\t  /* Now compute x, y from mu and nu */\n\t  xy.x = t * Math.cos(mu);\n\t  xy.y = t * Math.sin(mu);\n\t  xy.x = xy.x * this.a + this.x0;\n\t  xy.y = xy.y * this.a + this.y0;\n\n\t  p.x = xy.x;\n\t  p.y = xy.y;\n\t  return p;\n\t}\n\n\t// QSC inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$26(p) {\n\t  var lp = {lam: 0, phi: 0};\n\t  var mu, nu, cosmu, tannu;\n\t  var tantheta, theta, cosphi, phi;\n\t  var t;\n\t  var area = {value: 0};\n\n\t  /* de-offset */\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  /* Convert the input x, y to the mu and nu angles as used by QSC.\n\t   * This depends on the area of the cube face. */\n\t  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n\t  mu = Math.atan2(p.y, p.x);\n\t  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n\t    area.value = AREA_ENUM.AREA_0;\n\t  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n\t    area.value = AREA_ENUM.AREA_1;\n\t    mu -= HALF_PI;\n\t  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n\t    area.value = AREA_ENUM.AREA_2;\n\t    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n\t  } else {\n\t    area.value = AREA_ENUM.AREA_3;\n\t    mu += HALF_PI;\n\t  }\n\n\t  /* Compute phi and theta for the area of definition.\n\t   * The inverse projection is not described in the original paper, but some\n\t   * good hints can be found here (as of 2011-12-14):\n\t   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n\t   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n\t  t = (SPI / 12) * Math.tan(mu);\n\t  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n\t  theta = Math.atan(tantheta);\n\t  cosmu = Math.cos(mu);\n\t  tannu = Math.tan(nu);\n\t  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n\t  if (cosphi < -1) {\n\t    cosphi = -1;\n\t  } else if (cosphi > +1) {\n\t    cosphi = +1;\n\t  }\n\n\t  /* Apply the result to the real area on the cube face.\n\t   * For the top and bottom face, we can compute phi and lam directly.\n\t   * For the other faces, we must use unit sphere cartesian coordinates\n\t   * as an intermediate step. */\n\t  if (this.face === FACE_ENUM.TOP) {\n\t    phi = Math.acos(cosphi);\n\t    lp.phi = HALF_PI - phi;\n\t    if (area.value === AREA_ENUM.AREA_0) {\n\t      lp.lam = theta + HALF_PI;\n\t    } else if (area.value === AREA_ENUM.AREA_1) {\n\t      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      lp.lam = theta - HALF_PI;\n\t    } else /* area.value == AREA_ENUM.AREA_3 */ {\n\t      lp.lam = theta;\n\t    }\n\t  } else if (this.face === FACE_ENUM.BOTTOM) {\n\t    phi = Math.acos(cosphi);\n\t    lp.phi = phi - HALF_PI;\n\t    if (area.value === AREA_ENUM.AREA_0) {\n\t      lp.lam = -theta + HALF_PI;\n\t    } else if (area.value === AREA_ENUM.AREA_1) {\n\t      lp.lam = -theta;\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      lp.lam = -theta - HALF_PI;\n\t    } else /* area.value == AREA_ENUM.AREA_3 */ {\n\t      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n\t    }\n\t  } else {\n\t    /* Compute phi and lam via cartesian unit sphere coordinates. */\n\t    var q, r, s;\n\t    q = cosphi;\n\t    t = q * q;\n\t    if (t >= 1) {\n\t      s = 0;\n\t    } else {\n\t      s = Math.sqrt(1 - t) * Math.sin(theta);\n\t    }\n\t    t += s * s;\n\t    if (t >= 1) {\n\t      r = 0;\n\t    } else {\n\t      r = Math.sqrt(1 - t);\n\t    }\n\t    /* Rotate q,r,s into the correct area. */\n\t    if (area.value === AREA_ENUM.AREA_1) {\n\t      t = r;\n\t      r = -s;\n\t      s = t;\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      r = -r;\n\t      s = -s;\n\t    } else if (area.value === AREA_ENUM.AREA_3) {\n\t      t = r;\n\t      r = s;\n\t      s = -t;\n\t    }\n\t    /* Rotate q,r,s into the correct cube face. */\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      t = q;\n\t      q = -r;\n\t      r = t;\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      q = -q;\n\t      r = -r;\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      t = q;\n\t      q = r;\n\t      r = -t;\n\t    }\n\t    /* Now compute phi and lam from the unit sphere coordinates. */\n\t    lp.phi = Math.acos(-s) - HALF_PI;\n\t    lp.lam = Math.atan2(r, q);\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n\t    }\n\t  }\n\n\t  /* Apply the shift from the sphere to the ellipsoid as described\n\t   * in [LK12]. */\n\t  if (this.es !== 0) {\n\t    var invert_sign;\n\t    var tanphi, xa;\n\t    invert_sign = (lp.phi < 0 ? 1 : 0);\n\t    tanphi = Math.tan(lp.phi);\n\t    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n\t    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n\t    if (invert_sign) {\n\t      lp.phi = -lp.phi;\n\t    }\n\t  }\n\n\t  lp.lam += this.long0;\n\t  p.x = lp.lam;\n\t  p.y = lp.phi;\n\t  return p;\n\t}\n\n\t/* Helper function for forward projection: compute the theta angle\n\t * and determine the area number. */\n\tfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n\t  var theta;\n\t  if (phi < EPSLN) {\n\t    area.value = AREA_ENUM.AREA_0;\n\t    theta = 0.0;\n\t  } else {\n\t    theta = Math.atan2(y, x);\n\t    if (Math.abs(theta) <= FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta -= HALF_PI;\n\t    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta += HALF_PI;\n\t    }\n\t  }\n\t  return theta;\n\t}\n\n\t/* Helper function: shift the longitude. */\n\tfunction qsc_shift_lon_origin(lon, offset) {\n\t  var slon = lon + offset;\n\t  if (slon < -SPI) {\n\t    slon += TWO_PI;\n\t  } else if (slon > +SPI) {\n\t    slon -= TWO_PI;\n\t  }\n\t  return slon;\n\t}\n\n\tvar names$28 = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\n\tvar qsc = {\n\t  init: init$27,\n\t  forward: forward$26,\n\t  inverse: inverse$26,\n\t  names: names$28\n\t};\n\n\tvar includedProjections = function(proj4){\n\t  proj4.Proj.projections.add(tmerc);\n\t  proj4.Proj.projections.add(etmerc);\n\t  proj4.Proj.projections.add(utm);\n\t  proj4.Proj.projections.add(sterea);\n\t  proj4.Proj.projections.add(stere);\n\t  proj4.Proj.projections.add(somerc);\n\t  proj4.Proj.projections.add(omerc);\n\t  proj4.Proj.projections.add(lcc);\n\t  proj4.Proj.projections.add(krovak);\n\t  proj4.Proj.projections.add(cass);\n\t  proj4.Proj.projections.add(laea);\n\t  proj4.Proj.projections.add(aea);\n\t  proj4.Proj.projections.add(gnom);\n\t  proj4.Proj.projections.add(cea);\n\t  proj4.Proj.projections.add(eqc);\n\t  proj4.Proj.projections.add(poly);\n\t  proj4.Proj.projections.add(nzmg);\n\t  proj4.Proj.projections.add(mill);\n\t  proj4.Proj.projections.add(sinu);\n\t  proj4.Proj.projections.add(moll);\n\t  proj4.Proj.projections.add(eqdc);\n\t  proj4.Proj.projections.add(vandg);\n\t  proj4.Proj.projections.add(aeqd);\n\t  proj4.Proj.projections.add(ortho);\n\t  proj4.Proj.projections.add(qsc);\n\t};\n\n\tproj4$1.defaultDatum = 'WGS84'; //default datum\n\tproj4$1.Proj = Projection$1;\n\tproj4$1.WGS84 = new proj4$1.Proj('WGS84');\n\tproj4$1.Point = Point;\n\tproj4$1.toPoint = toPoint;\n\tproj4$1.defs = defs;\n\tproj4$1.transform = transform;\n\tproj4$1.mgrs = mgrs;\n\tproj4$1.version = version;\n\tincludedProjections(proj4$1);\n\n\treturn proj4$1;\n\n})));\n","/**\n * @module ol/source/BingMaps\n */\n\nimport {createFromTileUrlFunctions} from '../tileurlfunction.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from '../source/State.js';\nimport TileImage from '../source/TileImage.js';\nimport {createOrUpdate, quadKey} from '../tilecoord.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n\n/**\n * The attribution containing a link to the Microsoft Bing Maps Platform APIs\n * Terms Of Use.\n * @const\n * @type {string}\n */\nconst TOS_ATTRIBUTION = '<a class=\"ol-attribution-bing-tos\" ' +\n      'href=\"https://www.microsoft.com/maps/product/terms.html\">' +\n      'Terms of Use</a>';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize=2048] Cache size.\n * @property {boolean} [hidpi=false] If `true` hidpi tiles will be requested.\n * @property {string} [culture='en-us'] Culture code.\n * @property {string} key Bing Maps API key. Get yours at http://www.bingmapsportal.com/.\n * @property {string} imagerySet Type of imagery.\n * @property {number} [maxZoom=21] Max zoom. Default is what's advertized by the BingMaps service.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for Bing Maps tile data.\n * @api\n */\nclass BingMaps extends TileImage {\n  /**\n   * @param {module:ol/source/BingMaps~Options=} options Bing Maps options.\n   */\n  constructor(options) {\n\n    const hidpi = options.hidpi !== undefined ? options.hidpi : false;\n\n    super({\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      opaque: true,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: SourceState.LOADING,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: hidpi ? 2 : 1,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = hidpi;\n\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.culture_ = options.culture !== undefined ? options.culture : 'en-us';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxZoom_ = options.maxZoom !== undefined ? options.maxZoom : -1;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.apiKey_ = options.key;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.imagerySet_ = options.imagerySet;\n\n    const url = 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/' +\n        this.imagerySet_ +\n        '?uriScheme=https&include=ImageryProviders&key=' + this.apiKey_ +\n        '&c=' + this.culture_;\n\n    requestJSONP(url, this.handleImageryMetadataResponse.bind(this), undefined,\n      'jsonp');\n\n  }\n\n  /**\n   * Get the api key used for this source.\n   *\n   * @return {string} The api key.\n   * @api\n   */\n  getApiKey() {\n    return this.apiKey_;\n  }\n\n  /**\n   * Get the imagery set associated with this source.\n   *\n   * @return {string} The imagery set.\n   * @api\n   */\n  getImagerySet() {\n    return this.imagerySet_;\n  }\n\n  /**\n   * @param {BingMapsImageryMetadataResponse} response Response.\n   */\n  handleImageryMetadataResponse(response) {\n    if (response.statusCode != 200 ||\n        response.statusDescription != 'OK' ||\n        response.authenticationResultCode != 'ValidCredentials' ||\n        response.resourceSets.length != 1 ||\n        response.resourceSets[0].resources.length != 1) {\n      this.setState(SourceState.ERROR);\n      return;\n    }\n\n    const resource = response.resourceSets[0].resources[0];\n    const maxZoom = this.maxZoom_ == -1 ? resource.zoomMax : this.maxZoom_;\n\n    const sourceProjection = this.getProjection();\n    const extent = extentFromProjection(sourceProjection);\n    const tileSize = resource.imageWidth == resource.imageHeight ?\n      resource.imageWidth : [resource.imageWidth, resource.imageHeight];\n    const tileGrid = createXYZ({\n      extent: extent,\n      minZoom: resource.zoomMin,\n      maxZoom: maxZoom,\n      tileSize: tileSize / (this.hidpi_ ? 2 : 1)\n    });\n    this.tileGrid = tileGrid;\n\n    const culture = this.culture_;\n    const hidpi = this.hidpi_;\n    this.tileUrlFunction = createFromTileUrlFunctions(\n      resource.imageUrlSubdomains.map(function(subdomain) {\n        const quadKeyTileCoord = [0, 0, 0];\n        const imageUrl = resource.imageUrl\n          .replace('{subdomain}', subdomain)\n          .replace('{culture}', culture);\n        return (\n          /**\n           * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n           * @param {number} pixelRatio Pixel ratio.\n           * @param {module:ol/proj/Projection} projection Projection.\n           * @return {string|undefined} Tile URL.\n           */\n          function(tileCoord, pixelRatio, projection) {\n            if (!tileCoord) {\n              return undefined;\n            } else {\n              createOrUpdate(tileCoord[0], tileCoord[1], -tileCoord[2] - 1, quadKeyTileCoord);\n              let url = imageUrl;\n              if (hidpi) {\n                url += '&dpi=d1&device=mobile';\n              }\n              return url.replace('{quadkey}', quadKey(quadKeyTileCoord));\n            }\n          }\n        );\n      }));\n\n    if (resource.imageryProviders) {\n      const transform = getTransformFromProjections(\n        getProjection('EPSG:4326'), this.getProjection());\n\n      this.setAttributions(function(frameState) {\n        const attributions = [];\n        const zoom = frameState.viewState.zoom;\n        resource.imageryProviders.map(function(imageryProvider) {\n          let intersecting = false;\n          const coverageAreas = imageryProvider.coverageAreas;\n          for (let i = 0, ii = coverageAreas.length; i < ii; ++i) {\n            const coverageArea = coverageAreas[i];\n            if (zoom >= coverageArea.zoomMin && zoom <= coverageArea.zoomMax) {\n              const bbox = coverageArea.bbox;\n              const epsg4326Extent = [bbox[1], bbox[0], bbox[3], bbox[2]];\n              const extent = applyTransform(epsg4326Extent, transform);\n              if (intersects(extent, frameState.extent)) {\n                intersecting = true;\n                break;\n              }\n            }\n          }\n          if (intersecting) {\n            attributions.push(imageryProvider.attribution);\n          }\n        });\n\n        attributions.push(TOS_ATTRIBUTION);\n        return attributions;\n      });\n    }\n\n    this.setState(SourceState.READY);\n  }\n}\n\nexport default BingMaps;\n","/**\n * @module ol/proj/proj4\n */\nimport {addCoordinateTransforms, addProjection, addEquivalentProjections, get} from '../proj.js';\nimport {get as getTransform} from './transforms.js';\nimport Projection from './Projection.js';\n\n/**\n * Make projections defined in proj4 (with `proj4.defs()`) available in\n * OpenLayers.\n *\n * This function should be called whenever changes are made to the proj4\n * registry, e.g. after calling `proj4.defs()`. Existing transforms will not be\n * modified by this function.\n *\n * @param {?} proj4 Proj4.\n * @api\n */\nexport function register(proj4) {\n  const projCodes = Object.keys(proj4.defs);\n  const len = projCodes.length;\n  let i, j;\n  for (i = 0; i < len; ++i) {\n    const code = projCodes[i];\n    if (!get(code)) {\n      const def = proj4.defs(code);\n      addProjection(new Projection({\n        code: code,\n        axisOrientation: def.axis,\n        metersPerUnit: def.to_meter,\n        units: def.units\n      }));\n    }\n  }\n  for (i = 0; i < len; ++i) {\n    const code1 = projCodes[i];\n    const proj1 = get(code1);\n    for (j = 0; j < len; ++j) {\n      const code2 = projCodes[j];\n      const proj2 = get(code2);\n      if (!getTransform(code1, code2)) {\n        if (proj4.defs[code1] === proj4.defs[code2]) {\n          addEquivalentProjections([proj1, proj2]);\n        } else {\n          const transform = proj4(code1, code2);\n          addCoordinateTransforms(proj1, proj2, transform.forward, transform.inverse);\n        }\n      }\n    }\n  }\n}\n","/**\n * @module ol/source/Stamen\n */\n\nimport {ATTRIBUTION as OSM_ATTRIBUTION} from '../source/OSM.js';\nimport XYZ from '../source/XYZ.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst ATTRIBUTIONS = [\n  'Map tiles by <a href=\"https://stamen.com/\">Stamen Design</a>, ' +\n        'under <a href=\"https://creativecommons.org/licenses/by/3.0/\">CC BY' +\n        ' 3.0</a>.',\n  OSM_ATTRIBUTION\n];\n\n\n/**\n * @type {Object<string, {extension: string, opaque: boolean}>}\n */\nconst LayerConfig = {\n  'terrain': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-background': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'terrain-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-background': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner-hybrid': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lite': {\n    extension: 'png',\n    opaque: true\n  },\n  'watercolor': {\n    extension: 'jpg',\n    opaque: true\n  }\n};\n\n\n/**\n * @type {Object<string, {minZoom: number, maxZoom: number}>}\n */\nconst ProviderConfig = {\n  'terrain': {\n    minZoom: 4,\n    maxZoom: 18\n  },\n  'toner': {\n    minZoom: 0,\n    maxZoom: 20\n  },\n  'watercolor': {\n    minZoom: 1,\n    maxZoom: 16\n  }\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize=2048] Cache size.\n * @property {string} [layer] Layer.\n * @property {number} [minZoom] Minimum zoom.\n * @property {number} [maxZoom] Maximum zoom.\n * @property {boolean} [opaque] Whether the layer is opaque.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the Stamen tile server.\n * @api\n */\nclass Stamen extends XYZ {\n  /**\n   * @param {module:ol/source/Stamen~Options=} options Stamen options.\n   */\n  constructor(options) {\n    const i = options.layer.indexOf('-');\n    const provider = i == -1 ? options.layer : options.layer.slice(0, i);\n    const providerConfig = ProviderConfig[provider];\n\n    const layerConfig = LayerConfig[options.layer];\n\n    const url = options.url !== undefined ? options.url :\n      'https://stamen-tiles-{a-d}.a.ssl.fastly.net/' + options.layer +\n        '/{z}/{x}/{y}.' + layerConfig.extension;\n\n    super({\n      attributions: ATTRIBUTIONS,\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      maxZoom: options.maxZoom != undefined ? options.maxZoom : providerConfig.maxZoom,\n      minZoom: options.minZoom != undefined ? options.minZoom : providerConfig.minZoom,\n      opaque: layerConfig.opaque,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      url: url,\n      wrapX: options.wrapX\n    });\n\n  }\n\n}\n\nexport default Stamen;\n","/**\n * @module ol/format/GPX\n */\nimport Feature from '../Feature.js';\nimport {includes} from '../array.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport XMLFeature from '../format/XMLFeature.js';\nimport {readString, readDecimal, readNonNegativeInteger, readDateTime, writeStringTextNode, writeNonNegativeIntegerTextNode, writeDecimalTextNode, writeDateTimeTextNode} from '../format/xsd.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport {get as getProjection} from '../proj.js';\nimport {createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender,\n  makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parseNode, pushParseAndPop, pushSerializeAndPop,\n  XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.topografix.com/GPX/1/0',\n  'http://www.topografix.com/GPX/1/1'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n\n/**\n * @const\n * @type {Object<string, function(Node, Array<*>): (module:ol/Feature|undefined)>}\n */\nconst FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst GPX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeArrayPusher(readRte),\n    'trk': makeArrayPusher(readTrk),\n    'wpt': makeArrayPusher(readWpt)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeObjectPropertySetter(readString, 'linkText'),\n    'type': makeObjectPropertySetter(readString, 'linkType')\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst GPX_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeChildAppender(writeRte),\n    'trk': makeChildAppender(writeTrk),\n    'wpt': makeChildAppender(writeWpt)\n  });\n\n\n/**\n * @typedef {Object} Options\n * @property {function(module:ol/Feature, Node)} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ]\n * @property {boolean} [hasM]\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\n * feature of the source.\n *\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\n * waypoints are ignored.\n *\n * When writing, LineString geometries are output as routes (`<rte>`), and\n * MultiLineString as tracks (`<trk>`).\n *\n * @api\n */\nclass GPX extends XMLFeature {\n\n  /**\n   * @param {module:ol/format/GPX~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @type {function(module:ol/Feature, Node)|undefined}\n     * @private\n     */\n    this.readExtensions_ = options.readExtensions;\n  }\n\n  /**\n   * @param {Array<module:ol/Feature>} features List of features.\n   * @private\n   */\n  handleReadExtensions_(features) {\n    if (!features) {\n      features = [];\n    }\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      const feature = features[i];\n      if (this.readExtensions_) {\n        const extensionsNode = feature.get('extensionsNode_') || null;\n        this.readExtensions_(feature, extensionsNode);\n      }\n      feature.set('extensionsNode_', undefined);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const featureReader = FEATURE_READER[node.localName];\n    if (!featureReader) {\n      return null;\n    }\n    const feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\n    if (!feature) {\n      return null;\n    }\n    this.handleReadExtensions_([feature]);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    if (node.localName == 'gpx') {\n      /** @type {Array<module:ol/Feature>} */\n      const features = pushParseAndPop([], GPX_PARSERS,\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        this.handleReadExtensions_(features);\n        return features;\n      } else {\n        return [];\n      }\n    }\n    return [];\n  }\n\n  /**\n   * Encode an array of features in the GPX format as an XML node.\n   * LineString geometries are output as routes (`<rte>`), and MultiLineString\n   * as tracks (`<trk>`).\n   *\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    //FIXME Serialize metadata\n    const gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n    gpx.setAttribute('version', '1.1');\n    gpx.setAttribute('creator', 'OpenLayers');\n\n    pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\n      ({node: gpx}), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\n    return gpx;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst RTE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions,\n    'type': makeObjectPropertySetter(readString),\n    'rtept': parseRtePt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst RTEPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst TRK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'type': makeObjectPropertySetter(readString),\n    'extensions': parseExtensions,\n    'trkseg': parseTrkSeg\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst TRKSEG_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': parseTrkPt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst TRKPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst WPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime),\n    'magvar': makeObjectPropertySetter(readDecimal),\n    'geoidheight': makeObjectPropertySetter(readDecimal),\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'sym': makeObjectPropertySetter(readString),\n    'type': makeObjectPropertySetter(readString),\n    'fix': makeObjectPropertySetter(readString),\n    'sat': makeObjectPropertySetter(readNonNegativeInteger),\n    'hdop': makeObjectPropertySetter(readDecimal),\n    'vdop': makeObjectPropertySetter(readDecimal),\n    'pdop': makeObjectPropertySetter(readDecimal),\n    'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n    'dgpsid': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions\n  });\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst LINK_SEQUENCE = ['text', 'type'];\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst LINK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst RTE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst RTE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'rtept': makeArraySerializer(makeChildAppender(writeWptType))\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst RTEPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst TRK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst TRK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\n  });\n\n\n/**\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst TRKSEG_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': makeChildAppender(writeWptType)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst WPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\n    'ageofdgpsdata', 'dgpsid'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst WPT_TYPE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeChildAppender(writeDecimalTextNode),\n    'time': makeChildAppender(writeDateTimeTextNode),\n    'magvar': makeChildAppender(writeDecimalTextNode),\n    'geoidheight': makeChildAppender(writeDecimalTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'sym': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'fix': makeChildAppender(writeStringTextNode),\n    'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'hdop': makeChildAppender(writeDecimalTextNode),\n    'vdop': makeChildAppender(writeDecimalTextNode),\n    'pdop': makeChildAppender(writeDecimalTextNode),\n    'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n    'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk'\n};\n\n\n/**\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\n  const geometry = /** @type {module:ol/Feature} */ (value).getGeometry();\n  if (geometry) {\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (nodeName) {\n      const parentNode = objectStack[objectStack.length - 1].node;\n      return createElementNS(parentNode.namespaceURI, nodeName);\n    }\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {module:ol/format/GPX~LayoutOptions} layoutOptions Layout options.\n * @param {Node} node Node.\n * @param {!Object} values Values.\n * @return {Array<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(\n    parseFloat(node.getAttribute('lon')),\n    parseFloat(node.getAttribute('lat')));\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['time']));\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {module:ol/format/GPX~LayoutOptions} layoutOptions Layout options.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {Array<number>=} ends Ends.\n * @return {module:ol/geom/GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n  let layout = GeometryLayout.XY;\n  let stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = GeometryLayout.XYZM;\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = GeometryLayout.XYZ;\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = GeometryLayout.XYM;\n    stride = 3;\n  }\n  if (stride !== 4) {\n    for (let i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\n    if (ends) {\n      for (let i = 0, ii = ends.length; i < ii; i++) {\n        ends[i] = ends[i] / 4 * stride;\n      }\n    }\n  }\n  return layout;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  values['extensionsNode_'] = node;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  const values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    const rteValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (rteValues['flatCoordinates']);\n    const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (rteValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  const values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    const trkValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (trkValues['flatCoordinates']);\n    const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (trkValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  parseNode(TRKSEG_PARSERS, node, objectStack);\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  ends.push(flatCoordinates.length);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'layoutOptions': {}\n  }, RTE_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n  const geometry = new LineString(flatCoordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'ends': [],\n    'layoutOptions': {}\n  }, TRK_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  delete values['ends'];\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n  const geometry = new MultiLineString(flatCoordinates, layout, ends);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ ({});\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\n  const layout = applyLayoutOptions(layoutOptions, coordinates);\n  const geometry = new Point(coordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  const context = objectStack[objectStack.length - 1];\n  const properties = context['properties'];\n  const link = [\n    properties['linkText'],\n    properties['linkType']\n  ];\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */ ({node: node}),\n    LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    link, objectStack, LINK_SEQUENCE);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const namespaceURI = parentNode.namespaceURI;\n  const properties = context['properties'];\n  //FIXME Projection handling\n  node.setAttributeNS(null, 'lat', coordinate[1]);\n  node.setAttributeNS(null, 'lon', coordinate[0]);\n  const geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case GeometryLayout.XYZM:\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n      // fall through\n    case GeometryLayout.XYZ:\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case GeometryLayout.XYM:\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n      // pass\n  }\n  const orderedKeys = (node.nodeName == 'rtept') ?\n    RTEPT_TYPE_SEQUENCE[namespaceURI] :\n    WPT_TYPE_SEQUENCE[namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\n    ({node: node, 'properties': properties}),\n    WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  const context = {node: node, 'properties': properties};\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {module:ol/geom/LineString} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = geometry.getLayout();\n    properties['rtept'] = geometry.getCoordinates();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  /** @type {module:ol/xml~NodeStackItem} */\n  const context = {node: node, 'properties': properties};\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {module:ol/geom/MultiLineString} */\n      (transformWithOptions(geometry, true, options));\n    properties['trkseg'] = geometry.getLineStrings();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LineString} lineString LineString.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {module:ol/xml~NodeStackItem} */\n  const context = {node: node, 'geometryLayout': lineString.getLayout(),\n    'properties': {}};\n  pushSerializeAndPop(context,\n    TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY,\n    lineString.getCoordinates(), objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\n  const context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {module:ol/geom/Point} */\n      (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = geometry.getLayout();\n    writeWptType(node, geometry.getCoordinates(), objectStack);\n  }\n}\n\n\nexport default GPX;\n","/**\n * @module ol/format/KML\n */\nimport Feature from '../Feature.js';\nimport {extend, includes} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport XMLFeature from '../format/XMLFeature.js';\nimport {readDecimal, readBoolean, readString, writeStringTextNode, writeCDATASection, writeDecimalTextNode, writeBooleanTextNode} from '../format/xsd.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {toRadians} from '../math.js';\nimport {get as getProjection} from '../proj.js';\nimport Fill from '../style/Fill.js';\nimport Icon from '../style/Icon.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport Stroke from '../style/Stroke.js';\nimport Style from '../style/Style.js';\nimport Text from '../style/Text.js';\nimport {createElementNS, getAllTextContent, isDocument, isNode, makeArrayExtender,\n  makeArrayPusher, makeChildAppender, makeObjectPropertySetter,\n  makeReplacer, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parse, parseNode, pushParseAndPop,\n  pushSerializeAndPop, XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n/**\n * @typedef {Object} Vec2\n * @property {number} x\n * @property {module:ol/style/IconAnchorUnits} xunits\n * @property {number} y\n * @property {module:ol/style/IconAnchorUnits} yunits\n * @property {module:ol/style/IconOrigin} origin\n */\n\n/**\n * @typedef {Object} GxTrackObject\n * @property {Array<number>} flatCoordinates\n * @property {Array<number>} whens\n */\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst GX_NAMESPACE_URIS = [\n  'http://www.google.com/kml/ext/2.2'\n];\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://earth.google.com/kml/2.0',\n  'http://earth.google.com/kml/2.1',\n  'http://earth.google.com/kml/2.2',\n  'http://www.opengis.net/kml/2.2'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.opengis.net/kml/2.2 ' +\n    'https://developers.google.com/kml/schema/kml22gx.xsd';\n\n\n/**\n * @type {Object<string, module:ol/style/IconAnchorUnits>}\n */\nconst ICON_ANCHOR_UNITS_MAP = {\n  'fraction': IconAnchorUnits.FRACTION,\n  'pixels': IconAnchorUnits.PIXELS,\n  'insetPixels': IconAnchorUnits.PIXELS\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst PLACEMARK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'MultiGeometry': makeObjectPropertySetter(\n      readMultiGeometry, 'geometry'),\n    'LineString': makeObjectPropertySetter(\n      readLineString, 'geometry'),\n    'LinearRing': makeObjectPropertySetter(\n      readLinearRing, 'geometry'),\n    'Point': makeObjectPropertySetter(\n      readPoint, 'geometry'),\n    'Polygon': makeObjectPropertySetter(\n      readPolygon, 'geometry'),\n    'Style': makeObjectPropertySetter(readStyle),\n    'StyleMap': placemarkStyleMapParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'MultiTrack': makeObjectPropertySetter(\n        readGxMultiTrack, 'geometry'),\n      'Track': makeObjectPropertySetter(\n        readGxTrack, 'geometry')\n    }\n  ));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst NETWORK_LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'Link': linkParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst REGION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LatLonAltBox': latLonAltBoxParser,\n    'Lod': lodParser\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst KML_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'Document', 'Placemark'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst KML_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Document': makeChildAppender(writeDocument),\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @type {module:ol/color~Color}\n */\nlet DEFAULT_COLOR;\n\n/**\n * @type {module:ol/style/Fill}\n */\nlet DEFAULT_FILL_STYLE = null;\n\n/**\n * Get the default fill style (or null if not yet set).\n * @return {module:ol/style/Fill} The default fill style.\n */\nexport function getDefaultFillStyle() {\n  return DEFAULT_FILL_STYLE;\n}\n\n/**\n * @type {module:ol/size~Size}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR;\n\n/**\n * @type {module:ol/style/IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n\n/**\n * @type {module:ol/style/IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n\n/**\n * @type {module:ol/size~Size}\n */\nlet DEFAULT_IMAGE_STYLE_SIZE;\n\n/**\n * @type {string}\n */\nlet DEFAULT_IMAGE_STYLE_SRC;\n\n/**\n * @type {number}\n */\nlet DEFAULT_IMAGE_SCALE_MULTIPLIER;\n\n/**\n * @type {module:ol/style/Image}\n */\nlet DEFAULT_IMAGE_STYLE = null;\n\n/**\n * Get the default image style (or null if not yet set).\n * @return {module:ol/style/Image} The default image style.\n */\nexport function getDefaultImageStyle() {\n  return DEFAULT_IMAGE_STYLE;\n}\n\n/**\n * @type {string}\n */\nlet DEFAULT_NO_IMAGE_STYLE;\n\n/**\n * @type {module:ol/style/Stroke}\n */\nlet DEFAULT_STROKE_STYLE = null;\n\n/**\n * Get the default stroke style (or null if not yet set).\n * @return {module:ol/style/Stroke} The default stroke style.\n */\nexport function getDefaultStrokeStyle() {\n  return DEFAULT_STROKE_STYLE;\n}\n\n/**\n * @type {module:ol/style/Stroke}\n */\nlet DEFAULT_TEXT_STROKE_STYLE;\n\n/**\n * @type {module:ol/style/Text}\n */\nlet DEFAULT_TEXT_STYLE = null;\n\n/**\n * Get the default text style (or null if not yet set).\n * @return {module:ol/style/Text} The default text style.\n */\nexport function getDefaultTextStyle() {\n  return DEFAULT_TEXT_STYLE;\n}\n\n/**\n * @type {module:ol/style/Style}\n */\nlet DEFAULT_STYLE = null;\n\n/**\n * Get the default style (or null if not yet set).\n * @return {module:ol/style/Style} The default style.\n */\nexport function getDefaultStyle() {\n  return DEFAULT_STYLE;\n}\n\n/**\n * @type {Array<module:ol/style/Style>}\n */\nlet DEFAULT_STYLE_ARRAY = null;\n\n/**\n * Get the default style array (or null if not yet set).\n * @return {Array<module:ol/style/Style>} The default style.\n */\nexport function getDefaultStyleArray() {\n  return DEFAULT_STYLE_ARRAY;\n}\n\n\nfunction createStyleDefaults() {\n\n  DEFAULT_COLOR = [255, 255, 255, 1];\n\n  DEFAULT_FILL_STYLE = new Fill({\n    color: DEFAULT_COLOR\n  });\n\n  DEFAULT_IMAGE_STYLE_ANCHOR = [20, 2]; // FIXME maybe [8, 32] ?\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_SIZE = [64, 64];\n\n  DEFAULT_IMAGE_STYLE_SRC =\n      'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';\n\n  DEFAULT_IMAGE_SCALE_MULTIPLIER = 0.5;\n\n  DEFAULT_IMAGE_STYLE = new Icon({\n    anchor: DEFAULT_IMAGE_STYLE_ANCHOR,\n    anchorOrigin: IconOrigin.BOTTOM_LEFT,\n    anchorXUnits: DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,\n    anchorYUnits: DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,\n    crossOrigin: 'anonymous',\n    rotation: 0,\n    scale: DEFAULT_IMAGE_SCALE_MULTIPLIER,\n    size: DEFAULT_IMAGE_STYLE_SIZE,\n    src: DEFAULT_IMAGE_STYLE_SRC\n  });\n\n  DEFAULT_NO_IMAGE_STYLE = 'NO_IMAGE';\n\n  DEFAULT_STROKE_STYLE = new Stroke({\n    color: DEFAULT_COLOR,\n    width: 1\n  });\n\n  DEFAULT_TEXT_STROKE_STYLE = new Stroke({\n    color: [51, 51, 51, 1],\n    width: 2\n  });\n\n  DEFAULT_TEXT_STYLE = new Text({\n    font: 'bold 16px Helvetica',\n    fill: DEFAULT_FILL_STYLE,\n    stroke: DEFAULT_TEXT_STROKE_STYLE,\n    scale: 0.8\n  });\n\n  DEFAULT_STYLE = new Style({\n    fill: DEFAULT_FILL_STYLE,\n    image: DEFAULT_IMAGE_STYLE,\n    text: DEFAULT_TEXT_STYLE,\n    stroke: DEFAULT_STROKE_STYLE,\n    zIndex: 0\n  });\n\n  DEFAULT_STYLE_ARRAY = [DEFAULT_STYLE];\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [extractStyles=true] Extract styles from the KML.\n * @property {boolean} [showPointNames=true] Show names as labels for placemarks which contain points.\n * @property {Array<module:ol/style/Style>} [defaultStyle] Default style. The\n * default default style is the same as Google Earth.\n * @property {boolean} [writeStyles=true] Write styles into KML.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the KML format.\n *\n * {@link module:ol/format/KML~KML#readFeature} will read the first feature from\n * a KML source.\n *\n * MultiGeometries are converted into GeometryCollections if they are a mix of\n * geometry types, and into MultiPoint/MultiLineString/MultiPolygon if they are\n * all of the same type.\n *\n * Note that the KML format uses the URL() constructor. Older browsers such as IE\n * which do not support this will need a URL polyfill to be loaded before use.\n *\n * @api\n */\nclass KML extends XMLFeature {\n\n  /**\n   * @param {module:ol/format/KML~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    if (!DEFAULT_STYLE_ARRAY) {\n      createStyleDefaults();\n    }\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @private\n     * @type {Array<module:ol/style/Style>}\n     */\n    this.defaultStyle_ = options.defaultStyle ?\n      options.defaultStyle : DEFAULT_STYLE_ARRAY;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.extractStyles_ = options.extractStyles !== undefined ?\n      options.extractStyles : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.writeStyles_ = options.writeStyles !== undefined ?\n      options.writeStyles : true;\n\n    /**\n     * @private\n     * @type {!Object<string, (Array<module:ol/style/Style>|string)>}\n     */\n    this.sharedStyles_ = {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.showPointNames_ = options.showPointNames !== undefined ?\n      options.showPointNames : true;\n\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Array<module:ol/Feature>|undefined} Features.\n   */\n  readDocumentOrFolder_(node, objectStack) {\n    // FIXME use scope somehow\n    const parsersNS = makeStructureNS(\n      NAMESPACE_URIS, {\n        'Document': makeArrayExtender(this.readDocumentOrFolder_, this),\n        'Folder': makeArrayExtender(this.readDocumentOrFolder_, this),\n        'Placemark': makeArrayPusher(this.readPlacemark_, this),\n        'Style': this.readSharedStyle_.bind(this),\n        'StyleMap': this.readSharedStyleMap_.bind(this)\n      });\n    /** @type {Array<module:ol/Feature>} */\n    const features = pushParseAndPop([], parsersNS, node, objectStack, this);\n    if (features) {\n      return features;\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {module:ol/Feature|undefined} Feature.\n   */\n  readPlacemark_(node, objectStack) {\n    const object = pushParseAndPop({'geometry': null},\n      PLACEMARK_PARSERS, node, objectStack);\n    if (!object) {\n      return undefined;\n    }\n    const feature = new Feature();\n    const id = node.getAttribute('id');\n    if (id !== null) {\n      feature.setId(id);\n    }\n    const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\n\n    const geometry = object['geometry'];\n    if (geometry) {\n      transformWithOptions(geometry, false, options);\n    }\n    feature.setGeometry(geometry);\n    delete object['geometry'];\n\n    if (this.extractStyles_) {\n      const style = object['Style'];\n      const styleUrl = object['styleUrl'];\n      const styleFunction = createFeatureStyleFunction(\n        style, styleUrl, this.defaultStyle_, this.sharedStyles_,\n        this.showPointNames_);\n      feature.setStyle(styleFunction);\n    }\n    delete object['Style'];\n    // we do not remove the styleUrl property from the object, so it\n    // gets stored on feature when setProperties is called\n\n    feature.setProperties(object);\n\n    return feature;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  readSharedStyle_(node, objectStack) {\n    const id = node.getAttribute('id');\n    if (id !== null) {\n      const style = readStyle(node, objectStack);\n      if (style) {\n        let styleUri;\n        let baseURI = node.baseURI;\n        if (!baseURI || baseURI == 'about:blank') {\n          baseURI = window.location.href;\n        }\n        if (baseURI) {\n          const url = new URL('#' + id, baseURI);\n          styleUri = url.href;\n        } else {\n          styleUri = '#' + id;\n        }\n        this.sharedStyles_[styleUri] = style;\n      }\n    }\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  readSharedStyleMap_(node, objectStack) {\n    const id = node.getAttribute('id');\n    if (id === null) {\n      return;\n    }\n    const styleMapValue = readStyleMapValue(node, objectStack);\n    if (!styleMapValue) {\n      return;\n    }\n    let styleUri;\n    let baseURI = node.baseURI;\n    if (!baseURI || baseURI == 'about:blank') {\n      baseURI = window.location.href;\n    }\n    if (baseURI) {\n      const url = new URL('#' + id, baseURI);\n      styleUri = url.href;\n    } else {\n      styleUri = '#' + id;\n    }\n    this.sharedStyles_[styleUri] = styleMapValue;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const feature = this.readPlacemark_(\n      node, [this.getReadOptions(node, opt_options)]);\n    if (feature) {\n      return feature;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    let features;\n    const localName = node.localName;\n    if (localName == 'Document' || localName == 'Folder') {\n      features = this.readDocumentOrFolder_(\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        return features;\n      } else {\n        return [];\n      }\n    } else if (localName == 'Placemark') {\n      const feature = this.readPlacemark_(\n        node, [this.getReadOptions(node, opt_options)]);\n      if (feature) {\n        return [feature];\n      } else {\n        return [];\n      }\n    } else if (localName == 'kml') {\n      features = [];\n      for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n        const fs = this.readFeaturesFromNode(n, opt_options);\n        if (fs) {\n          extend(features, fs);\n        }\n      }\n      return features;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * Read the name of the KML.\n   *\n   * @param {Document|Node|string} source Source.\n   * @return {string|undefined} Name.\n   * @api\n   */\n  readName(source) {\n    if (isDocument(source)) {\n      return this.readNameFromDocument(/** @type {Document} */ (source));\n    } else if (isNode(source)) {\n      return this.readNameFromNode(/** @type {Node} */ (source));\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readNameFromDocument(doc);\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {string|undefined} Name.\n   */\n  readNameFromDocument(doc) {\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        const name = this.readNameFromNode(n);\n        if (name) {\n          return name;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @return {string|undefined} Name.\n   */\n  readNameFromNode(node) {\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'name') {\n        return readString(n);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'Placemark' ||\n           localName == 'kml')) {\n        const name = this.readNameFromNode(n);\n        if (name) {\n          return name;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Read the network links of the KML.\n   *\n   * @param {Document|Node|string} source Source.\n   * @return {Array<Object>} Network links.\n   * @api\n   */\n  readNetworkLinks(source) {\n    const networkLinks = [];\n    if (isDocument(source)) {\n      extend(networkLinks, this.readNetworkLinksFromDocument(\n        /** @type {Document} */ (source)));\n    } else if (isNode(source)) {\n      extend(networkLinks, this.readNetworkLinksFromNode(\n        /** @type {Node} */ (source)));\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      extend(networkLinks, this.readNetworkLinksFromDocument(doc));\n    }\n    return networkLinks;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Array<Object>} Network links.\n   */\n  readNetworkLinksFromDocument(doc) {\n    const networkLinks = [];\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(networkLinks, this.readNetworkLinksFromNode(n));\n      }\n    }\n    return networkLinks;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @return {Array<Object>} Network links.\n   */\n  readNetworkLinksFromNode(node) {\n    const networkLinks = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'NetworkLink') {\n        const obj = pushParseAndPop({}, NETWORK_LINK_PARSERS,\n          n, []);\n        networkLinks.push(obj);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'kml')) {\n        extend(networkLinks, this.readNetworkLinksFromNode(n));\n      }\n    }\n    return networkLinks;\n  }\n\n  /**\n   * Read the regions of the KML.\n   *\n   * @param {Document|Node|string} source Source.\n   * @return {Array<Object>} Regions.\n   * @api\n   */\n  readRegion(source) {\n    const regions = [];\n    if (isDocument(source)) {\n      extend(regions, this.readRegionFromDocument(\n        /** @type {Document} */ (source)));\n    } else if (isNode(source)) {\n      extend(regions, this.readRegionFromNode(\n        /** @type {Node} */ (source)));\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      extend(regions, this.readRegionFromDocument(doc));\n    }\n    return regions;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Array<Object>} Region.\n   */\n  readRegionFromDocument(doc) {\n    const regions = [];\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(regions, this.readRegionFromNode(n));\n      }\n    }\n    return regions;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @return {Array<Object>} Region.\n   * @api\n   */\n  readRegionFromNode(node) {\n    const regions = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'Region') {\n        const obj = pushParseAndPop({}, REGION_PARSERS,\n          n, []);\n        regions.push(obj);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'kml')) {\n        extend(regions, this.readRegionFromNode(n));\n      }\n    }\n    return regions;\n  }\n\n  /**\n   * Encode an array of features in the KML format as an XML node. GeometryCollections,\n   * MultiPoints, MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n   *\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const kml = createElementNS(NAMESPACE_URIS[4], 'kml');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    kml.setAttributeNS(xmlnsUri, 'xmlns:gx', GX_NAMESPACE_URIS[0]);\n    kml.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    kml.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n\n    const /** @type {module:ol/xml~NodeStackItem} */ context = {node: kml};\n    const properties = {};\n    if (features.length > 1) {\n      properties['Document'] = features;\n    } else if (features.length == 1) {\n      properties['Placemark'] = features[0];\n    }\n    const orderedKeys = KML_SEQUENCE[kml.namespaceURI];\n    const values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, KML_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, values, [opt_options], orderedKeys,\n      this);\n    return kml;\n  }\n}\n\n\n/**\n * @param {module:ol/style/Style|undefined} foundStyle Style.\n * @param {string} name Name.\n * @return {module:ol/style/Style} style Style.\n */\nfunction createNameStyleFunction(foundStyle, name) {\n  let textStyle = null;\n  const textOffset = [0, 0];\n  let textAlign = 'start';\n  if (foundStyle.getImage()) {\n    let imageSize = foundStyle.getImage().getImageSize();\n    if (imageSize === null) {\n      imageSize = DEFAULT_IMAGE_STYLE_SIZE;\n    }\n    if (imageSize.length == 2) {\n      const imageScale = foundStyle.getImage().getScale();\n      // Offset the label to be centered to the right of the icon, if there is\n      // one.\n      textOffset[0] = imageScale * imageSize[0] / 2;\n      textOffset[1] = -imageScale * imageSize[1] / 2;\n      textAlign = 'left';\n    }\n  }\n  if (foundStyle.getText() !== null) {\n    // clone the text style, customizing it with name, alignments and offset.\n    // Note that kml does not support many text options that OpenLayers does (rotation, textBaseline).\n    const foundText = foundStyle.getText();\n    textStyle = foundText.clone();\n    textStyle.setFont(foundText.getFont() || DEFAULT_TEXT_STYLE.getFont());\n    textStyle.setScale(foundText.getScale() || DEFAULT_TEXT_STYLE.getScale());\n    textStyle.setFill(foundText.getFill() || DEFAULT_TEXT_STYLE.getFill());\n    textStyle.setStroke(foundText.getStroke() || DEFAULT_TEXT_STROKE_STYLE);\n  } else {\n    textStyle = DEFAULT_TEXT_STYLE.clone();\n  }\n  textStyle.setText(name);\n  textStyle.setOffsetX(textOffset[0]);\n  textStyle.setOffsetY(textOffset[1]);\n  textStyle.setTextAlign(textAlign);\n\n  const nameStyle = new Style({\n    text: textStyle\n  });\n  return nameStyle;\n}\n\n\n/**\n * @param {Array<module:ol/style/Style>|undefined} style Style.\n * @param {string} styleUrl Style URL.\n * @param {Array<module:ol/style/Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<module:ol/style/Style>|string)>} sharedStyles Shared styles.\n * @param {boolean|undefined} showPointNames true to show names for point placemarks.\n * @return {module:ol/style/Style~StyleFunction} Feature style function.\n */\nfunction createFeatureStyleFunction(style, styleUrl, defaultStyle, sharedStyles, showPointNames) {\n\n  return (\n    /**\n     * @param {module:ol/Feature} feature feature.\n     * @param {number} resolution Resolution.\n     * @return {Array<module:ol/style/Style>} Style.\n     */\n    function(feature, resolution) {\n      let drawName = showPointNames;\n      /** @type {module:ol/style/Style|undefined} */\n      let nameStyle;\n      let name = '';\n      if (drawName) {\n        const geometry = feature.getGeometry();\n        if (geometry) {\n          drawName = geometry.getType() === GeometryType.POINT;\n        }\n      }\n\n      if (drawName) {\n        name = /** @type {string} */ (feature.get('name'));\n        drawName = drawName && name;\n      }\n\n      if (style) {\n        if (drawName) {\n          nameStyle = createNameStyleFunction(style[0], name);\n          return style.concat(nameStyle);\n        }\n        return style;\n      }\n      if (styleUrl) {\n        const foundStyle = findStyle(styleUrl, defaultStyle, sharedStyles);\n        if (drawName) {\n          nameStyle = createNameStyleFunction(foundStyle[0], name);\n          return foundStyle.concat(nameStyle);\n        }\n        return foundStyle;\n      }\n      if (drawName) {\n        nameStyle = createNameStyleFunction(defaultStyle[0], name);\n        return defaultStyle.concat(nameStyle);\n      }\n      return defaultStyle;\n    }\n  );\n}\n\n\n/**\n * @param {Array<module:ol/style/Style>|string|undefined} styleValue Style value.\n * @param {Array<module:ol/style/Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<module:ol/style/Style>|string)>} sharedStyles\n * Shared styles.\n * @return {Array<module:ol/style/Style>} Style.\n */\nfunction findStyle(styleValue, defaultStyle, sharedStyles) {\n  if (Array.isArray(styleValue)) {\n    return styleValue;\n  } else if (typeof styleValue === 'string') {\n    // KML files in the wild occasionally forget the leading `#` on styleUrls\n    // defined in the same document.  Add a leading `#` if it enables to find\n    // a style.\n    if (!(styleValue in sharedStyles) && ('#' + styleValue in sharedStyles)) {\n      styleValue = '#' + styleValue;\n    }\n    return findStyle(sharedStyles[styleValue], defaultStyle, sharedStyles);\n  } else {\n    return defaultStyle;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {module:ol/color~Color|undefined} Color.\n */\nfunction readColor(node) {\n  const s = getAllTextContent(node, false);\n  // The KML specification states that colors should not include a leading `#`\n  // but we tolerate them.\n  const m = /^\\s*#?\\s*([0-9A-Fa-f]{8})\\s*$/.exec(s);\n  if (m) {\n    const hexColor = m[1];\n    return [\n      parseInt(hexColor.substr(6, 2), 16),\n      parseInt(hexColor.substr(4, 2), 16),\n      parseInt(hexColor.substr(2, 2), 16),\n      parseInt(hexColor.substr(0, 2), 16) / 255\n    ];\n\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {Array<number>|undefined} Flat coordinates.\n */\nexport function readFlatCoordinates(node) {\n  let s = getAllTextContent(node, false);\n  const flatCoordinates = [];\n  // The KML specification states that coordinate tuples should not include\n  // spaces, but we tolerate them.\n  const re =\n      /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?))?\\s*/i;\n  let m;\n  while ((m = re.exec(s))) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = m[3] ? parseFloat(m[3]) : 0;\n    flatCoordinates.push(x, y, z);\n    s = s.substr(m[0].length);\n  }\n  if (s !== '') {\n    return undefined;\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string} URI.\n */\nfunction readURI(node) {\n  const s = getAllTextContent(node, false).trim();\n  let baseURI = node.baseURI;\n  if (!baseURI || baseURI == 'about:blank') {\n    baseURI = window.location.href;\n  }\n  if (baseURI) {\n    const url = new URL(s, baseURI);\n    return url.href;\n  } else {\n    return s;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {module:ol/format/KML~Vec2} Vec2.\n */\nfunction readVec2(node) {\n  const xunits = node.getAttribute('xunits');\n  const yunits = node.getAttribute('yunits');\n  let origin;\n  if (xunits !== 'insetPixels') {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_LEFT;\n    } else {\n      origin = IconOrigin.TOP_LEFT;\n    }\n  } else {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_RIGHT;\n    } else {\n      origin = IconOrigin.TOP_RIGHT;\n    }\n  }\n  return {\n    x: parseFloat(node.getAttribute('x')),\n    xunits: ICON_ANCHOR_UNITS_MAP[xunits],\n    y: parseFloat(node.getAttribute('y')),\n    yunits: ICON_ANCHOR_UNITS_MAP[yunits],\n    origin: origin\n  };\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Scale.\n */\nfunction readScale(node) {\n  return readDecimal(node);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst STYLE_MAP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Pair': pairDataParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<module:ol/style/Style>|string|undefined} StyleMap.\n */\nfunction readStyleMapValue(node, objectStack) {\n  return pushParseAndPop(undefined,\n    STYLE_MAP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst ICON_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeObjectPropertySetter(readIcon),\n    'heading': makeObjectPropertySetter(readDecimal),\n    'hotSpot': makeObjectPropertySetter(readVec2),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction iconStyleParser(node, objectStack) {\n  // FIXME refreshMode\n  // FIXME refreshInterval\n  // FIXME viewRefreshTime\n  // FIXME viewBoundScale\n  // FIXME viewFormat\n  // FIXME httpQuery\n  const object = pushParseAndPop(\n    {}, ICON_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const IconObject = 'Icon' in object ? object['Icon'] : {};\n  const drawIcon = (!('Icon' in object) || Object.keys(IconObject).length > 0);\n  let src;\n  const href = /** @type {string|undefined} */\n      (IconObject['href']);\n  if (href) {\n    src = href;\n  } else if (drawIcon) {\n    src = DEFAULT_IMAGE_STYLE_SRC;\n  }\n  let anchor, anchorXUnits, anchorYUnits;\n  let anchorOrigin = IconOrigin.BOTTOM_LEFT;\n  const hotSpot = /** @type {module:ol/format/KML~Vec2|undefined} */\n      (object['hotSpot']);\n  if (hotSpot) {\n    anchor = [hotSpot.x, hotSpot.y];\n    anchorXUnits = hotSpot.xunits;\n    anchorYUnits = hotSpot.yunits;\n    anchorOrigin = hotSpot.origin;\n  } else if (src === DEFAULT_IMAGE_STYLE_SRC) {\n    anchor = DEFAULT_IMAGE_STYLE_ANCHOR;\n    anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n    anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n  } else if (/^http:\\/\\/maps\\.(?:google|gstatic)\\.com\\//.test(src)) {\n    anchor = [0.5, 0];\n    anchorXUnits = IconAnchorUnits.FRACTION;\n    anchorYUnits = IconAnchorUnits.FRACTION;\n  }\n\n  let offset;\n  const x = /** @type {number|undefined} */\n      (IconObject['x']);\n  const y = /** @type {number|undefined} */\n      (IconObject['y']);\n  if (x !== undefined && y !== undefined) {\n    offset = [x, y];\n  }\n\n  let size;\n  const w = /** @type {number|undefined} */\n      (IconObject['w']);\n  const h = /** @type {number|undefined} */\n      (IconObject['h']);\n  if (w !== undefined && h !== undefined) {\n    size = [w, h];\n  }\n\n  let rotation;\n  const heading = /** @type {number} */\n      (object['heading']);\n  if (heading !== undefined) {\n    rotation = toRadians(heading);\n  }\n\n  let scale = /** @type {number|undefined} */\n      (object['scale']);\n\n  if (drawIcon) {\n    if (src == DEFAULT_IMAGE_STYLE_SRC) {\n      size = DEFAULT_IMAGE_STYLE_SIZE;\n      if (scale === undefined) {\n        scale = DEFAULT_IMAGE_SCALE_MULTIPLIER;\n      }\n    }\n\n    const imageStyle = new Icon({\n      anchor: anchor,\n      anchorOrigin: anchorOrigin,\n      anchorXUnits: anchorXUnits,\n      anchorYUnits: anchorYUnits,\n      crossOrigin: 'anonymous', // FIXME should this be configurable?\n      offset: offset,\n      offsetOrigin: IconOrigin.BOTTOM_LEFT,\n      rotation: rotation,\n      scale: scale,\n      size: size,\n      src: src\n    });\n    styleObject['imageStyle'] = imageStyle;\n  } else {\n    // handle the case when we explicitly want to draw no icon.\n    styleObject['imageStyle'] = DEFAULT_NO_IMAGE_STYLE;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst LABEL_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction labelStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, LABEL_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const textStyle = new Text({\n    fill: new Fill({\n      color: /** @type {module:ol/color~Color} */\n          ('color' in object ? object['color'] : DEFAULT_COLOR)\n    }),\n    scale: /** @type {number|undefined} */\n        (object['scale'])\n  });\n  styleObject['textStyle'] = textStyle;\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst LINE_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'width': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lineStyleParser(node, objectStack) {\n  // FIXME colorMode\n  // FIXME gx:outerColor\n  // FIXME gx:outerWidth\n  // FIXME gx:physicalWidth\n  // FIXME gx:labelVisibility\n  const object = pushParseAndPop(\n    {}, LINE_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const strokeStyle = new Stroke({\n    color: /** @type {module:ol/color~Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR),\n    width: /** @type {number} */ ('width' in object ? object['width'] : 1)\n  });\n  styleObject['strokeStyle'] = strokeStyle;\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst POLY_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'fill': makeObjectPropertySetter(readBoolean),\n    'outline': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction polyStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, POLY_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const fillStyle = new Fill({\n    color: /** @type {module:ol/color~Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR)\n  });\n  styleObject['fillStyle'] = fillStyle;\n  const fill = /** @type {boolean|undefined} */ (object['fill']);\n  if (fill !== undefined) {\n    styleObject['fill'] = fill;\n  }\n  const outline = /** @type {boolean|undefined} */ (object['outline']);\n  if (outline !== undefined) {\n    styleObject['outline'] = outline;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst FLAT_LINEAR_RING_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} LinearRing flat coordinates.\n */\nfunction readFlatLinearRing(node, objectStack) {\n  return pushParseAndPop(null,\n    FLAT_LINEAR_RING_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction gxCoordParser(node, objectStack) {\n  const gxTrackObject = /** @type {module:ol/format/KML~GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const s = getAllTextContent(node, false);\n  const re =\n      /^\\s*([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s*$/i;\n  const m = re.exec(s);\n  if (m) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = parseFloat(m[3]);\n    flatCoordinates.push(x, y, z, 0);\n  } else {\n    flatCoordinates.push(0, 0, 0, 0);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst GX_MULTITRACK_GEOMETRY_PARSERS = makeStructureNS(\n  GX_NAMESPACE_URIS, {\n    'Track': makeArrayPusher(readGxTrack)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/geom/MultiLineString|undefined} MultiLineString.\n */\nfunction readGxMultiTrack(node, objectStack) {\n  const lineStrings = pushParseAndPop([],\n    GX_MULTITRACK_GEOMETRY_PARSERS, node, objectStack);\n  if (!lineStrings) {\n    return undefined;\n  }\n  return new MultiLineString(lineStrings);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst GX_TRACK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'when': whenParser\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'coord': gxCoordParser\n    }));\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/geom/LineString|undefined} LineString.\n */\nfunction readGxTrack(node, objectStack) {\n  const gxTrackObject = pushParseAndPop(\n    /** @type {module:ol/format/KML~GxTrackObject} */ ({\n      flatCoordinates: [],\n      whens: []\n    }), GX_TRACK_PARSERS, node, objectStack);\n  if (!gxTrackObject) {\n    return undefined;\n  }\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const whens = gxTrackObject.whens;\n  for (let i = 0, ii = Math.min(flatCoordinates.length, whens.length); i < ii; ++i) {\n    flatCoordinates[4 * i + 3] = whens[i];\n  }\n  return new LineString(flatCoordinates, GeometryLayout.XYZM);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst ICON_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeObjectPropertySetter(readDecimal),\n      'y': makeObjectPropertySetter(readDecimal),\n      'w': makeObjectPropertySetter(readDecimal),\n      'h': makeObjectPropertySetter(readDecimal)\n    }));\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object} Icon object.\n */\nfunction readIcon(node, objectStack) {\n  const iconObject = pushParseAndPop(\n    {}, ICON_PARSERS, node, objectStack);\n  if (iconObject) {\n    return iconObject;\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst GEOMETRY_FLAT_COORDINATES_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} Flat coordinates.\n */\nfunction readFlatCoordinatesFromNode(node, objectStack) {\n  return pushParseAndPop(null,\n    GEOMETRY_FLAT_COORDINATES_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst EXTRUDE_AND_ALTITUDE_MODE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeObjectPropertySetter(readBoolean),\n    'tessellate': makeObjectPropertySetter(readBoolean),\n    'altitudeMode': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/geom/LineString|undefined} LineString.\n */\nfunction readLineString(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const lineString = new LineString(flatCoordinates, GeometryLayout.XYZ);\n    lineString.setProperties(properties);\n    return lineString;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/geom/Polygon|undefined} Polygon.\n */\nfunction readLinearRing(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, [flatCoordinates.length]);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst MULTI_GEOMETRY_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeArrayPusher(readLineString),\n    'LinearRing': makeArrayPusher(readLinearRing),\n    'MultiGeometry': makeArrayPusher(readMultiGeometry),\n    'Point': makeArrayPusher(readPoint),\n    'Polygon': makeArrayPusher(readPolygon)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/geom/Geometry} Geometry.\n */\nfunction readMultiGeometry(node, objectStack) {\n  const geometries = pushParseAndPop([],\n    MULTI_GEOMETRY_PARSERS, node, objectStack);\n  if (!geometries) {\n    return null;\n  }\n  if (geometries.length === 0) {\n    return new GeometryCollection(geometries);\n  }\n  /** @type {module:ol/geom/Geometry} */\n  let multiGeometry;\n  let homogeneous = true;\n  const type = geometries[0].getType();\n  let geometry;\n  for (let i = 1, ii = geometries.length; i < ii; ++i) {\n    geometry = geometries[i];\n    if (geometry.getType() != type) {\n      homogeneous = false;\n      break;\n    }\n  }\n  if (homogeneous) {\n    let layout;\n    let flatCoordinates;\n    if (type == GeometryType.POINT) {\n      const point = geometries[0];\n      layout = point.getLayout();\n      flatCoordinates = point.getFlatCoordinates();\n      for (let i = 1, ii = geometries.length; i < ii; ++i) {\n        geometry = geometries[i];\n        extend(flatCoordinates, geometry.getFlatCoordinates());\n      }\n      multiGeometry = new MultiPoint(flatCoordinates, layout);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.LINE_STRING) {\n      multiGeometry = new MultiLineString(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.POLYGON) {\n      multiGeometry = new MultiPolygon(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.GEOMETRY_COLLECTION) {\n      multiGeometry = new GeometryCollection(geometries);\n    } else {\n      assert(false, 37); // Unknown geometry type found\n    }\n  } else {\n    multiGeometry = new GeometryCollection(geometries);\n  }\n  return (\n    /** @type {module:ol/geom/Geometry} */ (multiGeometry)\n  );\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/geom/Point|undefined} Point.\n */\nfunction readPoint(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const point = new Point(flatCoordinates, GeometryLayout.XYZ);\n    point.setProperties(properties);\n    return point;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst FLAT_LINEAR_RINGS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'innerBoundaryIs': innerBoundaryIsParser,\n    'outerBoundaryIs': outerBoundaryIsParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {module:ol/geom/Polygon|undefined} Polygon.\n */\nfunction readPolygon(node, objectStack) {\n  const properties = pushParseAndPop(/** @type {Object<string,*>} */ ({}),\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatLinearRings = pushParseAndPop([null],\n    FLAT_LINEAR_RINGS_PARSERS, node, objectStack);\n  if (flatLinearRings && flatLinearRings[0]) {\n    const flatCoordinates = flatLinearRings[0];\n    const ends = [flatCoordinates.length];\n    for (let i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n      extend(flatCoordinates, flatLinearRings[i]);\n      ends.push(flatCoordinates.length);\n    }\n    const polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, ends);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': iconStyleParser,\n    'LabelStyle': labelStyleParser,\n    'LineStyle': lineStyleParser,\n    'PolyStyle': polyStyleParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<module:ol/style/Style>} Style.\n */\nfunction readStyle(node, objectStack) {\n  const styleObject = pushParseAndPop(\n    {}, STYLE_PARSERS, node, objectStack);\n  if (!styleObject) {\n    return null;\n  }\n  let fillStyle = /** @type {module:ol/style/Fill} */\n      ('fillStyle' in styleObject ?\n        styleObject['fillStyle'] : DEFAULT_FILL_STYLE);\n  const fill = /** @type {boolean|undefined} */ (styleObject['fill']);\n  if (fill !== undefined && !fill) {\n    fillStyle = null;\n  }\n  let imageStyle = /** @type {module:ol/style/Image} */\n      ('imageStyle' in styleObject ?\n        styleObject['imageStyle'] : DEFAULT_IMAGE_STYLE);\n  if (imageStyle == DEFAULT_NO_IMAGE_STYLE) {\n    imageStyle = undefined;\n  }\n  const textStyle = /** @type {module:ol/style/Text} */\n      ('textStyle' in styleObject ?\n        styleObject['textStyle'] : DEFAULT_TEXT_STYLE);\n  let strokeStyle = /** @type {module:ol/style/Stroke} */\n      ('strokeStyle' in styleObject ?\n        styleObject['strokeStyle'] : DEFAULT_STROKE_STYLE);\n  const outline = /** @type {boolean|undefined} */\n      (styleObject['outline']);\n  if (outline !== undefined && !outline) {\n    strokeStyle = null;\n  }\n  return [new Style({\n    fill: fillStyle,\n    image: imageStyle,\n    stroke: strokeStyle,\n    text: textStyle,\n    zIndex: undefined // FIXME\n  })];\n}\n\n\n/**\n * Reads an array of geometries and creates arrays for common geometry\n * properties. Then sets them to the multi geometry.\n * @param {module:ol/geom/MultiPoint|module:ol/geom/MultiLineString|module:ol/geom/MultiPolygon} multiGeometry A multi-geometry.\n * @param {Array<module:ol/geom/Geometry>} geometries List of geometries.\n */\nfunction setCommonGeometryProperties(multiGeometry, geometries) {\n  const ii = geometries.length;\n  const extrudes = new Array(geometries.length);\n  const tessellates = new Array(geometries.length);\n  const altitudeModes = new Array(geometries.length);\n  let hasExtrude, hasTessellate, hasAltitudeMode;\n  hasExtrude = hasTessellate = hasAltitudeMode = false;\n  for (let i = 0; i < ii; ++i) {\n    const geometry = geometries[i];\n    extrudes[i] = geometry.get('extrude');\n    tessellates[i] = geometry.get('tessellate');\n    altitudeModes[i] = geometry.get('altitudeMode');\n    hasExtrude = hasExtrude || extrudes[i] !== undefined;\n    hasTessellate = hasTessellate || tessellates[i] !== undefined;\n    hasAltitudeMode = hasAltitudeMode || altitudeModes[i];\n  }\n  if (hasExtrude) {\n    multiGeometry.set('extrude', extrudes);\n  }\n  if (hasTessellate) {\n    multiGeometry.set('tessellate', tessellates);\n  }\n  if (hasAltitudeMode) {\n    multiGeometry.set('altitudeMode', altitudeModes);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'displayName': makeObjectPropertySetter(readString),\n    'value': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction dataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  parseNode(DATA_PARSERS, node, objectStack);\n  const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  if (name !== null) {\n    featureObject[name] = featureObject.value;\n  } else if (featureObject.displayName !== null) {\n    featureObject[featureObject.displayName] = featureObject.value;\n  }\n  delete featureObject['value'];\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst EXTENDED_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': dataParser,\n    'SchemaData': schemaDataParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction extendedDataParser(node, objectStack) {\n  parseNode(EXTENDED_DATA_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction regionParser(node, objectStack) {\n  parseNode(REGION_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst PAIR_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Style': makeObjectPropertySetter(readStyle),\n    'key': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction pairDataParser(node, objectStack) {\n  const pairObject = pushParseAndPop(\n    {}, PAIR_PARSERS, node, objectStack);\n  if (!pairObject) {\n    return;\n  }\n  const key = /** @type {string|undefined} */\n      (pairObject['key']);\n  if (key && key == 'normal') {\n    const styleUrl = /** @type {string|undefined} */\n        (pairObject['styleUrl']);\n    if (styleUrl) {\n      objectStack[objectStack.length - 1] = styleUrl;\n    }\n    const Style = /** @type {module:ol/style/Style} */\n        (pairObject['Style']);\n    if (Style) {\n      objectStack[objectStack.length - 1] = Style;\n    }\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction placemarkStyleMapParser(node, objectStack) {\n  const styleMapValue = readStyleMapValue(node, objectStack);\n  if (!styleMapValue) {\n    return;\n  }\n  const placemarkObject = objectStack[objectStack.length - 1];\n  if (Array.isArray(styleMapValue)) {\n    placemarkObject['Style'] = styleMapValue;\n  } else if (typeof styleMapValue === 'string') {\n    placemarkObject['styleUrl'] = styleMapValue;\n  } else {\n    assert(false, 38); // `styleMapValue` has an unknown type\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst SCHEMA_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'SimpleData': simpleDataParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction schemaDataParser(node, objectStack) {\n  parseNode(SCHEMA_DATA_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction simpleDataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (name !== null) {\n    const data = readString(node);\n    const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    featureObject[name] = data;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst LAT_LON_ALT_BOX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'altitudeMode': makeObjectPropertySetter(readString),\n    'minAltitude': makeObjectPropertySetter(readDecimal),\n    'maxAltitude': makeObjectPropertySetter(readDecimal),\n    'north': makeObjectPropertySetter(readDecimal),\n    'south': makeObjectPropertySetter(readDecimal),\n    'east': makeObjectPropertySetter(readDecimal),\n    'west': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction latLonAltBoxParser(node, objectStack) {\n  const object = pushParseAndPop({}, LAT_LON_ALT_BOX_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const regionObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const extent = [\n    parseFloat(object['west']),\n    parseFloat(object['south']),\n    parseFloat(object['east']),\n    parseFloat(object['north'])\n  ];\n  regionObject['extent'] = extent;\n  regionObject['altitudeMode'] = object['altitudeMode'];\n  regionObject['minAltitude'] = parseFloat(object['minAltitude']);\n  regionObject['maxAltitude'] = parseFloat(object['maxAltitude']);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst LOD_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'minLodPixels': makeObjectPropertySetter(readDecimal),\n    'maxLodPixels': makeObjectPropertySetter(readDecimal),\n    'minFadeExtent': makeObjectPropertySetter(readDecimal),\n    'maxFadeExtent': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lodParser(node, objectStack) {\n  const object = pushParseAndPop({}, LOD_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const lodObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  lodObject['minLodPixels'] = parseFloat(object['minLodPixels']);\n  lodObject['maxLodPixels'] = parseFloat(object['maxLodPixels']);\n  lodObject['minFadeExtent'] = parseFloat(object['minFadeExtent']);\n  lodObject['maxFadeExtent'] = parseFloat(object['maxFadeExtent']);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst INNER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction innerBoundaryIsParser(node, objectStack) {\n  /** @type {Array<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    INNER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings.push(flatLinearRing);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Parser>>}\n */\nconst OUTER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction outerBoundaryIsParser(node, objectStack) {\n  /** @type {Array<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    OUTER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings[0] = flatLinearRing;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction linkParser(node, objectStack) {\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction whenParser(node, objectStack) {\n  const gxTrackObject = /** @type {module:ol/format/KML~GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const whens = gxTrackObject.whens;\n  const s = getAllTextContent(node, false);\n  const when = Date.parse(s);\n  whens.push(isNaN(when) ? 0 : when);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the color to.\n * @param {module:ol/color~Color|string} color Color.\n */\nfunction writeColorTextNode(node, color) {\n  const rgba = asArray(color);\n  const opacity = (rgba.length == 4) ? rgba[3] : 1;\n  const abgr = [opacity * 255, rgba[2], rgba[1], rgba[0]];\n  for (let i = 0; i < 4; ++i) {\n    const hex = parseInt(abgr[i], 10).toString(16);\n    abgr[i] = (hex.length == 1) ? '0' + hex : hex;\n  }\n  writeStringTextNode(node, abgr.join(''));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the coordinates to.\n * @param {Array<number>} coordinates Coordinates.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeCoordinatesTextNode(node, coordinates, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n\n  const layout = context['layout'];\n  const stride = context['stride'];\n\n  let dimension;\n  if (layout == GeometryLayout.XY ||\n      layout == GeometryLayout.XYM) {\n    dimension = 2;\n  } else if (layout == GeometryLayout.XYZ ||\n      layout == GeometryLayout.XYZM) {\n    dimension = 3;\n  } else {\n    assert(false, 34); // Invalid geometry layout\n  }\n\n  const ii = coordinates.length;\n  let text = '';\n  if (ii > 0) {\n    text += coordinates[0];\n    for (let d = 1; d < dimension; ++d) {\n      text += ',' + coordinates[d];\n    }\n    for (let i = stride; i < ii; i += stride) {\n      text += ' ' + coordinates[i];\n      for (let d = 1; d < dimension; ++d) {\n        text += ',' + coordinates[i + d];\n      }\n    }\n  }\n  writeStringTextNode(node, text);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst EXTENDEDDATA_NODE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': makeChildAppender(writeDataNode),\n    'value': makeChildAppender(writeDataNodeValue),\n    'displayName': makeChildAppender(writeDataNodeName)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {{name: *, value: *}} pair Name value pair.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeDataNode(node, pair, objectStack) {\n  node.setAttribute('name', pair.name);\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const value = pair.value;\n\n  if (typeof value == 'object') {\n    if (value !== null && value.displayName) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.displayName], objectStack, ['displayName']);\n    }\n\n    if (value !== null && value.value) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.value], objectStack, ['value']);\n    }\n  } else {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, [value], objectStack, ['value']);\n  }\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the name to.\n * @param {string} name DisplayName.\n */\nfunction writeDataNodeName(node, name) {\n  writeCDATASection(node, name);\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the value to.\n * @param {string} value Value.\n */\nfunction writeDataNodeValue(node, value) {\n  writeStringTextNode(node, value);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst DOCUMENT_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst DOCUMENT_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  const parentNode = objectStack[objectStack.length - 1].node;\n  return createElementNS(parentNode.namespaceURI, 'Placemark');\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<module:ol/Feature>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @this {module:ol/format/KML}\n */\nfunction writeDocument(node, features, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, DOCUMENT_SERIALIZERS,\n    DOCUMENT_NODE_FACTORY, features, objectStack, undefined,\n    this);\n}\n\n\n/**\n * A factory for creating Data nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nconst DATA_NODE_FACTORY = makeSimpleNodeFactory('Data');\n\n\n/**\n * @param {Node} node Node.\n * @param {{names: Array<string>, values: (Array<*>)}} namesAndValues Names and values.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeExtendedData(node, namesAndValues, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const names = namesAndValues.names;\n  const values = namesAndValues.values;\n  const length = names.length;\n\n  for (let i = 0; i < length; i++) {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      DATA_NODE_FACTORY, [{name: names[i], value: values[i]}], objectStack);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst ICON_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'href'\n  ],\n  makeStructureNS(GX_NAMESPACE_URIS, [\n    'x', 'y', 'w', 'h'\n  ]));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst ICON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeChildAppender(writeStringTextNode)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeChildAppender(writeDecimalTextNode),\n      'y': makeChildAppender(writeDecimalTextNode),\n      'w': makeChildAppender(writeDecimalTextNode),\n      'h': makeChildAppender(writeDecimalTextNode)\n    }));\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GX_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  return createElementNS(GX_NAMESPACE_URIS[0],\n    'gx:' + opt_nodeName);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Object} icon Icon object.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIcon(node, icon, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const parentNode = objectStack[objectStack.length - 1].node;\n  let orderedKeys = ICON_SEQUENCE[parentNode.namespaceURI];\n  let values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context,\n    ICON_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n  orderedKeys =\n      ICON_SEQUENCE[GX_NAMESPACE_URIS[0]];\n  values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context, ICON_SERIALIZERS,\n    GX_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst ICON_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'scale', 'heading', 'Icon', 'hotSpot'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst ICON_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeChildAppender(writeIcon),\n    'heading': makeChildAppender(writeDecimalTextNode),\n    'hotSpot': makeChildAppender(writeVec2),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Icon} style Icon style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIconStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const src = style.getSrc();\n  const size = style.getSize();\n  const iconImageSize = style.getImageSize();\n  const iconProperties = {\n    'href': src\n  };\n\n  if (size) {\n    iconProperties['w'] = size[0];\n    iconProperties['h'] = size[1];\n    const anchor = style.getAnchor(); // top-left\n    const origin = style.getOrigin(); // top-left\n\n    if (origin && iconImageSize && origin[0] !== 0 && origin[1] !== size[1]) {\n      iconProperties['x'] = origin[0];\n      iconProperties['y'] = iconImageSize[1] - (origin[1] + size[1]);\n    }\n\n    if (anchor && (anchor[0] !== size[0] / 2 || anchor[1] !== size[1] / 2)) {\n      const /** @type {module:ol/format/KML~Vec2} */ hotSpot = {\n        x: anchor[0],\n        xunits: IconAnchorUnits.PIXELS,\n        y: size[1] - anchor[1],\n        yunits: IconAnchorUnits.PIXELS\n      };\n      properties['hotSpot'] = hotSpot;\n    }\n  }\n\n  properties['Icon'] = iconProperties;\n\n  const scale = style.getScale();\n  if (scale !== 1) {\n    properties['scale'] = scale;\n  }\n\n  const rotation = style.getRotation();\n  if (rotation !== 0) {\n    properties['heading'] = rotation; // 0-360\n  }\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = ICON_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, ICON_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst LABEL_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'scale'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst LABEL_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Text} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLabelStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fill = style.getFill();\n  if (fill) {\n    properties['color'] = fill.getColor();\n  }\n  const scale = style.getScale();\n  if (scale && scale !== 1) {\n    properties['scale'] = scale;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys =\n      LABEL_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LABEL_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst LINE_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'width'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst LINE_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'width': makeChildAppender(writeDecimalTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Stroke} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLineStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const properties = {\n    'color': style.getColor(),\n    'width': style.getWidth()\n  };\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = LINE_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LINE_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'Point',\n  'LineString': 'LineString',\n  'LinearRing': 'LinearRing',\n  'Polygon': 'Polygon',\n  'MultiPoint': 'MultiGeometry',\n  'MultiLineString': 'MultiGeometry',\n  'MultiPolygon': 'MultiGeometry',\n  'GeometryCollection': 'MultiGeometry'\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GEOMETRY_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  if (value) {\n    const parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS(parentNode.namespaceURI,\n      GEOMETRY_TYPE_TO_NODENAME[/** @type {module:ol/geom/Geometry} */ (value).getType()]);\n  }\n};\n\n\n/**\n * A factory for creating Point nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst POINT_NODE_FACTORY = makeSimpleNodeFactory('Point');\n\n\n/**\n * A factory for creating LineString nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst LINE_STRING_NODE_FACTORY = makeSimpleNodeFactory('LineString');\n\n\n/**\n * A factory for creating LinearRing nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst LINEAR_RING_NODE_FACTORY = makeSimpleNodeFactory('LinearRing');\n\n\n/**\n * A factory for creating Polygon nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst POLYGON_NODE_FACTORY = makeSimpleNodeFactory('Polygon');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst MULTI_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeChildAppender(\n      writePrimitiveGeometry),\n    'Point': makeChildAppender(\n      writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'GeometryCollection': makeChildAppender(\n      writeMultiGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeMultiGeometry(node, geometry, objectStack) {\n  /** @type {module:ol/xml~NodeStackItem} */\n  const context = {node: node};\n  const type = geometry.getType();\n  /** @type {Array<module:ol/geom/Geometry>} */\n  let geometries;\n  /** @type {function(*, Array<*>, string=): (Node|undefined)} */\n  let factory;\n  if (type == GeometryType.GEOMETRY_COLLECTION) {\n    geometries = /** @type {module:ol/geom/GeometryCollection} */ (geometry).getGeometries();\n    factory = GEOMETRY_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POINT) {\n    geometries = /** @type {module:ol/geom/MultiPoint} */ (geometry).getPoints();\n    factory = POINT_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_LINE_STRING) {\n    geometries =\n        (/** @type {module:ol/geom/MultiLineString} */ (geometry)).getLineStrings();\n    factory = LINE_STRING_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POLYGON) {\n    geometries =\n        (/** @type {module:ol/geom/MultiPolygon} */ (geometry)).getPolygons();\n    factory = POLYGON_NODE_FACTORY;\n  } else {\n    assert(false, 39); // Unknown geometry type\n  }\n  pushSerializeAndPop(context,\n    MULTI_GEOMETRY_SERIALIZERS, factory,\n    geometries, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst BOUNDARY_IS_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeChildAppender(\n      writePrimitiveGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LinearRing} linearRing Linear ring.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeBoundaryIs(node, linearRing, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context,\n    BOUNDARY_IS_SERIALIZERS,\n    LINEAR_RING_NODE_FACTORY, [linearRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst PLACEMARK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': makeChildAppender(writeExtendedData),\n    'MultiGeometry': makeChildAppender(writeMultiGeometry),\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'LinearRing': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'Style': makeChildAppender(writeStyle),\n    'address': makeChildAppender(writeStringTextNode),\n    'description': makeChildAppender(writeStringTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'open': makeChildAppender(writeBooleanTextNode),\n    'phoneNumber': makeChildAppender(writeStringTextNode),\n    'styleUrl': makeChildAppender(writeStringTextNode),\n    'visibility': makeChildAppender(writeBooleanTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst PLACEMARK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'open', 'visibility', 'address', 'phoneNumber', 'description',\n    'styleUrl', 'Style'\n  ]);\n\n\n/**\n * A factory for creating ExtendedData nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nconst EXTENDEDDATA_NODE_FACTORY = makeSimpleNodeFactory('ExtendedData');\n\n\n/**\n * FIXME currently we do serialize arbitrary/custom feature properties\n * (ExtendedData).\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n * @this {module:ol/format/KML}\n */\nfunction writePlacemark(node, feature, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n\n  // set id\n  if (feature.getId()) {\n    node.setAttribute('id', feature.getId());\n  }\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = feature.getProperties();\n\n  // don't export these to ExtendedData\n  const filter = {'address': 1, 'description': 1, 'name': 1, 'open': 1,\n    'phoneNumber': 1, 'styleUrl': 1, 'visibility': 1};\n  filter[feature.getGeometryName()] = 1;\n  const keys = Object.keys(properties || {}).sort().filter(function(v) {\n    return !filter[v];\n  });\n\n  if (keys.length > 0) {\n    const sequence = makeSequence(properties, keys);\n    const namesAndValues = {names: keys, values: sequence};\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n      EXTENDEDDATA_NODE_FACTORY, [namesAndValues], objectStack);\n  }\n\n  const styleFunction = feature.getStyleFunction();\n  if (styleFunction) {\n    // FIXME the styles returned by the style function are supposed to be\n    // resolution-independent here\n    const styles = styleFunction(feature, 0);\n    if (styles) {\n      const style = Array.isArray(styles) ? styles[0] : styles;\n      if (this.writeStyles_) {\n        properties['Style'] = style;\n      }\n      const textStyle = style.getText();\n      if (textStyle) {\n        properties['name'] = textStyle.getText();\n      }\n    }\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PLACEMARK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n\n  // serialize geometry\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = transformWithOptions(geometry, true, options);\n  }\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    GEOMETRY_NODE_FACTORY, [geometry], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst PRIMITIVE_GEOMETRY_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'extrude', 'tessellate', 'altitudeMode', 'coordinates'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst PRIMITIVE_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeChildAppender(writeBooleanTextNode),\n    'tessellate': makeChildAppender(writeBooleanTextNode),\n    'altitudeMode': makeChildAppender(writeStringTextNode),\n    'coordinates': makeChildAppender(writeCoordinatesTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/SimpleGeometry} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePrimitiveGeometry(node, geometry, objectStack) {\n  const flatCoordinates = geometry.getFlatCoordinates();\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  context['layout'] = geometry.getLayout();\n  context['stride'] = geometry.getStride();\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = geometry.getProperties();\n  properties.coordinates = flatCoordinates;\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PRIMITIVE_GEOMETRY_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PRIMITIVE_GEOMETRY_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst POLYGON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'outerBoundaryIs': makeChildAppender(\n      writeBoundaryIs),\n    'innerBoundaryIs': makeChildAppender(\n      writeBoundaryIs)\n  });\n\n\n/**\n * A factory for creating innerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst INNER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('innerBoundaryIs');\n\n\n/**\n * A factory for creating outerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst OUTER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('outerBoundaryIs');\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Polygon} polygon Polygon.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolygon(node, polygon, objectStack) {\n  const linearRings = polygon.getLinearRings();\n  const outerRing = linearRings.shift();\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  // inner rings\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    INNER_BOUNDARY_NODE_FACTORY,\n    linearRings, objectStack);\n  // outer ring\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    OUTER_BOUNDARY_NODE_FACTORY,\n    [outerRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst POLY_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode)\n  });\n\n\n/**\n * A factory for creating coordinates nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst COLOR_NODE_FACTORY = makeSimpleNodeFactory('color');\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Fill} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolyStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, POLY_STYLE_SERIALIZERS,\n    COLOR_NODE_FACTORY, [style.getColor()], objectStack);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the scale to.\n * @param {number|undefined} scale Scale.\n */\nfunction writeScaleTextNode(node, scale) {\n  // the Math is to remove any excess decimals created by float arithmetic\n  writeDecimalTextNode(node,\n    Math.round(scale * 1e6) / 1e6);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'IconStyle', 'LabelStyle', 'LineStyle', 'PolyStyle'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, module:ol/xml~Serializer>>}\n */\nconst STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': makeChildAppender(writeIconStyle),\n    'LabelStyle': makeChildAppender(writeLabelStyle),\n    'LineStyle': makeChildAppender(writeLineStyle),\n    'PolyStyle': makeChildAppender(writePolyStyle)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Style} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  const imageStyle = style.getImage();\n  const textStyle = style.getText();\n  if (imageStyle instanceof Icon) {\n    properties['IconStyle'] = imageStyle;\n  }\n  if (textStyle) {\n    properties['LabelStyle'] = textStyle;\n  }\n  if (strokeStyle) {\n    properties['LineStyle'] = strokeStyle;\n  }\n  if (fillStyle) {\n    properties['PolyStyle'] = fillStyle;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the Vec2 to.\n * @param {module:ol/format/KML~Vec2} vec2 Vec2.\n */\nfunction writeVec2(node, vec2) {\n  node.setAttribute('x', vec2.x);\n  node.setAttribute('y', vec2.y);\n  node.setAttribute('xunits', vec2.xunits);\n  node.setAttribute('yunits', vec2.yunits);\n}\n\n\nexport default KML;\n","/**\n * @module ol/format/TopoJSON\n */\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport JSONFeature from '../format/JSONFeature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/proj~ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {string} [layerName] Set the name of the TopoJSON topology\n * `objects`'s children as feature property with the specified name. This means\n * that when set to `'layer'`, a topology like\n * ```\n * {\n *   \"type\": \"Topology\",\n *   \"objects\": {\n *     \"example\": {\n *       \"type\": \"GeometryCollection\",\n *       \"geometries\": []\n *     }\n *   }\n * }\n * ```\n * will result in features that have a property `'layer'` set to `'example'`.\n * When not set, no property will be added to features.\n * @property {Array<string>} [layers] Names of the TopoJSON topology's\n * `objects`'s children to read features from.  If not provided, features will\n * be read from all children.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading data in the TopoJSON format.\n *\n * @api\n */\nclass TopoJSON extends JSONFeature {\n\n  /**\n   * @param {module:ol/format/TopoJSON~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.layerName_ = options.layerName;\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.layers_ = options.layers ? options.layers : null;\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ?\n        options.dataProjection : 'EPSG:4326');\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    if (object.type == 'Topology') {\n      const topoJSONTopology = /** @type {TopoJSONTopology} */ (object);\n      let transform, scale = null, translate = null;\n      if (topoJSONTopology.transform) {\n        transform = topoJSONTopology.transform;\n        scale = transform.scale;\n        translate = transform.translate;\n      }\n      const arcs = topoJSONTopology.arcs;\n      if (transform) {\n        transformArcs(arcs, scale, translate);\n      }\n      /** @type {Array<module:ol/Feature>} */\n      const features = [];\n      const topoJSONFeatures = topoJSONTopology.objects;\n      const property = this.layerName_;\n      let feature;\n      for (const objectName in topoJSONFeatures) {\n        if (this.layers_ && this.layers_.indexOf(objectName) == -1) {\n          continue;\n        }\n        if (topoJSONFeatures[objectName].type === 'GeometryCollection') {\n          feature = /** @type {TopoJSONGeometryCollection} */ (topoJSONFeatures[objectName]);\n          features.push.apply(features, readFeaturesFromGeometryCollection(\n            feature, arcs, scale, translate, property, objectName, opt_options));\n        } else {\n          feature = /** @type {TopoJSONGeometry} */ (topoJSONFeatures[objectName]);\n          features.push(readFeatureFromGeometry(\n            feature, arcs, scale, translate, property, objectName, opt_options));\n        }\n      }\n      return features;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    return this.dataProjection;\n  }\n\n}\n\n\n/**\n * @const\n * @type {Object<string, function(TopoJSONGeometry, Array, ...Array): module:ol/geom/Geometry>}\n */\nconst GEOMETRY_READERS = {\n  'Point': readPointGeometry,\n  'LineString': readLineStringGeometry,\n  'Polygon': readPolygonGeometry,\n  'MultiPoint': readMultiPointGeometry,\n  'MultiLineString': readMultiLineStringGeometry,\n  'MultiPolygon': readMultiPolygonGeometry\n};\n\n\n/**\n * Concatenate arcs into a coordinate array.\n * @param {Array<number>} indices Indices of arcs to concatenate.  Negative\n *     values indicate arcs need to be reversed.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} arcs Array of arcs (already\n *     transformed).\n * @return {Array<module:ol/coordinate~Coordinate>} Coordinates array.\n */\nfunction concatenateArcs(indices, arcs) {\n  /** @type {Array<module:ol/coordinate~Coordinate>} */\n  const coordinates = [];\n  let index, arc;\n  for (let i = 0, ii = indices.length; i < ii; ++i) {\n    index = indices[i];\n    if (i > 0) {\n      // splicing together arcs, discard last point\n      coordinates.pop();\n    }\n    if (index >= 0) {\n      // forward arc\n      arc = arcs[index];\n    } else {\n      // reverse arc\n      arc = arcs[~index].slice().reverse();\n    }\n    coordinates.push.apply(coordinates, arc);\n  }\n  // provide fresh copies of coordinate arrays\n  for (let j = 0, jj = coordinates.length; j < jj; ++j) {\n    coordinates[j] = coordinates[j].slice();\n  }\n  return coordinates;\n}\n\n\n/**\n * Create a point from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {module:ol/geom/Point} Geometry.\n */\nfunction readPointGeometry(object, scale, translate) {\n  const coordinates = object.coordinates;\n  if (scale && translate) {\n    transformVertex(coordinates, scale, translate);\n  }\n  return new Point(coordinates);\n}\n\n\n/**\n * Create a multi-point from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {module:ol/geom/MultiPoint} Geometry.\n */\nfunction readMultiPointGeometry(object, scale, translate) {\n  const coordinates = object.coordinates;\n  if (scale && translate) {\n    for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n      transformVertex(coordinates[i], scale, translate);\n    }\n  }\n  return new MultiPoint(coordinates);\n}\n\n\n/**\n * Create a linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @return {module:ol/geom/LineString} Geometry.\n */\nfunction readLineStringGeometry(object, arcs) {\n  const coordinates = concatenateArcs(object.arcs, arcs);\n  return new LineString(coordinates);\n}\n\n\n/**\n * Create a multi-linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @return {module:ol/geom/MultiLineString} Geometry.\n */\nfunction readMultiLineStringGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object.arcs.length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object.arcs[i], arcs);\n  }\n  return new MultiLineString(coordinates);\n}\n\n\n/**\n * Create a polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @return {module:ol/geom/Polygon} Geometry.\n */\nfunction readPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object.arcs.length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object.arcs[i], arcs);\n  }\n  return new Polygon(coordinates);\n}\n\n\n/**\n * Create a multi-polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @return {module:ol/geom/MultiPolygon} Geometry.\n */\nfunction readMultiPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object.arcs.length; i < ii; ++i) {\n    // for each polygon\n    const polyArray = object.arcs[i];\n    const ringCoords = [];\n    for (let j = 0, jj = polyArray.length; j < jj; ++j) {\n      // for each ring\n      ringCoords[j] = concatenateArcs(polyArray[j], arcs);\n    }\n    coordinates[i] = ringCoords;\n  }\n  return new MultiPolygon(coordinates);\n}\n\n\n/**\n * Create features from a TopoJSON GeometryCollection object.\n *\n * @param {TopoJSONGeometryCollection} collection TopoJSON Geometry\n *     object.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array<module:ol/Feature>} Array of features.\n */\nfunction readFeaturesFromGeometryCollection(collection, arcs, scale, translate, property, name, opt_options) {\n  const geometries = collection.geometries;\n  const features = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    features[i] = readFeatureFromGeometry(\n      geometries[i], arcs, scale, translate, property, name, opt_options);\n  }\n  return features;\n}\n\n\n/**\n * Create a feature from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON geometry object.\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n */\nfunction readFeatureFromGeometry(object, arcs, scale, translate, property, name, opt_options) {\n  let geometry;\n  const type = object.type;\n  const geometryReader = GEOMETRY_READERS[type];\n  if ((type === 'Point') || (type === 'MultiPoint')) {\n    geometry = geometryReader(object, scale, translate);\n  } else {\n    geometry = geometryReader(object, arcs);\n  }\n  const feature = new Feature();\n  feature.setGeometry(/** @type {module:ol/geom/Geometry} */ (\n    transformWithOptions(geometry, false, opt_options)));\n  if (object.id !== undefined) {\n    feature.setId(object.id);\n  }\n  let properties = object.properties;\n  if (property) {\n    if (!properties) {\n      properties = {};\n    }\n    properties[property] = name;\n  }\n  if (properties) {\n    feature.setProperties(properties);\n  }\n  return feature;\n}\n\n\n/**\n * Apply a linear transform to array of arcs.  The provided array of arcs is\n * modified in place.\n *\n * @param {Array<Array<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArcs(arcs, scale, translate) {\n  for (let i = 0, ii = arcs.length; i < ii; ++i) {\n    transformArc(arcs[i], scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to an arc.  The provided arc is modified in place.\n *\n * @param {Array<module:ol/coordinate~Coordinate>} arc Arc.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArc(arc, scale, translate) {\n  let x = 0;\n  let y = 0;\n  for (let i = 0, ii = arc.length; i < ii; ++i) {\n    const vertex = arc[i];\n    x += vertex[0];\n    y += vertex[1];\n    vertex[0] = x;\n    vertex[1] = y;\n    transformVertex(vertex, scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to a vertex.  The provided vertex is modified in\n * place.\n *\n * @param {module:ol/coordinate~Coordinate} vertex Vertex.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformVertex(vertex, scale, translate) {\n  vertex[0] = vertex[0] * scale[0] + translate[0];\n  vertex[1] = vertex[1] * scale[1] + translate[1];\n}\n\n\nexport default TopoJSON;\n","/**\n * @module ol/format/TextFeature\n */\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for text feature formats.\n *\n * @abstract\n */\nclass TextFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.TEXT;\n  }\n\n  /**\n   * Read the feature from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {module:ol/Feature} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    return this.readFeatureFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {module:ol/Feature} Feature.\n   */\n  readFeatureFromText(text, opt_options) {}\n\n  /**\n   * Read the features from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {Array<module:ol/Feature>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    return this.readFeaturesFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {Array<module:ol/Feature>} Features.\n   */\n  readFeaturesFromText(text, opt_options) {}\n\n  /**\n   * Read the geometry from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @return {module:ol/geom/Geometry} Geometry.\n   * @api\n   */\n  readGeometry(source, opt_options) {\n    return this.readGeometryFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {module:ol/geom/Geometry} Geometry.\n   */\n  readGeometryFromText(text, opt_options) {}\n\n  /**\n   * Read the projection from the source.\n   *\n   * @function\n   * @param {Document|Node|Object|string} source Source.\n   * @return {module:ol/proj/Projection} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromText(getText(source));\n  }\n\n  /**\n   * @param {string} text Text.\n   * @protected\n   * @return {module:ol/proj/Projection} Projection.\n   */\n  readProjectionFromText(text) {\n    return this.dataProjection;\n  }\n\n  /**\n   * Encode a feature as a string.\n   *\n   * @function\n   * @param {module:ol/Feature} feature Feature.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, opt_options) {\n    return this.writeFeatureText(feature, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {module:ol/Feature} feature Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeFeatureText(feature, opt_options) {}\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    return this.writeFeaturesText(features, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<module:ol/Feature>} features Features.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeFeaturesText(features, opt_options) {}\n\n  /**\n   * Write a single geometry.\n   *\n   * @function\n   * @param {module:ol/geom/Geometry} geometry Geometry.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @return {string} Geometry.\n   * @api\n   */\n  writeGeometry(geometry, opt_options) {\n    return this.writeGeometryText(geometry, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {module:ol/geom/Geometry} geometry Geometry.\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeGeometryText(geometry, opt_options) {}\n}\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {string} Text.\n */\nfunction getText(source) {\n  if (typeof source === 'string') {\n    return source;\n  } else {\n    return '';\n  }\n}\n\n\nexport default TextFeature;\n","/**\n * @module ol/format/IGC\n */\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport TextFeature from '../format/TextFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * IGC altitude/z. One of 'barometric', 'gps', 'none'.\n * @enum {string}\n */\nconst IGCZ = {\n  BAROMETRIC: 'barometric',\n  GPS: 'gps',\n  NONE: 'none'\n};\n\n/**\n * @const\n * @type {RegExp}\n */\nconst B_RECORD_RE =\n    /^B(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{5})([NS])(\\d{3})(\\d{5})([EW])([AV])(\\d{5})(\\d{5})/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst H_RECORD_RE = /^H.([A-Z]{3}).*?:(.*)/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst HFDTE_RECORD_RE = /^HFDTE(\\d{2})(\\d{2})(\\d{2})/;\n\n\n/**\n * A regular expression matching the newline characters `\\r\\n`, `\\r` and `\\n`.\n *\n * @const\n * @type {RegExp}\n */\nconst NEWLINE_RE = /\\r\\n|\\r|\\n/;\n\n\n/**\n * @typedef {Object} Options\n * @property {IGCZ|string} [altitudeMode='none'] Altitude mode. Possible\n * values are `'barometric'`, `'gps'`, and `'none'`.\n */\n\n\n/**\n * @classdesc\n * Feature format for `*.igc` flight recording files.\n *\n * As IGC sources contain a single feature,\n * {@link module:ol/format/IGC~IGC#readFeatures} will return the feature in an\n * array\n *\n * @api\n */\nclass IGC extends TextFeature {\n\n  /**\n   * @param {module:ol/format/IGC~Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @private\n     * @type {IGCZ}\n     */\n    this.altitudeMode_ = options.altitudeMode ? options.altitudeMode : IGCZ.NONE;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromText(text, opt_options) {\n    const altitudeMode = this.altitudeMode_;\n    const lines = text.split(NEWLINE_RE);\n    /** @type {Object<string, string>} */\n    const properties = {};\n    const flatCoordinates = [];\n    let year = 2000;\n    let month = 0;\n    let day = 1;\n    let lastDateTime = -1;\n    let i, ii;\n    for (i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      let m;\n      if (line.charAt(0) == 'B') {\n        m = B_RECORD_RE.exec(line);\n        if (m) {\n          const hour = parseInt(m[1], 10);\n          const minute = parseInt(m[2], 10);\n          const second = parseInt(m[3], 10);\n          let y = parseInt(m[4], 10) + parseInt(m[5], 10) / 60000;\n          if (m[6] == 'S') {\n            y = -y;\n          }\n          let x = parseInt(m[7], 10) + parseInt(m[8], 10) / 60000;\n          if (m[9] == 'W') {\n            x = -x;\n          }\n          flatCoordinates.push(x, y);\n          if (altitudeMode != IGCZ.NONE) {\n            let z;\n            if (altitudeMode == IGCZ.GPS) {\n              z = parseInt(m[11], 10);\n            } else if (altitudeMode == IGCZ.BAROMETRIC) {\n              z = parseInt(m[12], 10);\n            } else {\n              z = 0;\n            }\n            flatCoordinates.push(z);\n          }\n          let dateTime = Date.UTC(year, month, day, hour, minute, second);\n          // Detect UTC midnight wrap around.\n          if (dateTime < lastDateTime) {\n            dateTime = Date.UTC(year, month, day + 1, hour, minute, second);\n          }\n          flatCoordinates.push(dateTime / 1000);\n          lastDateTime = dateTime;\n        }\n      } else if (line.charAt(0) == 'H') {\n        m = HFDTE_RECORD_RE.exec(line);\n        if (m) {\n          day = parseInt(m[1], 10);\n          month = parseInt(m[2], 10) - 1;\n          year = 2000 + parseInt(m[3], 10);\n        } else {\n          m = H_RECORD_RE.exec(line);\n          if (m) {\n            properties[m[1]] = m[2].trim();\n          }\n        }\n      }\n    }\n    if (flatCoordinates.length === 0) {\n      return null;\n    }\n    const layout = altitudeMode == IGCZ.NONE ? GeometryLayout.XYM : GeometryLayout.XYZM;\n    const lineString = new LineString(flatCoordinates, layout);\n    const feature = new Feature(transformWithOptions(lineString, false, opt_options));\n    feature.setProperties(properties);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromText(text, opt_options) {\n    const feature = this.readFeatureFromText(text, opt_options);\n    if (feature) {\n      return [feature];\n    } else {\n      return [];\n    }\n  }\n\n}\n\nexport default IGC;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n","/**\n * @module ol/control/Control\n */\nimport {VOID} from '../functions.js';\nimport MapEventType from '../MapEventType.js';\nimport BaseObject from '../Object.js';\nimport {removeNode} from '../dom.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(module:ol/MapEvent)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nclass Control extends BaseObject {\n\n  /**\n   * @param {module:ol/control/Control~Options} options Control options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = options.element ? options.element : null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target_ = null;\n\n    /**\n     * @private\n     * @type {module:ol/PluggableMap}\n     */\n    this.map_ = null;\n\n    /**\n     * @protected\n     * @type {!Array<module:ol/events~EventsKey>}\n     */\n    this.listenerKeys = [];\n\n    /**\n     * @type {function(module:ol/MapEvent)}\n     */\n    this.render = options.render ? options.render : VOID;\n\n    if (options.target) {\n      this.setTarget(options.target);\n    }\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    removeNode(this.element);\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the map associated with this control.\n   * @return {module:ol/PluggableMap} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {module:ol/PluggableMap} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.map_) {\n      removeNode(this.element);\n    }\n    for (let i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys[i]);\n    }\n    this.listenerKeys.length = 0;\n    this.map_ = map;\n    if (this.map_) {\n      const target = this.target_ ?\n        this.target_ : map.getOverlayContainerStopEvent();\n      target.appendChild(this.element);\n      if (this.render !== VOID) {\n        this.listenerKeys.push(listen(map,\n          MapEventType.POSTRENDER, this.render, this));\n      }\n      map.render();\n    }\n  }\n\n  /**\n   * This function is used to set a target element for the control. It has no\n   * effect if it is called after the control has been added to the map (i.e.\n   * after `setMap` is called on the control). If no `target` is set in the\n   * options passed to the control constructor and if `setTarget` is not called\n   * then the control is added to the map's overlay container.\n   * @param {HTMLElement|string} target Target.\n   * @api\n   */\n  setTarget(target) {\n    this.target_ = typeof target === 'string' ?\n      document.getElementById(target) :\n      target;\n  }\n}\n\n\nexport default Control;\n","/**\n * @module ol/control/Attribution\n */\nimport {equals} from '../array.js';\nimport Control from '../control/Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_COLLAPSED} from '../css.js';\nimport {removeChildren, replaceNode} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {visibleAtResolution} from '../layer/Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible=true] Specify if attributions can\n * be collapsed. If you use an OSM source, should be set to `false`  see\n * {@link https://www.openstreetmap.org/copyright OSM Copyright} \n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [collapseLabel=''] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {function(module:ol/MapEvent)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n\n\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nclass Attribution extends Control {\n\n  /**\n   * @param {module:ol/control/Attribution~Options=} opt_options Attribution options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.ulElement_ = document.createElement('ul');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible_ = options.collapsible !== undefined ?\n      options.collapsible : true;\n\n    if (!this.collapsible_) {\n      this.collapsed_ = false;\n    }\n\n    const className = options.className !== undefined ? options.className : 'ol-attribution';\n\n    const tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n\n    const collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00BB';\n\n    if (typeof collapseLabel === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.collapseLabel_ = document.createElement('span');\n      this.collapseLabel_.textContent = collapseLabel;\n    } else {\n      this.collapseLabel_ = collapseLabel;\n    }\n\n    const label = options.label !== undefined ? options.label : 'i';\n\n    if (typeof label === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.label_ = document.createElement('span');\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n    }\n\n\n    const activeLabel = (this.collapsible_ && !this.collapsed_) ?\n      this.collapseLabel_ : this.label_;\n    const button = document.createElement('button');\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(activeLabel);\n\n    listen(button, EventType.CLICK, this.handleClick_, this);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL +\n        (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n        (this.collapsible_ ? '' : ' ol-uncollapsible');\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(this.ulElement_);\n    element.appendChild(button);\n\n    /**\n     * A list of currently rendered resolutions.\n     * @type {Array<string>}\n     * @private\n     */\n    this.renderedAttributions_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n  }\n\n  /**\n   * Get a list of visible attributions.\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @return {Array<string>} Attributions.\n   * @private\n   */\n  getSourceAttributions_(frameState) {\n    /**\n     * Used to determine if an attribution already exists.\n     * @type {!Object<string, boolean>}\n     */\n    const lookup = {};\n\n    /**\n     * A list of visible attributions.\n     * @type {Array<string>}\n     */\n    const visibleAttributions = [];\n\n    const layerStatesArray = frameState.layerStatesArray;\n    const resolution = frameState.viewState.resolution;\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      if (!visibleAtResolution(layerState, resolution)) {\n        continue;\n      }\n\n      const source = layerState.layer.getSource();\n      if (!source) {\n        continue;\n      }\n\n      const attributionGetter = source.getAttributions();\n      if (!attributionGetter) {\n        continue;\n      }\n\n      const attributions = attributionGetter(frameState);\n      if (!attributions) {\n        continue;\n      }\n\n      if (Array.isArray(attributions)) {\n        for (let j = 0, jj = attributions.length; j < jj; ++j) {\n          if (!(attributions[j] in lookup)) {\n            visibleAttributions.push(attributions[j]);\n            lookup[attributions[j]] = true;\n          }\n        }\n      } else {\n        if (!(attributions in lookup)) {\n          visibleAttributions.push(attributions);\n          lookup[attributions] = true;\n        }\n      }\n    }\n    return visibleAttributions;\n  }\n\n  /**\n   * @private\n   * @param {?module:ol/PluggableMap~FrameState} frameState Frame state.\n   */\n  updateElement_(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const attributions = this.getSourceAttributions_(frameState);\n\n    const visible = attributions.length > 0;\n    if (this.renderedVisible_ != visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.renderedVisible_ = visible;\n    }\n\n    if (equals(attributions, this.renderedAttributions_)) {\n      return;\n    }\n\n    removeChildren(this.ulElement_);\n\n    // append the attributions\n    for (let i = 0, ii = attributions.length; i < ii; ++i) {\n      const element = document.createElement('li');\n      element.innerHTML = attributions[i];\n      this.ulElement_.appendChild(element);\n    }\n\n    this.renderedAttributions_ = attributions;\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleToggle_();\n  }\n\n  /**\n   * @private\n   */\n  handleToggle_() {\n    this.element.classList.toggle(CLASS_COLLAPSED);\n    if (this.collapsed_) {\n      replaceNode(this.collapseLabel_, this.label_);\n    } else {\n      replaceNode(this.label_, this.collapseLabel_);\n    }\n    this.collapsed_ = !this.collapsed_;\n  }\n\n  /**\n   * Return `true` if the attribution is collapsible, `false` otherwise.\n   * @return {boolean} True if the widget is collapsible.\n   * @api\n   */\n  getCollapsible() {\n    return this.collapsible_;\n  }\n\n  /**\n   * Set whether the attribution should be collapsible.\n   * @param {boolean} collapsible True if the widget is collapsible.\n   * @api\n   */\n  setCollapsible(collapsible) {\n    if (this.collapsible_ === collapsible) {\n      return;\n    }\n    this.collapsible_ = collapsible;\n    this.element.classList.toggle('ol-uncollapsible');\n    if (!collapsible && this.collapsed_) {\n      this.handleToggle_();\n    }\n  }\n\n  /**\n   * Collapse or expand the attribution according to the passed parameter. Will\n   * not do anything if the attribution isn't collapsible or if the current\n   * collapsed state is already the one requested.\n   * @param {boolean} collapsed True if the widget is collapsed.\n   * @api\n   */\n  setCollapsed(collapsed) {\n    if (!this.collapsible_ || this.collapsed_ === collapsed) {\n      return;\n    }\n    this.handleToggle_();\n  }\n\n  /**\n   * Return `true` when the attribution is currently collapsed or `false`\n   * otherwise.\n   * @return {boolean} True if the widget is collapsed.\n   * @api\n   */\n  getCollapsed() {\n    return this.collapsed_;\n  }\n}\n\n\n/**\n * Update the attribution element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/Attribution}\n * @api\n */\nexport function render(mapEvent) {\n  this.updateElement_(mapEvent.frameState);\n}\n\n\nexport default Attribution;\n","/**\n * @module ol/control/Rotate\n */\nimport Control from '../control/Control.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label=''] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(module:ol/MapEvent)} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function()} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nclass Rotate extends Control {\n\n  /**\n   * @param {module:ol/control/Rotate~Options=} opt_options Rotate options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    const className = options.className !== undefined ? options.className : 'ol-rotate';\n\n    const label = options.label !== undefined ? options.label : '\\u21E7';\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = 'ol-compass';\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add('ol-compass');\n    }\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n    const button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n\n    listen(button, EventType.CLICK, this.handleClick_, this);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetNorth_() {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    if (view.getRotation() !== undefined) {\n      if (this.duration_ > 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  }\n}\n\n\n/**\n * Update the rotate control element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/Rotate}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    return;\n  }\n  const rotation = frameState.viewState.rotation;\n  if (rotation != this.rotation_) {\n    const transform = 'rotate(' + rotation + 'rad)';\n    if (this.autoHide_) {\n      const contains = this.element.classList.contains(CLASS_HIDDEN);\n      if (!contains && rotation === 0) {\n        this.element.classList.add(CLASS_HIDDEN);\n      } else if (contains && rotation !== 0) {\n        this.element.classList.remove(CLASS_HIDDEN);\n      }\n    }\n    this.label_.style.msTransform = transform;\n    this.label_.style.webkitTransform = transform;\n    this.label_.style.transform = transform;\n  }\n  this.rotation_ = rotation;\n}\n\nexport default Rotate;\n","/**\n * @module ol/control/Zoom\n */\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport Control from '../control/Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel='-'] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nclass Zoom extends Control {\n\n  /**\n   * @param {module:ol/control/Zoom~Options=} opt_options Zoom options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target\n    });\n\n    const className = options.className !== undefined ? options.className : 'ol-zoom';\n\n    const delta = options.delta !== undefined ? options.delta : 1;\n\n    const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n    const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n\n    const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n      options.zoomInTipLabel : 'Zoom in';\n    const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n      options.zoomOutTipLabel : 'Zoom out';\n\n    const inElement = document.createElement('button');\n    inElement.className = className + '-in';\n    inElement.setAttribute('type', 'button');\n    inElement.title = zoomInTipLabel;\n    inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n    );\n\n    listen(inElement, EventType.CLICK, this.handleClick_.bind(this, delta));\n\n    const outElement = document.createElement('button');\n    outElement.className = className + '-out';\n    outElement.setAttribute('type', 'button');\n    outElement.title = zoomOutTipLabel;\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n    );\n\n    listen(outElement, EventType.CLICK, this.handleClick_.bind(this, -delta));\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(inElement);\n    element.appendChild(outElement);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(delta, event) {\n    event.preventDefault();\n    this.zoomByDelta_(delta);\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  zoomByDelta_(delta) {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const currentResolution = view.getResolution();\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta);\n      if (this.duration_ > 0) {\n        if (view.getAnimating()) {\n          view.cancelAnimations();\n        }\n        view.animate({\n          resolution: newResolution,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setResolution(newResolution);\n      }\n    }\n  }\n}\n\n\nexport default Zoom;\n","/**\n * @module ol/control/util\n */\nimport Collection from '../Collection.js';\nimport Attribution from './Attribution.js';\nimport Rotate from './Rotate.js';\nimport Zoom from './Zoom.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {module:ol/control/Attribution~Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {module:ol/control/Rotate~Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {module:ol/control/Zoom~Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n * @api\n */\n\n\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {module:ol/control/util~DefaultsOptions=} opt_options\n * Defaults options.\n * @return {module:ol/Collection<module:ol/control/Control>}\n * Controls.\n * @function module:ol/control.defaults\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const controls = new Collection();\n\n  const zoomControl = options.zoom !== undefined ? options.zoom : true;\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions));\n  }\n\n  const rotateControl = options.rotate !== undefined ? options.rotate : true;\n  if (rotateControl) {\n    controls.push(new Rotate(options.rotateOptions));\n  }\n\n  const attributionControl = options.attribution !== undefined ?\n    options.attribution : true;\n  if (attributionControl) {\n    controls.push(new Attribution(options.attributionOptions));\n  }\n\n  return controls;\n}\n"],"sourceRoot":""}